(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{CAkI:function(t,r,a){a.d(r,"a",function(){return w});var p=a("oYeq"),h=a("ADVu"),g=a("Bfey"),d=a("YKqZ"),n=a("ps+7"),k=a("/SR9"),l=a("Ufda"),m=a("uyO6"),f=a("WHS4"),b=a("n5HA"),u=a("JIAX"),v=a("DwXJ"),w=function(a){function e(c,b,f,d){void 0===d&&(d=!0);c=a.call(this,c,f)||this;c._position=k.e.Zero();c._upVector=k.e.Up();c.orthoLeft=null;c.orthoRight=null;c.orthoBottom=null;c.orthoTop=null;c.fov=.8;c.minZ=1;c.maxZ=1E4;c.inertia=.9;c.mode=e.PERSPECTIVE_CAMERA;
c.isIntermediate=!1;c.viewport=new u.a(0,0,1,1);c.layerMask=268435455;c.fovMode=e.FOVMODE_VERTICAL_FIXED;c.cameraRigMode=e.RIG_MODE_NONE;c.customRenderTargets=[];c.outputRenderTarget=null;c.onViewMatrixChangedObservable=new n.a;c.onProjectionMatrixChangedObservable=new n.a;c.onAfterCheckInputsObservable=new n.a;c.onRestoreStateObservable=new n.a;c.isRigCamera=!1;c._rigCameras=[];c._webvrViewMatrix=k.a.Identity();c._skipRendering=!1;c._projectionMatrix=new k.a;c._postProcesses=[];c._activeMeshes=new g.a(256);
c._globalPosition=k.e.Zero();c._computedViewMatrix=k.a.Identity();c._doNotComputeProjectionMatrix=!1;c._transformMatrix=k.a.Zero();c._refreshFrustumPlanes=!0;c._isCamera=!0;c._isLeftCamera=!1;c._isRightCamera=!1;c.getScene().addCamera(c);d&&!c.getScene().activeCamera&&(c.getScene().activeCamera=c);c.position=b;return c}Object(p.d)(e,a);Object.defineProperty(e.prototype,"position",{get:function(){return this._position},set:function(c){this._position=c},enumerable:!1,configurable:!0});Object.defineProperty(e.prototype,
"upVector",{get:function(){return this._upVector},set:function(c){this._upVector=c},enumerable:!1,configurable:!0});e.prototype.storeState=function(){this._stateStored=!0;this._storedFov=this.fov;return this};e.prototype._restoreStateValues=function(){if(!this._stateStored)return!1;this.fov=this._storedFov;return!0};e.prototype.restoreState=function(){return this._restoreStateValues()?(this.onRestoreStateObservable.notifyObservers(this),!0):!1};e.prototype.getClassName=function(){return"Camera"};
e.prototype.toString=function(c){var b="Name: "+this.name;b+=", type: "+this.getClassName();if(this.animations)for(var e=0;e<this.animations.length;e++)b+=", animation[0]: "+this.animations[e].toString(c);return b};Object.defineProperty(e.prototype,"globalPosition",{get:function(){return this._globalPosition},enumerable:!1,configurable:!0});e.prototype.getActiveMeshes=function(){return this._activeMeshes};e.prototype.isActiveMesh=function(c){return-1!==this._activeMeshes.indexOf(c)};e.prototype.isReady=
function(c){void 0===c&&(c=!1);if(c)for(var b=0,e=this._postProcesses;b<e.length;b++){var f=e[b];if(f&&!f.isReady())return!1}return a.prototype.isReady.call(this,c)};e.prototype._initCache=function(){a.prototype._initCache.call(this);this._cache.position=new k.e(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);this._cache.upVector=new k.e(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);this._cache.mode=void 0;this._cache.minZ=void 0;this._cache.maxZ=void 0;this._cache.fov=void 0;this._cache.fovMode=
void 0;this._cache.aspectRatio=void 0;this._cache.orthoLeft=void 0;this._cache.orthoRight=void 0;this._cache.orthoBottom=void 0;this._cache.orthoTop=void 0;this._cache.renderWidth=void 0;this._cache.renderHeight=void 0};e.prototype._updateCache=function(c){c||a.prototype._updateCache.call(this);this._cache.position.copyFrom(this.position);this._cache.upVector.copyFrom(this.upVector)};e.prototype._isSynchronized=function(){return this._isSynchronizedViewMatrix()&&this._isSynchronizedProjectionMatrix()};
e.prototype._isSynchronizedViewMatrix=function(){return a.prototype._isSynchronized.call(this)?this._cache.position.equals(this.position)&&this._cache.upVector.equals(this.upVector)&&this.isSynchronizedWithParent():!1};e.prototype._isSynchronizedProjectionMatrix=function(){var c=this._cache.mode===this.mode&&this._cache.minZ===this.minZ&&this._cache.maxZ===this.maxZ;if(!c)return!1;c=this.getEngine();return c=this.mode===e.PERSPECTIVE_CAMERA?this._cache.fov===this.fov&&this._cache.fovMode===this.fovMode&&
this._cache.aspectRatio===c.getAspectRatio(this):this._cache.orthoLeft===this.orthoLeft&&this._cache.orthoRight===this.orthoRight&&this._cache.orthoBottom===this.orthoBottom&&this._cache.orthoTop===this.orthoTop&&this._cache.renderWidth===c.getRenderWidth()&&this._cache.renderHeight===c.getRenderHeight()};e.prototype.attachControl=function(c,b){};e.prototype.detachControl=function(c){};e.prototype.update=function(){this._checkInputs();this.cameraRigMode!==e.RIG_MODE_NONE&&this._updateRigCameras()};
e.prototype._checkInputs=function(){this.onAfterCheckInputsObservable.notifyObservers(this)};Object.defineProperty(e.prototype,"rigCameras",{get:function(){return this._rigCameras},enumerable:!1,configurable:!0});Object.defineProperty(e.prototype,"rigPostProcess",{get:function(){return this._rigPostProcess},enumerable:!1,configurable:!0});e.prototype._getFirstPostProcess=function(){for(var c=0;c<this._postProcesses.length;c++)if(null!==this._postProcesses[c])return this._postProcesses[c];return null};
e.prototype._cascadePostProcessesToRigCams=function(){var c=this._getFirstPostProcess();c&&c.markTextureDirty();c=0;for(var b=this._rigCameras.length;c<b;c++){var e=this._rigCameras[c],a=e._rigPostProcess;a?("pass"===a.getEffectName()&&(e.isIntermediate=0===this._postProcesses.length),e._postProcesses=this._postProcesses.slice(0).concat(a),a.markTextureDirty()):e._postProcesses=this._postProcesses.slice(0)}};e.prototype.attachPostProcess=function(c,b){void 0===b&&(b=null);if(!c.isReusable()&&-1<this._postProcesses.indexOf(c))return m.a.Error("You're trying to reuse a post process not defined as reusable."),
0;null==b||0>b?this._postProcesses.push(c):null===this._postProcesses[b]?this._postProcesses[b]=c:this._postProcesses.splice(b,0,c);this._cascadePostProcessesToRigCams();this._scene.prePassRenderer&&this._scene.prePassRenderer.markAsDirty();return this._postProcesses.indexOf(c)};e.prototype.detachPostProcess=function(c){c=this._postProcesses.indexOf(c);-1!==c&&(this._postProcesses[c]=null);this._scene.prePassRenderer&&this._scene.prePassRenderer.markAsDirty();this._cascadePostProcessesToRigCams()};
e.prototype.getWorldMatrix=function(){if(this._isSynchronizedViewMatrix())return this._worldMatrix;this.getViewMatrix();return this._worldMatrix};e.prototype._getViewMatrix=function(){return k.a.Identity()};e.prototype.getViewMatrix=function(c){if(!c&&this._isSynchronizedViewMatrix())return this._computedViewMatrix;this.updateCache();this._computedViewMatrix=this._getViewMatrix();this._currentRenderId=this.getScene().getRenderId();this._childUpdateId++;this._refreshFrustumPlanes=!0;this._cameraRigParams&&
this._cameraRigParams.vrPreViewMatrix&&this._computedViewMatrix.multiplyToRef(this._cameraRigParams.vrPreViewMatrix,this._computedViewMatrix);this.parent&&this.parent.onViewMatrixChangedObservable&&this.parent.onViewMatrixChangedObservable.notifyObservers(this.parent);this.onViewMatrixChangedObservable.notifyObservers(this);this._computedViewMatrix.invertToRef(this._worldMatrix);return this._computedViewMatrix};e.prototype.freezeProjectionMatrix=function(c){this._doNotComputeProjectionMatrix=!0;void 0!==
c&&(this._projectionMatrix=c)};e.prototype.unfreezeProjectionMatrix=function(){this._doNotComputeProjectionMatrix=!1};e.prototype.getProjectionMatrix=function(c){var b,a,f,d,q,l,m;if(this._doNotComputeProjectionMatrix||!c&&this._isSynchronizedProjectionMatrix())return this._projectionMatrix;this._cache.mode=this.mode;this._cache.minZ=this.minZ;this._cache.maxZ=this.maxZ;this._refreshFrustumPlanes=!0;c=this.getEngine();var u=this.getScene();if(this.mode===e.PERSPECTIVE_CAMERA){this._cache.fov=this.fov;
this._cache.fovMode=this.fovMode;this._cache.aspectRatio=c.getAspectRatio(this);0>=this.minZ&&(this.minZ=.1);var g=c.useReverseDepthBuffer;(u.useRightHandedSystem?g?k.a.PerspectiveFovReverseRHToRef:k.a.PerspectiveFovRHToRef:g?k.a.PerspectiveFovReverseLHToRef:k.a.PerspectiveFovLHToRef)(this.fov,c.getAspectRatio(this),this.minZ,this.maxZ,this._projectionMatrix,this.fovMode===e.FOVMODE_VERTICAL_FIXED)}else{var n=c.getRenderWidth()/2,h=c.getRenderHeight()/2;u.useRightHandedSystem?k.a.OrthoOffCenterRHToRef(null!==
(g=this.orthoLeft)&&void 0!==g?g:-n,null!==(b=this.orthoRight)&&void 0!==b?b:n,null!==(a=this.orthoBottom)&&void 0!==a?a:-h,null!==(f=this.orthoTop)&&void 0!==f?f:h,this.minZ,this.maxZ,this._projectionMatrix):k.a.OrthoOffCenterLHToRef(null!==(d=this.orthoLeft)&&void 0!==d?d:-n,null!==(q=this.orthoRight)&&void 0!==q?q:n,null!==(l=this.orthoBottom)&&void 0!==l?l:-h,null!==(m=this.orthoTop)&&void 0!==m?m:h,this.minZ,this.maxZ,this._projectionMatrix);this._cache.orthoLeft=this.orthoLeft;this._cache.orthoRight=
this.orthoRight;this._cache.orthoBottom=this.orthoBottom;this._cache.orthoTop=this.orthoTop;this._cache.renderWidth=c.getRenderWidth();this._cache.renderHeight=c.getRenderHeight()}this.onProjectionMatrixChangedObservable.notifyObservers(this);return this._projectionMatrix};e.prototype.getTransformationMatrix=function(){this._computedViewMatrix.multiplyToRef(this._projectionMatrix,this._transformMatrix);return this._transformMatrix};e.prototype._updateFrustumPlanes=function(){this._refreshFrustumPlanes&&
(this.getTransformationMatrix(),this._frustumPlanes?v.a.GetPlanesToRef(this._transformMatrix,this._frustumPlanes):this._frustumPlanes=v.a.GetPlanes(this._transformMatrix),this._refreshFrustumPlanes=!1)};e.prototype.isInFrustum=function(c,b){void 0===b&&(b=!1);this._updateFrustumPlanes();if(b&&0<this.rigCameras.length){var e=!1;this.rigCameras.forEach(function(b){b._updateFrustumPlanes();e=e||c.isInFrustum(b._frustumPlanes)});return e}return c.isInFrustum(this._frustumPlanes)};e.prototype.isCompletelyInFrustum=
function(b){this._updateFrustumPlanes();return b.isCompletelyInFrustum(this._frustumPlanes)};e.prototype.getForwardRay=function(c,e,a){throw b.a.WarnImport("Ray");};e.prototype.getForwardRayToRef=function(c,e,a,f){throw b.a.WarnImport("Ray");};e.prototype.dispose=function(b,f){void 0===f&&(f=!1);this.onViewMatrixChangedObservable.clear();this.onProjectionMatrixChangedObservable.clear();this.onAfterCheckInputsObservable.clear();this.onRestoreStateObservable.clear();this.inputs&&this.inputs.clear();
this.getScene().stopAnimation(this);for(this.getScene().removeCamera(this);0<this._rigCameras.length;){var c=this._rigCameras.pop();c&&c.dispose()}if(this._rigPostProcess)this._rigPostProcess.dispose(this),this._rigPostProcess=null,this._postProcesses=[];else if(this.cameraRigMode!==e.RIG_MODE_NONE)this._rigPostProcess=null,this._postProcesses=[];else for(c=this._postProcesses.length;0<=--c;){var d=this._postProcesses[c];d&&d.dispose(this)}for(c=this.customRenderTargets.length;0<=--c;)this.customRenderTargets[c].dispose();
this.customRenderTargets=[];this._activeMeshes.dispose();a.prototype.dispose.call(this,b,f)};Object.defineProperty(e.prototype,"isLeftCamera",{get:function(){return this._isLeftCamera},enumerable:!1,configurable:!0});Object.defineProperty(e.prototype,"isRightCamera",{get:function(){return this._isRightCamera},enumerable:!1,configurable:!0});Object.defineProperty(e.prototype,"leftCamera",{get:function(){return 1>this._rigCameras.length?null:this._rigCameras[0]},enumerable:!1,configurable:!0});Object.defineProperty(e.prototype,
"rightCamera",{get:function(){return 2>this._rigCameras.length?null:this._rigCameras[1]},enumerable:!1,configurable:!0});e.prototype.getLeftTarget=function(){return 1>this._rigCameras.length?null:this._rigCameras[0].getTarget()};e.prototype.getRightTarget=function(){return 2>this._rigCameras.length?null:this._rigCameras[1].getTarget()};e.prototype.setCameraRigMode=function(c,b){if(this.cameraRigMode!==c){for(;0<this._rigCameras.length;){var a=this._rigCameras.pop();a&&a.dispose()}this.cameraRigMode=
c;this._cameraRigParams={};this._cameraRigParams.interaxialDistance=b.interaxialDistance||.0637;this._cameraRigParams.stereoHalfAngle=d.b.ToRadians(this._cameraRigParams.interaxialDistance/.0637);if(this.cameraRigMode!==e.RIG_MODE_NONE){if(c=this.createRigCamera(this.name+"_L",0))c._isLeftCamera=!0;if(a=this.createRigCamera(this.name+"_R",1))a._isRightCamera=!0;c&&a&&(this._rigCameras.push(c),this._rigCameras.push(a))}switch(this.cameraRigMode){case e.RIG_MODE_STEREOSCOPIC_ANAGLYPH:e._setStereoscopicAnaglyphRigMode(this);
break;case e.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL:case e.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED:case e.RIG_MODE_STEREOSCOPIC_OVERUNDER:case e.RIG_MODE_STEREOSCOPIC_INTERLACED:e._setStereoscopicRigMode(this);break;case e.RIG_MODE_VR:e._setVRRigMode(this,b);break;case e.RIG_MODE_WEBVR:e._setWebVRRigMode(this,b)}this._cascadePostProcessesToRigCams();this.update()}};e._setStereoscopicRigMode=function(b){throw"Import Cameras/RigModes/stereoscopicRigMode before using stereoscopic rig mode";};e._setStereoscopicAnaglyphRigMode=
function(b){throw"Import Cameras/RigModes/stereoscopicAnaglyphRigMode before using stereoscopic anaglyph rig mode";};e._setVRRigMode=function(b,e){throw"Import Cameras/RigModes/vrRigMode before using VR rig mode";};e._setWebVRRigMode=function(b,e){throw"Import Cameras/RigModes/WebVRRigMode before using Web VR rig mode";};e.prototype._getVRProjectionMatrix=function(){k.a.PerspectiveFovLHToRef(this._cameraRigParams.vrMetrics.aspectRatioFov,this._cameraRigParams.vrMetrics.aspectRatio,this.minZ,this.maxZ,
this._cameraRigParams.vrWorkMatrix);this._cameraRigParams.vrWorkMatrix.multiplyToRef(this._cameraRigParams.vrHMatrix,this._projectionMatrix);return this._projectionMatrix};e.prototype._updateCameraRotationMatrix=function(){};e.prototype._updateWebVRCameraRotationMatrix=function(){};e.prototype._getWebVRProjectionMatrix=function(){return k.a.Identity()};e.prototype._getWebVRViewMatrix=function(){return k.a.Identity()};e.prototype.setCameraRigParameter=function(b,e){this._cameraRigParams||(this._cameraRigParams=
{});this._cameraRigParams[b]=e;"interaxialDistance"===b&&(this._cameraRigParams.stereoHalfAngle=d.b.ToRadians(e/.0637))};e.prototype.createRigCamera=function(b,e){return null};e.prototype._updateRigCameras=function(){for(var b=0;b<this._rigCameras.length;b++)this._rigCameras[b].minZ=this.minZ,this._rigCameras[b].maxZ=this.maxZ,this._rigCameras[b].fov=this.fov,this._rigCameras[b].upVector.copyFrom(this.upVector);this.cameraRigMode===e.RIG_MODE_STEREOSCOPIC_ANAGLYPH&&(this._rigCameras[0].viewport=this._rigCameras[1].viewport=
this.viewport)};e.prototype._setupInputs=function(){};e.prototype.serialize=function(){var b=h.a.Serialize(this);b.type=this.getClassName();this.parent&&(b.parentId=this.parent.id);this.inputs&&this.inputs.serialize(b);h.a.AppendSerializedAnimations(this,b);b.ranges=this.serializeAnimationRanges();return b};e.prototype.clone=function(b){return h.a.Clone(e.GetConstructorFromName(this.getClassName(),b,this.getScene(),this.interaxialDistance,this.isStereoscopicSideBySide),this)};e.prototype.getDirection=
function(b){var c=k.e.Zero();this.getDirectionToRef(b,c);return c};Object.defineProperty(e.prototype,"absoluteRotation",{get:function(){var b=k.b.Zero();this.getWorldMatrix().decompose(void 0,b);return b},enumerable:!1,configurable:!0});e.prototype.getDirectionToRef=function(b,e){k.e.TransformNormalToRef(b,this.getWorldMatrix(),e)};e.GetConstructorFromName=function(b,a,f,d,k){void 0===d&&(d=0);void 0===k&&(k=!0);return(b=l.a.Construct(b,a,f,{interaxial_distance:d,isStereoscopicSideBySide:k}))?b:function(){return e._createDefaultParsedCamera(a,
f)}};e.prototype.computeWorldMatrix=function(){return this.getWorldMatrix()};e.Parse=function(b,a){var c=e.GetConstructorFromName(b.type,b.name,a,b.interaxial_distance,b.isStereoscopicSideBySide);c=h.a.Parse(c,b,a);b.parentId&&(c._waitingParentId=b.parentId);c.inputs&&(c.inputs.parse(b),c._setupInputs());b.upVector&&(c.upVector=k.e.FromArray(b.upVector));c.setPosition&&(c.position.copyFromFloats(0,0,0),c.setPosition(k.e.FromArray(b.position)));b.target&&c.setTarget&&c.setTarget(k.e.FromArray(b.target));
b.cameraRigMode&&c.setCameraRigMode(b.cameraRigMode,b.interaxial_distance?{interaxialDistance:b.interaxial_distance}:{});if(b.animations){for(var d=0;d<b.animations.length;d++){var m=b.animations[d],q=f.a.GetClass("BABYLON.Animation");q&&c.animations.push(q.Parse(m))}l.a.ParseAnimationRanges(c,b,a)}b.autoAnimate&&a.beginAnimation(c,b.autoAnimateFrom,b.autoAnimateTo,b.autoAnimateLoop,b.autoAnimateSpeed||1);return c};e._createDefaultParsedCamera=function(c,e){throw b.a.WarnImport("UniversalCamera");
};e.PERSPECTIVE_CAMERA=0;e.ORTHOGRAPHIC_CAMERA=1;e.FOVMODE_VERTICAL_FIXED=0;e.FOVMODE_HORIZONTAL_FIXED=1;e.RIG_MODE_NONE=0;e.RIG_MODE_STEREOSCOPIC_ANAGLYPH=10;e.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL=11;e.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED=12;e.RIG_MODE_STEREOSCOPIC_OVERUNDER=13;e.RIG_MODE_STEREOSCOPIC_INTERLACED=14;e.RIG_MODE_VR=20;e.RIG_MODE_WEBVR=21;e.RIG_MODE_CUSTOM=22;e.ForceAttachControlToAlwaysPreventDefault=!1;Object(p.c)([Object(h.o)("position")],e.prototype,"_position",void 0);
Object(p.c)([Object(h.o)("upVector")],e.prototype,"_upVector",void 0);Object(p.c)([Object(h.c)()],e.prototype,"orthoLeft",void 0);Object(p.c)([Object(h.c)()],e.prototype,"orthoRight",void 0);Object(p.c)([Object(h.c)()],e.prototype,"orthoBottom",void 0);Object(p.c)([Object(h.c)()],e.prototype,"orthoTop",void 0);Object(p.c)([Object(h.c)()],e.prototype,"fov",void 0);Object(p.c)([Object(h.c)()],e.prototype,"minZ",void 0);Object(p.c)([Object(h.c)()],e.prototype,"maxZ",void 0);Object(p.c)([Object(h.c)()],
e.prototype,"inertia",void 0);Object(p.c)([Object(h.c)()],e.prototype,"mode",void 0);Object(p.c)([Object(h.c)()],e.prototype,"layerMask",void 0);Object(p.c)([Object(h.c)()],e.prototype,"fovMode",void 0);Object(p.c)([Object(h.c)()],e.prototype,"cameraRigMode",void 0);Object(p.c)([Object(h.c)()],e.prototype,"interaxialDistance",void 0);Object(p.c)([Object(h.c)()],e.prototype,"isStereoscopicSideBySide",void 0);return e}(l.a)},DyFx:function(t,r,a){a.d(r,"a",function(){return g});var p=a("oYeq");t=a("sdjL");
var h=a("/SR9");a("Ufda").a.AddNodeConstructor("TouchCamera",function(a,n){return function(){return new g(a,h.e.Zero(),n)}});var g=function(a){function d(d,l,m){d=a.call(this,d,l,m)||this;d.inputs.addTouch();d._setupInputs();return d}Object(p.d)(d,a);Object.defineProperty(d.prototype,"touchAngularSensibility",{get:function(){var a=this.inputs.attached.touch;return a?a.touchAngularSensibility:0},set:function(a){var d=this.inputs.attached.touch;d&&(d.touchAngularSensibility=a)},enumerable:!1,configurable:!0});
Object.defineProperty(d.prototype,"touchMoveSensibility",{get:function(){var a=this.inputs.attached.touch;return a?a.touchMoveSensibility:0},set:function(a){var d=this.inputs.attached.touch;d&&(d.touchMoveSensibility=a)},enumerable:!1,configurable:!0});d.prototype.getClassName=function(){return"TouchCamera"};d.prototype._setupInputs=function(){var a=this.inputs.attached.touch,d=this.inputs.attached.mouse;d?d.touchEnabled=!1:a.allowMouse=!0};return d}(t.a)},KjVj:function(t,r,a){a.d(r,"a",function(){return d});
var p=a("oYeq");t=a("sdjL");var h=a("/SR9");r=a("Ufda");a("Qu+o");var g=a("SYzJ");r.a.AddNodeConstructor("DeviceOrientationCamera",function(a,k){return function(){return new d(a,h.e.Zero(),k)}});var d=function(a){function d(d,m,f){var b=a.call(this,d,m,f)||this;b._tmpDragQuaternion=new h.b;b._disablePointerInputWhenUsingDeviceOrientation=!0;b._dragFactor=0;b._quaternionCache=new h.b;b.inputs.addDeviceOrientation();b.inputs._deviceOrientationInput&&b.inputs._deviceOrientationInput._onDeviceOrientationChangedObservable.addOnce(function(){b._disablePointerInputWhenUsingDeviceOrientation&&
b.inputs._mouseInput&&(b.inputs._mouseInput._allowCameraRotation=!1,b.inputs._mouseInput.onPointerMovedObservable.add(function(a){0!=b._dragFactor&&(b._initialQuaternion||(b._initialQuaternion=new h.b),h.b.FromEulerAnglesToRef(0,a.offsetX*b._dragFactor,0,b._tmpDragQuaternion),b._initialQuaternion.multiplyToRef(b._tmpDragQuaternion,b._initialQuaternion))}))});return b}Object(p.d)(d,a);Object.defineProperty(d.prototype,"disablePointerInputWhenUsingDeviceOrientation",{get:function(){return this._disablePointerInputWhenUsingDeviceOrientation},
set:function(a){this._disablePointerInputWhenUsingDeviceOrientation=a},enumerable:!1,configurable:!0});d.prototype.enableHorizontalDragging=function(a){void 0===a&&(a=1/300);this._dragFactor=a};d.prototype.getClassName=function(){return"DeviceOrientationCamera"};d.prototype._checkInputs=function(){a.prototype._checkInputs.call(this);this._quaternionCache.copyFrom(this.rotationQuaternion);this._initialQuaternion&&this._initialQuaternion.multiplyToRef(this.rotationQuaternion,this.rotationQuaternion)};
d.prototype.resetToCurrentRotation=function(a){var d=this;void 0===a&&(a=g.a.Y);this.rotationQuaternion&&(this._initialQuaternion||(this._initialQuaternion=new h.b),this._initialQuaternion.copyFrom(this._quaternionCache||this.rotationQuaternion),["x","y","z"].forEach(function(f){d._initialQuaternion[f]=a[f]?-1*d._initialQuaternion[f]:0}),this._initialQuaternion.normalize(),this._initialQuaternion.multiplyToRef(this.rotationQuaternion,this.rotationQuaternion))};return d}(t.a)},aBOp:function(t,r,a){a.d(r,
"a",function(){return h.a});a("m0wr");t=a("xCqU");a("CAkI");r=a("fX5v");var p=a("sdjL");a("g739");a("DyFx");a("VfJ7");a("HcSi");var h=a("KjVj"),g=a("oYeq"),d=a("ADVu"),n=a("/SR9"),k=a("qUIE"),l=a("qSkO"),m=a("93XQ"),f=function(b){function a(a){return b.call(this,a)||this}Object(g.d)(a,b);a.prototype.addKeyboard=function(){this.add(new m.a);return this};a.prototype.addMouse=function(b){void 0===b&&(b=!0);this.add(new l.a(b));return this};return a}(t.b),b=a("YKqZ");(function(a){function c(b,c,e,d){void 0===
d&&(d=!0);var q=a.call(this,b,c,e,d)||this;q.ellipsoid=new n.e(1,1,1);q.ellipsoidOffset=new n.e(0,0,0);q.checkCollisions=!1;q.applyGravity=!1;q.cameraDirection=n.e.Zero();q._trackRoll=0;q.rollCorrect=100;q.bankedTurn=!1;q.bankedTurnLimit=Math.PI/2;q.bankedTurnMultiplier=1;q._needMoveForGravity=!1;q._oldPosition=n.e.Zero();q._diffPosition=n.e.Zero();q._newPosition=n.e.Zero();q._collisionMask=-1;q._onCollisionPositionChange=function(b,a,c){void 0===c&&(c=null);q._newPosition.copyFrom(a);q._newPosition.subtractToRef(q._oldPosition,
q._diffPosition);if(q._diffPosition.length()>k.a.CollisionsEpsilon&&(q.position.addInPlace(q._diffPosition),q.onCollide&&c))q.onCollide(c)};q.inputs=new f(q);q.inputs.addKeyboard().addMouse();return q}Object(g.d)(c,a);Object.defineProperty(c.prototype,"angularSensibility",{get:function(){var b=this.inputs.attached.mouse;return b?b.angularSensibility:0},set:function(b){var c=this.inputs.attached.mouse;c&&(c.angularSensibility=b)},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"keysForward",
{get:function(){var b=this.inputs.attached.keyboard;return b?b.keysForward:[]},set:function(b){var c=this.inputs.attached.keyboard;c&&(c.keysForward=b)},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"keysBackward",{get:function(){var b=this.inputs.attached.keyboard;return b?b.keysBackward:[]},set:function(b){var c=this.inputs.attached.keyboard;c&&(c.keysBackward=b)},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"keysUp",{get:function(){var b=this.inputs.attached.keyboard;
return b?b.keysUp:[]},set:function(b){var c=this.inputs.attached.keyboard;c&&(c.keysUp=b)},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"keysDown",{get:function(){var b=this.inputs.attached.keyboard;return b?b.keysDown:[]},set:function(b){var c=this.inputs.attached.keyboard;c&&(c.keysDown=b)},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"keysLeft",{get:function(){var b=this.inputs.attached.keyboard;return b?b.keysLeft:[]},set:function(b){var c=this.inputs.attached.keyboard;
c&&(c.keysLeft=b)},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"keysRight",{get:function(){var b=this.inputs.attached.keyboard;return b?b.keysRight:[]},set:function(b){var c=this.inputs.attached.keyboard;c&&(c.keysRight=b)},enumerable:!1,configurable:!0});c.prototype.attachControl=function(c,a){a=b.b.BackCompatCameraNoPreventDefault(arguments);this.inputs.attachElement(a)};c.prototype.detachControl=function(){this.inputs.detachElement();this.cameraDirection=new n.e(0,0,0)};Object.defineProperty(c.prototype,
"collisionMask",{get:function(){return this._collisionMask},set:function(b){this._collisionMask=isNaN(b)?-1:b},enumerable:!1,configurable:!0});c.prototype._collideWithWorld=function(b){(this.parent?n.e.TransformCoordinates(this.position,this.parent.getWorldMatrix()):this.position).subtractFromFloatsToRef(0,this.ellipsoid.y,0,this._oldPosition);this._oldPosition.addInPlace(this.ellipsoidOffset);var c=this.getScene().collisionCoordinator;this._collider||(this._collider=c.createCollider());this._collider._radius=
this.ellipsoid;this._collider.collisionMask=this._collisionMask;var a=b;this.applyGravity&&(a=b.add(this.getScene().gravity));c.getNewPosition(this._oldPosition,a,this._collider,3,null,this._onCollisionPositionChange,this.uniqueId)};c.prototype._checkInputs=function(){this._localDirection||(this._localDirection=n.e.Zero(),this._transformedDirection=n.e.Zero());this.inputs.checkInputs();a.prototype._checkInputs.call(this)};c.prototype._decideIfNeedsToMove=function(){return this._needMoveForGravity||
0<Math.abs(this.cameraDirection.x)||0<Math.abs(this.cameraDirection.y)||0<Math.abs(this.cameraDirection.z)};c.prototype._updatePosition=function(){this.checkCollisions&&this.getScene().collisionsEnabled?this._collideWithWorld(this.cameraDirection):a.prototype._updatePosition.call(this)};c.prototype.restoreRoll=function(b){var c=this._trackRoll,a=c-this.rotation.z;.001<=Math.abs(a)&&(this.rotation.z+=a/b,.001>=Math.abs(c-this.rotation.z)&&(this.rotation.z=c))};c.prototype.dispose=function(){this.inputs.clear();
a.prototype.dispose.call(this)};c.prototype.getClassName=function(){return"FlyCamera"};Object(g.c)([Object(d.o)()],c.prototype,"ellipsoid",void 0);Object(g.c)([Object(d.o)()],c.prototype,"ellipsoidOffset",void 0);Object(g.c)([Object(d.c)()],c.prototype,"checkCollisions",void 0);Object(g.c)([Object(d.c)()],c.prototype,"applyGravity",void 0);return c})(r.a);var u=a("Ufda"),v=a("iUAG"),w=a("uXHy"),x=a("gpYA"),e=function(b){function c(c){return b.call(this,c)||this}Object(g.d)(c,b);c.prototype.addKeyboard=
function(){this.add(new v.a);return this};c.prototype.addMouseWheel=function(){this.add(new w.a);return this};c.prototype.addPointers=function(){this.add(new x.a);return this};c.prototype.addVRDeviceOrientation=function(){console.warn("DeviceOrientation support not yet implemented for FollowCamera.");return this};return c}(t.b);u.a.AddNodeConstructor("FollowCamera",function(b,a){return function(){return new c(b,n.e.Zero(),a)}});u.a.AddNodeConstructor("ArcFollowCamera",function(b,c){return function(){return new y(b,
0,0,1,null,c)}});var c=function(c){function a(b,a,d,f){void 0===f&&(f=null);b=c.call(this,b,a,d)||this;b.radius=12;b.lowerRadiusLimit=null;b.upperRadiusLimit=null;b.rotationOffset=0;b.lowerRotationOffsetLimit=null;b.upperRotationOffsetLimit=null;b.heightOffset=4;b.lowerHeightOffsetLimit=null;b.upperHeightOffsetLimit=null;b.cameraAcceleration=.05;b.maxCameraSpeed=20;b.lockedTarget=f;b.inputs=new e(b);b.inputs.addKeyboard().addMouseWheel().addPointers();return b}Object(g.d)(a,c);a.prototype._follow=
function(c){if(c){if(c.rotationQuaternion){var a=new n.a;c.rotationQuaternion.toRotationMatrix(a);a=Math.atan2(a.m[8],a.m[10])}else a=c.rotation.y;a=b.b.ToRadians(this.rotationOffset)+a;c=c.getAbsolutePosition();var e=(c.x+Math.sin(a)*this.radius-this.position.x)*this.cameraAcceleration*2,d=(c.y+this.heightOffset-this.position.y)*this.cameraAcceleration;a=(c.z+Math.cos(a)*this.radius-this.position.z)*this.cameraAcceleration*2;if(e>this.maxCameraSpeed||e<-this.maxCameraSpeed)e=1>e?-this.maxCameraSpeed:
this.maxCameraSpeed;if(d>this.maxCameraSpeed||d<-this.maxCameraSpeed)d=1>d?-this.maxCameraSpeed:this.maxCameraSpeed;if(a>this.maxCameraSpeed||a<-this.maxCameraSpeed)a=1>a?-this.maxCameraSpeed:this.maxCameraSpeed;this.position=new n.e(this.position.x+e,this.position.y+d,this.position.z+a);this.setTarget(c)}};a.prototype.attachControl=function(c,a){a=b.b.BackCompatCameraNoPreventDefault(arguments);this.inputs.attachElement(a);this._reset=function(){}};a.prototype.detachControl=function(b){this.inputs.detachElement();
this._reset&&this._reset()};a.prototype._checkInputs=function(){this.inputs.checkInputs();this._checkLimits();c.prototype._checkInputs.call(this);this.lockedTarget&&this._follow(this.lockedTarget)};a.prototype._checkLimits=function(){null!==this.lowerRadiusLimit&&this.radius<this.lowerRadiusLimit&&(this.radius=this.lowerRadiusLimit);null!==this.upperRadiusLimit&&this.radius>this.upperRadiusLimit&&(this.radius=this.upperRadiusLimit);null!==this.lowerHeightOffsetLimit&&this.heightOffset<this.lowerHeightOffsetLimit&&
(this.heightOffset=this.lowerHeightOffsetLimit);null!==this.upperHeightOffsetLimit&&this.heightOffset>this.upperHeightOffsetLimit&&(this.heightOffset=this.upperHeightOffsetLimit);null!==this.lowerRotationOffsetLimit&&this.rotationOffset<this.lowerRotationOffsetLimit&&(this.rotationOffset=this.lowerRotationOffsetLimit);null!==this.upperRotationOffsetLimit&&this.rotationOffset>this.upperRotationOffsetLimit&&(this.rotationOffset=this.upperRotationOffsetLimit)};a.prototype.getClassName=function(){return"FollowCamera"};
Object(g.c)([Object(d.c)()],a.prototype,"radius",void 0);Object(g.c)([Object(d.c)()],a.prototype,"lowerRadiusLimit",void 0);Object(g.c)([Object(d.c)()],a.prototype,"upperRadiusLimit",void 0);Object(g.c)([Object(d.c)()],a.prototype,"rotationOffset",void 0);Object(g.c)([Object(d.c)()],a.prototype,"lowerRotationOffsetLimit",void 0);Object(g.c)([Object(d.c)()],a.prototype,"upperRotationOffsetLimit",void 0);Object(g.c)([Object(d.c)()],a.prototype,"heightOffset",void 0);Object(g.c)([Object(d.c)()],a.prototype,
"lowerHeightOffsetLimit",void 0);Object(g.c)([Object(d.c)()],a.prototype,"upperHeightOffsetLimit",void 0);Object(g.c)([Object(d.c)()],a.prototype,"cameraAcceleration",void 0);Object(g.c)([Object(d.c)()],a.prototype,"maxCameraSpeed",void 0);Object(g.c)([Object(d.k)("lockedTargetId")],a.prototype,"lockedTarget",void 0);return a}(r.a),y=function(b){function c(c,a,e,d,f,m){c=b.call(this,c,n.e.Zero(),m)||this;c.alpha=a;c.beta=e;c.radius=d;c._cartesianCoordinates=n.e.Zero();c._meshTarget=f;c._follow();
return c}Object(g.d)(c,b);c.prototype._follow=function(){if(this._meshTarget){this._cartesianCoordinates.x=this.radius*Math.cos(this.alpha)*Math.cos(this.beta);this._cartesianCoordinates.y=this.radius*Math.sin(this.beta);this._cartesianCoordinates.z=this.radius*Math.sin(this.alpha)*Math.cos(this.beta);var b=this._meshTarget.getAbsolutePosition();this.position=b.add(this._cartesianCoordinates);this.setTarget(b)}};c.prototype._checkInputs=function(){b.prototype._checkInputs.call(this);this._follow()};
c.prototype.getClassName=function(){return"ArcFollowCamera"};return c}(r.a);a("xLOD");a("PjAf");a("wN8c");a("FjK/");u.a.AddNodeConstructor("VirtualJoysticksCamera",function(b,c){return function(){return new z(b,n.e.Zero(),c)}});var z=function(b){function c(c,a,e){c=b.call(this,c,a,e)||this;c.inputs.addVirtualJoystick();return c}Object(g.d)(c,b);c.prototype.getClassName=function(){return"VirtualJoysticksCamera"};return c}(p.a);a("IIar");a("et6+")},fX5v:function(t,r,a){a.d(r,"a",function(){return l});
var p=a("oYeq"),h=a("ADVu"),g=a("CAkI"),d=a("/SR9"),n=a("MhaC"),k=a("SYzJ"),l=function(a){function f(b,f,l,m){void 0===m&&(m=!0);b=a.call(this,b,f,l,m)||this;b._tmpUpVector=d.e.Zero();b._tmpTargetVector=d.e.Zero();b.cameraDirection=new d.e(0,0,0);b.cameraRotation=new d.d(0,0);b.ignoreParentScaling=!1;b.updateUpVectorFromRotation=!1;b._tmpQuaternion=new d.b;b.rotation=new d.e(0,0,0);b.speed=2;b.noRotationConstraint=!1;b.invertRotation=!1;b.inverseRotationSpeed=.2;b.lockedTarget=null;b._currentTarget=
d.e.Zero();b._initialFocalDistance=1;b._viewMatrix=d.a.Zero();b._camMatrix=d.a.Zero();b._cameraTransformMatrix=d.a.Zero();b._cameraRotationMatrix=d.a.Zero();b._referencePoint=new d.e(0,0,1);b._transformedReferencePoint=d.e.Zero();b._defaultUp=d.e.Up();b._cachedRotationZ=0;b._cachedQuaternionRotationZ=0;return b}Object(p.d)(f,a);f.prototype.getFrontPosition=function(b){this.getWorldMatrix();var a=this.getTarget().subtract(this.position);a.normalize();a.scaleInPlace(b);return this.globalPosition.add(a)};
f.prototype._getLockedTargetPosition=function(){if(!this.lockedTarget)return null;this.lockedTarget.absolutePosition&&this.lockedTarget.computeWorldMatrix();return this.lockedTarget.absolutePosition||this.lockedTarget};f.prototype.storeState=function(){this._storedPosition=this.position.clone();this._storedRotation=this.rotation.clone();this.rotationQuaternion&&(this._storedRotationQuaternion=this.rotationQuaternion.clone());return a.prototype.storeState.call(this)};f.prototype._restoreStateValues=
function(){if(!a.prototype._restoreStateValues.call(this))return!1;this.position=this._storedPosition.clone();this.rotation=this._storedRotation.clone();this.rotationQuaternion&&(this.rotationQuaternion=this._storedRotationQuaternion.clone());this.cameraDirection.copyFromFloats(0,0,0);this.cameraRotation.copyFromFloats(0,0);return!0};f.prototype._initCache=function(){a.prototype._initCache.call(this);this._cache.lockedTarget=new d.e(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);this._cache.rotation=
new d.e(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);this._cache.rotationQuaternion=new d.b(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE)};f.prototype._updateCache=function(b){b||a.prototype._updateCache.call(this);(b=this._getLockedTargetPosition())?this._cache.lockedTarget?this._cache.lockedTarget.copyFrom(b):this._cache.lockedTarget=b.clone():this._cache.lockedTarget=null;this._cache.rotation.copyFrom(this.rotation);this.rotationQuaternion&&this._cache.rotationQuaternion.copyFrom(this.rotationQuaternion)};
f.prototype._isSynchronizedViewMatrix=function(){if(!a.prototype._isSynchronizedViewMatrix.call(this))return!1;var b=this._getLockedTargetPosition();return(this._cache.lockedTarget?this._cache.lockedTarget.equals(b):!b)&&(this.rotationQuaternion?this.rotationQuaternion.equals(this._cache.rotationQuaternion):this._cache.rotation.equals(this.rotation))};f.prototype._computeLocalCameraSpeed=function(){var b=this.getEngine();return this.speed*Math.sqrt(b.getDeltaTime()/(100*b.getFps()))};f.prototype.setTarget=
function(b){this.upVector.normalize();this._initialFocalDistance=b.subtract(this.position).length();this.position.z===b.z&&(this.position.z+=n.a);this._referencePoint.normalize().scaleInPlace(this._initialFocalDistance);d.a.LookAtLHToRef(this.position,b,this._defaultUp,this._camMatrix);this._camMatrix.invert();this.rotation.x=Math.atan(this._camMatrix.m[6]/this._camMatrix.m[10]);b=b.subtract(this.position);this.rotation.y=0<=b.x?-Math.atan(b.z/b.x)+Math.PI/2:-Math.atan(b.z/b.x)-Math.PI/2;this.rotation.z=
0;isNaN(this.rotation.x)&&(this.rotation.x=0);isNaN(this.rotation.y)&&(this.rotation.y=0);isNaN(this.rotation.z)&&(this.rotation.z=0);this.rotationQuaternion&&d.b.RotationYawPitchRollToRef(this.rotation.y,this.rotation.x,this.rotation.z,this.rotationQuaternion)};Object.defineProperty(f.prototype,"target",{get:function(){return this.getTarget()},set:function(b){this.setTarget(b)},enumerable:!1,configurable:!0});f.prototype.getTarget=function(){return this._currentTarget};f.prototype._decideIfNeedsToMove=
function(){return 0<Math.abs(this.cameraDirection.x)||0<Math.abs(this.cameraDirection.y)||0<Math.abs(this.cameraDirection.z)};f.prototype._updatePosition=function(){this.parent?(this.parent.getWorldMatrix().invertToRef(d.c.Matrix[0]),d.e.TransformNormalToRef(this.cameraDirection,d.c.Matrix[0],d.c.Vector3[0]),this.position.addInPlace(d.c.Vector3[0])):this.position.addInPlace(this.cameraDirection)};f.prototype._checkInputs=function(){var b=this.invertRotation?-this.inverseRotationSpeed:1,f=this._decideIfNeedsToMove(),
l=0<Math.abs(this.cameraRotation.x)||0<Math.abs(this.cameraRotation.y);f&&this._updatePosition();l&&(this.rotationQuaternion&&this.rotationQuaternion.toEulerAnglesToRef(this.rotation),this.rotation.x+=this.cameraRotation.x*b,this.rotation.y+=this.cameraRotation.y*b,this.noRotationConstraint||(1.570796<this.rotation.x&&(this.rotation.x=1.570796),-1.570796>this.rotation.x&&(this.rotation.x=-1.570796)),this.rotationQuaternion&&this.rotation.lengthSquared()&&d.b.RotationYawPitchRollToRef(this.rotation.y,
this.rotation.x,this.rotation.z,this.rotationQuaternion));f&&(Math.abs(this.cameraDirection.x)<this.speed*n.a&&(this.cameraDirection.x=0),Math.abs(this.cameraDirection.y)<this.speed*n.a&&(this.cameraDirection.y=0),Math.abs(this.cameraDirection.z)<this.speed*n.a&&(this.cameraDirection.z=0),this.cameraDirection.scaleInPlace(this.inertia));l&&(Math.abs(this.cameraRotation.x)<this.speed*n.a&&(this.cameraRotation.x=0),Math.abs(this.cameraRotation.y)<this.speed*n.a&&(this.cameraRotation.y=0),this.cameraRotation.scaleInPlace(this.inertia));
a.prototype._checkInputs.call(this)};f.prototype._updateCameraRotationMatrix=function(){this.rotationQuaternion?this.rotationQuaternion.toRotationMatrix(this._cameraRotationMatrix):d.a.RotationYawPitchRollToRef(this.rotation.y,this.rotation.x,this.rotation.z,this._cameraRotationMatrix)};f.prototype._rotateUpVectorWithCameraRotationMatrix=function(){d.e.TransformNormalToRef(this._defaultUp,this._cameraRotationMatrix,this.upVector);return this};f.prototype._getViewMatrix=function(){this.lockedTarget&&
this.setTarget(this._getLockedTargetPosition());this._updateCameraRotationMatrix();this.rotationQuaternion&&this._cachedQuaternionRotationZ!=this.rotationQuaternion.z?(this._rotateUpVectorWithCameraRotationMatrix(),this._cachedQuaternionRotationZ=this.rotationQuaternion.z):this._cachedRotationZ!=this.rotation.z&&(this._rotateUpVectorWithCameraRotationMatrix(),this._cachedRotationZ=this.rotation.z);d.e.TransformCoordinatesToRef(this._referencePoint,this._cameraRotationMatrix,this._transformedReferencePoint);
this.position.addToRef(this._transformedReferencePoint,this._currentTarget);this.updateUpVectorFromRotation&&(this.rotationQuaternion?k.a.Y.rotateByQuaternionToRef(this.rotationQuaternion,this.upVector):(d.b.FromEulerVectorToRef(this.rotation,this._tmpQuaternion),k.a.Y.rotateByQuaternionToRef(this._tmpQuaternion,this.upVector)));this._computeViewMatrix(this.position,this._currentTarget,this.upVector);return this._viewMatrix};f.prototype._computeViewMatrix=function(b,a,f){if(this.ignoreParentScaling){if(this.parent){var l=
this.parent.getWorldMatrix();d.e.TransformCoordinatesToRef(b,l,this._globalPosition);d.e.TransformCoordinatesToRef(a,l,this._tmpTargetVector);d.e.TransformNormalToRef(f,l,this._tmpUpVector);this._markSyncedWithParent()}else this._globalPosition.copyFrom(b),this._tmpTargetVector.copyFrom(a),this._tmpUpVector.copyFrom(f);this.getScene().useRightHandedSystem?d.a.LookAtRHToRef(this._globalPosition,this._tmpTargetVector,this._tmpUpVector,this._viewMatrix):d.a.LookAtLHToRef(this._globalPosition,this._tmpTargetVector,
this._tmpUpVector,this._viewMatrix)}else this.getScene().useRightHandedSystem?d.a.LookAtRHToRef(b,a,f,this._viewMatrix):d.a.LookAtLHToRef(b,a,f,this._viewMatrix),this.parent?(l=this.parent.getWorldMatrix(),this._viewMatrix.invert(),this._viewMatrix.multiplyToRef(l,this._viewMatrix),this._viewMatrix.getTranslationToRef(this._globalPosition),this._viewMatrix.invert(),this._markSyncedWithParent()):this._globalPosition.copyFrom(b)};f.prototype.createRigCamera=function(b,a){if(this.cameraRigMode!==g.a.RIG_MODE_NONE){b=
new f(b,this.position.clone(),this.getScene());b.isRigCamera=!0;b.rigParent=this;if(this.cameraRigMode===g.a.RIG_MODE_VR||this.cameraRigMode===g.a.RIG_MODE_WEBVR)this.rotationQuaternion||(this.rotationQuaternion=new d.b),b._cameraRigParams={},b.rotationQuaternion=new d.b;return b}return null};f.prototype._updateRigCameras=function(){var b=this._rigCameras[0],d=this._rigCameras[1];this.computeWorldMatrix();switch(this.cameraRigMode){case g.a.RIG_MODE_STEREOSCOPIC_ANAGLYPH:case g.a.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL:case g.a.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED:case g.a.RIG_MODE_STEREOSCOPIC_OVERUNDER:case g.a.RIG_MODE_STEREOSCOPIC_INTERLACED:var f=
this.cameraRigMode===g.a.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED?-1:1;this._getRigCamPositionAndTarget(this._cameraRigParams.stereoHalfAngle*(this.cameraRigMode===g.a.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED?1:-1),b);this._getRigCamPositionAndTarget(this._cameraRigParams.stereoHalfAngle*f,d);break;case g.a.RIG_MODE_VR:b.rotationQuaternion?(b.rotationQuaternion.copyFrom(this.rotationQuaternion),d.rotationQuaternion.copyFrom(this.rotationQuaternion)):(b.rotation.copyFrom(this.rotation),d.rotation.copyFrom(this.rotation)),
b.position.copyFrom(this.position),d.position.copyFrom(this.position)}a.prototype._updateRigCameras.call(this)};f.prototype._getRigCamPositionAndTarget=function(b,a){this.getTarget().subtractToRef(this.position,f._TargetFocalPoint);f._TargetFocalPoint.normalize().scaleInPlace(this._initialFocalDistance);var l=f._TargetFocalPoint.addInPlace(this.position);d.a.TranslationToRef(-l.x,-l.y,-l.z,f._TargetTransformMatrix);f._TargetTransformMatrix.multiplyToRef(d.a.RotationAxis(a.upVector,b),f._RigCamTransformMatrix);
d.a.TranslationToRef(l.x,l.y,l.z,f._TargetTransformMatrix);f._RigCamTransformMatrix.multiplyToRef(f._TargetTransformMatrix,f._RigCamTransformMatrix);d.e.TransformCoordinatesToRef(this.position,f._RigCamTransformMatrix,a.position);a.setTarget(l)};f.prototype.getClassName=function(){return"TargetCamera"};f._RigCamTransformMatrix=new d.a;f._TargetTransformMatrix=new d.a;f._TargetFocalPoint=new d.e;Object(p.c)([Object(h.o)()],f.prototype,"rotation",void 0);Object(p.c)([Object(h.c)()],f.prototype,"speed",
void 0);Object(p.c)([Object(h.k)("lockedTargetId")],f.prototype,"lockedTarget",void 0);return f}(g.a)},g739:function(t,r,a){a.d(r,"a",function(){return k});var p=a("oYeq");t=a("xCqU");var h=a("p/Y1"),g=a("Hl4A"),d=a("s8I9"),n=a("SQ0+"),k=function(a){function l(d){d=a.call(this,d)||this;d._mouseInput=null;d._mouseWheelInput=null;return d}Object(p.d)(l,a);l.prototype.addKeyboard=function(){this.add(new h.a);return this};l.prototype.addMouse=function(a){void 0===a&&(a=!0);this._mouseInput||(this._mouseInput=
new g.a(a),this.add(this._mouseInput));return this};l.prototype.removeMouse=function(){this._mouseInput&&this.remove(this._mouseInput);return this};l.prototype.addMouseWheel=function(){this._mouseWheelInput||(this._mouseWheelInput=new d.a,this.add(this._mouseWheelInput));return this};l.prototype.removeMouseWheel=function(){this._mouseWheelInput&&this.remove(this._mouseWheelInput);return this};l.prototype.addTouch=function(){this.add(new n.a);return this};l.prototype.clear=function(){a.prototype.clear.call(this);
this._mouseInput=null};return l}(t.b)},sdjL:function(t,r,a){a.d(r,"a",function(){return l});var p=a("oYeq"),h=a("ADVu"),g=a("/SR9"),d=a("qUIE");t=a("fX5v");var n=a("g739"),k=a("YKqZ"),l=function(a){function f(b,f,l,k){void 0===k&&(k=!0);var m=a.call(this,b,f,l,k)||this;m.ellipsoid=new g.e(.5,1,.5);m.ellipsoidOffset=new g.e(0,0,0);m.checkCollisions=!1;m.applyGravity=!1;m._needMoveForGravity=!1;m._oldPosition=g.e.Zero();m._diffPosition=g.e.Zero();m._newPosition=g.e.Zero();m._collisionMask=-1;m._onCollisionPositionChange=
function(b,a,f){void 0===f&&(f=null);m._newPosition.copyFrom(a);m._newPosition.subtractToRef(m._oldPosition,m._diffPosition);if(m._diffPosition.length()>d.a.CollisionsEpsilon&&(m.position.addInPlace(m._diffPosition),m.onCollide&&f))m.onCollide(f)};m.inputs=new n.a(m);m.inputs.addKeyboard().addMouse();return m}Object(p.d)(f,a);Object.defineProperty(f.prototype,"angularSensibility",{get:function(){var b=this.inputs.attached.mouse;return b?b.angularSensibility:0},set:function(b){var a=this.inputs.attached.mouse;
a&&(a.angularSensibility=b)},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"keysUp",{get:function(){var b=this.inputs.attached.keyboard;return b?b.keysUp:[]},set:function(b){var a=this.inputs.attached.keyboard;a&&(a.keysUp=b)},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"keysUpward",{get:function(){var b=this.inputs.attached.keyboard;return b?b.keysUpward:[]},set:function(b){var a=this.inputs.attached.keyboard;a&&(a.keysUpward=b)},enumerable:!1,configurable:!0});
Object.defineProperty(f.prototype,"keysDown",{get:function(){var b=this.inputs.attached.keyboard;return b?b.keysDown:[]},set:function(b){var a=this.inputs.attached.keyboard;a&&(a.keysDown=b)},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"keysDownward",{get:function(){var b=this.inputs.attached.keyboard;return b?b.keysDownward:[]},set:function(b){var a=this.inputs.attached.keyboard;a&&(a.keysDownward=b)},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"keysLeft",
{get:function(){var b=this.inputs.attached.keyboard;return b?b.keysLeft:[]},set:function(b){var a=this.inputs.attached.keyboard;a&&(a.keysLeft=b)},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"keysRight",{get:function(){var b=this.inputs.attached.keyboard;return b?b.keysRight:[]},set:function(b){var a=this.inputs.attached.keyboard;a&&(a.keysRight=b)},enumerable:!1,configurable:!0});f.prototype.attachControl=function(b,a){a=k.b.BackCompatCameraNoPreventDefault(arguments);this.inputs.attachElement(a)};
f.prototype.detachControl=function(b){this.inputs.detachElement();this.cameraDirection=new g.e(0,0,0);this.cameraRotation=new g.d(0,0)};Object.defineProperty(f.prototype,"collisionMask",{get:function(){return this._collisionMask},set:function(b){this._collisionMask=isNaN(b)?-1:b},enumerable:!1,configurable:!0});f.prototype._collideWithWorld=function(b){(this.parent?g.e.TransformCoordinates(this.position,this.parent.getWorldMatrix()):this.position).subtractFromFloatsToRef(0,this.ellipsoid.y,0,this._oldPosition);
this._oldPosition.addInPlace(this.ellipsoidOffset);var a=this.getScene().collisionCoordinator;this._collider||(this._collider=a.createCollider());this._collider._radius=this.ellipsoid;this._collider.collisionMask=this._collisionMask;var d=b;this.applyGravity&&(d=b.add(this.getScene().gravity));a.getNewPosition(this._oldPosition,d,this._collider,3,null,this._onCollisionPositionChange,this.uniqueId)};f.prototype._checkInputs=function(){this._localDirection||(this._localDirection=g.e.Zero(),this._transformedDirection=
g.e.Zero());this.inputs.checkInputs();a.prototype._checkInputs.call(this)};f.prototype._decideIfNeedsToMove=function(){return this._needMoveForGravity||0<Math.abs(this.cameraDirection.x)||0<Math.abs(this.cameraDirection.y)||0<Math.abs(this.cameraDirection.z)};f.prototype._updatePosition=function(){this.checkCollisions&&this.getScene().collisionsEnabled?this._collideWithWorld(this.cameraDirection):a.prototype._updatePosition.call(this)};f.prototype.dispose=function(){this.inputs.clear();a.prototype.dispose.call(this)};
f.prototype.getClassName=function(){return"FreeCamera"};Object(p.c)([Object(h.o)()],f.prototype,"ellipsoid",void 0);Object(p.c)([Object(h.o)()],f.prototype,"ellipsoidOffset",void 0);Object(p.c)([Object(h.c)()],f.prototype,"checkCollisions",void 0);Object(p.c)([Object(h.c)()],f.prototype,"applyGravity",void 0);return f}(t.a)},wN8c:function(t,r,a){a.d(r,"a",function(){return d});var p=a("oYeq");t=a("DyFx");r=a("Ufda");var h=a("/SR9"),g=a("CAkI");a("K1vB");r.a.AddNodeConstructor("FreeCamera",function(a,
k){return function(){return new d(a,h.e.Zero(),k)}});var d=function(a){function d(d,m,f){d=a.call(this,d,m,f)||this;d.inputs.addGamepad();return d}Object(p.d)(d,a);Object.defineProperty(d.prototype,"gamepadAngularSensibility",{get:function(){var a=this.inputs.attached.gamepad;return a?a.gamepadAngularSensibility:0},set:function(a){var d=this.inputs.attached.gamepad;d&&(d.gamepadAngularSensibility=a)},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"gamepadMoveSensibility",{get:function(){var a=
this.inputs.attached.gamepad;return a?a.gamepadMoveSensibility:0},set:function(a){var d=this.inputs.attached.gamepad;d&&(d.gamepadMoveSensibility=a)},enumerable:!1,configurable:!0});d.prototype.getClassName=function(){return"UniversalCamera"};return d}(t.a);g.a._createDefaultParsedCamera=function(a,g){return new d(a,h.e.Zero(),g)}},xCqU:function(t,r,a){a.d(r,"a",function(){return d});a.d(r,"b",function(){return n});var p=a("uyO6"),h=a("ADVu"),g=a("CAkI"),d={},n=function(){function a(a){this.attachedToElement=
!1;this.attached={};this.camera=a;this.checkInputs=function(){}}a.prototype.add=function(a){var d=a.getSimpleName();this.attached[d]?p.a.Warn("camera input of type "+d+" already exists on camera"):(this.attached[d]=a,a.camera=this.camera,a.checkInputs&&(this.checkInputs=this._addCheckInputs(a.checkInputs.bind(a))),this.attachedToElement&&a.attachControl())};a.prototype.remove=function(a){for(var d in this.attached){var f=this.attached[d];f===a&&(f.detachControl(),f.camera=null,delete this.attached[d],
this.rebuildInputCheck())}};a.prototype.removeByType=function(a){for(var d in this.attached){var f=this.attached[d];f.getClassName()===a&&(f.detachControl(),f.camera=null,delete this.attached[d],this.rebuildInputCheck())}};a.prototype._addCheckInputs=function(a){var d=this.checkInputs;return function(){d();a()}};a.prototype.attachInput=function(a){this.attachedToElement&&a.attachControl(this.noPreventDefault)};a.prototype.attachElement=function(a){void 0===a&&(a=!1);if(!this.attachedToElement){a=
g.a.ForceAttachControlToAlwaysPreventDefault?!1:a;this.attachedToElement=!0;this.noPreventDefault=a;for(var d in this.attached)this.attached[d].attachControl(a)}};a.prototype.detachElement=function(a){void 0===a&&(a=!1);for(var d in this.attached)this.attached[d].detachControl(),a&&(this.attached[d].camera=null);this.attachedToElement=!1};a.prototype.rebuildInputCheck=function(){this.checkInputs=function(){};for(var a in this.attached){var d=this.attached[a];d.checkInputs&&(this.checkInputs=this._addCheckInputs(d.checkInputs.bind(d)))}};
a.prototype.clear=function(){this.attachedToElement&&this.detachElement(!0);this.attached={};this.attachedToElement=!1;this.checkInputs=function(){}};a.prototype.serialize=function(a){var d={},f;for(f in this.attached){var b=this.attached[f],g=h.a.Serialize(b);d[b.getClassName()]=g}a.inputsmgr=d};a.prototype.parse=function(a){var g=a.inputsmgr;if(g){this.clear();for(var f in g){var b=d[f];if(b){var k=h.a.Parse(function(){return new b},g[f],null);this.add(k)}}}else for(f in this.attached)if(b=d[this.attached[f].getClassName()])k=
h.a.Parse(function(){return new b},a,null),this.remove(this.attached[f]),this.add(k)};return a}()},xLOD:function(t,r,a){a.d(r,"a",function(){return g});var p=a("oYeq");t=a("wN8c");var h=a("/SR9");a("Ufda").a.AddNodeConstructor("GamepadCamera",function(a,n){return function(){return new g(a,h.e.Zero(),n)}});var g=function(a){function d(d,g,h){return a.call(this,d,g,h)||this}Object(p.d)(d,a);d.prototype.getClassName=function(){return"GamepadCamera"};return d}(t.a)}}]);
