var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(h){var n=0;return function(){return n<h.length?{done:!1,value:h[n++]}:{done:!0}}};$jscomp.arrayIterator=function(h){return{next:$jscomp.arrayIteratorImpl(h)}};$jscomp.makeIterator=function(h){var n="undefined"!=typeof Symbol&&Symbol.iterator&&h[Symbol.iterator];return n?n.call(h):$jscomp.arrayIterator(h)};
$jscomp.getGlobal=function(h){return"undefined"!=typeof window&&window===h?h:"undefined"!=typeof global&&null!=global?global:h};$jscomp.global=$jscomp.getGlobal(this);$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(h,n,d){h!=Array.prototype&&h!=Object.prototype&&(h[n]=d.value)};
$jscomp.polyfill=function(h,n,d,t){if(n){d=$jscomp.global;h=h.split(".");for(t=0;t<h.length-1;t++){var k=h[t];k in d||(d[k]={});d=d[k]}h=h[h.length-1];t=d[h];n=n(t);n!=t&&null!=n&&$jscomp.defineProperty(d,h,{configurable:!0,writable:!0,value:n})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(h){function n(){this.batch_=null}function d(d){return d instanceof k?d:new k(function(q,g){q(d)})}if(h&&!$jscomp.FORCE_POLYFILL_PROMISE)return h;n.prototype.asyncExecute=function(d){if(null==this.batch_){this.batch_=[];var q=this;this.asyncExecuteFunction(function(){q.executeBatch_()})}this.batch_.push(d)};var t=$jscomp.global.setTimeout;n.prototype.asyncExecuteFunction=function(d){t(d,0)};n.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var d=
this.batch_;this.batch_=[];for(var k=0;k<d.length;++k){var g=d[k];d[k]=null;try{g()}catch(e){this.asyncThrow_(e)}}}this.batch_=null};n.prototype.asyncThrow_=function(d){this.asyncExecuteFunction(function(){throw d;})};var k=function(d){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var q=this.createResolveAndReject_();try{d(q.resolve,q.reject)}catch(g){q.reject(g)}};k.prototype.createResolveAndReject_=function(){function d(e){return function(f){g||(g=!0,e.call(k,f))}}var k=this,g=!1;
return{resolve:d(this.resolveTo_),reject:d(this.reject_)}};k.prototype.resolveTo_=function(d){if(d===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(d instanceof k)this.settleSameAsPromise_(d);else{a:switch(typeof d){case "object":var q=null!=d;break a;case "function":q=!0;break a;default:q=!1}q?this.resolveToNonPromiseObj_(d):this.fulfill_(d)}};k.prototype.resolveToNonPromiseObj_=function(d){var q=void 0;try{q=d.then}catch(g){this.reject_(g);return}"function"==typeof q?
this.settleSameAsThenable_(q,d):this.fulfill_(d)};k.prototype.reject_=function(d){this.settle_(2,d)};k.prototype.fulfill_=function(d){this.settle_(1,d)};k.prototype.settle_=function(d,k){if(0!=this.state_)throw Error("Cannot settle("+d+", "+k+"): Promise already settled in state"+this.state_);this.state_=d;this.result_=k;this.executeOnSettledCallbacks_()};k.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var d=0;d<this.onSettledCallbacks_.length;++d)m.asyncExecute(this.onSettledCallbacks_[d]);
this.onSettledCallbacks_=null}};var m=new n;k.prototype.settleSameAsPromise_=function(d){var k=this.createResolveAndReject_();d.callWhenSettled_(k.resolve,k.reject)};k.prototype.settleSameAsThenable_=function(d,k){var g=this.createResolveAndReject_();try{d.call(k,g.resolve,g.reject)}catch(e){g.reject(e)}};k.prototype.then=function(d,h){function g(a,b){return"function"==typeof a?function(b){try{e(a(b))}catch(x){f(x)}}:b}var e,f,c=new k(function(a,b){e=a;f=b});this.callWhenSettled_(g(d,e),g(h,f));return c};
k.prototype.catch=function(d){return this.then(void 0,d)};k.prototype.callWhenSettled_=function(d,k){function g(){switch(e.state_){case 1:d(e.result_);break;case 2:k(e.result_);break;default:throw Error("Unexpected state: "+e.state_);}}var e=this;null==this.onSettledCallbacks_?m.asyncExecute(g):this.onSettledCallbacks_.push(g)};k.resolve=d;k.reject=function(d){return new k(function(k,g){g(d)})};k.race=function(h){return new k(function(k,g){for(var e=$jscomp.makeIterator(h),f=e.next();!f.done;f=e.next())d(f.value).callWhenSettled_(k,
g)})};k.all=function(h){var q=$jscomp.makeIterator(h),g=q.next();return g.done?d([]):new k(function(e,f){function c(c){return function(f){a[c]=f;b--;0==b&&e(a)}}var a=[],b=0;do a.push(void 0),b++,d(g.value).callWhenSettled_(c(a.length-1),f),g=q.next();while(!g.done)})};return k},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(h){return h?h:function(h,d,t){var k=this.length||0;0>d&&(d=Math.max(0,k+d));if(null==t||t>k)t=k;t=Number(t);0>t&&(t=Math.max(0,k+t));for(d=Number(d||0);d<t;d++)this[d]=h;return this}},"es6","es3");$jscomp.owns=function(h,n){return Object.prototype.hasOwnProperty.call(h,n)};$jscomp.polyfill("Object.entries",function(h){return h?h:function(h){var d=[],t;for(t in h)$jscomp.owns(h,t)&&d.push([t,h[t]]);return d}},"es8","es3");
(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"1sRO":function(h,n,d){d.d(n,"a",function(){return g});var t=d("mrSG"),k=d("ps+7"),m=d("3C+b"),q=d("mzVJ"),y=d("wxg5");h=d("WHS4");var g=function(e){function f(c){var a=e.call(this,c)||this;a.name=c;a._isChecked=!1;a._background="black";a._checkSizeRatio=.8;a._thickness=1;a.onIsCheckedChangedObservable=new k.a;a.isPointerBlocker=!0;return a}Object(t.c)(f,e);Object.defineProperty(f.prototype,"thickness",{get:function(){return this._thickness},
set:function(c){this._thickness!==c&&(this._thickness=c,this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"checkSizeRatio",{get:function(){return this._checkSizeRatio},set:function(c){c=Math.max(Math.min(1,c),0);this._checkSizeRatio!==c&&(this._checkSizeRatio=c,this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"background",{get:function(){return this._background},set:function(c){this._background!==c&&(this._background=c,this._markAsDirty())},
enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"isChecked",{get:function(){return this._isChecked},set:function(c){this._isChecked!==c&&(this._isChecked=c,this._markAsDirty(),this.onIsCheckedChangedObservable.notifyObservers(c))},enumerable:!1,configurable:!0});f.prototype._getTypeName=function(){return"Checkbox"};f.prototype._draw=function(c,a){c.save();this._applyStates(c);a=this._currentMeasure.width-this._thickness;var b=this._currentMeasure.height-this._thickness;if(this.shadowBlur||
this.shadowOffsetX||this.shadowOffsetY)c.shadowColor=this.shadowColor,c.shadowBlur=this.shadowBlur,c.shadowOffsetX=this.shadowOffsetX,c.shadowOffsetY=this.shadowOffsetY;c.fillStyle=this._isEnabled?this._background:this._disabledColor;c.fillRect(this._currentMeasure.left+this._thickness/2,this._currentMeasure.top+this._thickness/2,a,b);if(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)c.shadowBlur=0,c.shadowOffsetX=0,c.shadowOffsetY=0;if(this._isChecked){c.fillStyle=this._isEnabled?this.color:
this._disabledColorItem;var e=a*this._checkSizeRatio,f=b*this._checkSizeRatio;c.fillRect(this._currentMeasure.left+this._thickness/2+(a-e)/2,this._currentMeasure.top+this._thickness/2+(b-f)/2,e,f)}c.strokeStyle=this.color;c.lineWidth=this._thickness;c.strokeRect(this._currentMeasure.left+this._thickness/2,this._currentMeasure.top+this._thickness/2,a,b);c.restore()};f.prototype._onPointerDown=function(c,a,b,f,d){if(!e.prototype._onPointerDown.call(this,c,a,b,f,d))return!1;this.isChecked=!this.isChecked;
return!0};f.AddCheckBoxWithHeader=function(c,a){var b=new q.a;b.isVertical=!1;b.height="30px";var e=new f;e.width="20px";e.height="20px";e.isChecked=!0;e.color="green";e.onIsCheckedChangedObservable.add(a);b.addControl(e);a=new y.a;a.text=c;a.width="180px";a.paddingLeft="5px";a.textHorizontalAlignment=m.a.HORIZONTAL_ALIGNMENT_LEFT;a.color="white";b.addControl(a);return b};return f}(m.a);h.a.RegisteredTypes["BABYLON.GUI.Checkbox"]=g},"3C+b":function(h,n,d){d.d(n,"a",function(){return c});var t=d("ps+7"),
k=d("/SR9"),m=d("98Qd"),q=d("uyO6"),y=d("YKqZ"),g=d("37TA"),e=d("+ach"),f=d("+QgK");h=d("WHS4");var c=function(){function a(b){this.name=b;this._alpha=1;this._alphaSet=!1;this._zIndex=0;this._currentMeasure=e.a.Empty();this._fontFamily="Arial";this._fontWeight=this._fontStyle="";this._fontSize=new g.a(18,g.a.UNITMODE_PIXEL,!1);this._width=new g.a(1,g.a.UNITMODE_PERCENTAGE,!1);this._height=new g.a(1,g.a.UNITMODE_PERCENTAGE,!1);this._color="";this._style=null;this._horizontalAlignment=a.HORIZONTAL_ALIGNMENT_CENTER;
this._verticalAlignment=a.VERTICAL_ALIGNMENT_CENTER;this._isDirty=!0;this._wasDirty=!1;this._tempParentMeasure=e.a.Empty();this._prevCurrentMeasureTransformedIntoGlobalSpace=e.a.Empty();this._cachedParentMeasure=e.a.Empty();this._paddingLeft=new g.a(0);this._paddingRight=new g.a(0);this._paddingTop=new g.a(0);this._paddingBottom=new g.a(0);this._left=new g.a(0);this._top=new g.a(0);this._scaleY=this._scaleX=1;this._rotation=0;this._transformCenterY=this._transformCenterX=.5;this._transformMatrix=
f.a.Identity();this._invertTransformMatrix=f.a.Identity();this._transformedPosition=k.d.Zero();this._isVisible=this._isMatrixDirty=!0;this._fontSet=this._isHighlighted=!1;this._dummyVector2=k.d.Zero();this._downCount=0;this._enterCount=-1;this._doNotRender=!1;this._downPointerIds={};this._isEnabled=!0;this._disabledColor="#9a9a9a";this._disabledColorItem="#6a6a6a";this._rebuildLayout=!1;this._customData={};this._automaticSize=this._isClipped=!1;this.metadata=null;this.isHitTestVisible=!0;this.isFocusInvisible=
this.isPointerBlocker=!1;this.clipContent=this.clipChildren=!0;this.useBitmapCache=!1;this._shadowBlur=this._shadowOffsetY=this._shadowOffsetX=0;this._shadowColor="black";this.hoverCursor="";this._linkOffsetX=new g.a(0);this._linkOffsetY=new g.a(0);this.onWheelObservable=new t.a;this.onPointerMoveObservable=new t.a;this.onPointerOutObservable=new t.a;this.onPointerDownObservable=new t.a;this.onPointerUpObservable=new t.a;this.onPointerClickObservable=new t.a;this.onPointerEnterObservable=new t.a;
this.onDirtyObservable=new t.a;this.onBeforeDrawObservable=new t.a;this.onAfterDrawObservable=new t.a;this.onDisposeObservable=new t.a;this.fixedRatio=0;this._fixedRatioMasterIsWidth=!0;this._tmpMeasureA=new e.a(0,0,0,0)}Object.defineProperty(a.prototype,"shadowOffsetX",{get:function(){return this._shadowOffsetX},set:function(b){this._shadowOffsetX!==b&&(this._shadowOffsetX=b,this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"shadowOffsetY",{get:function(){return this._shadowOffsetY},
set:function(b){this._shadowOffsetY!==b&&(this._shadowOffsetY=b,this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"shadowBlur",{get:function(){return this._shadowBlur},set:function(b){this._shadowBlur!==b&&(this._shadowBlur=b,this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"shadowColor",{get:function(){return this._shadowColor},set:function(b){this._shadowColor!==b&&(this._shadowColor=b,this._markAsDirty())},enumerable:!1,
configurable:!0});Object.defineProperty(a.prototype,"typeName",{get:function(){return this._getTypeName()},enumerable:!1,configurable:!0});a.prototype.getClassName=function(){return this._getTypeName()};Object.defineProperty(a.prototype,"host",{get:function(){return this._host},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"fontOffset",{get:function(){return this._fontOffset},set:function(b){this._fontOffset=b},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,
"alpha",{get:function(){return this._alpha},set:function(b){this._alpha!==b&&(this._alphaSet=!0,this._alpha=b,this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"isHighlighted",{get:function(){return this._isHighlighted},set:function(b){this._isHighlighted!==b&&(this._isHighlighted=b,this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"scaleX",{get:function(){return this._scaleX},set:function(b){this._scaleX!==b&&(this._scaleX=
b,this._markAsDirty(),this._markMatrixAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"scaleY",{get:function(){return this._scaleY},set:function(b){this._scaleY!==b&&(this._scaleY=b,this._markAsDirty(),this._markMatrixAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"rotation",{get:function(){return this._rotation},set:function(b){this._rotation!==b&&(this._rotation=b,this._markAsDirty(),this._markMatrixAsDirty())},enumerable:!1,configurable:!0});
Object.defineProperty(a.prototype,"transformCenterY",{get:function(){return this._transformCenterY},set:function(b){this._transformCenterY!==b&&(this._transformCenterY=b,this._markAsDirty(),this._markMatrixAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"transformCenterX",{get:function(){return this._transformCenterX},set:function(b){this._transformCenterX!==b&&(this._transformCenterX=b,this._markAsDirty(),this._markMatrixAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,
"horizontalAlignment",{get:function(){return this._horizontalAlignment},set:function(b){this._horizontalAlignment!==b&&(this._horizontalAlignment=b,this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"verticalAlignment",{get:function(){return this._verticalAlignment},set:function(b){this._verticalAlignment!==b&&(this._verticalAlignment=b,this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"width",{get:function(){return this._width.toString(this._host)},
set:function(b){this._fixedRatioMasterIsWidth=!0;this._width.toString(this._host)!==b&&this._width.fromString(b)&&this._markAsDirty()},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"widthInPixels",{get:function(){return this._width.getValueInPixel(this._host,this._cachedParentMeasure.width)},set:function(b){isNaN(b)||(this._fixedRatioMasterIsWidth=!0,this.width=b+"px")},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"height",{get:function(){return this._height.toString(this._host)},
set:function(b){this._fixedRatioMasterIsWidth=!1;this._height.toString(this._host)!==b&&this._height.fromString(b)&&this._markAsDirty()},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"heightInPixels",{get:function(){return this._height.getValueInPixel(this._host,this._cachedParentMeasure.height)},set:function(b){isNaN(b)||(this._fixedRatioMasterIsWidth=!1,this.height=b+"px")},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"fontFamily",{get:function(){return this._fontSet?
this._fontFamily:""},set:function(b){this._fontFamily!==b&&(this._fontFamily=b,this._resetFontCache())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(b){this._fontStyle!==b&&(this._fontStyle=b,this._resetFontCache())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(b){this._fontWeight!==b&&(this._fontWeight=b,this._resetFontCache())},
enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"style",{get:function(){return this._style},set:function(b){var a=this;this._style&&(this._style.onChangedObservable.remove(this._styleObserver),this._styleObserver=null);if(this._style=b)this._styleObserver=this._style.onChangedObservable.add(function(){a._markAsDirty();a._resetFontCache()});this._markAsDirty();this._resetFontCache()},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"_isFontSizeInPercentage",{get:function(){return this._fontSize.isPercentage},
enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"fontSizeInPixels",{get:function(){var b=this._style?this._style._fontSize:this._fontSize;return b.isPixel?b.getValue(this._host):b.getValueInPixel(this._host,this._tempParentMeasure.height||this._cachedParentMeasure.height)},set:function(b){isNaN(b)||(this.fontSize=b+"px")},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"fontSize",{get:function(){return this._fontSize.toString(this._host)},set:function(b){this._fontSize.toString(this._host)!==
b&&this._fontSize.fromString(b)&&(this._markAsDirty(),this._resetFontCache())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"color",{get:function(){return this._color},set:function(b){this._color!==b&&(this._color=b,this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"zIndex",{get:function(){return this._zIndex},set:function(b){this.zIndex!==b&&(this._zIndex=b,this.parent&&this.parent._reOrderControl(this))},enumerable:!1,configurable:!0});
Object.defineProperty(a.prototype,"notRenderable",{get:function(){return this._doNotRender},set:function(b){this._doNotRender!==b&&(this._doNotRender=b,this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"isVisible",{get:function(){return this._isVisible},set:function(b){this._isVisible!==b&&(this._isVisible=b,this._markAsDirty(!0))},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"isDirty",{get:function(){return this._isDirty},enumerable:!1,configurable:!0});
Object.defineProperty(a.prototype,"linkedMesh",{get:function(){return this._linkedMesh},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"paddingLeft",{get:function(){return this._paddingLeft.toString(this._host)},set:function(b){this._paddingLeft.fromString(b)&&this._markAsDirty()},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"paddingLeftInPixels",{get:function(){return this._paddingLeft.getValueInPixel(this._host,this._cachedParentMeasure.width)},set:function(b){isNaN(b)||
(this.paddingLeft=b+"px")},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"paddingRight",{get:function(){return this._paddingRight.toString(this._host)},set:function(b){this._paddingRight.fromString(b)&&this._markAsDirty()},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"paddingRightInPixels",{get:function(){return this._paddingRight.getValueInPixel(this._host,this._cachedParentMeasure.width)},set:function(b){isNaN(b)||(this.paddingRight=b+"px")},enumerable:!1,
configurable:!0});Object.defineProperty(a.prototype,"paddingTop",{get:function(){return this._paddingTop.toString(this._host)},set:function(b){this._paddingTop.fromString(b)&&this._markAsDirty()},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"paddingTopInPixels",{get:function(){return this._paddingTop.getValueInPixel(this._host,this._cachedParentMeasure.height)},set:function(b){isNaN(b)||(this.paddingTop=b+"px")},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,
"paddingBottom",{get:function(){return this._paddingBottom.toString(this._host)},set:function(b){this._paddingBottom.fromString(b)&&this._markAsDirty()},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"paddingBottomInPixels",{get:function(){return this._paddingBottom.getValueInPixel(this._host,this._cachedParentMeasure.height)},set:function(b){isNaN(b)||(this.paddingBottom=b+"px")},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"left",{get:function(){return this._left.toString(this._host)},
set:function(b){this._left.fromString(b)&&this._markAsDirty()},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"leftInPixels",{get:function(){return this._left.getValueInPixel(this._host,this._cachedParentMeasure.width)},set:function(b){isNaN(b)||(this.left=b+"px")},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"top",{get:function(){return this._top.toString(this._host)},set:function(b){this._top.fromString(b)&&this._markAsDirty()},enumerable:!1,configurable:!0});
Object.defineProperty(a.prototype,"topInPixels",{get:function(){return this._top.getValueInPixel(this._host,this._cachedParentMeasure.height)},set:function(b){isNaN(b)||(this.top=b+"px")},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"linkOffsetX",{get:function(){return this._linkOffsetX.toString(this._host)},set:function(b){this._linkOffsetX.fromString(b)&&this._markAsDirty()},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"linkOffsetXInPixels",{get:function(){return this._linkOffsetX.getValueInPixel(this._host,
this._cachedParentMeasure.width)},set:function(b){isNaN(b)||(this.linkOffsetX=b+"px")},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"linkOffsetY",{get:function(){return this._linkOffsetY.toString(this._host)},set:function(b){this._linkOffsetY.fromString(b)&&this._markAsDirty()},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"linkOffsetYInPixels",{get:function(){return this._linkOffsetY.getValueInPixel(this._host,this._cachedParentMeasure.height)},set:function(b){isNaN(b)||
(this.linkOffsetY=b+"px")},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"centerX",{get:function(){return this._currentMeasure.left+this._currentMeasure.width/2},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"centerY",{get:function(){return this._currentMeasure.top+this._currentMeasure.height/2},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"isEnabled",{get:function(){return this._isEnabled},set:function(b){this._isEnabled!==b&&(this._isEnabled=
b,this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"disabledColor",{get:function(){return this._disabledColor},set:function(b){this._disabledColor!==b&&(this._disabledColor=b,this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"disabledColorItem",{get:function(){return this._disabledColorItem},set:function(b){this._disabledColorItem!==b&&(this._disabledColorItem=b,this._markAsDirty())},enumerable:!1,configurable:!0});a.prototype._getTypeName=
function(){return"Control"};a.prototype.getAscendantOfClass=function(b){return this.parent?this.parent.getClassName()===b?this.parent:this.parent.getAscendantOfClass(b):null};a.prototype._resetFontCache=function(){this._fontSet=!0;this._markAsDirty()};a.prototype.isAscendant=function(b){return this.parent?this.parent===b?!0:this.parent.isAscendant(b):!1};a.prototype.getLocalCoordinates=function(b){var a=k.d.Zero();this.getLocalCoordinatesToRef(b,a);return a};a.prototype.getLocalCoordinatesToRef=function(b,
a){a.x=b.x-this._currentMeasure.left;a.y=b.y-this._currentMeasure.top;return this};a.prototype.getParentLocalCoordinates=function(b){var a=k.d.Zero();a.x=b.x-this._cachedParentMeasure.left;a.y=b.y-this._cachedParentMeasure.top;return a};a.prototype.moveToVector3=function(b,c){if(this._host&&this.parent===this._host._rootContainer){this.horizontalAlignment=a.HORIZONTAL_ALIGNMENT_LEFT;this.verticalAlignment=a.VERTICAL_ALIGNMENT_TOP;var e=this._host._getGlobalViewport(c);b=k.e.Project(b,k.a.Identity(),
c.getTransformMatrix(),e);this._moveToProjectedPosition(b);this.notRenderable=0>b.z||1<b.z?!0:!1}else y.b.Error("Cannot move a control to a vector3 if the control is not at root level")};a.prototype.getDescendantsToRef=function(b,a,c){};a.prototype.getDescendants=function(b,a){var c=[];this.getDescendantsToRef(c,b,a);return c};a.prototype.linkWithMesh=function(b){if(!this._host||this.parent&&this.parent!==this._host._rootContainer)b&&y.b.Error("Cannot link a control to a mesh if the control is not at root level");
else{var c=this._host._linkedControls.indexOf(this);-1!==c?(this._linkedMesh=b)||this._host._linkedControls.splice(c,1):b&&(this.horizontalAlignment=a.HORIZONTAL_ALIGNMENT_LEFT,this.verticalAlignment=a.VERTICAL_ALIGNMENT_TOP,this._linkedMesh=b,this._host._linkedControls.push(this))}};a.prototype._moveToProjectedPosition=function(b){var a=this._left.getValue(this._host),c=this._top.getValue(this._host),e=b.x+this._linkOffsetX.getValue(this._host)-this._currentMeasure.width/2;b=b.y+this._linkOffsetY.getValue(this._host)-
this._currentMeasure.height/2;this._left.ignoreAdaptiveScaling&&this._top.ignoreAdaptiveScaling&&(.5>Math.abs(e-a)&&(e=a),.5>Math.abs(b-c)&&(b=c));this.left=e+"px";this.top=b+"px";this._left.ignoreAdaptiveScaling=!0;this._top.ignoreAdaptiveScaling=!0;this._markAsDirty()};a.prototype._offsetLeft=function(b){this._isDirty=!0;this._currentMeasure.left+=b};a.prototype._offsetTop=function(b){this._isDirty=!0;this._currentMeasure.top+=b};a.prototype._markMatrixAsDirty=function(){this._isMatrixDirty=!0;
this._flagDescendantsAsMatrixDirty()};a.prototype._flagDescendantsAsMatrixDirty=function(){};a.prototype._intersectsRect=function(b){this._currentMeasure.transformToRef(this._transformMatrix,this._tmpMeasureA);return this._tmpMeasureA.left>=b.left+b.width||this._tmpMeasureA.top>=b.top+b.height||this._tmpMeasureA.left+this._tmpMeasureA.width<=b.left||this._tmpMeasureA.top+this._tmpMeasureA.height<=b.top?!1:!0};a.prototype.invalidateRect=function(){this._transform();if(this.host&&this.host.useInvalidateRectOptimization)if(this._currentMeasure.transformToRef(this._transformMatrix,
this._tmpMeasureA),e.a.CombineToRef(this._tmpMeasureA,this._prevCurrentMeasureTransformedIntoGlobalSpace,this._tmpMeasureA),this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY){var b=this.shadowOffsetX,a=this.shadowOffsetY,c=this.shadowBlur;this.host.invalidateRect(Math.floor(this._tmpMeasureA.left+Math.min(Math.min(b,0)-2*c,0)),Math.floor(this._tmpMeasureA.top+Math.min(Math.min(a,0)-2*c,0)),Math.ceil(this._tmpMeasureA.left+this._tmpMeasureA.width+Math.max(Math.max(b,0)+2*c,0)),Math.ceil(this._tmpMeasureA.top+
this._tmpMeasureA.height+Math.max(Math.max(a,0)+2*c,0)))}else this.host.invalidateRect(Math.floor(this._tmpMeasureA.left),Math.floor(this._tmpMeasureA.top),Math.ceil(this._tmpMeasureA.left+this._tmpMeasureA.width),Math.ceil(this._tmpMeasureA.top+this._tmpMeasureA.height))};a.prototype._markAsDirty=function(b){void 0===b&&(b=!1);if(this._isVisible||b)this._isDirty=!0,this._host&&this._host.markAsDirty()};a.prototype._markAllAsDirty=function(){this._markAsDirty();this._font&&this._prepareFont()};a.prototype._link=
function(b){if(this._host=b)this.uniqueId=this._host.getScene().getUniqueId()};a.prototype._transform=function(b){if(this._isMatrixDirty||1!==this._scaleX||1!==this._scaleY||0!==this._rotation){var a=this._currentMeasure.width*this._transformCenterX+this._currentMeasure.left,c=this._currentMeasure.height*this._transformCenterY+this._currentMeasure.top;b&&(b.translate(a,c),b.rotate(this._rotation),b.scale(this._scaleX,this._scaleY),b.translate(-a,-c));if(this._isMatrixDirty||this._cachedOffsetX!==
a||this._cachedOffsetY!==c)this._cachedOffsetX=a,this._cachedOffsetY=c,this._isMatrixDirty=!1,this._flagDescendantsAsMatrixDirty(),f.a.ComposeToRef(-a,-c,this._rotation,this._scaleX,this._scaleY,this.parent?this.parent._transformMatrix:null,this._transformMatrix),this._transformMatrix.invertToRef(this._invertTransformMatrix)}};a.prototype._renderHighlight=function(b){this.isHighlighted&&(b.save(),b.strokeStyle="#4affff",b.lineWidth=2,this._renderHighlightSpecific(b),b.restore())};a.prototype._renderHighlightSpecific=
function(b){b.strokeRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height)};a.prototype._applyStates=function(b){this._isFontSizeInPercentage&&(this._fontSet=!0);this._fontSet&&(this._prepareFont(),this._fontSet=!1);this._font&&(b.font=this._font);this._color&&(b.fillStyle=this._color);a.AllowAlphaInheritance?b.globalAlpha*=this._alpha:this._alphaSet&&(b.globalAlpha=this.parent?this.parent.alpha*this._alpha:this._alpha)};a.prototype._layout=
function(b,a){if(!this.isDirty&&(!this.isVisible||this.notRenderable))return!1;if(this._isDirty||!this._cachedParentMeasure.isEqualsTo(b)){this.host._numLayoutCalls++;this._currentMeasure.addAndTransformToRef(this._transformMatrix,-this.paddingLeftInPixels|0,-this.paddingTopInPixels|0,this.paddingRightInPixels|0,this.paddingBottomInPixels|0,this._prevCurrentMeasureTransformedIntoGlobalSpace);a.save();this._applyStates(a);var c=0;do this._rebuildLayout=!1,this._processMeasures(b,a),c++;while(this._rebuildLayout&&
3>c);3<=c&&q.a.Error("Layout cycle detected in GUI (Control name="+this.name+", uniqueId="+this.uniqueId+")");a.restore();this.invalidateRect();this._evaluateClippingState(b)}this._wasDirty=this._isDirty;this._isDirty=!1;return!0};a.prototype._processMeasures=function(b,a){this._currentMeasure.copyFrom(b);this._preMeasure(b,a);this._measure();this._computeAlignment(b,a);this._currentMeasure.left|=0;this._currentMeasure.top|=0;this._currentMeasure.width|=0;this._currentMeasure.height|=0;this._additionalProcessing(b,
a);this._cachedParentMeasure.copyFrom(b);this.onDirtyObservable.hasObservers()&&this.onDirtyObservable.notifyObservers(this)};a.prototype._evaluateClippingState=function(b){if(this.parent&&this.parent.clipChildren){if(this._currentMeasure.left>b.left+b.width){this._isClipped=!0;return}if(this._currentMeasure.left+this._currentMeasure.width<b.left){this._isClipped=!0;return}if(this._currentMeasure.top>b.top+b.height){this._isClipped=!0;return}if(this._currentMeasure.top+this._currentMeasure.height<
b.top){this._isClipped=!0;return}}this._isClipped=!1};a.prototype._measure=function(){this._currentMeasure.width=this._width.isPixel?this._width.getValue(this._host):this._currentMeasure.width*this._width.getValue(this._host);this._currentMeasure.height=this._height.isPixel?this._height.getValue(this._host):this._currentMeasure.height*this._height.getValue(this._host);0!==this.fixedRatio&&(this._fixedRatioMasterIsWidth?this._currentMeasure.height=this._currentMeasure.width*this.fixedRatio:this._currentMeasure.width=
this._currentMeasure.height*this.fixedRatio)};a.prototype._computeAlignment=function(b,c){c=this._currentMeasure.width;var e=this._currentMeasure.height,f=b.width;b=b.height;var d=0,l=0;switch(this.horizontalAlignment){case a.HORIZONTAL_ALIGNMENT_LEFT:d=0;break;case a.HORIZONTAL_ALIGNMENT_RIGHT:d=f-c;break;case a.HORIZONTAL_ALIGNMENT_CENTER:d=(f-c)/2}switch(this.verticalAlignment){case a.VERTICAL_ALIGNMENT_TOP:l=0;break;case a.VERTICAL_ALIGNMENT_BOTTOM:l=b-e;break;case a.VERTICAL_ALIGNMENT_CENTER:l=
(b-e)/2}this._paddingLeft.isPixel?(this._currentMeasure.left+=this._paddingLeft.getValue(this._host),this._currentMeasure.width-=this._paddingLeft.getValue(this._host)):(this._currentMeasure.left+=f*this._paddingLeft.getValue(this._host),this._currentMeasure.width-=f*this._paddingLeft.getValue(this._host));this._currentMeasure.width=this._paddingRight.isPixel?this._currentMeasure.width-this._paddingRight.getValue(this._host):this._currentMeasure.width-f*this._paddingRight.getValue(this._host);this._paddingTop.isPixel?
(this._currentMeasure.top+=this._paddingTop.getValue(this._host),this._currentMeasure.height-=this._paddingTop.getValue(this._host)):(this._currentMeasure.top+=b*this._paddingTop.getValue(this._host),this._currentMeasure.height-=b*this._paddingTop.getValue(this._host));this._currentMeasure.height=this._paddingBottom.isPixel?this._currentMeasure.height-this._paddingBottom.getValue(this._host):this._currentMeasure.height-b*this._paddingBottom.getValue(this._host);this._currentMeasure.left=this._left.isPixel?
this._currentMeasure.left+this._left.getValue(this._host):this._currentMeasure.left+f*this._left.getValue(this._host);this._currentMeasure.top=this._top.isPixel?this._currentMeasure.top+this._top.getValue(this._host):this._currentMeasure.top+b*this._top.getValue(this._host);this._currentMeasure.left+=d;this._currentMeasure.top+=l};a.prototype._preMeasure=function(b,a){};a.prototype._additionalProcessing=function(b,a){};a.prototype._clipForChildren=function(b){};a.prototype._clip=function(b,c){b.beginPath();
a._ClipMeasure.copyFrom(this._currentMeasure);c&&(c.transformToRef(this._invertTransformMatrix,this._tmpMeasureA),c=new e.a(0,0,0,0),c.left=Math.max(this._tmpMeasureA.left,this._currentMeasure.left),c.top=Math.max(this._tmpMeasureA.top,this._currentMeasure.top),c.width=Math.min(this._tmpMeasureA.left+this._tmpMeasureA.width,this._currentMeasure.left+this._currentMeasure.width)-c.left,c.height=Math.min(this._tmpMeasureA.top+this._tmpMeasureA.height,this._currentMeasure.top+this._currentMeasure.height)-
c.top,a._ClipMeasure.copyFrom(c));if(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY){c=this.shadowOffsetX;var f=this.shadowOffsetY,d=this.shadowBlur,N=Math.min(Math.min(c,0)-2*d,0),l=Math.min(Math.min(f,0)-2*d,0);b.rect(a._ClipMeasure.left+N,a._ClipMeasure.top+l,a._ClipMeasure.width+Math.max(Math.max(c,0)+2*d,0)-N,a._ClipMeasure.height+Math.max(Math.max(f,0)+2*d,0)-l)}else b.rect(a._ClipMeasure.left,a._ClipMeasure.top,a._ClipMeasure.width,a._ClipMeasure.height);b.clip()};a.prototype._render=
function(b,a){if(!this.isVisible||this.notRenderable||this._isClipped)return this._isDirty=!1;this.host._numRenderCalls++;b.save();this._applyStates(b);this._transform(b);this.clipContent&&this._clip(b,a);this.onBeforeDrawObservable.hasObservers()&&this.onBeforeDrawObservable.notifyObservers(this);this.useBitmapCache&&!this._wasDirty&&this._cacheData?b.putImageData(this._cacheData,this._currentMeasure.left,this._currentMeasure.top):this._draw(b,a);this.useBitmapCache&&this._wasDirty&&(this._cacheData=
b.getImageData(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height));this._renderHighlight(b);this.onAfterDrawObservable.hasObservers()&&this.onAfterDrawObservable.notifyObservers(this);b.restore();return!0};a.prototype._draw=function(b,a){};a.prototype.contains=function(b,a){this._invertTransformMatrix.transformCoordinates(b,a,this._transformedPosition);b=this._transformedPosition.x;a=this._transformedPosition.y;if(b<this._currentMeasure.left||
b>this._currentMeasure.left+this._currentMeasure.width||a<this._currentMeasure.top||a>this._currentMeasure.top+this._currentMeasure.height)return!1;this.isPointerBlocker&&(this._host._shouldBlockPointer=!0);return!0};a.prototype._processPicking=function(b,a,c,e,f,l,r,d){if(!this._isEnabled||!this.isHitTestVisible||!this.isVisible||this._doNotRender||!this.contains(b,a))return!1;this._processObservables(e,b,a,c,f,l,r,d);return!0};a.prototype._onPointerMove=function(b,a,c,e){this.onPointerMoveObservable.notifyObservers(a,
-1,b,this,e)&&null!=this.parent&&this.parent._onPointerMove(b,a,c,e)};a.prototype._onPointerEnter=function(b,a){if(!this._isEnabled||0<this._enterCount)return!1;-1===this._enterCount&&(this._enterCount=0);this._enterCount++;this.onPointerEnterObservable.notifyObservers(this,-1,b,this,a)&&null!=this.parent&&this.parent._onPointerEnter(b,a);return!0};a.prototype._onPointerOut=function(b,a,c){void 0===c&&(c=!1);if(c||this._isEnabled&&b!==this){this._enterCount=0;var e=!0;b.isAscendant(this)||(e=this.onPointerOutObservable.notifyObservers(this,
-1,b,this,a));e&&null!=this.parent&&this.parent._onPointerOut(b,a,c)}};a.prototype._onPointerDown=function(b,a,c,e,d){this._onPointerEnter(this,d);if(0!==this._downCount)return!1;this._downCount++;this._downPointerIds[c]=!0;this.onPointerDownObservable.notifyObservers(new f.b(a,e),-1,b,this,d)&&null!=this.parent&&this.parent._onPointerDown(b,a,c,e,d);return!0};a.prototype._onPointerUp=function(b,a,c,e,d,l){if(this._isEnabled){this._downCount=0;delete this._downPointerIds[c];var r=d;d&&(0<this._enterCount||
-1===this._enterCount)&&(r=this.onPointerClickObservable.notifyObservers(new f.b(a,e),-1,b,this,l));this.onPointerUpObservable.notifyObservers(new f.b(a,e),-1,b,this,l)&&null!=this.parent&&this.parent._onPointerUp(b,a,c,e,r,l)}};a.prototype._forcePointerUp=function(b){void 0===b&&(b=null);if(null!==b)this._onPointerUp(this,k.d.Zero(),b,0,!0);else for(var a in this._downPointerIds)this._onPointerUp(this,k.d.Zero(),+a,0,!0)};a.prototype._onWheelScroll=function(b,a){this._isEnabled&&this.onWheelObservable.notifyObservers(new k.d(b,
a))&&null!=this.parent&&this.parent._onWheelScroll(b,a)};a.prototype._onCanvasBlur=function(){};a.prototype._processObservables=function(b,a,c,e,f,l,r,d){if(!this._isEnabled)return!1;this._dummyVector2.copyFromFloats(a,c);return b===m.a.POINTERMOVE?(this._onPointerMove(this,this._dummyVector2,f,e),(b=this._host._lastControlOver[f])&&b!==this&&b._onPointerOut(this,e),b!==this&&this._onPointerEnter(this,e),this._host._lastControlOver[f]=this,!0):b===m.a.POINTERDOWN?(this._onPointerDown(this,this._dummyVector2,
f,l,e),this._host._registerLastControlDown(this,f),this._host._lastPickedControl=this,!0):b===m.a.POINTERUP?(this._host._lastControlDown[f]&&this._host._lastControlDown[f]._onPointerUp(this,this._dummyVector2,f,l,!0,e),delete this._host._lastControlDown[f],!0):b===m.a.POINTERWHEEL&&this._host._lastControlOver[f]?(this._host._lastControlOver[f]._onWheelScroll(r,d),!0):!1};a.prototype._prepareFont=function(){if(this._font||this._fontSet)this._font=this._style?this._style.fontStyle+" "+this._style.fontWeight+
" "+this.fontSizeInPixels+"px "+this._style.fontFamily:this._fontStyle+" "+this._fontWeight+" "+this.fontSizeInPixels+"px "+this._fontFamily,this._fontOffset=a._GetFontOffset(this._font)};a.prototype.dispose=function(){this.onDirtyObservable.clear();this.onBeforeDrawObservable.clear();this.onAfterDrawObservable.clear();this.onPointerDownObservable.clear();this.onPointerEnterObservable.clear();this.onPointerMoveObservable.clear();this.onPointerOutObservable.clear();this.onPointerUpObservable.clear();
this.onPointerClickObservable.clear();this.onWheelObservable.clear();this._styleObserver&&this._style&&(this._style.onChangedObservable.remove(this._styleObserver),this._styleObserver=null);this.parent&&(this.parent.removeControl(this),this.parent=null);this._host&&-1<this._host._linkedControls.indexOf(this)&&this.linkWithMesh(null);this.onDisposeObservable.notifyObservers(this);this.onDisposeObservable.clear()};Object.defineProperty(a,"HORIZONTAL_ALIGNMENT_LEFT",{get:function(){return a._HORIZONTAL_ALIGNMENT_LEFT},
enumerable:!1,configurable:!0});Object.defineProperty(a,"HORIZONTAL_ALIGNMENT_RIGHT",{get:function(){return a._HORIZONTAL_ALIGNMENT_RIGHT},enumerable:!1,configurable:!0});Object.defineProperty(a,"HORIZONTAL_ALIGNMENT_CENTER",{get:function(){return a._HORIZONTAL_ALIGNMENT_CENTER},enumerable:!1,configurable:!0});Object.defineProperty(a,"VERTICAL_ALIGNMENT_TOP",{get:function(){return a._VERTICAL_ALIGNMENT_TOP},enumerable:!1,configurable:!0});Object.defineProperty(a,"VERTICAL_ALIGNMENT_BOTTOM",{get:function(){return a._VERTICAL_ALIGNMENT_BOTTOM},
enumerable:!1,configurable:!0});Object.defineProperty(a,"VERTICAL_ALIGNMENT_CENTER",{get:function(){return a._VERTICAL_ALIGNMENT_CENTER},enumerable:!1,configurable:!0});a._GetFontOffset=function(b){if(a._FontHeightSizes[b])return a._FontHeightSizes[b];var c=document.createElement("span");c.innerHTML="Hg";c.style.font=b;var e=document.createElement("div");e.style.display="inline-block";e.style.width="1px";e.style.height="0px";e.style.verticalAlign="bottom";var f=document.createElement("div");f.style.whiteSpace=
"nowrap";f.appendChild(c);f.appendChild(e);document.body.appendChild(f);var d=0,l=0;try{l=e.getBoundingClientRect().top-c.getBoundingClientRect().top,e.style.verticalAlign="baseline",d=e.getBoundingClientRect().top-c.getBoundingClientRect().top}finally{document.body.removeChild(f)}c={ascent:d,height:l,descent:l-d};return a._FontHeightSizes[b]=c};a.drawEllipse=function(b,a,c,e,f){f.translate(b,a);f.scale(c,e);f.beginPath();f.arc(0,0,1,0,2*Math.PI);f.closePath();f.scale(1/c,1/e);f.translate(-b,-a)};
a.AllowAlphaInheritance=!1;a._ClipMeasure=new e.a(0,0,0,0);a._HORIZONTAL_ALIGNMENT_LEFT=0;a._HORIZONTAL_ALIGNMENT_RIGHT=1;a._HORIZONTAL_ALIGNMENT_CENTER=2;a._VERTICAL_ALIGNMENT_TOP=0;a._VERTICAL_ALIGNMENT_BOTTOM=1;a._VERTICAL_ALIGNMENT_CENTER=2;a._FontHeightSizes={};a.AddHeader=function(){};return a}();h.a.RegisteredTypes["BABYLON.GUI.Control"]=c},B1Fv:function(h,n,d){d.d(n,"a",function(){return y});var t=d("mrSG");h=d("TWMH");var k=d("3C+b"),m=d("wxg5"),q=d("LePa");d=d("WHS4");var y=function(d){function e(e){var c=
d.call(this,e)||this;c.name=e;c.delegatePickingToChildren=!1;c.thickness=1;c.isPointerBlocker=!0;var a=null;c.pointerEnterAnimation=function(){a=c.alpha;c.alpha-=.1};c.pointerOutAnimation=function(){null!==a&&(c.alpha=a)};c.pointerDownAnimation=function(){c.scaleX-=.05;c.scaleY-=.05};c.pointerUpAnimation=function(){c.scaleX+=.05;c.scaleY+=.05};return c}Object(t.c)(e,d);Object.defineProperty(e.prototype,"image",{get:function(){return this._image},enumerable:!1,configurable:!0});Object.defineProperty(e.prototype,
"textBlock",{get:function(){return this._textBlock},enumerable:!1,configurable:!0});e.prototype._getTypeName=function(){return"Button"};e.prototype._processPicking=function(e,c,a,b,g,k,h,N){if(!this._isEnabled||!this.isHitTestVisible||!this.isVisible||this.notRenderable||!d.prototype.contains.call(this,e,c))return!1;if(this.delegatePickingToChildren){for(var l=!1,r=this._children.length-1;0<=r;r--){var f=this._children[r];if(f.isEnabled&&f.isHitTestVisible&&f.isVisible&&!f.notRenderable&&f.contains(e,
c)){l=!0;break}}if(!l)return!1}this._processObservables(b,e,c,a,g,k,h,N);return!0};e.prototype._onPointerEnter=function(e,c){if(!d.prototype._onPointerEnter.call(this,e,c))return!1;this.pointerEnterAnimation&&this.pointerEnterAnimation();return!0};e.prototype._onPointerOut=function(e,c,a){void 0===a&&(a=!1);this.pointerOutAnimation&&this.pointerOutAnimation();d.prototype._onPointerOut.call(this,e,c,a)};e.prototype._onPointerDown=function(e,c,a,b,g){if(!d.prototype._onPointerDown.call(this,e,c,a,b,
g))return!1;this.pointerDownAnimation&&this.pointerDownAnimation();return!0};e.prototype._onPointerUp=function(e,c,a,b,g,k){this.pointerUpAnimation&&this.pointerUpAnimation();d.prototype._onPointerUp.call(this,e,c,a,b,g,k)};e.CreateImageButton=function(f,c,a){var b=new e(f);c=new m.a(f+"_button",c);c.textWrapping=!0;c.textHorizontalAlignment=k.a.HORIZONTAL_ALIGNMENT_CENTER;c.paddingLeft="20%";b.addControl(c);f=new q.a(f+"_icon",a);f.width="20%";f.stretch=q.a.STRETCH_UNIFORM;f.horizontalAlignment=
k.a.HORIZONTAL_ALIGNMENT_LEFT;b.addControl(f);b._image=f;b._textBlock=c;return b};e.CreateImageOnlyButton=function(f,c){var a=new e(f);f=new q.a(f+"_icon",c);f.stretch=q.a.STRETCH_FILL;f.horizontalAlignment=k.a.HORIZONTAL_ALIGNMENT_LEFT;a.addControl(f);a._image=f;return a};e.CreateSimpleButton=function(f,c){var a=new e(f);f=new m.a(f+"_button",c);f.textWrapping=!0;f.textHorizontalAlignment=k.a.HORIZONTAL_ALIGNMENT_CENTER;a.addControl(f);a._textBlock=f;return a};e.CreateImageWithCenterTextButton=function(f,
c,a){var b=new e(f);a=new q.a(f+"_icon",a);a.stretch=q.a.STRETCH_FILL;b.addControl(a);f=new m.a(f+"_button",c);f.textWrapping=!0;f.textHorizontalAlignment=k.a.HORIZONTAL_ALIGNMENT_CENTER;b.addControl(f);b._image=a;b._textBlock=f;return b};return e}(h.a);d.a.RegisteredTypes["BABYLON.GUI.Button"]=y},DtMM:function(h,n,d){d.d(n,"b",function(){return R.a});d.d(n,"a",function(){return a.a});var t=d("B1Fv");d("1sRO");var k=d("mrSG"),m=d("ps+7"),q=d("3C+b"),y=d("fppW"),g=d("98Qd"),e=d("37TA");h=d("WHS4");
var f=d("NipH"),c=function(b){function a(a,c){void 0===c&&(c="");var l=b.call(this,a)||this;l.name=a;l._placeholderText="";l._background="#222222";l._focusedBackground="#000000";l._focusedColor="white";l._placeholderColor="gray";l._thickness=1;l._margin=new e.a(10,e.a.UNITMODE_PIXEL);l._autoStretchWidth=!0;l._maxWidth=new e.a(1,e.a.UNITMODE_PERCENTAGE,!1);l._isFocused=!1;l._blinkIsEven=!1;l._cursorOffset=0;l._deadKey=!1;l._addKey=!0;l._currentKey="";l._isTextHighlightOn=!1;l._textHighlightColor="#d5e0ff";
l._highligherOpacity=.4;l._highlightedText="";l._startHighlightIndex=0;l._endHighlightIndex=0;l._cursorIndex=-1;l._onFocusSelectAll=!1;l._isPointerDown=!1;l.promptMessage="Please enter text:";l.disableMobilePrompt=!1;l.onTextChangedObservable=new m.a;l.onBeforeKeyAddObservable=new m.a;l.onFocusObservable=new m.a;l.onBlurObservable=new m.a;l.onTextHighlightObservable=new m.a;l.onTextCopyObservable=new m.a;l.onTextCutObservable=new m.a;l.onTextPasteObservable=new m.a;l.onKeyboardEventProcessedObservable=
new m.a;l.text=c;l.isPointerBlocker=!0;return l}Object(k.c)(a,b);Object.defineProperty(a.prototype,"maxWidth",{get:function(){return this._maxWidth.toString(this._host)},set:function(a){this._maxWidth.toString(this._host)!==a&&this._maxWidth.fromString(a)&&this._markAsDirty()},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"maxWidthInPixels",{get:function(){return this._maxWidth.getValueInPixel(this._host,this._cachedParentMeasure.width)},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,
"highligherOpacity",{get:function(){return this._highligherOpacity},set:function(a){this._highligherOpacity!==a&&(this._highligherOpacity=a,this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"onFocusSelectAll",{get:function(){return this._onFocusSelectAll},set:function(a){this._onFocusSelectAll!==a&&(this._onFocusSelectAll=a,this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"textHighlightColor",{get:function(){return this._textHighlightColor},
set:function(a){this._textHighlightColor!==a&&(this._textHighlightColor=a,this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"margin",{get:function(){return this._margin.toString(this._host)},set:function(a){this._margin.toString(this._host)!==a&&this._margin.fromString(a)&&this._markAsDirty()},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"marginInPixels",{get:function(){return this._margin.getValueInPixel(this._host,this._cachedParentMeasure.width)},
enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"autoStretchWidth",{get:function(){return this._autoStretchWidth},set:function(a){this._autoStretchWidth!==a&&(this._autoStretchWidth=a,this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"thickness",{get:function(){return this._thickness},set:function(a){this._thickness!==a&&(this._thickness=a,this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"focusedBackground",
{get:function(){return this._focusedBackground},set:function(a){this._focusedBackground!==a&&(this._focusedBackground=a,this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"focusedColor",{get:function(){return this._focusedColor},set:function(a){this._focusedColor!==a&&(this._focusedColor=a,this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"background",{get:function(){return this._background},set:function(a){this._background!==
a&&(this._background=a,this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"placeholderColor",{get:function(){return this._placeholderColor},set:function(a){this._placeholderColor!==a&&(this._placeholderColor=a,this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"placeholderText",{get:function(){return this._placeholderText},set:function(a){this._placeholderText!==a&&(this._placeholderText=a,this._markAsDirty())},enumerable:!1,
configurable:!0});Object.defineProperty(a.prototype,"deadKey",{get:function(){return this._deadKey},set:function(a){this._deadKey=a},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"highlightedText",{get:function(){return this._highlightedText},set:function(a){this._highlightedText!==a&&(this._highlightedText=a,this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"addKey",{get:function(){return this._addKey},set:function(a){this._addKey=a},enumerable:!1,
configurable:!0});Object.defineProperty(a.prototype,"currentKey",{get:function(){return this._currentKey},set:function(a){this._currentKey=a},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"text",{get:function(){return this._textWrapper.text},set:function(a){a=a.toString();this._textWrapper||(this._textWrapper=new f.a);this._textWrapper.text!==a&&(this._textWrapper.text=a,this._textHasChanged())},enumerable:!1,configurable:!0});a.prototype._textHasChanged=function(){this._markAsDirty();
this.onTextChangedObservable.notifyObservers(this)};Object.defineProperty(a.prototype,"width",{get:function(){return this._width.toString(this._host)},set:function(a){this._width.toString(this._host)!==a&&(this._width.fromString(a)&&this._markAsDirty(),this.autoStretchWidth=!1)},enumerable:!1,configurable:!0});a.prototype.onBlur=function(){this._isFocused=!1;this._scrollLeft=null;this._cursorOffset=0;clearTimeout(this._blinkTimeout);this._markAsDirty();this.onBlurObservable.notifyObservers(this);
this._host.unRegisterClipboardEvents();this._onClipboardObserver&&this._host.onClipboardObservable.remove(this._onClipboardObserver);var a=this._host.getScene();this._onPointerDblTapObserver&&a&&a.onPointerObservable.remove(this._onPointerDblTapObserver)};a.prototype.onFocus=function(){var a=this;if(this._isEnabled)if(this._scrollLeft=null,this._isFocused=!0,this._blinkIsEven=!1,this._cursorOffset=0,this._markAsDirty(),this.onFocusObservable.notifyObservers(this),-1===navigator.userAgent.indexOf("Mobile")||
this.disableMobilePrompt){this._host.registerClipboardEvents();this._onClipboardObserver=this._host.onClipboardObservable.add(function(b){switch(b.type){case y.a.COPY:a._onCopyText(b.event);a.onTextCopyObservable.notifyObservers(a);break;case y.a.CUT:a._onCutText(b.event);a.onTextCutObservable.notifyObservers(a);break;case y.a.PASTE:a._onPasteText(b.event),a.onTextPasteObservable.notifyObservers(a)}});var b=this._host.getScene();b&&(this._onPointerDblTapObserver=b.onPointerObservable.add(function(b){a._isFocused&&
b.type===g.a.POINTERDOUBLETAP&&a._processDblClick(b)}));this._onFocusSelectAll&&this._selectAllText()}else b=prompt(this.promptMessage),null!==b&&(this.text=b),this._host.focusedControl=null};a.prototype._getTypeName=function(){return"InputText"};a.prototype.keepsFocusWith=function(){return this._connectedVirtualKeyboard?[this._connectedVirtualKeyboard]:null};a.prototype.processKey=function(a,b,c){if(!c||!c.ctrlKey&&!c.metaKey||67!==a&&86!==a&&88!==a)if(c&&(c.ctrlKey||c.metaKey)&&65===a)this._selectAllText(),
c.preventDefault();else{switch(a){case 32:b=" ";break;case 191:c&&c.preventDefault();break;case 8:if(this._textWrapper.text&&0<this._textWrapper.length){if(this._isTextHighlightOn){this._textWrapper.removePart(this._startHighlightIndex,this._endHighlightIndex);this._textHasChanged();this._isTextHighlightOn=!1;this._cursorOffset=this._textWrapper.length-this._startHighlightIndex;this._blinkIsEven=!1;c&&c.preventDefault();return}0===this._cursorOffset?this.text=this._textWrapper.substr(0,this._textWrapper.length-
1):(b=this._textWrapper.length-this._cursorOffset,0<b&&(this._textWrapper.removePart(b-1,b),this._textHasChanged()))}c&&c.preventDefault();return;case 46:if(this._isTextHighlightOn){this._textWrapper.removePart(this._startHighlightIndex,this._endHighlightIndex);this._textHasChanged();this._isTextHighlightOn=!1;this._cursorOffset=this._textWrapper.length-this._startHighlightIndex;c&&c.preventDefault();return}this._textWrapper.text&&0<this._textWrapper.length&&0<this._cursorOffset&&(b=this._textWrapper.length-
this._cursorOffset,this._textWrapper.removePart(b,b+1),this._textHasChanged(),this._cursorOffset--);c&&c.preventDefault();return;case 13:this._host.focusedControl=null;this._isTextHighlightOn=!1;return;case 35:this._cursorOffset=0;this._isTextHighlightOn=this._blinkIsEven=!1;this._markAsDirty();return;case 36:this._cursorOffset=this._textWrapper.length;this._isTextHighlightOn=this._blinkIsEven=!1;this._markAsDirty();return;case 37:this._cursorOffset++;this._cursorOffset>this._textWrapper.length&&
(this._cursorOffset=this._textWrapper.length);if(c&&c.shiftKey){this._blinkIsEven=!1;if(c.ctrlKey||c.metaKey){if(!this._isTextHighlightOn){if(this._textWrapper.length===this._cursorOffset)return;this._endHighlightIndex=this._textWrapper.length-this._cursorOffset+1}this._startHighlightIndex=0;this._cursorIndex=this._textWrapper.length-this._endHighlightIndex;this._cursorOffset=this._textWrapper.length;this._isTextHighlightOn=!0;this._markAsDirty();return}this._isTextHighlightOn?-1===this._cursorIndex&&
(this._cursorIndex=this._textWrapper.length-this._endHighlightIndex,this._cursorOffset=0===this._startHighlightIndex?this._textWrapper.length:this._textWrapper.length-this._startHighlightIndex+1):(this._isTextHighlightOn=!0,this._cursorIndex=this._cursorOffset>=this._textWrapper.length?this._textWrapper.length:this._cursorOffset-1);this._cursorIndex<this._cursorOffset?(this._endHighlightIndex=this._textWrapper.length-this._cursorIndex,this._startHighlightIndex=this._textWrapper.length-this._cursorOffset):
this._cursorIndex>this._cursorOffset?(this._endHighlightIndex=this._textWrapper.length-this._cursorOffset,this._startHighlightIndex=this._textWrapper.length-this._cursorIndex):this._isTextHighlightOn=!1;this._markAsDirty();return}this._isTextHighlightOn&&(this._cursorOffset=this._textWrapper.length-this._startHighlightIndex,this._isTextHighlightOn=!1);c&&(c.ctrlKey||c.metaKey)&&(this._cursorOffset=this._textWrapper.length,c.preventDefault());this._isTextHighlightOn=this._blinkIsEven=!1;this._cursorIndex=
-1;this._markAsDirty();return;case 39:this._cursorOffset--;0>this._cursorOffset&&(this._cursorOffset=0);if(c&&c.shiftKey){this._blinkIsEven=!1;if(c.ctrlKey||c.metaKey){if(!this._isTextHighlightOn){if(0===this._cursorOffset)return;this._startHighlightIndex=this._textWrapper.length-this._cursorOffset-1}this._endHighlightIndex=this._textWrapper.length;this._isTextHighlightOn=!0;this._cursorIndex=this._textWrapper.length-this._startHighlightIndex;this._cursorOffset=0;this._markAsDirty();return}this._isTextHighlightOn?
-1===this._cursorIndex&&(this._cursorIndex=this._textWrapper.length-this._startHighlightIndex,this._cursorOffset=this._textWrapper.length===this._endHighlightIndex?0:this._textWrapper.length-this._endHighlightIndex-1):(this._isTextHighlightOn=!0,this._cursorIndex=0>=this._cursorOffset?0:this._cursorOffset+1);this._cursorIndex<this._cursorOffset?(this._endHighlightIndex=this._textWrapper.length-this._cursorIndex,this._startHighlightIndex=this._textWrapper.length-this._cursorOffset):this._cursorIndex>
this._cursorOffset?(this._endHighlightIndex=this._textWrapper.length-this._cursorOffset,this._startHighlightIndex=this._textWrapper.length-this._cursorIndex):this._isTextHighlightOn=!1;this._markAsDirty();return}this._isTextHighlightOn&&(this._cursorOffset=this._textWrapper.length-this._endHighlightIndex,this._isTextHighlightOn=!1);c&&(c.ctrlKey||c.metaKey)&&(this._cursorOffset=0,c.preventDefault());this._isTextHighlightOn=this._blinkIsEven=!1;this._cursorIndex=-1;this._markAsDirty();return;case 222:c&&
c.preventDefault(),this._cursorIndex=-1,this.deadKey=!0}b&&(-1===a||32===a||47<a&&64>a||64<a&&91>a||159<a&&193>a||218<a&&223>a||95<a&&112>a)&&(this._currentKey=b,this.onBeforeKeyAddObservable.notifyObservers(this),b=this._currentKey,this._addKey&&(this._isTextHighlightOn?(this._textWrapper.removePart(this._startHighlightIndex,this._endHighlightIndex,b),this._textHasChanged(),this._cursorOffset=this._textWrapper.length-(this._startHighlightIndex+1),this._blinkIsEven=this._isTextHighlightOn=!1,this._markAsDirty()):
0===this._cursorOffset?this.text+=b:(c=this._textWrapper.length-this._cursorOffset,this._textWrapper.removePart(c,c,b),this._textHasChanged())))}};a.prototype._updateValueFromCursorIndex=function(a){this._blinkIsEven=!1;if(-1===this._cursorIndex)this._cursorIndex=a;else if(this._cursorIndex<this._cursorOffset)this._endHighlightIndex=this._textWrapper.length-this._cursorIndex,this._startHighlightIndex=this._textWrapper.length-this._cursorOffset;else if(this._cursorIndex>this._cursorOffset)this._endHighlightIndex=
this._textWrapper.length-this._cursorOffset,this._startHighlightIndex=this._textWrapper.length-this._cursorIndex;else{this._isTextHighlightOn=!1;this._markAsDirty();return}this._isTextHighlightOn=!0;this._markAsDirty()};a.prototype._processDblClick=function(a){this._endHighlightIndex=this._startHighlightIndex=this._textWrapper.length-this._cursorOffset;do{var b=this._endHighlightIndex<this._textWrapper.length&&this._textWrapper.isWord(this._endHighlightIndex)?++this._endHighlightIndex:0;a=0<this._startHighlightIndex&&
this._textWrapper.isWord(this._startHighlightIndex-1)?--this._startHighlightIndex:0}while(a||b);this._cursorOffset=this._textWrapper.length-this._startHighlightIndex;this.onTextHighlightObservable.notifyObservers(this);this._isTextHighlightOn=!0;this._clickedCoordinate=null;this._blinkIsEven=!0;this._cursorIndex=-1;this._markAsDirty()};a.prototype._selectAllText=function(){this._isTextHighlightOn=this._blinkIsEven=!0;this._startHighlightIndex=0;this._cursorOffset=this._endHighlightIndex=this._textWrapper.length;
this._cursorIndex=-1;this._markAsDirty()};a.prototype.processKeyboard=function(a){this.processKey(a.keyCode,a.key,a);this.onKeyboardEventProcessedObservable.notifyObservers(a)};a.prototype._onCopyText=function(a){this._isTextHighlightOn=!1;try{a.clipboardData&&a.clipboardData.setData("text/plain",this._highlightedText)}catch(r){}this._host.clipboardData=this._highlightedText};a.prototype._onCutText=function(a){if(this._highlightedText){this._textWrapper.removePart(this._startHighlightIndex,this._endHighlightIndex);
this._textHasChanged();this._isTextHighlightOn=!1;this._cursorOffset=this._textWrapper.length-this._startHighlightIndex;try{a.clipboardData&&a.clipboardData.setData("text/plain",this._highlightedText)}catch(r){}this._host.clipboardData=this._highlightedText;this._highlightedText=""}};a.prototype._onPasteText=function(a){a=a.clipboardData&&-1!==a.clipboardData.types.indexOf("text/plain")?a.clipboardData.getData("text/plain"):this._host.clipboardData;var b=this._textWrapper.length-this._cursorOffset;
this._textWrapper.removePart(b,b,a);this._textHasChanged()};a.prototype._draw=function(a,b){var c=this;a.save();this._applyStates(a);if(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)a.shadowColor=this.shadowColor,a.shadowBlur=this.shadowBlur,a.shadowOffsetX=this.shadowOffsetX,a.shadowOffsetY=this.shadowOffsetY;this._isFocused?this._focusedBackground&&(a.fillStyle=this._isEnabled?this._focusedBackground:this._disabledColor,a.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,
this._currentMeasure.height)):this._background&&(a.fillStyle=this._isEnabled?this._background:this._disabledColor,a.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height));if(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)a.shadowBlur=0,a.shadowOffsetX=0,a.shadowOffsetY=0;this._fontOffset||(this._fontOffset=q.a._GetFontOffset(a.font));b=this._currentMeasure.left+this._margin.getValueInPixel(this._host,this._tempParentMeasure.width);
this.color&&(a.fillStyle=this.color);var e=this._beforeRenderText(this._textWrapper);this._isFocused||this._textWrapper.text||!this._placeholderText||(e=new f.a,e.text=this._placeholderText,this._placeholderColor&&(a.fillStyle=this._placeholderColor));this._textWidth=a.measureText(e.text).width;var l=2*this._margin.getValueInPixel(this._host,this._tempParentMeasure.width);this._autoStretchWidth&&(this.width=Math.min(this._maxWidth.getValueInPixel(this._host,this._tempParentMeasure.width),this._textWidth+
l)+"px");var r=this._fontOffset.ascent+(this._currentMeasure.height-this._fontOffset.height)/2;l=this._width.getValueInPixel(this._host,this._tempParentMeasure.width)-l;a.save();a.beginPath();a.rect(b,this._currentMeasure.top+(this._currentMeasure.height-this._fontOffset.height)/2,l+2,this._currentMeasure.height);a.clip();if(this._isFocused&&this._textWidth>l){var d=b-this._textWidth+l;this._scrollLeft||(this._scrollLeft=d)}else this._scrollLeft=b;a.fillText(e.text,this._scrollLeft,this._currentMeasure.top+
r);if(this._isFocused){if(this._clickedCoordinate){r=this._scrollLeft+this._textWidth-this._clickedCoordinate;var g=this._cursorOffset=d=0;do this._cursorOffset&&(g=Math.abs(r-d)),this._cursorOffset++,d=a.measureText(e.substr(e.length-this._cursorOffset,this._cursorOffset)).width;while(d<r&&e.length>=this._cursorOffset);Math.abs(r-d)>g&&this._cursorOffset--;this._blinkIsEven=!1;this._clickedCoordinate=null}this._blinkIsEven||(r=e.substr(e.length-this._cursorOffset),r=a.measureText(r).width,r=this._scrollLeft+
this._textWidth-r,r<b?(this._scrollLeft+=b-r,r=b,this._markAsDirty()):r>b+l&&(this._scrollLeft+=b+l-r,r=b+l,this._markAsDirty()),this._isTextHighlightOn||a.fillRect(r,this._currentMeasure.top+(this._currentMeasure.height-this._fontOffset.height)/2,2,this._fontOffset.height));clearTimeout(this._blinkTimeout);this._blinkTimeout=setTimeout(function(){c._blinkIsEven=!c._blinkIsEven;c._markAsDirty()},500);this._isTextHighlightOn&&(clearTimeout(this._blinkTimeout),l=a.measureText(e.substring(this._startHighlightIndex)).width,
l=this._scrollLeft+this._textWidth-l,this._highlightedText=e.substring(this._startHighlightIndex,this._endHighlightIndex),r=a.measureText(e.substring(this._startHighlightIndex,this._endHighlightIndex)).width,l<b&&(r-=b-l,r||(r=a.measureText(e.charAt(e.length-this._cursorOffset)).width),l=b),a.globalAlpha=this._highligherOpacity,a.fillStyle=this._textHighlightColor,a.fillRect(l,this._currentMeasure.top+(this._currentMeasure.height-this._fontOffset.height)/2,r,this._fontOffset.height),a.globalAlpha=
1)}a.restore();this._thickness&&(this._isFocused?this.focusedColor&&(a.strokeStyle=this.focusedColor):this.color&&(a.strokeStyle=this.color),a.lineWidth=this._thickness,a.strokeRect(this._currentMeasure.left+this._thickness/2,this._currentMeasure.top+this._thickness/2,this._currentMeasure.width-this._thickness,this._currentMeasure.height-this._thickness));a.restore()};a.prototype._onPointerDown=function(a,c,e,f,d){if(!b.prototype._onPointerDown.call(this,a,c,e,f,d))return!1;this._clickedCoordinate=
c.x;this._isTextHighlightOn=!1;this._highlightedText="";this._cursorIndex=-1;this._isPointerDown=!0;this._host._capturingControl[e]=this;if(this._host.focusedControl===this)return clearTimeout(this._blinkTimeout),this._markAsDirty(),!0;if(!this._isEnabled)return!1;this._host.focusedControl=this;return!0};a.prototype._onPointerMove=function(a,c,e,f){this._host.focusedControl===this&&this._isPointerDown&&(this._clickedCoordinate=c.x,this._markAsDirty(),this._updateValueFromCursorIndex(this._cursorOffset));
b.prototype._onPointerMove.call(this,a,c,e,f)};a.prototype._onPointerUp=function(a,c,e,f,d){this._isPointerDown=!1;delete this._host._capturingControl[e];b.prototype._onPointerUp.call(this,a,c,e,f,d)};a.prototype._beforeRenderText=function(a){return a};a.prototype.dispose=function(){b.prototype.dispose.call(this);this.onBlurObservable.clear();this.onFocusObservable.clear();this.onTextChangedObservable.clear();this.onTextCopyObservable.clear();this.onTextCutObservable.clear();this.onTextPasteObservable.clear();
this.onTextHighlightObservable.clear();this.onKeyboardEventProcessedObservable.clear()};return a}(q.a);h.a.RegisteredTypes["BABYLON.GUI.InputText"]=c;var a=d("TWMH"),b=d("oJzB"),R=d("wxg5"),x=d("Xeau");n=function(e){function f(a){var b=e.call(this,a)||this;b.name=a;b._value=x.a.Red();b._tmpColor=new x.a;b._pointerStartedOnSquare=!1;b._pointerStartedOnWheel=!1;b._squareLeft=0;b._squareTop=0;b._squareSize=0;b._h=360;b._s=1;b._v=1;b._lastPointerDownID=-1;b.onValueChangedObservable=new m.a;b._pointerIsDown=
!1;b.value=new x.a(.88,.1,.1);b.size="200px";b.isPointerBlocker=!0;return b}Object(k.c)(f,e);Object.defineProperty(f.prototype,"value",{get:function(){return this._value},set:function(a){this._value.equals(a)||(this._value.copyFrom(a),this._value.toHSVToRef(this._tmpColor),this._h=this._tmpColor.r,this._s=Math.max(this._tmpColor.g,1E-5),this._v=Math.max(this._tmpColor.b,1E-5),this._markAsDirty(),this._value.r<=f._Epsilon&&(this._value.r=0),this._value.g<=f._Epsilon&&(this._value.g=0),this._value.b<=
f._Epsilon&&(this._value.b=0),this._value.r>=1-f._Epsilon&&(this._value.r=1),this._value.g>=1-f._Epsilon&&(this._value.g=1),this._value.b>=1-f._Epsilon&&(this._value.b=1),this.onValueChangedObservable.notifyObservers(this._value))},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"width",{get:function(){return this._width.toString(this._host)},set:function(a){this._width.toString(this._host)!==a&&this._width.fromString(a)&&(this._height.fromString(a),this._markAsDirty())},enumerable:!1,
configurable:!0});Object.defineProperty(f.prototype,"height",{get:function(){return this._height.toString(this._host)},set:function(a){this._height.toString(this._host)!==a&&this._height.fromString(a)&&(this._width.fromString(a),this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"size",{get:function(){return this.width},set:function(a){this.width=a},enumerable:!1,configurable:!0});f.prototype._getTypeName=function(){return"ColorPicker"};f.prototype._preMeasure=
function(a,b){a.width<a.height?this._currentMeasure.height=a.width:this._currentMeasure.width=a.height};f.prototype._updateSquareProps=function(){var a=.5*Math.min(this._currentMeasure.width,this._currentMeasure.height),b=2*(a-.2*a)/Math.sqrt(2);a-=.5*b;this._squareLeft=this._currentMeasure.left+a;this._squareTop=this._currentMeasure.top+a;this._squareSize=b};f.prototype._drawGradientSquare=function(a,b,c,e,f,d){var l=d.createLinearGradient(b,c,e+b,c);l.addColorStop(0,"#fff");l.addColorStop(1,"hsl("+
a+", 100%, 50%)");d.fillStyle=l;d.fillRect(b,c,e,f);a=d.createLinearGradient(b,c,b,f+c);a.addColorStop(0,"rgba(0,0,0,0)");a.addColorStop(1,"#000");d.fillStyle=a;d.fillRect(b,c,e,f)};f.prototype._drawCircle=function(a,b,c,e){e.beginPath();e.arc(a,b,c+1,0,2*Math.PI,!1);e.lineWidth=3;e.strokeStyle="#333333";e.stroke();e.beginPath();e.arc(a,b,c,0,2*Math.PI,!1);e.lineWidth=3;e.strokeStyle="#ffffff";e.stroke()};f.prototype._createColorWheelCanvas=function(a,b){var c=document.createElement("canvas");c.width=
2*a;c.height=2*a;var e=c.getContext("2d"),f=e.getImageData(0,0,2*a,2*a),l=f.data,d=this._tmpColor,r=a*a;b=a-b;for(var g=b*b,k=-a;k<a;k++)for(var R=-a;R<a;R++){var W=k*k+R*R;if(!(W>r||W<g)){var h=Math.sqrt(W);x.a.HSVtoRGBToRef(180*Math.atan2(R,k)/Math.PI+180,h/a,1,d);W=4*(k+a+2*(R+a)*a);l[W]=255*d.r;l[W+1]=255*d.g;l[W+2]=255*d.b;var N=50>a?.2:150<a?.04:-.16*(a-50)/100+.2;h=(h-b)/(a-b);l[W+3]=h<N?h/N*255:h>1-N?255*(1-(h-(1-N))/N):255}}e.putImageData(f,0,0);return c};f.prototype._draw=function(a){a.save();
this._applyStates(a);var b=.5*Math.min(this._currentMeasure.width,this._currentMeasure.height),c=.2*b,e=this._currentMeasure.left,f=this._currentMeasure.top;this._colorWheelCanvas&&this._colorWheelCanvas.width==2*b||(this._colorWheelCanvas=this._createColorWheelCanvas(b,c));this._updateSquareProps();if(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)a.shadowColor=this.shadowColor,a.shadowBlur=this.shadowBlur,a.shadowOffsetX=this.shadowOffsetX,a.shadowOffsetY=this.shadowOffsetY,a.fillRect(this._squareLeft,
this._squareTop,this._squareSize,this._squareSize);a.drawImage(this._colorWheelCanvas,e,f);if(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)a.shadowBlur=0,a.shadowOffsetX=0,a.shadowOffsetY=0;this._drawGradientSquare(this._h,this._squareLeft,this._squareTop,this._squareSize,this._squareSize,a);var d=this._squareLeft+this._squareSize*this._s,l=this._squareTop+this._squareSize*(1-this._v);this._drawCircle(d,l,.04*b,a);l=b-.5*c;d=e+b+Math.cos((this._h-180)*Math.PI/180)*l;l=f+b+Math.sin((this._h-
180)*Math.PI/180)*l;this._drawCircle(d,l,.35*c,a);a.restore()};f.prototype._updateValueFromPointer=function(a,b){if(this._pointerStartedOnWheel){var c=.5*Math.min(this._currentMeasure.width,this._currentMeasure.height);this._h=180*Math.atan2(b-(c+this._currentMeasure.top),a-(c+this._currentMeasure.left))/Math.PI+180}else this._pointerStartedOnSquare&&(this._updateSquareProps(),this._s=(a-this._squareLeft)/this._squareSize,this._v=1-(b-this._squareTop)/this._squareSize,this._s=Math.min(this._s,1),
this._s=Math.max(this._s,f._Epsilon),this._v=Math.min(this._v,1),this._v=Math.max(this._v,f._Epsilon));x.a.HSVtoRGBToRef(this._h,this._s,this._v,this._tmpColor);this.value=this._tmpColor};f.prototype._isPointOnSquare=function(a,b){this._updateSquareProps();var c=this._squareLeft,e=this._squareTop,f=this._squareSize;return a>=c&&a<=c+f&&b>=e&&b<=e+f?!0:!1};f.prototype._isPointOnWheel=function(a,b){var c=.5*Math.min(this._currentMeasure.width,this._currentMeasure.height),e=c-.2*c;a-=c+this._currentMeasure.left;
b-=c+this._currentMeasure.top;b=a*a+b*b;return b<=c*c&&b>=e*e?!0:!1};f.prototype._onPointerDown=function(a,b,c,f,d){if(!e.prototype._onPointerDown.call(this,a,b,c,f,d))return!1;this._pointerIsDown=!0;this._pointerStartedOnWheel=this._pointerStartedOnSquare=!1;this._invertTransformMatrix.transformCoordinates(b.x,b.y,this._transformedPosition);a=this._transformedPosition.x;b=this._transformedPosition.y;this._isPointOnSquare(a,b)?this._pointerStartedOnSquare=!0:this._isPointOnWheel(a,b)&&(this._pointerStartedOnWheel=
!0);this._updateValueFromPointer(a,b);this._host._capturingControl[c]=this;this._lastPointerDownID=c;return!0};f.prototype._onPointerMove=function(a,b,c,f){if(c==this._lastPointerDownID){this._invertTransformMatrix.transformCoordinates(b.x,b.y,this._transformedPosition);var d=this._transformedPosition.x,l=this._transformedPosition.y;this._pointerIsDown&&this._updateValueFromPointer(d,l);e.prototype._onPointerMove.call(this,a,b,c,f)}};f.prototype._onPointerUp=function(a,b,c,f,d,Y){this._pointerIsDown=
!1;delete this._host._capturingControl[c];e.prototype._onPointerUp.call(this,a,b,c,f,d,Y)};f.prototype._onCanvasBlur=function(){this._forcePointerUp();e.prototype._onCanvasBlur.call(this)};f.ShowPickerDialogAsync=function(e,d){return new Promise(function(l,g){function p(a,b){u=b;b=a.toHexString();ba.background=b;G.name!=u&&(G.text=Math.floor(255*a.r).toString());H.name!=u&&(H.text=Math.floor(255*a.g).toString());I.name!=u&&(I.text=Math.floor(255*a.b).toString());D.name!=u&&(D.text=a.r.toString());
E.name!=u&&(E.text=a.g.toString());F.name!=u&&(F.text=a.b.toString());v.name!=u&&(b=b.split("#"),v.text=b[1]);S.name!=u&&(S.value=a)}function Y(a,b){var c=a.text;if(/[^0-9]/g.test(c))a.text=T;else if(""!=c&&(0>Math.floor(parseInt(c))?c="0":255<Math.floor(parseInt(c))?c="255":isNaN(parseInt(c))&&(c="0")),u==a.name&&(T=c),""!=c){c=parseInt(c).toString();a.text=c;var e=x.a.FromHexString(ba.background);u==a.name&&("r"==b?p(new x.a(parseInt(c)/255,e.g,e.b),a.name):"g"==b?p(new x.a(e.r,parseInt(c)/255,
e.b),a.name):p(new x.a(e.r,e.g,parseInt(c)/255),a.name))}}function ia(a,b){var c=a.text;if(/[^0-9\.]/g.test(c))a.text=T;else{""!=c&&"."!=c&&0!=parseFloat(c)&&(0>parseFloat(c)?c="0.0":1<parseFloat(c)?c="1.0":isNaN(parseFloat(c))&&(c="0.0"));u==a.name&&(T=c);""!=c&&"."!=c&&0!=parseFloat(c)?(c=parseFloat(c).toString(),a.text=c):c="0.0";var e=x.a.FromHexString(ba.background);u==a.name&&("r"==b?p(new x.a(parseFloat(c),e.g,e.b),a.name):"g"==b?p(new x.a(e.r,parseFloat(c),e.b),a.name):p(new x.a(e.r,e.g,parseFloat(c)),
a.name))}}function k(){if(d.savedColors&&d.savedColors[da]){var a=t.a.CreateSimpleButton("Swatch_"+da,ea?"b":"");a.fontFamily="BabylonJSglyphs";var b=x.a.FromHexString(d.savedColors[da]);a.color=b.r+b.g+b.b>y?"#aaaaaa":"#ffffff";a.fontSize=Math.floor(.7*n);a.textBlock.verticalAlignment=q.a.VERTICAL_ALIGNMENT_CENTER;a.height=a.width=n.toString()+"px";a.background=d.savedColors[da];a.thickness=2;var c=da;a.pointerDownAnimation=function(){a.thickness=4};a.pointerUpAnimation=function(){a.thickness=3};
a.pointerEnterAnimation=function(){a.thickness=3};a.pointerOutAnimation=function(){a.thickness=2};a.onPointerClickObservable.add(function(){ea?(d.savedColors&&d.savedColors.splice(c,1),d.savedColors&&0==d.savedColors.length&&(ma(!1),ea=!1),h("",J)):d.savedColors&&p(x.a.FromHexString(d.savedColors[c]),a.name)});return a}return null}function r(a){void 0!==a&&(ea=a);if(ea){for(a=0;a<B.children.length;a++){var b=B.children[a];b.textBlock.text="b"}void 0!==z&&(z.textBlock.text="Done")}else{for(a=0;a<B.children.length;a++)b=
B.children[a],b.textBlock.text="";void 0!==z&&(z.textBlock.text="Edit")}}function h(a,b){if(d.savedColors){""!=a&&d.savedColors.push(a);da=0;B.clearControls();a=Math.ceil(d.savedColors.length/d.numSwatchesPerLine);var c=0==a?0:a+1;if(B.rowCount!=a+c){for(var e=B.rowCount,f=0;f<e;f++)B.removeRowDefinition(0);for(f=0;f<a+c;f++)f%2?B.addRowDefinition(n,!0):B.addRowDefinition(aa,!0)}B.height=(n*a+c*aa).toString()+"px";for(f=e=1;e<a+c;e+=2,f++)for(var l=Math.min(Math.max(d.savedColors.length>f*d.numSwatchesPerLine?
d.numSwatchesPerLine:d.savedColors.length-(f-1)*d.numSwatchesPerLine,0),d.numSwatchesPerLine),g=0,p=1;g<l;g++)if(!(g>d.numSwatchesPerLine)){var Y=k();null!=Y&&(B.addControl(Y,e,p),p+=2,da++)}d.savedColors.length>=d.swatchLimit?W(b,!0):W(b,!1)}}function ma(a){a?(z=t.a.CreateSimpleButton("butEdit","Edit"),z.width=fa,z.height=ja,z.left=Math.floor(.1*parseInt(fa)).toString()+"px",z.top=(-1*parseFloat(z.left)).toString()+"px",z.verticalAlignment=q.a.VERTICAL_ALIGNMENT_BOTTOM,z.horizontalAlignment=q.a.HORIZONTAL_ALIGNMENT_LEFT,
z.thickness=2,z.color="#c0c0c0",z.fontSize=U,z.background="#535353",z.onPointerEnterObservable.add(function(){z.background="#414141"}),z.onPointerOutObservable.add(function(){z.background="#535353"}),z.pointerDownAnimation=function(){z.background="515151"},z.pointerUpAnimation=function(){z.background="#414141"},z.onPointerClickObservable.add(function(){ea=ea?!1:!0;r()}),ha.addControl(z,1,0)):ha.removeControl(z)}function W(a,b){b?(a.color="#555555",a.background="#454545"):(a.color="#c0c0c0",a.background=
"#535353")}function N(a){d.savedColors&&0<d.savedColors.length?l({savedColors:d.savedColors,pickedColor:a}):l({pickedColor:a});e.removeControl(Z)}d.pickerWidth=d.pickerWidth||"640px";d.pickerHeight=d.pickerHeight||"400px";d.headerHeight=d.headerHeight||"35px";d.lastColor=d.lastColor||"#000000";d.swatchLimit=d.swatchLimit||20;d.numSwatchesPerLine=d.numSwatchesPerLine||10;g=d.swatchLimit/d.numSwatchesPerLine;var m=parseFloat(d.pickerWidth)/d.numSwatchesPerLine,aa=Math.floor(.25*m);m=aa*(d.numSwatchesPerLine+
1);var n=Math.floor((parseFloat(d.pickerWidth)-m)/d.numSwatchesPerLine);g=n*g+aa*(g+1);m=(parseInt(d.pickerHeight)+g+Math.floor(.25*n)).toString()+"px";g=x.a.FromHexString("#dddddd");var y=g.r+g.g+g.b,z;g=["R","G","B"];var da,ea=!1,T,u,Z=new b.a;Z.name="Dialog Container";Z.width=d.pickerWidth;d.savedColors?(Z.height=m,m=parseInt(d.pickerHeight)/parseInt(m),Z.addRowDefinition(m,!1),Z.addRowDefinition(1-m,!1)):(Z.height=d.pickerHeight,Z.addRowDefinition(1,!1));e.addControl(Z);if(d.savedColors){var B=
new b.a;B.name="Swatch Drawer";B.verticalAlignment=q.a.VERTICAL_ALIGNMENT_TOP;B.background="#535353";B.width=d.pickerWidth;m=d.savedColors.length/d.numSwatchesPerLine;B.height=(n*m+(0==m?0:m+1)*aa).toString()+"px";B.top=Math.floor(.25*n).toString()+"px";for(var O=0;O<2*Math.ceil(d.savedColors.length/d.numSwatchesPerLine)+1;O++)0!=O%2?B.addRowDefinition(n,!0):B.addRowDefinition(aa,!0);for(O=0;O<2*d.numSwatchesPerLine+1;O++)0!=O%2?B.addColumnDefinition(n,!0):B.addColumnDefinition(aa,!0);Z.addControl(B,
1,0)}var C=new b.a;C.name="Picker Panel";C.height=d.pickerHeight;m=parseInt(d.headerHeight)/parseInt(d.pickerHeight);m=[m,1-m];C.addRowDefinition(m[0],!1);C.addRowDefinition(m[1],!1);Z.addControl(C,0,0);var ca=new a.a;ca.name="Dialogue Header Bar";ca.background="#cccccc";ca.thickness=0;C.addControl(ca,0,0);var L=t.a.CreateSimpleButton("closeButton","a");L.fontFamily="BabylonJSglyphs";var M=x.a.FromHexString(ca.background);var na=new x.a(1-M.r,1-M.g,1-M.b);L.color=na.toHexString();L.fontSize=Math.floor(.6*
parseInt(d.headerHeight));L.textBlock.textVerticalAlignment=q.a.VERTICAL_ALIGNMENT_CENTER;L.horizontalAlignment=q.a.HORIZONTAL_ALIGNMENT_RIGHT;L.height=L.width=d.headerHeight;L.background=ca.background;L.thickness=0;L.pointerDownAnimation=function(){};L.pointerUpAnimation=function(){L.background=ca.background};L.pointerEnterAnimation=function(){L.color=ca.background;L.background="red"};L.pointerOutAnimation=function(){L.color=na.toHexString();L.background=ca.background};L.onPointerClickObservable.add(function(){N(X.background)});
C.addControl(L,0,0);var w=new b.a;w.name="Dialogue Body";w.background="#535353";M=[.4375,.5625];w.addRowDefinition(1,!1);w.addColumnDefinition(M[0],!1);w.addColumnDefinition(M[1],!1);C.addControl(w,1,0);var ha=new b.a;ha.name="Picker Grid";ha.addRowDefinition(.85,!1);ha.addRowDefinition(.15,!1);w.addControl(ha,0,0);var S=new f;S.name="GUI Color Picker";d.pickerHeight<d.pickerWidth?S.width=.89:S.height=.89;S.value=x.a.FromHexString(d.lastColor);S.horizontalAlignment=q.a.HORIZONTAL_ALIGNMENT_CENTER;
S.verticalAlignment=q.a.VERTICAL_ALIGNMENT_CENTER;S.onPointerDownObservable.add(function(){u=S.name;T="";r(!1)});S.onValueChangedObservable.add(function(a){u==S.name&&p(a,S.name)});ha.addControl(S,0,0);C=new b.a;C.name="Dialogue Right Half";C.horizontalAlignment=q.a.HORIZONTAL_ALIGNMENT_LEFT;O=[.514,.486];C.addRowDefinition(O[0],!1);C.addRowDefinition(O[1],!1);w.addControl(C,1,1);w=new b.a;w.name="Swatches and Buttons";var ka=[.417,.583];w.addRowDefinition(1,!1);w.addColumnDefinition(ka[0],!1);w.addColumnDefinition(ka[1],
!1);C.addControl(w,0,0);var K=new b.a;K.name="New and Current Swatches";var V=[.04,.16,.64,.16];K.addRowDefinition(V[0],!1);K.addRowDefinition(V[1],!1);K.addRowDefinition(V[2],!1);K.addRowDefinition(V[3],!1);w.addControl(K,0,0);var A=new b.a;A.name="Active Swatches";A.width=.67;A.addRowDefinition(.5,!1);A.addRowDefinition(.5,!1);K.addControl(A,2,0);var la=Math.floor(parseInt(d.pickerWidth)*M[1]*ka[0]*.11);V=Math.floor(parseInt(d.pickerHeight)*m[1]*O[0]*V[1]*.5);la=d.pickerWidth>d.pickerHeight?V:la;
V=new R.a;V.text="new";V.name="New Color Label";V.color="#c0c0c0";V.fontSize=la;K.addControl(V,1,0);var ba=new a.a;ba.name="New Color Swatch";ba.background=d.lastColor;ba.thickness=0;A.addControl(ba,0,0);var X=t.a.CreateSimpleButton("currentSwatch","");X.background=d.lastColor;X.thickness=0;X.onPointerClickObservable.add(function(){var a=x.a.FromHexString(X.background);p(a,X.name);r(!1)});X.pointerDownAnimation=function(){};X.pointerUpAnimation=function(){};X.pointerEnterAnimation=function(){};X.pointerOutAnimation=
function(){};A.addControl(X,1,0);A=new a.a;A.name="Swatch Outline";A.width=.67;A.thickness=2;A.color="#404040";A.isHitTestVisible=!1;K.addControl(A,2,0);A=new R.a;A.name="Current Color Label";A.text="current";A.color="#c0c0c0";A.fontSize=la;K.addControl(A,3,0);K=new b.a;K.name="Button Grid";K.height=.8;A=1/3;K.addRowDefinition(A,!1);K.addRowDefinition(A,!1);K.addRowDefinition(A,!1);w.addControl(K,0,1);var fa=Math.floor(parseInt(d.pickerWidth)*M[1]*ka[1]*.67).toString()+"px";var ja=Math.floor(parseInt(d.pickerHeight)*
m[1]*O[0]*(parseFloat(K.height.toString())/100)*A*.7).toString()+"px";var U=parseFloat(fa)>parseFloat(ja)?Math.floor(.45*parseFloat(ja)):Math.floor(.11*parseFloat(fa));var P=t.a.CreateSimpleButton("butOK","OK");P.width=fa;P.height=ja;P.verticalAlignment=q.a.VERTICAL_ALIGNMENT_CENTER;P.thickness=2;P.color="#c0c0c0";P.fontSize=U;P.background="#535353";P.onPointerEnterObservable.add(function(){P.background="#414141"});P.onPointerOutObservable.add(function(){P.background="#535353"});P.pointerDownAnimation=
function(){P.background="515151"};P.pointerUpAnimation=function(){P.background="#414141"};P.onPointerClickObservable.add(function(){r(!1);N(ba.background)});K.addControl(P,0,0);var Q=t.a.CreateSimpleButton("butCancel","Cancel");Q.width=fa;Q.height=ja;Q.verticalAlignment=q.a.VERTICAL_ALIGNMENT_CENTER;Q.thickness=2;Q.color="#c0c0c0";Q.fontSize=U;Q.background="#535353";Q.onPointerEnterObservable.add(function(){Q.background="#414141"});Q.onPointerOutObservable.add(function(){Q.background="#535353"});
Q.pointerDownAnimation=function(){Q.background="515151"};Q.pointerUpAnimation=function(){Q.background="#414141"};Q.onPointerClickObservable.add(function(){r(!1);N(X.background)});K.addControl(Q,1,0);if(d.savedColors){var J=t.a.CreateSimpleButton("butSave","Save");J.width=fa;J.height=ja;J.verticalAlignment=q.a.VERTICAL_ALIGNMENT_CENTER;J.thickness=2;J.fontSize=U;d.savedColors.length<d.swatchLimit?(J.color="#c0c0c0",J.background="#535353"):W(J,!0);J.onPointerEnterObservable.add(function(){d.savedColors&&
d.savedColors.length<d.swatchLimit&&(J.background="#414141")});J.onPointerOutObservable.add(function(){d.savedColors&&d.savedColors.length<d.swatchLimit&&(J.background="#535353")});J.pointerDownAnimation=function(){d.savedColors&&d.savedColors.length<d.swatchLimit&&(J.background="515151")};J.pointerUpAnimation=function(){d.savedColors&&d.savedColors.length<d.swatchLimit&&(J.background="#414141")};J.onPointerClickObservable.add(function(){d.savedColors&&(0==d.savedColors.length&&ma(!0),d.savedColors.length<
d.swatchLimit&&h(ba.background,J),r(!1))});0<d.savedColors.length&&ma(!0);K.addControl(J,2,0)}m=new b.a;m.name="Dialog Lower Right";m.addRowDefinition(.02,!1);m.addRowDefinition(.63,!1);m.addRowDefinition(.21,!1);m.addRowDefinition(.14,!1);C.addControl(m,1,0);C=x.a.FromHexString(d.lastColor);w=new b.a;w.name="RGB Values";w.width=.82;w.verticalAlignment=q.a.VERTICAL_ALIGNMENT_CENTER;w.addRowDefinition(1/3,!1);w.addRowDefinition(1/3,!1);w.addRowDefinition(1/3,!1);w.addColumnDefinition(.1,!1);w.addColumnDefinition(.2,
!1);w.addColumnDefinition(.7,!1);m.addControl(w,1,0);for(O=0;O<g.length;O++)M=new R.a,M.text=g[O],M.color="#c0c0c0",M.fontSize=U,w.addControl(M,O,0);var G=new c;G.width=.83;G.height=.72;G.name="rIntField";G.fontSize=U;G.text=(255*C.r).toString();G.color="#f0f0f0";G.background="#454545";G.onFocusObservable.add(function(){u=G.name;T=G.text;r(!1)});G.onBlurObservable.add(function(){""==G.text&&(G.text="0");Y(G,"r");u==G.name&&(u="")});G.onTextChangedObservable.add(function(){u==G.name&&Y(G,"r")});w.addControl(G,
0,1);var H=new c;H.width=.83;H.height=.72;H.name="gIntField";H.fontSize=U;H.text=(255*C.g).toString();H.color="#f0f0f0";H.background="#454545";H.onFocusObservable.add(function(){u=H.name;T=H.text;r(!1)});H.onBlurObservable.add(function(){""==H.text&&(H.text="0");Y(H,"g");u==H.name&&(u="")});H.onTextChangedObservable.add(function(){u==H.name&&Y(H,"g")});w.addControl(H,1,1);var I=new c;I.width=.83;I.height=.72;I.name="bIntField";I.fontSize=U;I.text=(255*C.b).toString();I.color="#f0f0f0";I.background=
"#454545";I.onFocusObservable.add(function(){u=I.name;T=I.text;r(!1)});I.onBlurObservable.add(function(){""==I.text&&(I.text="0");Y(I,"b");u==I.name&&(u="")});I.onTextChangedObservable.add(function(){u==I.name&&Y(I,"b")});w.addControl(I,2,1);var D=new c;D.width=.95;D.height=.72;D.name="rDecField";D.fontSize=U;D.text=C.r.toString();D.color="#f0f0f0";D.background="#454545";D.onFocusObservable.add(function(){u=D.name;T=D.text;r(!1)});D.onBlurObservable.add(function(){if(0==parseFloat(D.text)||""==D.text)D.text=
"0",ia(D,"r");u==D.name&&(u="")});D.onTextChangedObservable.add(function(){u==D.name&&ia(D,"r")});w.addControl(D,0,2);var E=new c;E.width=.95;E.height=.72;E.name="gDecField";E.fontSize=U;E.text=C.g.toString();E.color="#f0f0f0";E.background="#454545";E.onFocusObservable.add(function(){u=E.name;T=E.text;r(!1)});E.onBlurObservable.add(function(){if(0==parseFloat(E.text)||""==E.text)E.text="0",ia(E,"g");u==E.name&&(u="")});E.onTextChangedObservable.add(function(){u==E.name&&ia(E,"g")});w.addControl(E,
1,2);var F=new c;F.width=.95;F.height=.72;F.name="bDecField";F.fontSize=U;F.text=C.b.toString();F.color="#f0f0f0";F.background="#454545";F.onFocusObservable.add(function(){u=F.name;T=F.text;r(!1)});F.onBlurObservable.add(function(){if(0==parseFloat(F.text)||""==F.text)F.text="0",ia(F,"b");u==F.name&&(u="")});F.onTextChangedObservable.add(function(){u==F.name&&ia(F,"b")});w.addControl(F,2,2);g=new b.a;g.name="Hex Value";g.width=.82;g.addRowDefinition(1,!1);g.addColumnDefinition(.1,!1);g.addColumnDefinition(.9,
!1);m.addControl(g,2,0);M=new R.a;M.text="#";M.color="#c0c0c0";M.fontSize=U;g.addControl(M,0,0);var v=new c;v.width=.96;v.height=.72;v.name="hexField";v.horizontalAlignment=q.a.HORIZONTAL_ALIGNMENT_CENTER;v.fontSize=U;m=d.lastColor.split("#");v.text=m[1];v.color="#f0f0f0";v.background="#454545";v.onFocusObservable.add(function(){u=v.name;T=v.text;r(!1)});v.onBlurObservable.add(function(){if(3==v.text.length){var a=v.text.split("");v.text=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]}""==v.text&&(v.text="000000",
p(x.a.FromHexString(v.text),"b"));u==v.name&&(u="")});v.onTextChangedObservable.add(function(){var a=v.text,b=/[^0-9A-F]/i.test(a);if((6<v.text.length||b)&&u==v.name)v.text=T;else{if(6>v.text.length){b=6-v.text.length;for(var c=0;c<b;c++)a="0"+a}3==v.text.length&&(a=v.text.split(""),a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]);u==v.name&&(T=v.text,p(x.a.FromHexString("#"+a),v.name))}});g.addControl(v,0,1);d.savedColors&&0<d.savedColors.length&&h("",J)})};f._Epsilon=1E-6;return f}(q.a);h.a.RegisteredTypes["BABYLON.GUI.ColorPicker"]=
n;n=function(a){function b(b){var c=a.call(this,b)||this;c.name=b;c._thickness=1;return c}Object(k.c)(b,a);Object.defineProperty(b.prototype,"thickness",{get:function(){return this._thickness},set:function(a){this._thickness!==a&&(this._thickness=a,this._markAsDirty())},enumerable:!1,configurable:!0});b.prototype._getTypeName=function(){return"Ellipse"};b.prototype._localDraw=function(a){a.save();if(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)a.shadowColor=this.shadowColor,a.shadowBlur=
this.shadowBlur,a.shadowOffsetX=this.shadowOffsetX,a.shadowOffsetY=this.shadowOffsetY;q.a.drawEllipse(this._currentMeasure.left+this._currentMeasure.width/2,this._currentMeasure.top+this._currentMeasure.height/2,this._currentMeasure.width/2-this._thickness/2,this._currentMeasure.height/2-this._thickness/2,a);this._background&&(a.fillStyle=this._background,a.fill());if(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)a.shadowBlur=0,a.shadowOffsetX=0,a.shadowOffsetY=0;this._thickness&&(this.color&&
(a.strokeStyle=this.color),a.lineWidth=this._thickness,a.stroke());a.restore()};b.prototype._additionalProcessing=function(b,c){a.prototype._additionalProcessing.call(this,b,c);this._measureForChildren.width-=2*this._thickness;this._measureForChildren.height-=2*this._thickness;this._measureForChildren.left+=this._thickness;this._measureForChildren.top+=this._thickness};b.prototype._clipForChildren=function(a){q.a.drawEllipse(this._currentMeasure.left+this._currentMeasure.width/2,this._currentMeasure.top+
this._currentMeasure.height/2,this._currentMeasure.width/2,this._currentMeasure.height/2,a);a.clip()};return b}(d("YhWr").a);h.a.RegisteredTypes["BABYLON.GUI.Ellipse"]=n;d("LePa");n=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}Object(k.c)(b,a);b.prototype._beforeRenderText=function(a){for(var b=new f.a,c="",e=0;e<a.length;e++)c+="\u2022";b.text=c;return b};return b}(c);h.a.RegisteredTypes["BABYLON.GUI.InputPassword"]=n;d("tQRj");d("aIpi");d("5ScG");d("mzVJ");d("GlQl");d("KTXu");
d("7hGX");n=function(a){function b(b){var c=a.call(this,b)||this;c.name=b;c._cellWidth=20;c._cellHeight=20;c._minorLineTickness=1;c._minorLineColor="DarkGray";c._majorLineTickness=2;c._majorLineColor="White";c._majorLineFrequency=5;c._background="Black";c._displayMajorLines=!0;c._displayMinorLines=!0;return c}Object(k.c)(b,a);Object.defineProperty(b.prototype,"displayMinorLines",{get:function(){return this._displayMinorLines},set:function(a){this._displayMinorLines!==a&&(this._displayMinorLines=a,
this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"displayMajorLines",{get:function(){return this._displayMajorLines},set:function(a){this._displayMajorLines!==a&&(this._displayMajorLines=a,this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"background",{get:function(){return this._background},set:function(a){this._background!==a&&(this._background=a,this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,
"cellWidth",{get:function(){return this._cellWidth},set:function(a){this._cellWidth=a;this._markAsDirty()},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"cellHeight",{get:function(){return this._cellHeight},set:function(a){this._cellHeight=a;this._markAsDirty()},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"minorLineTickness",{get:function(){return this._minorLineTickness},set:function(a){this._minorLineTickness=a;this._markAsDirty()},enumerable:!1,configurable:!0});
Object.defineProperty(b.prototype,"minorLineColor",{get:function(){return this._minorLineColor},set:function(a){this._minorLineColor=a;this._markAsDirty()},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"majorLineTickness",{get:function(){return this._majorLineTickness},set:function(a){this._majorLineTickness=a;this._markAsDirty()},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"majorLineColor",{get:function(){return this._majorLineColor},set:function(a){this._majorLineColor=
a;this._markAsDirty()},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"majorLineFrequency",{get:function(){return this._majorLineFrequency},set:function(a){this._majorLineFrequency=a;this._markAsDirty()},enumerable:!1,configurable:!0});b.prototype._draw=function(a,b){a.save();this._applyStates(a);if(this._isEnabled){this._background&&(a.fillStyle=this._background,a.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height));
b=this._currentMeasure.width/this._cellWidth;var c=this._currentMeasure.height/this._cellHeight,e=this._currentMeasure.left+this._currentMeasure.width/2,d=this._currentMeasure.top+this._currentMeasure.height/2;if(this._displayMinorLines){a.strokeStyle=this._minorLineColor;a.lineWidth=this._minorLineTickness;for(var f=-b/2;f<b/2;f++){var g=e+f*this.cellWidth;a.beginPath();a.moveTo(g,this._currentMeasure.top);a.lineTo(g,this._currentMeasure.top+this._currentMeasure.height);a.stroke()}for(f=-c/2;f<c/
2;f++)g=d+f*this.cellHeight,a.beginPath(),a.moveTo(this._currentMeasure.left,g),a.lineTo(this._currentMeasure.left+this._currentMeasure.width,g),a.stroke()}if(this._displayMajorLines){a.strokeStyle=this._majorLineColor;a.lineWidth=this._majorLineTickness;for(f=-b/2+this._majorLineFrequency;f<b/2;f+=this._majorLineFrequency)g=e+f*this.cellWidth,a.beginPath(),a.moveTo(g,this._currentMeasure.top),a.lineTo(g,this._currentMeasure.top+this._currentMeasure.height),a.stroke();for(f=-c/2+this._majorLineFrequency;f<
c/2;f+=this._majorLineFrequency)g=d+f*this.cellHeight,a.moveTo(this._currentMeasure.left,g),a.lineTo(this._currentMeasure.left+this._currentMeasure.width,g),a.closePath(),a.stroke()}}a.restore()};b.prototype._getTypeName=function(){return"DisplayGrid"};return b}(q.a);h.a.RegisteredTypes["BABYLON.GUI.DisplayGrid"]=n;d("7N4q");d("dMrP");d("cC23");d("VWNO");d("K1g3");d("itOL")},LePa:function(h,n,d){d.d(n,"a",function(){return q});var t=d("mrSG"),k=d("ps+7"),m=d("YKqZ");h=d("3C+b");d=d("WHS4");var q=
function(d){function g(e,f){void 0===f&&(f=null);var c=d.call(this,e)||this;c.name=e;c._workingCanvas=null;c._loaded=!1;c._stretch=g.STRETCH_FILL;c._autoScale=!1;c._sourceLeft=0;c._sourceTop=0;c._sourceWidth=0;c._sourceHeight=0;c._svgAttributesComputationCompleted=!1;c._isSVG=!1;c._cellWidth=0;c._cellHeight=0;c._cellId=-1;c._populateNinePatchSlicesFromImage=!1;c._imageDataCache={data:null,key:""};c.onImageLoadedObservable=new k.a;c.onSVGAttributesComputedObservable=new k.a;c.source=f;return c}Object(t.c)(g,
d);Object.defineProperty(g.prototype,"isLoaded",{get:function(){return this._loaded},enumerable:!1,configurable:!0});Object.defineProperty(g.prototype,"populateNinePatchSlicesFromImage",{get:function(){return this._populateNinePatchSlicesFromImage},set:function(e){this._populateNinePatchSlicesFromImage!==e&&(this._populateNinePatchSlicesFromImage=e)&&this._loaded&&this._extractNinePatchSliceDataFromImage()},enumerable:!1,configurable:!0});Object.defineProperty(g.prototype,"detectPointerOnOpaqueOnly",
{get:function(){return this._detectPointerOnOpaqueOnly},set:function(e){this._detectPointerOnOpaqueOnly!==e&&(this._detectPointerOnOpaqueOnly=e)},enumerable:!1,configurable:!0});Object.defineProperty(g.prototype,"sliceLeft",{get:function(){return this._sliceLeft},set:function(e){this._sliceLeft!==e&&(this._sliceLeft=e,this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(g.prototype,"sliceRight",{get:function(){return this._sliceRight},set:function(e){this._sliceRight!==e&&(this._sliceRight=
e,this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(g.prototype,"sliceTop",{get:function(){return this._sliceTop},set:function(e){this._sliceTop!==e&&(this._sliceTop=e,this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(g.prototype,"sliceBottom",{get:function(){return this._sliceBottom},set:function(e){this._sliceBottom!==e&&(this._sliceBottom=e,this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(g.prototype,"sourceLeft",{get:function(){return this._sourceLeft},
set:function(e){this._sourceLeft!==e&&(this._sourceLeft=e,this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(g.prototype,"sourceTop",{get:function(){return this._sourceTop},set:function(e){this._sourceTop!==e&&(this._sourceTop=e,this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(g.prototype,"sourceWidth",{get:function(){return this._sourceWidth},set:function(e){this._sourceWidth!==e&&(this._sourceWidth=e,this._markAsDirty())},enumerable:!1,configurable:!0});
Object.defineProperty(g.prototype,"sourceHeight",{get:function(){return this._sourceHeight},set:function(e){this._sourceHeight!==e&&(this._sourceHeight=e,this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(g.prototype,"isSVG",{get:function(){return this._isSVG},enumerable:!1,configurable:!0});Object.defineProperty(g.prototype,"svgAttributesComputationCompleted",{get:function(){return this._svgAttributesComputationCompleted},enumerable:!1,configurable:!0});Object.defineProperty(g.prototype,
"autoScale",{get:function(){return this._autoScale},set:function(e){this._autoScale!==e&&(this._autoScale=e)&&this._loaded&&this.synchronizeSizeWithContent()},enumerable:!1,configurable:!0});Object.defineProperty(g.prototype,"stretch",{get:function(){return this._stretch},set:function(e){this._stretch!==e&&(this._stretch=e,this._markAsDirty())},enumerable:!1,configurable:!0});g.prototype._rotate90=function(e,f){void 0===f&&(f=!1);var c=document.createElement("canvas"),a=c.getContext("2d"),b=this._domImage.width,
d=this._domImage.height;c.width=d;c.height=b;a.translate(c.width/2,c.height/2);a.rotate(e*Math.PI/2);a.drawImage(this._domImage,0,0,b,d,-b/2,-d/2,b,d);c=c.toDataURL("image/jpg");c=new g(this.name+"rotated",c);f&&(c._stretch=this._stretch,c._autoScale=this._autoScale,c._cellId=this._cellId,c._cellWidth=e%1?this._cellHeight:this._cellWidth,c._cellHeight=e%1?this._cellWidth:this._cellHeight);this._handleRotationForSVGImage(this,c,e);this._imageDataCache.data=null;return c};g.prototype._handleRotationForSVGImage=
function(e,d,c){var a=this;e._isSVG&&(e._svgAttributesComputationCompleted?(this._rotate90SourceProperties(e,d,c),this._markAsDirty()):e.onSVGAttributesComputedObservable.addOnce(function(){a._rotate90SourceProperties(e,d,c);a._markAsDirty()}))};g.prototype._rotate90SourceProperties=function(e,d,c){var a=e.sourceLeft;var b=e.sourceTop,f=e.domImage.width;var g=e.domImage.height;var k=a,h=b,l=e.sourceWidth,m=e.sourceHeight;if(0!=c){e=0>c?-1:1;c%=4;for(var q=0;q<Math.abs(c);++q)k=-(b-g/2)*e+g/2,h=(a-
f/2)*e+f/2,a=[m,l],l=a[0],m=a[1],0>c?h-=m:k-=l,a=k,b=h,g=[g,f],f=g[0],g=g[1]}d.sourceLeft=k;d.sourceTop=h;d.sourceWidth=l;d.sourceHeight=m};Object.defineProperty(g.prototype,"domImage",{get:function(){return this._domImage},set:function(e){var d=this;this._domImage=e;this._loaded=!1;this._imageDataCache.data=null;this._domImage.width?this._onImageLoaded():this._domImage.onload=function(){d._onImageLoaded()}},enumerable:!1,configurable:!0});g.prototype._onImageLoaded=function(){this._imageDataCache.data=
null;this._imageWidth=this._domImage.width;this._imageHeight=this._domImage.height;this._loaded=!0;this._populateNinePatchSlicesFromImage&&this._extractNinePatchSliceDataFromImage();this._autoScale&&this.synchronizeSizeWithContent();this.onImageLoadedObservable.notifyObservers(this);this._markAsDirty()};g.prototype._extractNinePatchSliceDataFromImage=function(){this._workingCanvas||(this._workingCanvas=document.createElement("canvas"));var e=this._workingCanvas,d=e.getContext("2d"),c=this._domImage.width,
a=this._domImage.height;e.width=c;e.height=a;d.drawImage(this._domImage,0,0,c,a);e=d.getImageData(0,0,c,a);this._sliceRight=this._sliceLeft=-1;for(var b=0;b<c;b++)if(d=e.data[4*b+3],127<d&&-1===this._sliceLeft)this._sliceLeft=b;else if(127>d&&-1<this._sliceLeft){this._sliceRight=b;break}this._sliceBottom=this._sliceTop=-1;for(b=0;b<a;b++)if(d=e.data[b*c*4+3],127<d&&-1===this._sliceTop)this._sliceTop=b;else if(127>d&&-1<this._sliceTop){this._sliceBottom=b;break}};Object.defineProperty(g.prototype,
"source",{set:function(e){var d=this;this._source!==e&&(this._loaded=!1,this._source=e,this._imageDataCache.data=null,e&&(e=this._svgCheck(e)),this._domImage=document.createElement("img"),this._domImage.onload=function(){d._onImageLoaded()},e&&(m.b.SetCorsBehavior(e,this._domImage),this._domImage.src=e))},enumerable:!1,configurable:!0});g.prototype._svgCheck=function(e){var d=this;if(window.SVGSVGElement&&-1!==e.search(/.svg#/gi)&&e.indexOf("#")===e.lastIndexOf("#")){this._isSVG=!0;var c=e.split("#")[0],
a=e.split("#")[1],b=document.body.querySelector('object[data="'+c+'"]');if(b){var g=b.contentDocument;if(g&&g.documentElement){var k=g.documentElement.getAttribute("viewBox"),h=Number(g.documentElement.getAttribute("width")),m=Number(g.documentElement.getAttribute("height"));if(g.getElementById(a)&&k&&h&&m)return this._getSVGAttribs(b,a),e}b.addEventListener("load",function(){d._getSVGAttribs(b,a)})}else e=document.createElement("object"),e.data=c,e.type="image/svg+xml",e.width="0%",e.height="0%",
document.body.appendChild(e),e.onload=function(){var b=document.body.querySelector('object[data="'+c+'"]');b&&d._getSVGAttribs(b,a)};return c}return e};g.prototype._getSVGAttribs=function(e,d){var c=e.contentDocument;if(c&&c.documentElement){var a=c.documentElement.getAttribute("viewBox");e=Number(c.documentElement.getAttribute("width"));var b=Number(c.documentElement.getAttribute("height"));d=c.getElementById(d);if(a&&e&&b&&d){c=Number(a.split(" ")[2]);a=Number(a.split(" ")[3]);var f=d.getBBox(),
g=1,k=1,h=0,l=0;d.transform&&d.transform.baseVal.consolidate()&&(g=d.transform.baseVal.consolidate().matrix.a,k=d.transform.baseVal.consolidate().matrix.d,h=d.transform.baseVal.consolidate().matrix.e,l=d.transform.baseVal.consolidate().matrix.f);this.sourceLeft=(g*f.x+h)*e/c;this.sourceTop=(k*f.y+l)*b/a;this.sourceWidth=e/c*g*f.width;this.sourceHeight=b/a*k*f.height;this._svgAttributesComputationCompleted=!0;this.onSVGAttributesComputedObservable.notifyObservers(this)}}};Object.defineProperty(g.prototype,
"cellWidth",{get:function(){return this._cellWidth},set:function(e){this._cellWidth!==e&&(this._cellWidth=e,this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(g.prototype,"cellHeight",{get:function(){return this._cellHeight},set:function(e){this._cellHeight!==e&&(this._cellHeight=e,this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(g.prototype,"cellId",{get:function(){return this._cellId},set:function(e){this._cellId!==e&&(this._cellId=e,this._markAsDirty())},
enumerable:!1,configurable:!0});g.prototype.contains=function(e,f){if(!d.prototype.contains.call(this,e,f))return!1;if(!this._detectPointerOnOpaqueOnly||!this._workingCanvas)return!0;var c=this._currentMeasure.width|0,a=this._currentMeasure.height|0,b=c+"_"+a,g=this._imageDataCache.data;g&&this._imageDataCache.key===b||(g=this._workingCanvas.getContext("2d"),this._imageDataCache.data=g=g.getImageData(0,0,c,a).data,this._imageDataCache.key=b);e=e-this._currentMeasure.left|0;f=f-this._currentMeasure.top|
0;return 0<g[4*(e+f*c)+3]};g.prototype._getTypeName=function(){return"Image"};g.prototype.synchronizeSizeWithContent=function(){this._loaded&&(this.width=this._domImage.width+"px",this.height=this._domImage.height+"px")};g.prototype._processMeasures=function(e,f){if(this._loaded)switch(this._stretch){case g.STRETCH_EXTEND:this._autoScale&&this.synchronizeSizeWithContent(),this.parent&&this.parent.parent&&(this.parent.adaptWidthToChildren=!0,this.parent.adaptHeightToChildren=!0)}d.prototype._processMeasures.call(this,
e,f)};g.prototype._prepareWorkingCanvasForOpaqueDetection=function(){if(this._detectPointerOnOpaqueOnly){this._workingCanvas||(this._workingCanvas=document.createElement("canvas"));var e=this._workingCanvas,d=this._currentMeasure.width,c=this._currentMeasure.height,a=e.getContext("2d");e.width=d;e.height=c;a.clearRect(0,0,d,c)}};g.prototype._drawImage=function(e,d,c,a,b,g,k,h,m){e.drawImage(this._domImage,d,c,a,b,g,k,h,m);this._detectPointerOnOpaqueOnly&&(e=this._workingCanvas.getContext("2d"),e.drawImage(this._domImage,
d,c,a,b,g-this._currentMeasure.left,k-this._currentMeasure.top,h,m))};g.prototype._draw=function(e){e.save();if(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)e.shadowColor=this.shadowColor,e.shadowBlur=this.shadowBlur,e.shadowOffsetX=this.shadowOffsetX,e.shadowOffsetY=this.shadowOffsetY;if(-1==this.cellId){var d=this._sourceLeft;var c=this._sourceTop;var a=this._sourceWidth?this._sourceWidth:this._imageWidth;var b=this._sourceHeight?this._sourceHeight:this._imageHeight}else d=this._domImage.naturalWidth/
this.cellWidth,c=this.cellId/d>>0,d=this.cellId%d*this.cellWidth,c*=this.cellHeight,a=this.cellWidth,b=this.cellHeight;this._prepareWorkingCanvasForOpaqueDetection();this._applyStates(e);if(this._loaded)switch(this._stretch){case g.STRETCH_NONE:this._drawImage(e,d,c,a,b,this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height);break;case g.STRETCH_FILL:this._drawImage(e,d,c,a,b,this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,
this._currentMeasure.height);break;case g.STRETCH_UNIFORM:var k=Math.min(this._currentMeasure.width/a,this._currentMeasure.height/b);this._drawImage(e,d,c,a,b,this._currentMeasure.left+(this._currentMeasure.width-a*k)/2,this._currentMeasure.top+(this._currentMeasure.height-b*k)/2,a*k,b*k);break;case g.STRETCH_EXTEND:this._drawImage(e,d,c,a,b,this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height);break;case g.STRETCH_NINE_PATCH:this._renderNinePatch(e)}e.restore()};
g.prototype._renderCornerPatch=function(e,d,c,a,b,g,k){this._drawImage(e,d,c,a,b,this._currentMeasure.left+g,this._currentMeasure.top+k,a,b)};g.prototype._renderNinePatch=function(e){var d=this._imageHeight,c=this._sliceLeft,a=this._sliceTop,b=this._imageHeight-this._sliceBottom,g=this._imageWidth-this._sliceRight,k=0,h=0;this._populateNinePatchSlicesFromImage&&(h=k=1,d-=2,--c,--a,--b,--g);var m=this._sliceRight-this._sliceLeft,l=this._currentMeasure.width-g-this.sliceLeft,r=this._currentMeasure.height-
d+this._sliceBottom;this._renderCornerPatch(e,k,h,c,a,0,0);this._renderCornerPatch(e,k,this._sliceBottom,c,d-this._sliceBottom,0,r);this._renderCornerPatch(e,this._sliceRight,h,g,a,this._currentMeasure.width-g,0);this._renderCornerPatch(e,this._sliceRight,this._sliceBottom,g,d-this._sliceBottom,this._currentMeasure.width-g,r);this._drawImage(e,this._sliceLeft,this._sliceTop,m,this._sliceBottom-this._sliceTop,this._currentMeasure.left+c,this._currentMeasure.top+a,l,r-a);this._drawImage(e,k,this._sliceTop,
c,this._sliceBottom-this._sliceTop,this._currentMeasure.left,this._currentMeasure.top+a,c,r-a);this._drawImage(e,this._sliceRight,this._sliceTop,c,this._sliceBottom-this._sliceTop,this._currentMeasure.left+this._currentMeasure.width-g,this._currentMeasure.top+a,c,r-a);this._drawImage(e,this._sliceLeft,h,m,a,this._currentMeasure.left+c,this._currentMeasure.top,l,a);this._drawImage(e,this._sliceLeft,this._sliceBottom,m,b,this._currentMeasure.left+c,this._currentMeasure.top+r,l,b)};g.prototype.dispose=
function(){d.prototype.dispose.call(this);this.onImageLoadedObservable.clear();this.onSVGAttributesComputedObservable.clear()};g.STRETCH_NONE=0;g.STRETCH_FILL=1;g.STRETCH_UNIFORM=2;g.STRETCH_EXTEND=3;g.STRETCH_NINE_PATCH=4;return g}(h.a);d.a.RegisteredTypes["BABYLON.GUI.Image"]=q},"XZJ+":function(h,n,d){var t=d("waC4");(function(){function d(d){this.texture=d;this._captureRenderTime=!1;this._renderTime=new t.a;this._captureLayoutTime=!1;this._layoutTime=new t.a;this._onEndLayoutObserver=this._onBeginLayoutObserver=
this._onEndRenderObserver=this._onBeginRenderObserver=null}Object.defineProperty(d.prototype,"renderTimeCounter",{get:function(){return this._renderTime},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"layoutTimeCounter",{get:function(){return this._layoutTime},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"captureRenderTime",{get:function(){return this._captureRenderTime},set:function(d){var k=this;d!==this._captureRenderTime&&((this._captureRenderTime=d)?(this._onBeginRenderObserver=
this.texture.onBeginRenderObservable.add(function(){k._renderTime.beginMonitoring()}),this._onEndRenderObserver=this.texture.onEndRenderObservable.add(function(){k._renderTime.endMonitoring(!0)})):(this.texture.onBeginRenderObservable.remove(this._onBeginRenderObserver),this._onBeginRenderObserver=null,this.texture.onEndRenderObservable.remove(this._onEndRenderObserver),this._onEndRenderObserver=null))},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"captureLayoutTime",{get:function(){return this._captureLayoutTime},
set:function(d){var k=this;d!==this._captureLayoutTime&&((this._captureLayoutTime=d)?(this._onBeginLayoutObserver=this.texture.onBeginLayoutObservable.add(function(){k._layoutTime.beginMonitoring()}),this._onEndLayoutObserver=this.texture.onEndLayoutObservable.add(function(){k._layoutTime.endMonitoring(!0)})):(this.texture.onBeginLayoutObservable.remove(this._onBeginLayoutObserver),this._onBeginLayoutObserver=null,this.texture.onEndLayoutObservable.remove(this._onEndLayoutObserver),this._onEndLayoutObserver=
null))},enumerable:!1,configurable:!0});d.prototype.dispose=function(){this.texture.onBeginRenderObservable.remove(this._onBeginRenderObserver);this._onBeginRenderObserver=null;this.texture.onEndRenderObservable.remove(this._onEndRenderObserver);this._onEndRenderObserver=null;this.texture.onBeginLayoutObservable.remove(this._onBeginLayoutObserver);this._onBeginLayoutObserver=null;this.texture.onEndLayoutObservable.remove(this._onEndLayoutObserver);this.texture=this._onEndLayoutObserver=null};return d})()},
YhWr:function(h,n,d){d.d(n,"a",function(){return q});var t=d("mrSG"),k=d("uyO6");h=d("3C+b");var m=d("+ach");d=d("WHS4");var q=function(d){function g(e){var f=d.call(this,e)||this;f.name=e;f._children=[];f._measureForChildren=m.a.Empty();f._background="";f._adaptWidthToChildren=!1;f._adaptHeightToChildren=!1;f.logLayoutCycleErrors=!1;f.maxLayoutCycle=3;return f}Object(t.c)(g,d);Object.defineProperty(g.prototype,"adaptHeightToChildren",{get:function(){return this._adaptHeightToChildren},set:function(e){if(this._adaptHeightToChildren!==
e){if(this._adaptHeightToChildren=e)this.height="100%";this._markAsDirty()}},enumerable:!1,configurable:!0});Object.defineProperty(g.prototype,"adaptWidthToChildren",{get:function(){return this._adaptWidthToChildren},set:function(e){if(this._adaptWidthToChildren!==e){if(this._adaptWidthToChildren=e)this.width="100%";this._markAsDirty()}},enumerable:!1,configurable:!0});Object.defineProperty(g.prototype,"background",{get:function(){return this._background},set:function(e){this._background!==e&&(this._background=
e,this._markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(g.prototype,"children",{get:function(){return this._children},enumerable:!1,configurable:!0});g.prototype._getTypeName=function(){return"Container"};g.prototype._flagDescendantsAsMatrixDirty=function(){for(var e=0,d=this.children;e<d.length;e++)d[e]._markMatrixAsDirty()};g.prototype.getChildByName=function(e){for(var d=0,c=this.children;d<c.length;d++){var a=c[d];if(a.name===e)return a}return null};g.prototype.getChildByType=
function(d,f){d=0;for(var c=this.children;d<c.length;d++){var a=c[d];if(a.typeName===f)return a}return null};g.prototype.containsControl=function(d){return-1!==this.children.indexOf(d)};g.prototype.addControl=function(d){if(!d||-1!==this._children.indexOf(d))return this;d._link(this._host);d._markAllAsDirty();this._reOrderControl(d);this._markAsDirty();return this};g.prototype.clearControls=function(){for(var d=0,f=this.children.slice();d<f.length;d++)this.removeControl(f[d]);return this};g.prototype.removeControl=
function(d){var e=this._children.indexOf(d);-1!==e&&(this._children.splice(e,1),d.parent=null);d.linkWithMesh(null);this._host&&this._host._cleanControlAfterRemoval(d);this._markAsDirty();return this};g.prototype._reOrderControl=function(d){this.removeControl(d);for(var e=!1,c=0;c<this._children.length;c++)if(this._children[c].zIndex>d.zIndex){this._children.splice(c,0,d);e=!0;break}e||this._children.push(d);d.parent=this;this._markAsDirty()};g.prototype._offsetLeft=function(e){d.prototype._offsetLeft.call(this,
e);for(var f=0,c=this._children;f<c.length;f++)c[f]._offsetLeft(e)};g.prototype._offsetTop=function(e){d.prototype._offsetTop.call(this,e);for(var f=0,c=this._children;f<c.length;f++)c[f]._offsetTop(e)};g.prototype._markAllAsDirty=function(){d.prototype._markAllAsDirty.call(this);for(var e=0;e<this._children.length;e++)this._children[e]._markAllAsDirty()};g.prototype._localDraw=function(d){if(this._background){d.save();if(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)d.shadowColor=this.shadowColor,
d.shadowBlur=this.shadowBlur,d.shadowOffsetX=this.shadowOffsetX,d.shadowOffsetY=this.shadowOffsetY;d.fillStyle=this._background;d.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height);d.restore()}};g.prototype._link=function(e){d.prototype._link.call(this,e);for(var f=0,c=this._children;f<c.length;f++)c[f]._link(e)};g.prototype._beforeLayout=function(){};g.prototype._processMeasures=function(e,f){if(this._isDirty||!this._cachedParentMeasure.isEqualsTo(e))d.prototype._processMeasures.call(this,
e,f),this._evaluateClippingState(e)};g.prototype._layout=function(d,f){if(!this.isDirty&&(!this.isVisible||this.notRenderable))return!1;this.host._numLayoutCalls++;this._isDirty&&this._currentMeasure.transformToRef(this._transformMatrix,this._prevCurrentMeasureTransformedIntoGlobalSpace);var c=0;f.save();this._applyStates(f);this._beforeLayout();do{var a=-1,b=-1;this._rebuildLayout=!1;this._processMeasures(d,f);if(!this._isClipped){for(var e=0,g=this._children;e<g.length;e++){var h=g[e];h._tempParentMeasure.copyFrom(this._measureForChildren);
h._layout(this._measureForChildren,f)&&(this.adaptWidthToChildren&&h._width.isPixel&&(a=Math.max(a,h._currentMeasure.width+h.paddingLeftInPixels+h.paddingRightInPixels)),this.adaptHeightToChildren&&h._height.isPixel&&(b=Math.max(b,h._currentMeasure.height+h.paddingTopInPixels+h.paddingBottomInPixels)))}this.adaptWidthToChildren&&0<=a&&(a+=this.paddingLeftInPixels+this.paddingRightInPixels,this.width!==a+"px"&&(this.width=a+"px",this._rebuildLayout=!0));this.adaptHeightToChildren&&0<=b&&(b+=this.paddingTopInPixels+
this.paddingBottomInPixels,this.height!==b+"px"&&(this.height=b+"px",this._rebuildLayout=!0));this._postMeasure()}c++}while(this._rebuildLayout&&c<this.maxLayoutCycle);3<=c&&this.logLayoutCycleErrors&&k.a.Error("Layout cycle detected in GUI (Container name="+this.name+", uniqueId="+this.uniqueId+")");f.restore();this._isDirty&&(this.invalidateRect(),this._isDirty=!1);return!0};g.prototype._postMeasure=function(){};g.prototype._draw=function(d,f){this._localDraw(d);this.clipChildren&&this._clipForChildren(d);
for(var c=0,a=this._children;c<a.length;c++){var b=a[c];f&&!b._intersectsRect(f)||b._render(d,f)}};g.prototype.getDescendantsToRef=function(d,f,c){void 0===f&&(f=!1);if(this.children)for(var a=0;a<this.children.length;a++){var b=this.children[a];c&&!c(b)||d.push(b);f||b.getDescendantsToRef(d,!1,c)}};g.prototype._processPicking=function(e,f,c,a,b,g,k,h){if(!this._isEnabled||!this.isVisible||this.notRenderable||!d.prototype.contains.call(this,e,f))return!1;for(var m=this._children.length-1;0<=m;m--){var l=
this._children[m];if(l._processPicking(e,f,c,a,b,g,k,h))return l.hoverCursor&&this._host._changeCursor(l.hoverCursor),!0}return this.isHitTestVisible?this._processObservables(a,e,f,c,b,g,k,h):!1};g.prototype._additionalProcessing=function(e,f){d.prototype._additionalProcessing.call(this,e,f);this._measureForChildren.copyFrom(this._currentMeasure)};g.prototype.dispose=function(){d.prototype.dispose.call(this);for(var e=this.children.length-1;0<=e;e--)this.children[e].dispose()};return g}(h.a);d.a.RegisteredTypes["BABYLON.GUI.Container"]=
q},ZCXe:function(h,n,d){d.d(n,"a",function(){return r});var t=d("mrSG"),k=d("ps+7"),m=d("/SR9"),q=d("YKqZ"),y=d("98Qd"),g=d("fppW"),e=d("jSHE"),f=d("kdvT"),c=d("aCSs");h=d("WrCc");var a=d("psaO"),b=d("YhWr"),R=d("m0NF"),x=d("+ach"),aa=d("BOQG"),N=d("JIAX"),l=d("Xeau"),r=function(d){function h(a,f,h,l,m,r,q){void 0===f&&(f=0);void 0===h&&(h=0);void 0===m&&(m=!1);void 0===r&&(r=c.a.NEAREST_SAMPLINGMODE);var p=d.call(this,a,{width:f,height:h},l,m,r,aa.a.TEXTUREFORMAT_RGBA,q)||this;p._isDirty=!1;p._rootContainer=
new b.a("root");p._lastControlOver={};p._lastControlDown={};p._capturingControl={};p._linkedControls=[];p._isFullscreen=!1;p._fullscreenViewport=new N.a(0,0,1,1);p._idealWidth=0;p._idealHeight=0;p._useSmallestIdeal=!1;p._renderAtIdealSize=!1;p._blockNextFocusCheck=!1;p._renderScale=1;p._cursorChanged=!1;p._defaultMousePointerId=0;p._numLayoutCalls=0;p._numRenderCalls=0;p._clipboardData="";p.onClipboardObservable=new k.a;p.onControlPickedObservable=new k.a;p.onBeginLayoutObservable=new k.a;p.onEndLayoutObservable=
new k.a;p.onBeginRenderObservable=new k.a;p.onEndRenderObservable=new k.a;p.premulAlpha=!1;p.applyYInversionOnUpdate=!0;p._useInvalidateRectOptimization=!0;p._invalidatedRectangle=null;p._clearMeasure=new x.a(0,0,0,0);p.onClipboardCopy=function(a){var b=new g.b(g.a.COPY,a);p.onClipboardObservable.notifyObservers(b);a.preventDefault()};p.onClipboardCut=function(a){var b=new g.b(g.a.CUT,a);p.onClipboardObservable.notifyObservers(b);a.preventDefault()};p.onClipboardPaste=function(a){var b=new g.b(g.a.PASTE,
a);p.onClipboardObservable.notifyObservers(b);a.preventDefault()};l=p.getScene();if(!l||!p._texture)return p;p._rootElement=l.getEngine().getInputElement();p._renderObserver=l.onBeforeCameraRenderObservable.add(function(a){return p._checkUpdate(a)});p._preKeyboardObserver=l.onPreKeyboardObservable.add(function(a){p._focusedControl&&(a.type===e.a.KEYDOWN&&p._focusedControl.processKeyboard(a.event),a.skipOnPointerObservable=!0)});p._rootContainer._link(p);p.hasAlpha=!0;f&&h||(p._resizeObserver=l.getEngine().onResizeObservable.add(function(){return p._onResize()}),
p._onResize());p._texture.isReady=!0;return p}Object(t.c)(h,d);Object.defineProperty(h.prototype,"numLayoutCalls",{get:function(){return this._numLayoutCalls},enumerable:!1,configurable:!0});Object.defineProperty(h.prototype,"numRenderCalls",{get:function(){return this._numRenderCalls},enumerable:!1,configurable:!0});Object.defineProperty(h.prototype,"renderScale",{get:function(){return this._renderScale},set:function(a){a!==this._renderScale&&(this._renderScale=a,this._onResize())},enumerable:!1,
configurable:!0});Object.defineProperty(h.prototype,"background",{get:function(){return this._background},set:function(a){this._background!==a&&(this._background=a,this.markAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(h.prototype,"idealWidth",{get:function(){return this._idealWidth},set:function(a){this._idealWidth!==a&&(this._idealWidth=a,this.markAsDirty(),this._rootContainer._markAllAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(h.prototype,"idealHeight",
{get:function(){return this._idealHeight},set:function(a){this._idealHeight!==a&&(this._idealHeight=a,this.markAsDirty(),this._rootContainer._markAllAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(h.prototype,"useSmallestIdeal",{get:function(){return this._useSmallestIdeal},set:function(a){this._useSmallestIdeal!==a&&(this._useSmallestIdeal=a,this.markAsDirty(),this._rootContainer._markAllAsDirty())},enumerable:!1,configurable:!0});Object.defineProperty(h.prototype,"renderAtIdealSize",
{get:function(){return this._renderAtIdealSize},set:function(a){this._renderAtIdealSize!==a&&(this._renderAtIdealSize=a,this._onResize())},enumerable:!1,configurable:!0});Object.defineProperty(h.prototype,"idealRatio",{get:function(){var a=0,b=0;this._idealWidth&&(a=this.getSize().width/this._idealWidth);this._idealHeight&&(b=this.getSize().height/this._idealHeight);return this._useSmallestIdeal&&this._idealWidth&&this._idealHeight?window.innerWidth<window.innerHeight?a:b:this._idealWidth?a:this._idealHeight?
b:1},enumerable:!1,configurable:!0});Object.defineProperty(h.prototype,"layer",{get:function(){return this._layerToDispose},enumerable:!1,configurable:!0});Object.defineProperty(h.prototype,"rootContainer",{get:function(){return this._rootContainer},enumerable:!1,configurable:!0});h.prototype.getChildren=function(){return[this._rootContainer]};h.prototype.getDescendants=function(a,b){return this._rootContainer.getDescendants(a,b)};Object.defineProperty(h.prototype,"focusedControl",{get:function(){return this._focusedControl},
set:function(a){if(this._focusedControl!=a){if(this._focusedControl)this._focusedControl.onBlur();if(a)a.onFocus();this._focusedControl=a}},enumerable:!1,configurable:!0});Object.defineProperty(h.prototype,"isForeground",{get:function(){return this.layer?!this.layer.isBackground:!0},set:function(a){this.layer&&this.layer.isBackground!==!a&&(this.layer.isBackground=!a)},enumerable:!1,configurable:!0});Object.defineProperty(h.prototype,"clipboardData",{get:function(){return this._clipboardData},set:function(a){this._clipboardData=
a},enumerable:!1,configurable:!0});h.prototype.getClassName=function(){return"AdvancedDynamicTexture"};h.prototype.executeOnAllControls=function(a,b){b||(b=this._rootContainer);a(b);var c=0;for(b=b.children;c<b.length;c++){var d=b[c];d.children?this.executeOnAllControls(a,d):a(d)}};Object.defineProperty(h.prototype,"useInvalidateRectOptimization",{get:function(){return this._useInvalidateRectOptimization},set:function(a){this._useInvalidateRectOptimization=a},enumerable:!1,configurable:!0});h.prototype.invalidateRect=
function(a,b,c,d){this._useInvalidateRectOptimization&&(this._invalidatedRectangle?(c=Math.ceil(Math.max(this._invalidatedRectangle.left+this._invalidatedRectangle.width-1,c)),d=Math.ceil(Math.max(this._invalidatedRectangle.top+this._invalidatedRectangle.height-1,d)),this._invalidatedRectangle.left=Math.floor(Math.min(this._invalidatedRectangle.left,a)),this._invalidatedRectangle.top=Math.floor(Math.min(this._invalidatedRectangle.top,b)),this._invalidatedRectangle.width=c-this._invalidatedRectangle.left+
1,this._invalidatedRectangle.height=d-this._invalidatedRectangle.top+1):this._invalidatedRectangle=new x.a(a,b,c-a+1,d-b+1))};h.prototype.markAsDirty=function(){this._isDirty=!0};h.prototype.createStyle=function(){return new R.a(this)};h.prototype.addControl=function(a){this._rootContainer.addControl(a);return this};h.prototype.removeControl=function(a){this._rootContainer.removeControl(a);return this};h.prototype.dispose=function(){var a=this.getScene();a&&(this._rootElement=null,a.onBeforeCameraRenderObservable.remove(this._renderObserver),
this._resizeObserver&&a.getEngine().onResizeObservable.remove(this._resizeObserver),this._pointerMoveObserver&&a.onPrePointerObservable.remove(this._pointerMoveObserver),this._pointerObserver&&a.onPointerObservable.remove(this._pointerObserver),this._preKeyboardObserver&&a.onPreKeyboardObservable.remove(this._preKeyboardObserver),this._canvasPointerOutObserver&&a.getEngine().onCanvasPointerOutObservable.remove(this._canvasPointerOutObserver),this._canvasBlurObserver&&a.getEngine().onCanvasBlurObservable.remove(this._canvasBlurObserver),
this._layerToDispose&&(this._layerToDispose.texture=null,this._layerToDispose.dispose(),this._layerToDispose=null),this._rootContainer.dispose(),this.onClipboardObservable.clear(),this.onControlPickedObservable.clear(),this.onBeginRenderObservable.clear(),this.onEndRenderObservable.clear(),this.onBeginLayoutObservable.clear(),this.onEndLayoutObservable.clear(),d.prototype.dispose.call(this))};h.prototype._onResize=function(){var a=this.getScene();if(a){var b=a.getEngine();a=this.getSize();var c=b.getRenderWidth()*
this._renderScale;b=b.getRenderHeight()*this._renderScale;this._renderAtIdealSize&&(this._idealWidth?(b=b*this._idealWidth/c,c=this._idealWidth):this._idealHeight&&(c=c*this._idealHeight/b,b=this._idealHeight));if(a.width!==c||a.height!==b)this.scaleTo(c,b),this.markAsDirty(),(this._idealWidth||this._idealHeight)&&this._rootContainer._markAllAsDirty();this.invalidateRect(0,0,a.width-1,a.height-1)}};h.prototype._getGlobalViewport=function(a){a=a.getEngine();return this._fullscreenViewport.toGlobal(a.getRenderWidth(),
a.getRenderHeight())};h.prototype.getProjectedPosition=function(a,b){var c=this.getScene();if(!c)return m.d.Zero();var d=this._getGlobalViewport(c);a=m.e.Project(a,b,c.getTransformMatrix(),d);a.scaleInPlace(this.renderScale);return new m.d(a.x,a.y)};h.prototype.getProjectedPositionWithZ=function(a,b){var c=this.getScene();if(!c)return m.e.Zero();var d=this._getGlobalViewport(c);a=m.e.Project(a,b,c.getTransformMatrix(),d);a.scaleInPlace(this.renderScale);return new m.e(a.x,a.y,a.z)};h.prototype._checkUpdate=
function(a){if(!this._layerToDispose||0!==(a.layerMask&this._layerToDispose.layerMask)){if(this._isFullscreen&&this._linkedControls.length){var b=this.getScene();if(!b)return;var c=this._getGlobalViewport(b);a=function(a){if(!a.isVisible)return"continue";var e=a._linkedMesh;if(!e||e.isDisposed())return q.b.SetImmediate(function(){a.linkWithMesh(null)}),"continue";var f=e.getBoundingInfo?e.getBoundingInfo().boundingSphere.center:m.e.ZeroReadOnly;e=m.e.Project(f,e.getWorldMatrix(),b.getTransformMatrix(),
c);if(0>e.z||1<e.z)return a.notRenderable=!0,"continue";a.notRenderable=!1;e.scaleInPlace(d.renderScale);a._moveToProjectedPosition(e)};for(var d=this,e=0,f=this._linkedControls;e<f.length;e++)a(f[e])}if(this._isDirty||this._rootContainer.isDirty)this._isDirty=!1,this._render(),this.update(this.applyYInversionOnUpdate,this.premulAlpha)}};h.prototype._render=function(){var a=this.getSize(),b=a.width;a=a.height;var c=this.getContext();c.font="18px Arial";c.strokeStyle="white";this.onBeginLayoutObservable.notifyObservers(this);
var d=new x.a(0,0,b,a);this._numLayoutCalls=0;this._rootContainer._layout(d,c);this.onEndLayoutObservable.notifyObservers(this);this._isDirty=!1;this._invalidatedRectangle?this._clearMeasure.copyFrom(this._invalidatedRectangle):this._clearMeasure.copyFromFloats(0,0,b,a);c.clearRect(this._clearMeasure.left,this._clearMeasure.top,this._clearMeasure.width,this._clearMeasure.height);this._background&&(c.save(),c.fillStyle=this._background,c.fillRect(this._clearMeasure.left,this._clearMeasure.top,this._clearMeasure.width,
this._clearMeasure.height),c.restore());this.onBeginRenderObservable.notifyObservers(this);this._numRenderCalls=0;this._rootContainer._render(c,this._invalidatedRectangle);this.onEndRenderObservable.notifyObservers(this);this._invalidatedRectangle=null};h.prototype._changeCursor=function(a){this._rootElement&&(this._rootElement.style.cursor=a,this._cursorChanged=!0)};h.prototype._registerLastControlDown=function(a,b){this._lastControlDown[b]=a;this.onControlPickedObservable.notifyObservers(a)};h.prototype._doPicking=
function(a,b,c,d,e,f,g,h){var l=this.getScene();if(l){var k=l.getEngine(),p=this.getSize();this._isFullscreen&&(l=(l.cameraToUseForPointers||l.activeCamera).viewport,a*=p.width/(k.getRenderWidth()*l.width),b*=p.height/(k.getRenderHeight()*l.height));this._capturingControl[e]?this._capturingControl[e]._processObservables(d,a,b,c,e,f):(this._cursorChanged=!1,this._rootContainer._processPicking(a,b,c,d,e,f,g,h)||(this._changeCursor(""),d===y.a.POINTERMOVE&&this._lastControlOver[e]&&(this._lastControlOver[e]._onPointerOut(this._lastControlOver[e],
c),delete this._lastControlOver[e])),this._cursorChanged||this._changeCursor(""),this._manageFocus())}};h.prototype._cleanControlAfterRemovalFromList=function(a,b){for(var c in a)a.hasOwnProperty(c)&&a[c]===b&&delete a[c]};h.prototype._cleanControlAfterRemoval=function(a){this._cleanControlAfterRemovalFromList(this._lastControlDown,a);this._cleanControlAfterRemovalFromList(this._lastControlOver,a)};h.prototype.attach=function(){var a=this,b=this.getScene();if(b){var c=new N.a(0,0,0,0);this._pointerMoveObserver=
b.onPrePointerObservable.add(function(d,e){if(!b.isPointerCaptured(d.event.pointerId)&&(d.type===y.a.POINTERMOVE||d.type===y.a.POINTERUP||d.type===y.a.POINTERDOWN||d.type===y.a.POINTERWHEEL)&&b){d.type===y.a.POINTERMOVE&&d.event.pointerId&&(a._defaultMousePointerId=d.event.pointerId);var f=b.cameraToUseForPointers||b.activeCamera;e=b.getEngine();f?f.viewport.toGlobalToRef(e.getRenderWidth(),e.getRenderHeight(),c):(c.x=0,c.y=0,c.width=e.getRenderWidth(),c.height=e.getRenderHeight());f=b.pointerX/e.getHardwareScalingLevel()-
c.x;e=b.pointerY/e.getHardwareScalingLevel()-(e.getRenderHeight()-c.y-c.height);a._shouldBlockPointer=!1;a._doPicking(f,e,d,d.type,d.event.pointerId||a._defaultMousePointerId,d.event.button,d.event.deltaX,d.event.deltaY);a._shouldBlockPointer&&(d.skipOnPointerObservable=a._shouldBlockPointer)}});this._attachToOnPointerOut(b);this._attachToOnBlur(b)}};h.prototype.registerClipboardEvents=function(){self.addEventListener("copy",this.onClipboardCopy,!1);self.addEventListener("cut",this.onClipboardCut,
!1);self.addEventListener("paste",this.onClipboardPaste,!1)};h.prototype.unRegisterClipboardEvents=function(){self.removeEventListener("copy",this.onClipboardCopy);self.removeEventListener("cut",this.onClipboardCut);self.removeEventListener("paste",this.onClipboardPaste)};h.prototype.attachToMesh=function(a,b){var c=this;void 0===b&&(b=!0);var d=this.getScene();d&&(this._pointerObserver=d.onPointerObservable.add(function(b,d){if(b.type===y.a.POINTERMOVE||b.type===y.a.POINTERUP||b.type===y.a.POINTERDOWN)if(d=
b.event.pointerId||c._defaultMousePointerId,b.pickInfo&&b.pickInfo.hit&&b.pickInfo.pickedMesh===a){var e=b.pickInfo.getTextureCoordinates();if(e){var f=c.getSize();c._doPicking(e.x*f.width,(c.applyYInversionOnUpdate?1-e.y:e.y)*f.height,b,b.type,d,b.event.button)}}else if(b.type===y.a.POINTERUP){if(c._lastControlDown[d]&&c._lastControlDown[d]._forcePointerUp(d),delete c._lastControlDown[d],c.focusedControl){b=c.focusedControl.keepsFocusWith();e=!0;if(b)for(f=0;f<b.length;f++){var g=b[f];if(c!==g._host){var h=
g._host;if(h._lastControlOver[d]&&h._lastControlOver[d].isAscendant(g)){e=!1;break}}}e&&(c.focusedControl=null)}}else b.type===y.a.POINTERMOVE&&(c._lastControlOver[d]&&c._lastControlOver[d]._onPointerOut(c._lastControlOver[d],b,!0),delete c._lastControlOver[d])}),a.enablePointerMoveEvents=b,this._attachToOnPointerOut(d),this._attachToOnBlur(d))};h.prototype.moveFocusToControl=function(a){this._lastPickedControl=this.focusedControl=a;this._blockNextFocusCheck=!0};h.prototype._manageFocus=function(){this._blockNextFocusCheck?
(this._blockNextFocusCheck=!1,this._lastPickedControl=this._focusedControl):this._focusedControl&&this._focusedControl!==this._lastPickedControl&&!this._lastPickedControl.isFocusInvisible&&(this.focusedControl=null)};h.prototype._attachToOnPointerOut=function(a){var b=this;this._canvasPointerOutObserver=a.getEngine().onCanvasPointerOutObservable.add(function(a){b._lastControlOver[a.pointerId]&&b._lastControlOver[a.pointerId]._onPointerOut(b._lastControlOver[a.pointerId],null);delete b._lastControlOver[a.pointerId];
b._lastControlDown[a.pointerId]&&b._lastControlDown[a.pointerId]!==b._capturingControl[a.pointerId]&&(b._lastControlDown[a.pointerId]._forcePointerUp(),delete b._lastControlDown[a.pointerId])})};h.prototype._attachToOnBlur=function(a){var b=this;this._canvasBlurObserver=a.getEngine().onCanvasBlurObservable.add(function(a){Object.entries(b._lastControlDown).forEach(function(a){a[1]._onCanvasBlur()});b._lastControlDown={}})};h.CreateForMesh=function(a,b,d,e,g,k){void 0===b&&(b=1024);void 0===d&&(d=
1024);void 0===e&&(e=!0);void 0===g&&(g=!1);b=new h(a.name+" AdvancedDynamicTexture",b,d,a.getScene(),!0,c.a.TRILINEAR_SAMPLINGMODE,k);d=new f.a("AdvancedDynamicTextureMaterial",a.getScene());d.backFaceCulling=!1;d.diffuseColor=l.a.Black();d.specularColor=l.a.Black();g?(d.diffuseTexture=b,d.emissiveTexture=b,b.hasAlpha=!0):(d.emissiveTexture=b,d.opacityTexture=b);a.material=d;b.attachToMesh(a,e);return b};h.CreateForMeshTexture=function(a,b,d,e,f){void 0===b&&(b=1024);void 0===d&&(d=1024);void 0===
e&&(e=!0);b=new h(a.name+" AdvancedDynamicTexture",b,d,a.getScene(),!0,c.a.TRILINEAR_SAMPLINGMODE,f);b.attachToMesh(a,e);return b};h.CreateFullscreenUI=function(b,d,e,f){void 0===d&&(d=!0);void 0===e&&(e=null);void 0===f&&(f=c.a.BILINEAR_SAMPLINGMODE);f=new h(b,0,0,e,!1,f);b=new a.a(b+"_layer",null,e,!d);b.texture=f;f._layerToDispose=b;f._isFullscreen=!0;f.attach();return f};return h}(h.a)},oJzB:function(h,n,d){d.d(n,"a",function(){return g});var t=d("mrSG"),k=d("YhWr"),m=d("37TA"),q=d("3C+b"),y=
d("YKqZ");h=d("WHS4");var g=function(d){function e(c){var a=d.call(this,c)||this;a.name=c;a._rowDefinitions=[];a._columnDefinitions=[];a._cells={};a._childControls=[];return a}Object(t.c)(e,d);Object.defineProperty(e.prototype,"columnCount",{get:function(){return this._columnDefinitions.length},enumerable:!1,configurable:!0});Object.defineProperty(e.prototype,"rowCount",{get:function(){return this._rowDefinitions.length},enumerable:!1,configurable:!0});Object.defineProperty(e.prototype,"children",
{get:function(){return this._childControls},enumerable:!1,configurable:!0});Object.defineProperty(e.prototype,"cells",{get:function(){return this._cells},enumerable:!1,configurable:!0});e.prototype.getRowDefinition=function(c){return 0>c||c>=this._rowDefinitions.length?null:this._rowDefinitions[c]};e.prototype.getColumnDefinition=function(c){return 0>c||c>=this._columnDefinitions.length?null:this._columnDefinitions[c]};e.prototype.addRowDefinition=function(c,a){void 0===a&&(a=!1);this._rowDefinitions.push(new m.a(c,
a?m.a.UNITMODE_PIXEL:m.a.UNITMODE_PERCENTAGE));this._markAsDirty();return this};e.prototype.addColumnDefinition=function(c,a){void 0===a&&(a=!1);this._columnDefinitions.push(new m.a(c,a?m.a.UNITMODE_PIXEL:m.a.UNITMODE_PERCENTAGE));this._markAsDirty();return this};e.prototype.setRowDefinition=function(c,a,b){void 0===b&&(b=!1);if(0>c||c>=this._rowDefinitions.length)return this;var d=this._rowDefinitions[c];if(d&&d.isPixel===b&&d.internalValue===a)return this;this._rowDefinitions[c]=new m.a(a,b?m.a.UNITMODE_PIXEL:
m.a.UNITMODE_PERCENTAGE);this._markAsDirty();return this};e.prototype.setColumnDefinition=function(c,a,b){void 0===b&&(b=!1);if(0>c||c>=this._columnDefinitions.length)return this;var d=this._columnDefinitions[c];if(d&&d.isPixel===b&&d.internalValue===a)return this;this._columnDefinitions[c]=new m.a(a,b?m.a.UNITMODE_PIXEL:m.a.UNITMODE_PERCENTAGE);this._markAsDirty();return this};e.prototype.getChildrenAt=function(c,a){return(c=this._cells[c+":"+a])?c.children:null};e.prototype.getChildCellInfo=function(c){return c._tag};
e.prototype._removeCell=function(c,a){if(c){d.prototype.removeControl.call(this,c);var b=0;for(c=c.children;b<c.length;b++){var e=this._childControls.indexOf(c[b]);-1!==e&&this._childControls.splice(e,1)}delete this._cells[a]}};e.prototype._offsetCell=function(c,a){if(this._cells[a]){this._cells[c]=this._cells[a];for(var b=0,d=this._cells[c].children;b<d.length;b++)d[b]._tag=c;delete this._cells[a]}};e.prototype.removeColumnDefinition=function(c){if(0>c||c>=this._columnDefinitions.length)return this;
for(var a=0;a<this._rowDefinitions.length;a++){var b=a+":"+c;this._removeCell(this._cells[b],b)}for(a=0;a<this._rowDefinitions.length;a++)for(var d=c+1;d<this._columnDefinitions.length;d++){var e=a+":"+(d-1);b=a+":"+d;this._offsetCell(e,b)}this._columnDefinitions.splice(c,1);this._markAsDirty();return this};e.prototype.removeRowDefinition=function(c){if(0>c||c>=this._rowDefinitions.length)return this;for(var a=0;a<this._columnDefinitions.length;a++){var b=c+":"+a;this._removeCell(this._cells[b],b)}for(a=
0;a<this._columnDefinitions.length;a++)for(var d=c+1;d<this._rowDefinitions.length;d++){var e=d-1+":"+a;b=d+":"+a;this._offsetCell(e,b)}this._rowDefinitions.splice(c,1);this._markAsDirty();return this};e.prototype.addControl=function(c,a,b){void 0===a&&(a=0);void 0===b&&(b=0);0===this._rowDefinitions.length&&this.addRowDefinition(1,!1);0===this._columnDefinitions.length&&this.addColumnDefinition(1,!1);if(-1!==this._childControls.indexOf(c))return y.b.Warn("Control (Name:"+c.name+", UniqueId:"+c.uniqueId+
") is already associated with this grid. You must remove it before reattaching it"),this;a=Math.min(a,this._rowDefinitions.length-1)+":"+Math.min(b,this._columnDefinitions.length-1);b=this._cells[a];b||(b=new k.a(a),this._cells[a]=b,b.horizontalAlignment=q.a.HORIZONTAL_ALIGNMENT_LEFT,b.verticalAlignment=q.a.VERTICAL_ALIGNMENT_TOP,d.prototype.addControl.call(this,b));b.addControl(c);this._childControls.push(c);c._tag=a;c.parent=this;this._markAsDirty();return this};e.prototype.removeControl=function(c){var a=
this._childControls.indexOf(c);-1!==a&&this._childControls.splice(a,1);if(a=this._cells[c._tag])a.removeControl(c),c._tag=null;this._markAsDirty();return this};e.prototype._getTypeName=function(){return"Grid"};e.prototype._getGridDefinitions=function(c){for(var a=[],b=[],d=[],e=[],f=this._currentMeasure.width,g=0,h=this._currentMeasure.height,k=0,m=0,q=0,p=this._rowDefinitions;q<p.length;q++){var n=p[q];n.isPixel?(n=n.getValue(this._host),h-=n,b[m]=n):k+=n.internalValue;m++}p=m=q=0;for(var t=this._rowDefinitions;p<
t.length;p++)n=t[p],e.push(q),n.isPixel?q+=n.getValue(this._host):(n=n.internalValue/k*h,q+=n,b[m]=n),m++;h=m=0;for(k=this._columnDefinitions;h<k.length;h++)n=k[h],n.isPixel?(n=n.getValue(this._host),f-=n,a[m]=n):g+=n.internalValue,m++;k=m=h=0;for(q=this._columnDefinitions;k<q.length;k++)n=q[k],d.push(h),n.isPixel?h+=n.getValue(this._host):(n=n.internalValue/g*f,h+=n,a[m]=n),m++;c(d,e,a,b)};e.prototype._additionalProcessing=function(c,a){var b=this;this._getGridDefinitions(function(a,c,d,e){for(var f in b._cells)if(b._cells.hasOwnProperty(f)){var g=
f.split(":"),h=parseInt(g[0]);g=parseInt(g[1]);var k=b._cells[f];k.left=a[g]+"px";k.top=c[h]+"px";k.width=d[g]+"px";k.height=e[h]+"px";k._left.ignoreAdaptiveScaling=!0;k._top.ignoreAdaptiveScaling=!0;k._width.ignoreAdaptiveScaling=!0;k._height.ignoreAdaptiveScaling=!0}});d.prototype._additionalProcessing.call(this,c,a)};e.prototype._flagDescendantsAsMatrixDirty=function(){for(var c in this._cells)this._cells.hasOwnProperty(c)&&this._cells[c]._markMatrixAsDirty()};e.prototype._renderHighlightSpecific=
function(c){var a=this;d.prototype._renderHighlightSpecific.call(this,c);this._getGridDefinitions(function(b,d,e,f){for(var g=0;g<b.length;g++){var h=a._currentMeasure.left+b[g]+e[g];c.beginPath();c.moveTo(h,a._currentMeasure.top);c.lineTo(h,a._currentMeasure.top+a._currentMeasure.height);c.stroke()}for(g=0;g<d.length;g++)b=a._currentMeasure.top+d[g]+f[g],c.beginPath(),c.moveTo(a._currentMeasure.left,b),c.lineTo(a._currentMeasure.left+a._currentMeasure.width,b),c.stroke()});c.restore()};e.prototype.dispose=
function(){d.prototype.dispose.call(this);for(var c=0,a=this._childControls;c<a.length;c++)a[c].dispose();this._childControls=[]};return e}(k.a);h.a.RegisteredTypes["BABYLON.GUI.Grid"]=g}}]);
