var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(e){var g=0;return function(){return g<e.length?{done:!1,value:e[g++]}:{done:!0}}};$jscomp.arrayIterator=function(e){return{next:$jscomp.arrayIteratorImpl(e)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,g,b){e!=Array.prototype&&e!=Object.prototype&&(e[g]=b.value)};$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(e,g){this.$jscomp$symbol$id_=e;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:g})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function e(b){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(b||"")+"_"+g++,b)}var g=0;return e}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var e=$jscomp.global.Symbol.iterator;e||(e=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[e]&&$jscomp.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var e=$jscomp.global.Symbol.asyncIterator;e||(e=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(e){$jscomp.initSymbolIterator();e={next:e};e[$jscomp.global.Symbol.iterator]=function(){return this};return e};
$jscomp.iteratorFromArray=function(e,g){$jscomp.initSymbolIterator();e instanceof String&&(e+="");var b=0,k={next:function(){if(b<e.length){var c=b++;return{value:g(c,e[c]),done:!1}}k.next=function(){return{done:!0,value:void 0}};return k.next()}};k[Symbol.iterator]=function(){return k};return k};
$jscomp.polyfill=function(e,g,b,k){if(g){b=$jscomp.global;e=e.split(".");for(k=0;k<e.length-1;k++){var c=e[k];c in b||(b[c]={});b=b[c]}e=e[e.length-1];k=b[e];g=g(k);g!=k&&null!=g&&$jscomp.defineProperty(b,e,{configurable:!0,writable:!0,value:g})}};$jscomp.polyfill("Array.prototype.keys",function(e){return e?e:function(){return $jscomp.iteratorFromArray(this,function(e){return e})}},"es6","es3");
$jscomp.makeIterator=function(e){var g="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return g?g.call(e):$jscomp.arrayIterator(e)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(e){function g(){this.batch_=null}function b(b){return b instanceof c?b:new c(function(c,e){c(b)})}if(e&&!$jscomp.FORCE_POLYFILL_PROMISE)return e;g.prototype.asyncExecute=function(c){if(null==this.batch_){this.batch_=[];var b=this;this.asyncExecuteFunction(function(){b.executeBatch_()})}this.batch_.push(c)};var k=$jscomp.global.setTimeout;g.prototype.asyncExecuteFunction=function(c){k(c,0)};g.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var c=
this.batch_;this.batch_=[];for(var b=0;b<c.length;++b){var e=c[b];c[b]=null;try{e()}catch(q){this.asyncThrow_(q)}}}this.batch_=null};g.prototype.asyncThrow_=function(c){this.asyncExecuteFunction(function(){throw c;})};var c=function(c){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{c(b.resolve,b.reject)}catch(w){b.reject(w)}};c.prototype.createResolveAndReject_=function(){function c(c){return function(k){e||(e=!0,c.call(b,k))}}var b=this,e=!1;
return{resolve:c(this.resolveTo_),reject:c(this.reject_)}};c.prototype.resolveTo_=function(b){if(b===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(b instanceof c)this.settleSameAsPromise_(b);else{a:switch(typeof b){case "object":var e=null!=b;break a;case "function":e=!0;break a;default:e=!1}e?this.resolveToNonPromiseObj_(b):this.fulfill_(b)}};c.prototype.resolveToNonPromiseObj_=function(c){var b=void 0;try{b=c.then}catch(w){this.reject_(w);return}"function"==typeof b?
this.settleSameAsThenable_(b,c):this.fulfill_(c)};c.prototype.reject_=function(c){this.settle_(2,c)};c.prototype.fulfill_=function(c){this.settle_(1,c)};c.prototype.settle_=function(c,b){if(0!=this.state_)throw Error("Cannot settle("+c+", "+b+"): Promise already settled in state"+this.state_);this.state_=c;this.result_=b;this.executeOnSettledCallbacks_()};c.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var c=0;c<this.onSettledCallbacks_.length;++c)B.asyncExecute(this.onSettledCallbacks_[c]);
this.onSettledCallbacks_=null}};var B=new g;c.prototype.settleSameAsPromise_=function(c){var b=this.createResolveAndReject_();c.callWhenSettled_(b.resolve,b.reject)};c.prototype.settleSameAsThenable_=function(c,b){var e=this.createResolveAndReject_();try{c.call(b,e.resolve,e.reject)}catch(q){e.reject(q)}};c.prototype.then=function(b,e){function k(c,b){return"function"==typeof c?function(b){try{q(c(b))}catch(F){g(F)}}:b}var q,g,y=new c(function(c,b){q=c;g=b});this.callWhenSettled_(k(b,q),k(e,g));return y};
c.prototype.catch=function(c){return this.then(void 0,c)};c.prototype.callWhenSettled_=function(c,b){function e(){switch(k.state_){case 1:c(k.result_);break;case 2:b(k.result_);break;default:throw Error("Unexpected state: "+k.state_);}}var k=this;null==this.onSettledCallbacks_?B.asyncExecute(e):this.onSettledCallbacks_.push(e)};c.resolve=b;c.reject=function(b){return new c(function(c,e){e(b)})};c.race=function(e){return new c(function(c,k){for(var q=$jscomp.makeIterator(e),g=q.next();!g.done;g=q.next())b(g.value).callWhenSettled_(c,
k)})};c.all=function(e){var k=$jscomp.makeIterator(e),g=k.next();return g.done?b([]):new c(function(c,e){function q(b){return function(e){w[b]=e;A--;0==A&&c(w)}}var w=[],A=0;do w.push(void 0),A++,b(g.value).callWhenSettled_(q(w.length-1),e),g=k.next();while(!g.done)})};return c},"es6","es3");
(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{GICC:function(e,g,b){b("QfA5")},Jrc9:function(e,g,b){b.d(g,"a",function(){return p.a});e=b("qUIE");var k=function(){function a(a,c,d){var b=this;void 0===c&&(c="");void 0===d&&(d="black");this._renderingCanvas=a;this._loadingText=c;this._loadingDivBackgroundColor=d;this._resizeLoadingUI=function(){var a=b._renderingCanvas.getBoundingClientRect(),c=window.getComputedStyle(b._renderingCanvas).position;b._loadingDiv&&(b._loadingDiv.style.position=
"fixed"===c?"fixed":"absolute",b._loadingDiv.style.left=a.left+"px",b._loadingDiv.style.top=a.top+"px",b._loadingDiv.style.width=a.width+"px",b._loadingDiv.style.height=a.height+"px")}}a.prototype.displayLoadingUI=function(){if(!this._loadingDiv){this._loadingDiv=document.createElement("div");this._loadingDiv.id="babylonjsLoadingDiv";this._loadingDiv.style.opacity="0";this._loadingDiv.style.transition="opacity 1.5s ease";this._loadingDiv.style.pointerEvents="none";this._loadingDiv.style.display="grid";
this._loadingDiv.style.gridTemplateRows="100%";this._loadingDiv.style.gridTemplateColumns="100%";this._loadingDiv.style.justifyItems="center";this._loadingDiv.style.alignItems="center";this._loadingTextDiv=document.createElement("div");this._loadingTextDiv.style.position="absolute";this._loadingTextDiv.style.left="0";this._loadingTextDiv.style.top="50%";this._loadingTextDiv.style.marginTop="80px";this._loadingTextDiv.style.width="100%";this._loadingTextDiv.style.height="20px";this._loadingTextDiv.style.fontFamily=
"Arial";this._loadingTextDiv.style.fontSize="14px";this._loadingTextDiv.style.color="white";this._loadingTextDiv.style.textAlign="center";this._loadingTextDiv.style.zIndex="1";this._loadingTextDiv.innerHTML="Loading";this._loadingDiv.appendChild(this._loadingTextDiv);this._loadingTextDiv.innerHTML=this._loadingText;var c=document.createElement("style");c.type="text/css";c.innerHTML="@-webkit-keyframes spin1 {                    0% { -webkit-transform: rotate(0deg);}\n                    100% { -webkit-transform: rotate(360deg);}\n                }                @keyframes spin1 {                    0% { transform: rotate(0deg);}\n                    100% { transform: rotate(360deg);}\n                }";
document.getElementsByTagName("head")[0].appendChild(c);c=!!window.SVGSVGElement;var d=new Image;d.src=a.DefaultLogoUrl?a.DefaultLogoUrl:c?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxODAuMTcgMjA4LjA0Ij48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6I2ZmZjt9LmNscy0ye2ZpbGw6I2UwNjg0Yjt9LmNscy0ze2ZpbGw6I2JiNDY0Yjt9LmNscy00e2ZpbGw6I2UwZGVkODt9LmNscy01e2ZpbGw6I2Q1ZDJjYTt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPkJhYnlsb25Mb2dvPC90aXRsZT48ZyBpZD0iTGF5ZXJfMiIgZGF0YS1uYW1lPSJMYXllciAyIj48ZyBpZD0iUGFnZV9FbGVtZW50cyIgZGF0YS1uYW1lPSJQYWdlIEVsZW1lbnRzIj48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik05MC4wOSwwLDAsNTJWMTU2bDkwLjA5LDUyLDkwLjA4LTUyVjUyWiIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtMiIgcG9pbnRzPSIxODAuMTcgNTIuMDEgMTUxLjk3IDM1LjczIDEyNC44NSA1MS4zOSAxNTMuMDUgNjcuNjcgMTgwLjE3IDUyLjAxIi8+PHBvbHlnb24gY2xhc3M9ImNscy0yIiBwb2ludHM9IjI3LjEyIDY3LjY3IDExNy4yMSAxNS42NiA5MC4wOCAwIDAgNTIuMDEgMjcuMTIgNjcuNjciLz48cG9seWdvbiBjbGFzcz0iY2xzLTIiIHBvaW50cz0iNjEuODkgMTIwLjMgOTAuMDggMTM2LjU4IDExOC4yOCAxMjAuMyA5MC4wOCAxMDQuMDIgNjEuODkgMTIwLjMiLz48cG9seWdvbiBjbGFzcz0iY2xzLTMiIHBvaW50cz0iMTUzLjA1IDY3LjY3IDE1My4wNSAxNDAuMzcgOTAuMDggMTc2LjcyIDI3LjEyIDE0MC4zNyAyNy4xMiA2Ny42NyAwIDUyLjAxIDAgMTU2LjAzIDkwLjA4IDIwOC4wNCAxODAuMTcgMTU2LjAzIDE4MC4xNyA1Mi4wMSAxNTMuMDUgNjcuNjciLz48cG9seWdvbiBjbGFzcz0iY2xzLTMiIHBvaW50cz0iOTAuMDggNzEuNDYgNjEuODkgODcuNzQgNjEuODkgMTIwLjMgOTAuMDggMTA0LjAyIDExOC4yOCAxMjAuMyAxMTguMjggODcuNzQgOTAuMDggNzEuNDYiLz48cG9seWdvbiBjbGFzcz0iY2xzLTQiIHBvaW50cz0iMTUzLjA1IDY3LjY3IDExOC4yOCA4Ny43NCAxMTguMjggMTIwLjMgOTAuMDggMTM2LjU4IDkwLjA4IDE3Ni43MiAxNTMuMDUgMTQwLjM3IDE1My4wNSA2Ny42NyIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtNSIgcG9pbnRzPSIyNy4xMiA2Ny42NyA2MS44OSA4Ny43NCA2MS44OSAxMjAuMyA5MC4wOCAxMzYuNTggOTAuMDggMTc2LjcyIDI3LjEyIDE0MC4zNyAyNy4xMiA2Ny42NyIvPjwvZz48L2c+PC9zdmc+":
"https://cdn.babylonjs.com/Assets/babylonLogo.png";d.style.width="150px";d.style.gridColumn="1";d.style.gridRow="1";d.style.top="50%";d.style.left="50%";d.style.transform="translate(-50%, -50%)";d.style.position="absolute";var b=document.createElement("div");b.style.width="300px";b.style.gridColumn="1";b.style.gridRow="1";b.style.top="50%";b.style.left="50%";b.style.transform="translate(-50%, -50%)";b.style.position="absolute";var h=new Image;h.src=a.DefaultSpinnerUrl?a.DefaultSpinnerUrl:c?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzOTIgMzkyIj48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6I2UwNjg0Yjt9LmNscy0ye2ZpbGw6bm9uZTt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPlNwaW5uZXJJY29uPC90aXRsZT48ZyBpZD0iTGF5ZXJfMiIgZGF0YS1uYW1lPSJMYXllciAyIj48ZyBpZD0iU3Bpbm5lciI+PHBhdGggY2xhc3M9ImNscy0xIiBkPSJNNDAuMjEsMTI2LjQzYzMuNy03LjMxLDcuNjctMTQuNDQsMTItMjEuMzJsMy4zNi01LjEsMy41Mi01YzEuMjMtMS42MywyLjQxLTMuMjksMy42NS00LjkxczIuNTMtMy4yMSwzLjgyLTQuNzlBMTg1LjIsMTg1LjIsMCwwLDEsODMuNCw2Ny40M2EyMDgsMjA4LDAsMCwxLDE5LTE1LjY2YzMuMzUtMi40MSw2Ljc0LTQuNzgsMTAuMjUtN3M3LjExLTQuMjgsMTAuNzUtNi4zMmM3LjI5LTQsMTQuNzMtOCwyMi41My0xMS40OSwzLjktMS43Miw3Ljg4LTMuMywxMi00LjY0YTEwNC4yMiwxMDQuMjIsMCwwLDEsMTIuNDQtMy4yMyw2Mi40NCw2Mi40NCwwLDAsMSwxMi43OC0xLjM5QTI1LjkyLDI1LjkyLDAsMCwxLDE5NiwyMS40NGE2LjU1LDYuNTUsMCwwLDEsMi4wNSw5LDYuNjYsNi42NiwwLDAsMS0xLjY0LDEuNzhsLS40MS4yOWEyMi4wNywyMi4wNywwLDAsMS01Ljc4LDMsMzAuNDIsMzAuNDIsMCwwLDEtNS42NywxLjYyLDM3LjgyLDM3LjgyLDAsMCwxLTUuNjkuNzFjLTEsMC0xLjkuMTgtMi44NS4yNmwtMi44NS4yNHEtNS43Mi41MS0xMS40OCwxLjFjLTMuODQuNC03LjcxLjgyLTExLjU4LDEuNGExMTIuMzQsMTEyLjM0LDAsMCwwLTIyLjk0LDUuNjFjLTMuNzIsMS4zNS03LjM0LDMtMTAuOTQsNC42NHMtNy4xNCwzLjUxLTEwLjYsNS41MUExNTEuNiwxNTEuNiwwLDAsMCw2OC41Niw4N0M2Ny4yMyw4OC40OCw2Niw5MCw2NC42NCw5MS41NnMtMi41MSwzLjE1LTMuNzUsNC43M2wtMy41NCw0LjljLTEuMTMsMS42Ni0yLjIzLDMuMzUtMy4zMyw1YTEyNywxMjcsMCwwLDAtMTAuOTMsMjEuNDksMS41OCwxLjU4LDAsMSwxLTMtMS4xNVM0MC4xOSwxMjYuNDcsNDAuMjEsMTI2LjQzWiIvPjxyZWN0IGNsYXNzPSJjbHMtMiIgd2lkdGg9IjM5MiIgaGVpZ2h0PSIzOTIiLz48L2c+PC9nPjwvc3ZnPg==":
"https://cdn.babylonjs.com/Assets/loadingIcon.png";h.style.animation="spin1 0.75s infinite linear";h.style.webkitAnimation="spin1 0.75s infinite linear";h.style.transformOrigin="50% 50%";h.style.webkitTransformOrigin="50% 50%";c||(d.style.width="16vh",d.style.height="18.5vh",d.style.left="calc(50% - 8vh)",d.style.top="calc(50% - 9.25vh)",h.style.width="30vh",h.style.height="30vh",h.style.left="calc(50% - 15vh)",h.style.top="calc(50% - 15vh)");b.appendChild(h);this._loadingDiv.appendChild(d);this._loadingDiv.appendChild(b);
this._resizeLoadingUI();window.addEventListener("resize",this._resizeLoadingUI);this._loadingDiv.style.backgroundColor=this._loadingDivBackgroundColor;document.body.appendChild(this._loadingDiv);this._loadingDiv.style.opacity="1"}};a.prototype.hideLoadingUI=function(){var a=this;this._loadingDiv&&(this._loadingDiv.style.opacity="0",this._loadingDiv.addEventListener("transitionend",function(){a._loadingDiv&&(a._loadingDiv.parentElement&&a._loadingDiv.parentElement.removeChild(a._loadingDiv),window.removeEventListener("resize",
a._resizeLoadingUI),a._loadingDiv=null)}))};Object.defineProperty(a.prototype,"loadingUIText",{get:function(){return this._loadingText},set:function(a){this._loadingText=a;this._loadingTextDiv&&(this._loadingTextDiv.innerHTML=this._loadingText)},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"loadingUIBackgroundColor",{get:function(){return this._loadingDivBackgroundColor},set:function(a){this._loadingDivBackgroundColor=a;this._loadingDiv&&(this._loadingDiv.style.backgroundColor=
this._loadingDivBackgroundColor)},enumerable:!1,configurable:!0});a.DefaultLogoUrl="";a.DefaultSpinnerUrl="";return a}();e.a.DefaultLoadingScreenFactory=function(a){return new k(a)};var c=b("uyO6"),B=b("CAkI"),K=b("/SR9"),E=b("Xeau"),w=b("wAMR"),q=b("yk6c"),G=b("qVgn"),y=b("cdI9"),V=b("jI0L"),A=b("Z+J3"),n=b("/vHJ"),F=b("ks95"),t=b("llUH"),z=b("Yap0"),p=b("R0D4"),h=b("KbzI"),a=b("FH9a"),f=b("ZXSw"),L=b("btC8"),la=b("1t4k"),u=b("cPvs"),d=b("iD+g"),O=b("9aEo"),M=b("gyD2"),v=b("WHS4"),I=b("YKqZ"),ha=
b("X2Ve"),Z=b("OJ6t"),P=function(){function a(){}a.LoaderInjectedPhysicsEngine=void 0;return a}(),X=function(a,c,d,b){for(var h=0,L=c.materials.length;h<L;h++){var C=c.materials[h];if(C.id===a)return y.a.Parse(C,d,b)}return null},ca=function(a,c,d){for(var b in c)if(a.name===c[b])return d.push(a.id),!0;return a.parentId&&-1!==d.indexOf(a.parentId)?(d.push(a.id),!0):!1},S=function(a,c){return a+" of "+(c?c.file+" from "+c.name+" version: "+c.version+", exporter version: "+c.exporter_version:"unknown")},
ma=function(a,c){if(c._waitingData.lods){if(c._waitingData.lods.ids&&0<c._waitingData.lods.ids.length){var d=c._waitingData.lods.ids,b=c.isEnabled(!1);if(c._waitingData.lods.distances){var h=c._waitingData.lods.distances;if(h.length>=d.length){var L=h.length>d.length?h[h.length-1]:0;c.setEnabled(!1);for(var e=0;e<d.length;e++){var t=a.getMeshByID(d[e]);null!=t&&c.addLODLevel(h[e],t)}0<L&&c.addLODLevel(L,null);!0===b&&c.setEnabled(!0)}else I.b.Warn("Invalid level of detail distances for "+c.name)}}c._waitingData.lods=
null}},ba=function(d,b,e,k,z){void 0===z&&(z=!1);var x=new a.a(d),g="importScene has failed JSON parse";try{var m=JSON.parse(b);g="";var u=p.a.loggingLevel===p.a.DETAILED_LOGGING,r;if(void 0!==m.environmentTexture&&null!==m.environmentTexture){var C=void 0!==m.isPBR?m.isPBR:!0;if(m.environmentTextureType&&"BABYLON.HDRCubeTexture"===m.environmentTextureType){var I=m.environmentTextureSize?m.environmentTextureSize:128,ka=new n.a((m.environmentTexture.match(/https?:\/\//g)?"":e)+m.environmentTexture,
d,I,!0,!C);m.environmentTextureRotationY&&(ka.rotationY=m.environmentTextureRotationY);d.environmentTexture=ka}else if(ha.a.EndsWith(m.environmentTexture,".env")){var O=new A.a((m.environmentTexture.match(/https?:\/\//g)?"":e)+m.environmentTexture,d);m.environmentTextureRotationY&&(O.rotationY=m.environmentTextureRotationY);d.environmentTexture=O}else{var na=A.a.CreateFromPrefilteredData((m.environmentTexture.match(/https?:\/\//g)?"":e)+m.environmentTexture,d);m.environmentTextureRotationY&&(na.rotationY=
m.environmentTextureRotationY);d.environmentTexture=na}!0===m.createDefaultSkybox&&d.createDefaultSkybox(d.environmentTexture,C,void 0!==d.activeCamera&&null!==d.activeCamera?(d.activeCamera.maxZ-d.activeCamera.minZ)/2:1E3,m.skyboxBlurLevel||0);x.environmentTexture=d.environmentTexture}void 0!==m.environmentIntensity&&null!==m.environmentIntensity&&(d.environmentIntensity=m.environmentIntensity);if(void 0!==m.lights&&null!==m.lights){var l=0;for(r=m.lights.length;l<r;l++){var X=t.a.Parse(m.lights[l],
d);X&&(x.lights.push(X),g+=0===l?"\n\tLights:":"",g+="\n\t\t"+X.toString(u))}}if(void 0!==m.reflectionProbes&&null!==m.reflectionProbes)for(l=0,r=m.reflectionProbes.length;l<r;l++){var P=M.a.Parse(m.reflectionProbes[l],d,e);P&&(x.reflectionProbes.push(P),g+=0===l?"\n\tReflection Probes:":"",g+="\n\t\t"+P.toString(u))}if(void 0!==m.animations&&null!==m.animations)for(l=0,r=m.animations.length;l<r;l++){var ra=m.animations[l],Y=v.a.GetClass("BABYLON.Animation");if(Y){var W=Y.Parse(ra);d.animations.push(W);
x.animations.push(W);g+=0===l?"\n\tAnimations:":"";g+="\n\t\t"+W.toString(u)}}if(void 0!==m.materials&&null!==m.materials)for(l=0,r=m.materials.length;l<r;l++){var E=y.a.Parse(m.materials[l],d,e);if(E){x.materials.push(E);g+=0===l?"\n\tMaterials:":"";g+="\n\t\t"+E.toString(u);var fa=E.getActiveTextures();fa.forEach(function(a){-1==x.textures.indexOf(a)&&x.textures.push(a)})}}if(void 0!==m.multiMaterials&&null!==m.multiMaterials)for(l=0,r=m.multiMaterials.length;l<r;l++){var ia=V.a.ParseMultiMaterial(m.multiMaterials[l],
d);x.multiMaterials.push(ia);g+=0===l?"\n\tMultiMaterials:":"";g+="\n\t\t"+ia.toString(u);fa=ia.getActiveTextures();fa.forEach(function(a){-1==x.textures.indexOf(a)&&x.textures.push(a)})}if(void 0!==m.morphTargetManagers&&null!==m.morphTargetManagers){b=0;for(var aa=m.morphTargetManagers;b<aa.length;b++)x.morphTargetManagers.push(la.a.Parse(aa[b],d))}if(void 0!==m.skeletons&&null!==m.skeletons)for(l=0,r=m.skeletons.length;l<r;l++){var N=L.a.Parse(m.skeletons[l],d);x.skeletons.push(N);g+=0===l?"\n\tSkeletons:":
"";g+="\n\t\t"+N.toString(u)}var U=m.geometries;if(void 0!==U&&null!==U){aa=[];var H=U.vertexData;if(void 0!==H&&null!==H)for(l=0,r=H.length;l<r;l++)aa.push(q.a.Parse(H[l],d,e));aa.forEach(function(a){a&&x.geometries.push(a)})}if(void 0!==m.transformNodes&&null!==m.transformNodes)for(l=0,r=m.transformNodes.length;l<r;l++){var K=G.a.Parse(m.transformNodes[l],d,e);x.transformNodes.push(K)}if(void 0!==m.meshes&&null!==m.meshes)for(l=0,r=m.meshes.length;l<r;l++){var D=w.a.Parse(m.meshes[l],d,e);x.meshes.push(D);
if(D.hasInstances){U=0;for(var J=D.instances;U<J.length;U++)x.meshes.push(J[U])}g+=0===l?"\n\tMeshes:":"";g+="\n\t\t"+D.toString(u)}if(void 0!==m.cameras&&null!==m.cameras)for(l=0,r=m.cameras.length;l<r;l++){var Q=B.a.Parse(m.cameras[l],d);x.cameras.push(Q);g+=0===l?"\n\tCameras:":"";g+="\n\t\t"+Q.toString(u)}if(void 0!==m.postProcesses&&null!==m.postProcesses)for(l=0,r=m.postProcesses.length;l<r;l++){var ja=Z.a.Parse(m.postProcesses[l],d,e);ja&&(x.postProcesses.push(ja),g+=0===l?"\nPostprocesses:":
"",g+="\n\t\t"+ja.toString())}if(void 0!==m.animationGroups&&null!==m.animationGroups)for(l=0,r=m.animationGroups.length;l<r;l++){var pa=F.a.Parse(m.animationGroups[l],d);x.animationGroups.push(pa);g+=0===l?"\n\tAnimationGroups:":"";g+="\n\t\t"+pa.toString(u)}l=0;for(r=d.cameras.length;l<r;l++)Q=d.cameras[l],Q._waitingParentId&&(Q.parent=d.getLastEntryByID(Q._waitingParentId),Q._waitingParentId=null);l=0;for(r=d.lights.length;l<r;l++){var T=d.lights[l];T&&T._waitingParentId&&(T.parent=d.getLastEntryByID(T._waitingParentId),
T._waitingParentId=null)}l=0;for(r=d.transformNodes.length;l<r;l++){var da=d.transformNodes[l];da._waitingParentId&&(da.parent=d.getLastEntryByID(da._waitingParentId),da._waitingParentId=null)}l=0;for(r=d.meshes.length;l<r;l++)D=d.meshes[l],D._waitingParentId&&(D.parent=d.getLastEntryByID(D._waitingParentId),D._waitingParentId=null),D._waitingData.lods&&ma(d,D);l=0;for(r=d.skeletons.length;l<r;l++)N=d.skeletons[l],N._hasWaitingData&&(null!=N.bones&&N.bones.forEach(function(a){if(a._waitingTransformNodeId){var c=
d.getLastEntryByID(a._waitingTransformNodeId);c&&a.linkTransformNode(c);a._waitingTransformNodeId=null}}),N._waitingOverrideMeshId&&(N.overrideMesh=d.getMeshByID(N._waitingOverrideMeshId),N._waitingOverrideMeshId=null),N._hasWaitingData=null);l=0;for(r=d.meshes.length;l<r;l++){var ea=d.meshes[l];ea._waitingData.freezeWorldMatrix?(ea.freezeWorldMatrix(),ea._waitingData.freezeWorldMatrix=null):ea.computeWorldMatrix(!0)}l=0;for(r=d.lights.length;l<r;l++){var R=d.lights[l];if(0<R._excludedMeshesIds.length){for(u=
0;u<R._excludedMeshesIds.length;u++){var ca=d.getMeshByID(R._excludedMeshesIds[u]);ca&&R.excludedMeshes.push(ca)}R._excludedMeshesIds=[]}if(0<R._includedOnlyMeshesIds.length){for(u=0;u<R._includedOnlyMeshesIds.length;u++){var ba=d.getMeshByID(R._includedOnlyMeshesIds[u]);ba&&R.includedOnlyMeshes.push(ba)}R._includedOnlyMeshesIds=[]}}h.a.Parse(m,d,x,e);l=0;for(r=d.meshes.length;l<r;l++)D=d.meshes[l],D._waitingData.actions&&(f.a.Parse(D._waitingData.actions,D,d),D._waitingData.actions=null);void 0!==
m.actions&&null!==m.actions&&f.a.Parse(m.actions,null,d)}catch(oa){var qa=S("loadAssets",m?m.producer:"Unknown")+g;if(k)k(qa,oa);else throw c.a.Log(qa),oa;}finally{z||x.removeAllFromScene(),null!==g&&p.a.loggingLevel!==p.a.NO_LOGGING&&c.a.Log(S("loadAssets",m?m.producer:"Unknown")+(p.a.loggingLevel!==p.a.MINIMAL_LOGGING?g:""))}return x};p.a.RegisterPlugin({name:"babylon.js",extensions:".babylon",canDirectLoad:function(a){return-1!==a.indexOf("babylon")?!0:!1},importMesh:function(a,d,b,e,t,A,k,m){var n=
"importMesh has failed JSON parse";try{var f=JSON.parse(b);n="";var g=p.a.loggingLevel===p.a.DETAILED_LOGGING;a?Array.isArray(a)||(a=[a]):a=null;b=[];if(void 0!==f.meshes&&null!==f.meshes){var F=[],x=[],u;var v=0;for(u=f.meshes.length;v<u;v++){var l=f.meshes[v];if(null===a||ca(l,a,b)){null!==a&&delete a[a.indexOf(l.name)];if(void 0!==l.geometryId&&null!==l.geometryId&&void 0!==f.geometries&&null!==f.geometries){var M=!1;"boxes spheres cylinders toruses grounds planes torusKnots vertexData".split(" ").forEach(function(a){!0!==
M&&f.geometries[a]&&Array.isArray(f.geometries[a])&&f.geometries[a].forEach(function(c){if(c.id===l.geometryId){switch(a){case "vertexData":q.a.Parse(c,d,e)}M=!0}})});!1===M&&c.a.Warn("Geometry not found for mesh "+l.id)}if(l.materialId){var I=-1!==x.indexOf(l.materialId);if(!1===I&&void 0!==f.multiMaterials&&null!==f.multiMaterials)for(var C=0,ha=f.multiMaterials.length;C<ha;C++){var O=f.multiMaterials[C];if(O.id===l.materialId){C=0;for(var y=O.materials.length;C<y;C++){var P=O.materials[C];x.push(P);
var B=X(P,f,d,e);B&&(n+="\n\tMaterial "+B.toString(g))}x.push(O.id);var E=V.a.ParseMultiMaterial(O,d);E&&(I=!0,n+="\n\tMulti-Material "+E.toString(g));break}}!1===I&&(x.push(l.materialId),(B=X(l.materialId,f,d,e))?n+="\n\tMaterial "+B.toString(g):c.a.Warn("Material not found for mesh "+l.id))}if(-1<l.skeletonId&&void 0!==f.skeletons&&null!==f.skeletons&&!1===-1<F.indexOf(l.skeletonId)){C=0;for(var G=f.skeletons.length;C<G;C++){var Z=f.skeletons[C];if(Z.id===l.skeletonId){var H=L.a.Parse(Z,d);k.push(H);
F.push(Z.id);n+="\n\tSkeleton "+H.toString(g)}}}if(void 0!==f.morphTargetManagers&&null!==f.morphTargetManagers){C=0;for(var W=f.morphTargetManagers;C<W.length;C++)la.a.Parse(W[C],d)}var D=w.a.Parse(l,d,e);t.push(D);n+="\n\tMesh "+D.toString(g)}}v=0;for(u=d.meshes.length;v<u;v++){var J=d.meshes[v];J._waitingParentId&&(J.parent=d.getLastEntryByID(J._waitingParentId),J._waitingParentId=null);J._waitingData.lods&&ma(d,J)}v=0;for(u=d.skeletons.length;v<u;v++)H=d.skeletons[v],H._hasWaitingData&&(null!=
H.bones&&H.bones.forEach(function(a){if(a._waitingTransformNodeId){var c=d.getLastEntryByID(a._waitingTransformNodeId);c&&a.linkTransformNode(c);a._waitingTransformNodeId=null}}),H._waitingOverrideMeshId&&(H.overrideMesh=d.getMeshByID(H._waitingOverrideMeshId),H._waitingOverrideMeshId=null),H._hasWaitingData=null);v=0;for(u=d.meshes.length;v<u;v++)J=d.meshes[v],J._waitingData.freezeWorldMatrix?(J.freezeWorldMatrix(),J._waitingData.freezeWorldMatrix=null):J.computeWorldMatrix(!0)}if(void 0!==f.particleSystems&&
null!==f.particleSystems){var Q=h.a.GetIndividualParser(z.a.NAME_PARTICLESYSTEM);if(Q)for(v=0,u=f.particleSystems.length;v<u;v++){var K=f.particleSystems[v];-1!==b.indexOf(K.emitterId)&&A.push(Q(K,d,e))}}return!0}catch(T){var Y=S("importMesh",f?f.producer:"Unknown")+n;if(m)m(Y,T);else throw c.a.Log(Y),T;}finally{null!==n&&p.a.loggingLevel!==p.a.NO_LOGGING&&c.a.Log(S("importMesh",f?f.producer:"Unknown")+(p.a.loggingLevel!==p.a.MINIMAL_LOGGING?n:""))}return!1},load:function(a,b,h,L){var e="importScene has failed JSON parse";
try{var f=JSON.parse(b);e="";void 0!==f.useDelayedTextureLoading&&null!==f.useDelayedTextureLoading&&(a.useDelayedTextureLoading=f.useDelayedTextureLoading&&!p.a.ForceFullSceneLoadingForIncremental);void 0!==f.autoClear&&null!==f.autoClear&&(a.autoClear=f.autoClear);void 0!==f.clearColor&&null!==f.clearColor&&(a.clearColor=E.b.FromArray(f.clearColor));void 0!==f.ambientColor&&null!==f.ambientColor&&(a.ambientColor=E.a.FromArray(f.ambientColor));void 0!==f.gravity&&null!==f.gravity&&(a.gravity=K.e.FromArray(f.gravity));
if(f.fogMode&&0!==f.fogMode)switch(a.fogMode=f.fogMode,a.fogColor=E.a.FromArray(f.fogColor),a.fogStart=f.fogStart,a.fogEnd=f.fogEnd,a.fogDensity=f.fogDensity,e+="\tFog mode for scene:  ",a.fogMode){case 1:e+="exp\n";break;case 2:e+="exp2\n";break;case 3:e+="linear\n"}if(f.physicsEnabled){var t;"cannon"===f.physicsEngine?t=new u.a(void 0,void 0,P.LoaderInjectedPhysicsEngine):"oimo"===f.physicsEngine?t=new d.a(void 0,P.LoaderInjectedPhysicsEngine):"ammo"===f.physicsEngine&&(t=new O.a(void 0,P.LoaderInjectedPhysicsEngine,
void 0));e="\tPhysics engine "+(f.physicsEngine?f.physicsEngine:"oimo")+" enabled\n";var n=f.physicsGravity?K.e.FromArray(f.physicsGravity):null;a.enablePhysics(n,t)}void 0!==f.metadata&&null!==f.metadata&&(a.metadata=f.metadata);void 0!==f.collisionsEnabled&&null!==f.collisionsEnabled&&(a.collisionsEnabled=f.collisionsEnabled);if(!ba(a,b,h,L,!0))return!1;f.autoAnimate&&a.beginAnimation(a,f.autoAnimateFrom,f.autoAnimateTo,f.autoAnimateLoop,f.autoAnimateSpeed||1);void 0!==f.activeCameraID&&null!==
f.activeCameraID&&a.setActiveCameraByID(f.activeCameraID);return!0}catch(r){var A=S("importScene",f?f.producer:"Unknown")+e;if(L)L(A,r);else throw c.a.Log(A),r;}finally{null!==e&&p.a.loggingLevel!==p.a.NO_LOGGING&&c.a.Log(S("importScene",f?f.producer:"Unknown")+(p.a.loggingLevel!==p.a.MINIMAL_LOGGING?e:""))}return!1},loadAssetContainer:function(a,d,c,b){return ba(a,d,c,b)}});b("mzcJ")},QfA5:function(e,g,b){b.d(g,"a",function(){return z});var k=b("oYeq"),c=b("ADVu"),B=b("Bfey"),K=b("uyO6"),E=b("/SR9"),
w=b("y4Ty"),q=b("/eyM");e=b("Qdxt");g=b("afLn");var G=b("stmW"),y=b("aCSs"),V=b("WHS4"),A=b("O+1A"),n=b("Xeau");b("rJXP");b("pZ05");var F=b("UpSL"),t=function(c){function b(){var a=c.call(this)||this;a.DIFFUSE=!1;a.DIFFUSEDIRECTUV=0;a.GAMMADIFFUSE=!1;a.DIFFUSEHASALPHA=!1;a.OPACITYFRESNEL=!1;a.REFLECTIONBLUR=!1;a.REFLECTIONFRESNEL=!1;a.REFLECTIONFALLOFF=!1;a.TEXTURELODSUPPORT=!1;a.PREMULTIPLYALPHA=!1;a.USERGBCOLOR=!1;a.USEHIGHLIGHTANDSHADOWCOLORS=!1;a.BACKMAT_SHADOWONLY=!1;a.NOISE=!1;a.REFLECTIONBGR=
!1;a.IMAGEPROCESSING=!1;a.VIGNETTE=!1;a.VIGNETTEBLENDMODEMULTIPLY=!1;a.VIGNETTEBLENDMODEOPAQUE=!1;a.TONEMAPPING=!1;a.TONEMAPPING_ACES=!1;a.CONTRAST=!1;a.COLORCURVES=!1;a.COLORGRADING=!1;a.COLORGRADING3D=!1;a.SAMPLER3DGREENDEPTH=!1;a.SAMPLER3DBGRMAP=!1;a.IMAGEPROCESSINGPOSTPROCESS=!1;a.EXPOSURE=!1;a.MULTIVIEW=!1;a.REFLECTION=!1;a.REFLECTIONMAP_3D=!1;a.REFLECTIONMAP_SPHERICAL=!1;a.REFLECTIONMAP_PLANAR=!1;a.REFLECTIONMAP_CUBIC=!1;a.REFLECTIONMAP_PROJECTION=!1;a.REFLECTIONMAP_SKYBOX=!1;a.REFLECTIONMAP_EXPLICIT=
!1;a.REFLECTIONMAP_EQUIRECTANGULAR=!1;a.REFLECTIONMAP_EQUIRECTANGULAR_FIXED=!1;a.REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED=!1;a.INVERTCUBICMAP=!1;a.REFLECTIONMAP_OPPOSITEZ=!1;a.LODINREFLECTIONALPHA=!1;a.GAMMAREFLECTION=!1;a.RGBDREFLECTION=!1;a.EQUIRECTANGULAR_RELFECTION_FOV=!1;a.MAINUV1=!1;a.MAINUV2=!1;a.UV1=!1;a.UV2=!1;a.CLIPPLANE=!1;a.CLIPPLANE2=!1;a.CLIPPLANE3=!1;a.CLIPPLANE4=!1;a.CLIPPLANE5=!1;a.CLIPPLANE6=!1;a.POINTSIZE=!1;a.FOG=!1;a.NORMAL=!1;a.NUM_BONE_INFLUENCERS=0;a.BonesPerMesh=0;a.INSTANCES=
!1;a.SHADOWFLOAT=!1;a.rebuild();return a}Object(k.d)(b,c);return b}(e.a),z=function(b){function h(a,c){var f=b.call(this,a,c)||this;f.primaryColor=n.a.White();f._primaryColorShadowLevel=0;f._primaryColorHighlightLevel=0;f.reflectionTexture=null;f.reflectionBlur=0;f.diffuseTexture=null;f._shadowLights=null;f.shadowLights=null;f.shadowLevel=0;f.sceneCenter=E.e.Zero();f.opacityFresnel=!0;f.reflectionFresnel=!1;f.reflectionFalloffDistance=0;f.reflectionAmount=1;f.reflectionReflectance0=.05;f.reflectionReflectance90=
.5;f.useRGBColor=!0;f.enableNoise=!1;f._fovMultiplier=1;f.useEquirectangularFOV=!1;f._maxSimultaneousLights=4;f.maxSimultaneousLights=4;f._shadowOnly=!1;f.shadowOnly=!1;f._imageProcessingObserver=null;f.switchToBGR=!1;f._renderTargets=new B.a(16);f._reflectionControls=E.f.Zero();f._white=n.a.White();f._primaryShadowColor=n.a.Black();f._primaryHighlightColor=n.a.Black();f._attachImageProcessingConfiguration(null);f.getRenderTargetTextures=function(){f._renderTargets.reset();f._diffuseTexture&&f._diffuseTexture.isRenderTarget&&
f._renderTargets.push(f._diffuseTexture);f._reflectionTexture&&f._reflectionTexture.isRenderTarget&&f._renderTargets.push(f._reflectionTexture);return f._renderTargets};return f}Object(k.d)(h,b);Object.defineProperty(h.prototype,"_perceptualColor",{get:function(){return this.__perceptualColor},set:function(a){this.__perceptualColor=a;this._computePrimaryColorFromPerceptualColor();this._markAllSubMeshesAsLightsDirty()},enumerable:!1,configurable:!0});Object.defineProperty(h.prototype,"primaryColorShadowLevel",
{get:function(){return this._primaryColorShadowLevel},set:function(a){this._primaryColorShadowLevel=a;this._computePrimaryColors();this._markAllSubMeshesAsLightsDirty()},enumerable:!1,configurable:!0});Object.defineProperty(h.prototype,"primaryColorHighlightLevel",{get:function(){return this._primaryColorHighlightLevel},set:function(a){this._primaryColorHighlightLevel=a;this._computePrimaryColors();this._markAllSubMeshesAsLightsDirty()},enumerable:!1,configurable:!0});Object.defineProperty(h.prototype,
"reflectionStandardFresnelWeight",{set:function(a){.5>a?(a*=2,this.reflectionReflectance0=h.StandardReflectance0*a,this.reflectionReflectance90=h.StandardReflectance90*a):(a=2*a-1,this.reflectionReflectance0=h.StandardReflectance0+(1-h.StandardReflectance0)*a,this.reflectionReflectance90=h.StandardReflectance90+(1-h.StandardReflectance90)*a)},enumerable:!1,configurable:!0});Object.defineProperty(h.prototype,"fovMultiplier",{get:function(){return this._fovMultiplier},set:function(a){isNaN(a)&&(a=1);
this._fovMultiplier=Math.max(0,Math.min(2,a))},enumerable:!1,configurable:!0});h.prototype._attachImageProcessingConfiguration=function(a){var c=this;a!==this._imageProcessingConfiguration&&(this._imageProcessingConfiguration&&this._imageProcessingObserver&&this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver),this._imageProcessingConfiguration=a?a:this.getScene().imageProcessingConfiguration)&&(this._imageProcessingObserver=this._imageProcessingConfiguration.onUpdateParameters.add(function(){c._computePrimaryColorFromPerceptualColor();
c._markAllSubMeshesAsImageProcessingDirty()}))};Object.defineProperty(h.prototype,"imageProcessingConfiguration",{get:function(){return this._imageProcessingConfiguration},set:function(a){this._attachImageProcessingConfiguration(a);this._markAllSubMeshesAsTexturesDirty()},enumerable:!1,configurable:!0});Object.defineProperty(h.prototype,"cameraColorCurvesEnabled",{get:function(){return this.imageProcessingConfiguration.colorCurvesEnabled},set:function(a){this.imageProcessingConfiguration.colorCurvesEnabled=
a},enumerable:!1,configurable:!0});Object.defineProperty(h.prototype,"cameraColorGradingEnabled",{get:function(){return this.imageProcessingConfiguration.colorGradingEnabled},set:function(a){this.imageProcessingConfiguration.colorGradingEnabled=a},enumerable:!1,configurable:!0});Object.defineProperty(h.prototype,"cameraToneMappingEnabled",{get:function(){return this._imageProcessingConfiguration.toneMappingEnabled},set:function(a){this._imageProcessingConfiguration.toneMappingEnabled=a},enumerable:!1,
configurable:!0});Object.defineProperty(h.prototype,"cameraExposure",{get:function(){return this._imageProcessingConfiguration.exposure},set:function(a){this._imageProcessingConfiguration.exposure=a},enumerable:!1,configurable:!0});Object.defineProperty(h.prototype,"cameraContrast",{get:function(){return this._imageProcessingConfiguration.contrast},set:function(a){this._imageProcessingConfiguration.contrast=a},enumerable:!1,configurable:!0});Object.defineProperty(h.prototype,"cameraColorGradingTexture",
{get:function(){return this._imageProcessingConfiguration.colorGradingTexture},set:function(a){this.imageProcessingConfiguration.colorGradingTexture=a},enumerable:!1,configurable:!0});Object.defineProperty(h.prototype,"cameraColorCurves",{get:function(){return this.imageProcessingConfiguration.colorCurves},set:function(a){this.imageProcessingConfiguration.colorCurves=a},enumerable:!1,configurable:!0});Object.defineProperty(h.prototype,"hasRenderTargetTextures",{get:function(){return this._diffuseTexture&&
this._diffuseTexture.isRenderTarget||this._reflectionTexture&&this._reflectionTexture.isRenderTarget?!0:!1},enumerable:!1,configurable:!0});h.prototype.needAlphaTesting=function(){return!0};h.prototype.needAlphaBlending=function(){return 1>this.alpha||null!=this._diffuseTexture&&this._diffuseTexture.hasAlpha||this._shadowOnly};h.prototype.isReadyForSubMesh=function(a,c,b){var f=this;void 0===b&&(b=!1);if(c.effect&&this.isFrozen&&c.effect._wasPreviouslyReady)return!0;c._materialDefines||(c._materialDefines=
new t);var h=this.getScene(),d=c._materialDefines;if(this._isReadyForSubMesh(c))return!0;var e=h.getEngine();q.a.PrepareDefinesForLights(h,a,d,!1,this._maxSimultaneousLights);d._needNormals=!0;q.a.PrepareDefinesForMultiview(h,d);if(d._areTexturesDirty){d._needUVs=!1;if(h.texturesEnabled){h.getEngine().getCaps().textureLOD&&(d.TEXTURELODSUPPORT=!0);if(this._diffuseTexture&&A.a.DiffuseTextureEnabled){if(!this._diffuseTexture.isReadyOrNotBlocking())return!1;q.a.PrepareDefinesForMergedUV(this._diffuseTexture,
d,"DIFFUSE");d.DIFFUSEHASALPHA=this._diffuseTexture.hasAlpha;d.GAMMADIFFUSE=this._diffuseTexture.gammaSpace;d.OPACITYFRESNEL=this._opacityFresnel}else d.DIFFUSE=!1,d.DIFFUSEHASALPHA=!1,d.GAMMADIFFUSE=!1,d.OPACITYFRESNEL=!1;var n=this._reflectionTexture;if(n&&A.a.ReflectionTextureEnabled){if(!n.isReadyOrNotBlocking())return!1;d.REFLECTION=!0;d.GAMMAREFLECTION=n.gammaSpace;d.RGBDREFLECTION=n.isRGBD;d.REFLECTIONBLUR=0<this._reflectionBlur;d.REFLECTIONMAP_OPPOSITEZ=this.getScene().useRightHandedSystem?
!n.invertZ:n.invertZ;d.LODINREFLECTIONALPHA=n.lodLevelInAlpha;d.EQUIRECTANGULAR_RELFECTION_FOV=this.useEquirectangularFOV;d.REFLECTIONBGR=this.switchToBGR;n.coordinatesMode===y.a.INVCUBIC_MODE&&(d.INVERTCUBICMAP=!0);d.REFLECTIONMAP_3D=n.isCube;switch(n.coordinatesMode){case y.a.EXPLICIT_MODE:d.REFLECTIONMAP_EXPLICIT=!0;break;case y.a.PLANAR_MODE:d.REFLECTIONMAP_PLANAR=!0;break;case y.a.PROJECTION_MODE:d.REFLECTIONMAP_PROJECTION=!0;break;case y.a.SKYBOX_MODE:d.REFLECTIONMAP_SKYBOX=!0;break;case y.a.SPHERICAL_MODE:d.REFLECTIONMAP_SPHERICAL=
!0;break;case y.a.EQUIRECTANGULAR_MODE:d.REFLECTIONMAP_EQUIRECTANGULAR=!0;break;case y.a.FIXED_EQUIRECTANGULAR_MODE:d.REFLECTIONMAP_EQUIRECTANGULAR_FIXED=!0;break;case y.a.FIXED_EQUIRECTANGULAR_MIRRORED_MODE:d.REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED=!0;break;default:d.REFLECTIONMAP_CUBIC=!0}this.reflectionFresnel?(d.REFLECTIONFRESNEL=!0,d.REFLECTIONFALLOFF=0<this.reflectionFalloffDistance,this._reflectionControls.x=this.reflectionAmount,this._reflectionControls.y=this.reflectionReflectance0,this._reflectionControls.z=
this.reflectionReflectance90,this._reflectionControls.w=1/this.reflectionFalloffDistance):(d.REFLECTIONFRESNEL=!1,d.REFLECTIONFALLOFF=!1)}else d.REFLECTION=!1,d.REFLECTIONFRESNEL=!1,d.REFLECTIONFALLOFF=!1,d.REFLECTIONBLUR=!1,d.REFLECTIONMAP_3D=!1,d.REFLECTIONMAP_SPHERICAL=!1,d.REFLECTIONMAP_PLANAR=!1,d.REFLECTIONMAP_CUBIC=!1,d.REFLECTIONMAP_PROJECTION=!1,d.REFLECTIONMAP_SKYBOX=!1,d.REFLECTIONMAP_EXPLICIT=!1,d.REFLECTIONMAP_EQUIRECTANGULAR=!1,d.REFLECTIONMAP_EQUIRECTANGULAR_FIXED=!1,d.REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED=
!1,d.INVERTCUBICMAP=!1,d.REFLECTIONMAP_OPPOSITEZ=!1,d.LODINREFLECTIONALPHA=!1,d.GAMMAREFLECTION=!1,d.RGBDREFLECTION=!1}d.PREMULTIPLYALPHA=7===this.alphaMode||8===this.alphaMode;d.USERGBCOLOR=this._useRGBColor;d.NOISE=this._enableNoise}d._areLightsDirty&&(d.USEHIGHLIGHTANDSHADOWCOLORS=!this._useRGBColor&&(0!==this._primaryColorShadowLevel||0!==this._primaryColorHighlightLevel),d.BACKMAT_SHADOWONLY=this._shadowOnly);if(d._areImageProcessingDirty&&this._imageProcessingConfiguration){if(!this._imageProcessingConfiguration.isReady())return!1;
this._imageProcessingConfiguration.prepareDefines(d)}q.a.PrepareDefinesForMisc(a,h,!1,this.pointsCloud,this.fogEnabled,this._shouldTurnAlphaTestOn(a),d);q.a.PrepareDefinesForFrameBoundValues(h,e,d,b,null,c.getRenderingMesh().hasThinInstances);q.a.PrepareDefinesForAttributes(a,d,!1,!0,!1)&&a&&!h.getEngine().getCaps().standardDerivatives&&!a.isVerticesDataPresent(w.b.NormalKind)&&(a.createNormals(!0),K.a.Warn("BackgroundMaterial: Normals have been created for the mesh: "+a.name));if(d.isDirty){d.markAsProcessed();
h.resetCachedMaterial();b=new F.a;d.FOG&&b.addFallback(0,"FOG");d.POINTSIZE&&b.addFallback(1,"POINTSIZE");d.MULTIVIEW&&b.addFallback(0,"MULTIVIEW");q.a.HandleFallbacksForShadows(d,b,this._maxSimultaneousLights);n=[w.b.PositionKind];d.NORMAL&&n.push(w.b.NormalKind);d.UV1&&n.push(w.b.UVKind);d.UV2&&n.push(w.b.UV2Kind);q.a.PrepareAttributesForBones(n,a,d,b);q.a.PrepareAttributesForInstances(n,d);a="world view viewProjection vEyePosition vLightsType vFogInfos vFogColor pointSize vClipPlane vClipPlane2 vClipPlane3 vClipPlane4 vClipPlane5 vClipPlane6 mBones vPrimaryColor vPrimaryColorShadow vReflectionInfos reflectionMatrix vReflectionMicrosurfaceInfos fFovMultiplier shadowLevel alpha vBackgroundCenter vReflectionControl vDiffuseInfos diffuseMatrix".split(" ");
var k=["diffuseSampler","reflectionSampler","reflectionSamplerLow","reflectionSamplerHigh"],g=["Material","Scene"];G.a&&(G.a.PrepareUniforms(a,d),G.a.PrepareSamplers(k,d));q.a.PrepareUniformsAndSamplersList({uniformsNames:a,uniformBuffersNames:g,samplers:k,defines:d,maxSimultaneousLights:this._maxSimultaneousLights});var p=d.toString();c.setEffect(h.getEngine().createEffect("background",{attributes:n,uniformsNames:a,uniformBuffersNames:g,samplers:k,defines:p,fallbacks:b,onCompiled:function(a){if(f.onCompiled)f.onCompiled(a);
f.bindSceneUniformBuffer(a,h.getSceneUniformBuffer())},onError:this.onError,indexParameters:{maxSimultaneousLights:this._maxSimultaneousLights}},e),d);this.buildUniformLayout()}if(!c.effect||!c.effect.isReady())return!1;d._renderId=h.getRenderId();return c.effect._wasPreviouslyReady=!0};h.prototype._computePrimaryColorFromPerceptualColor=function(){this.__perceptualColor&&(this._primaryColor.copyFrom(this.__perceptualColor),this._primaryColor.toLinearSpaceToRef(this._primaryColor),this._imageProcessingConfiguration&&
this._primaryColor.scaleToRef(1/this._imageProcessingConfiguration.exposure,this._primaryColor),this._computePrimaryColors())};h.prototype._computePrimaryColors=function(){if(0!==this._primaryColorShadowLevel||0!==this._primaryColorHighlightLevel)this._primaryColor.scaleToRef(this._primaryColorShadowLevel,this._primaryShadowColor),this._primaryColor.subtractToRef(this._primaryShadowColor,this._primaryShadowColor),this._white.subtractToRef(this._primaryColor,this._primaryHighlightColor),this._primaryHighlightColor.scaleToRef(this._primaryColorHighlightLevel,
this._primaryHighlightColor),this._primaryColor.addToRef(this._primaryHighlightColor,this._primaryHighlightColor)};h.prototype.buildUniformLayout=function(){this._uniformBuffer.addUniform("vPrimaryColor",4);this._uniformBuffer.addUniform("vPrimaryColorShadow",4);this._uniformBuffer.addUniform("vDiffuseInfos",2);this._uniformBuffer.addUniform("vReflectionInfos",2);this._uniformBuffer.addUniform("diffuseMatrix",16);this._uniformBuffer.addUniform("reflectionMatrix",16);this._uniformBuffer.addUniform("vReflectionMicrosurfaceInfos",
3);this._uniformBuffer.addUniform("fFovMultiplier",1);this._uniformBuffer.addUniform("pointSize",1);this._uniformBuffer.addUniform("shadowLevel",1);this._uniformBuffer.addUniform("alpha",1);this._uniformBuffer.addUniform("vBackgroundCenter",3);this._uniformBuffer.addUniform("vReflectionControl",4);this._uniformBuffer.create()};h.prototype.unbind=function(){this._diffuseTexture&&this._diffuseTexture.isRenderTarget&&this._uniformBuffer.setTexture("diffuseSampler",null);this._reflectionTexture&&this._reflectionTexture.isRenderTarget&&
this._uniformBuffer.setTexture("reflectionSampler",null);b.prototype.unbind.call(this)};h.prototype.bindOnlyWorldMatrix=function(a){this._activeEffect.setMatrix("world",a)};h.prototype.bindForSubMesh=function(a,c,b){var f=this.getScene(),h=b._materialDefines;if(h&&(b=b.effect)){this._activeEffect=b;this.bindOnlyWorldMatrix(a);q.a.BindBonesParameters(c,this._activeEffect);if(a=this._mustRebind(f,b,c.visibility)){this._uniformBuffer.bindToEffect(b,"Material");this.bindViewProjection(b);var d=this._reflectionTexture;
this._uniformBuffer.useUbo&&this.isFrozen&&this._uniformBuffer.isSync||(f.texturesEnabled&&(this._diffuseTexture&&A.a.DiffuseTextureEnabled&&(this._uniformBuffer.updateFloat2("vDiffuseInfos",this._diffuseTexture.coordinatesIndex,this._diffuseTexture.level),q.a.BindTextureMatrix(this._diffuseTexture,this._uniformBuffer,"diffuse")),d&&A.a.ReflectionTextureEnabled&&(this._uniformBuffer.updateMatrix("reflectionMatrix",d.getReflectionTextureMatrix()),this._uniformBuffer.updateFloat2("vReflectionInfos",
d.level,this._reflectionBlur),this._uniformBuffer.updateFloat3("vReflectionMicrosurfaceInfos",d.getSize().width,d.lodGenerationScale,d.lodGenerationOffset))),0<this.shadowLevel&&this._uniformBuffer.updateFloat("shadowLevel",this.shadowLevel),this._uniformBuffer.updateFloat("alpha",this.alpha),this.pointsCloud&&this._uniformBuffer.updateFloat("pointSize",this.pointSize),h.USEHIGHLIGHTANDSHADOWCOLORS?(this._uniformBuffer.updateColor4("vPrimaryColor",this._primaryHighlightColor,1),this._uniformBuffer.updateColor4("vPrimaryColorShadow",
this._primaryShadowColor,1)):this._uniformBuffer.updateColor4("vPrimaryColor",this._primaryColor,1));this._uniformBuffer.updateFloat("fFovMultiplier",this._fovMultiplier);f.texturesEnabled&&(this._diffuseTexture&&A.a.DiffuseTextureEnabled&&this._uniformBuffer.setTexture("diffuseSampler",this._diffuseTexture),d&&A.a.ReflectionTextureEnabled&&(h.REFLECTIONBLUR&&h.TEXTURELODSUPPORT?this._uniformBuffer.setTexture("reflectionSampler",d):h.REFLECTIONBLUR?(this._uniformBuffer.setTexture("reflectionSampler",
d._lodTextureMid||d),this._uniformBuffer.setTexture("reflectionSamplerLow",d._lodTextureLow||d),this._uniformBuffer.setTexture("reflectionSamplerHigh",d._lodTextureHigh||d)):this._uniformBuffer.setTexture("reflectionSampler",d),h.REFLECTIONFRESNEL&&(this._uniformBuffer.updateFloat3("vBackgroundCenter",this.sceneCenter.x,this.sceneCenter.y,this.sceneCenter.z),this._uniformBuffer.updateFloat4("vReflectionControl",this._reflectionControls.x,this._reflectionControls.y,this._reflectionControls.z,this._reflectionControls.w))));
q.a.BindClipPlane(this._activeEffect,f);q.a.BindEyePosition(b,f)}if(a||!this.isFrozen)f.lightsEnabled&&q.a.BindLights(f,c,this._activeEffect,h,this._maxSimultaneousLights,!1),this.bindView(b),q.a.BindFogParameters(f,c,this._activeEffect,!0),this._imageProcessingConfiguration&&this._imageProcessingConfiguration.bind(this._activeEffect);this._uniformBuffer.update();this._afterBind(c,this._activeEffect)}};h.prototype.hasTexture=function(a){return b.prototype.hasTexture.call(this,a)||this._reflectionTexture===
a||this._diffuseTexture===a?!0:!1};h.prototype.dispose=function(a,c){void 0===a&&(a=!1);void 0===c&&(c=!1);c&&(this.diffuseTexture&&this.diffuseTexture.dispose(),this.reflectionTexture&&this.reflectionTexture.dispose());this._renderTargets.dispose();this._imageProcessingConfiguration&&this._imageProcessingObserver&&this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver);b.prototype.dispose.call(this,a)};h.prototype.clone=function(a){var b=this;return c.a.Clone(function(){return new h(a,
b.getScene())},this)};h.prototype.serialize=function(){var a=c.a.Serialize(this);a.customType="BABYLON.BackgroundMaterial";return a};h.prototype.getClassName=function(){return"BackgroundMaterial"};h.Parse=function(a,b,e){return c.a.Parse(function(){return new h(a.name,b)},a,b,e)};h.StandardReflectance0=.05;h.StandardReflectance90=.5;Object(k.c)([Object(c.e)()],h.prototype,"_primaryColor",void 0);Object(k.c)([Object(c.b)("_markAllSubMeshesAsLightsDirty")],h.prototype,"primaryColor",void 0);Object(k.c)([Object(c.e)()],
h.prototype,"__perceptualColor",void 0);Object(k.c)([Object(c.c)()],h.prototype,"_primaryColorShadowLevel",void 0);Object(k.c)([Object(c.c)()],h.prototype,"_primaryColorHighlightLevel",void 0);Object(k.c)([Object(c.b)("_markAllSubMeshesAsLightsDirty")],h.prototype,"primaryColorHighlightLevel",null);Object(k.c)([Object(c.m)()],h.prototype,"_reflectionTexture",void 0);Object(k.c)([Object(c.b)("_markAllSubMeshesAsTexturesDirty")],h.prototype,"reflectionTexture",void 0);Object(k.c)([Object(c.c)()],h.prototype,
"_reflectionBlur",void 0);Object(k.c)([Object(c.b)("_markAllSubMeshesAsTexturesDirty")],h.prototype,"reflectionBlur",void 0);Object(k.c)([Object(c.m)()],h.prototype,"_diffuseTexture",void 0);Object(k.c)([Object(c.b)("_markAllSubMeshesAsTexturesDirty")],h.prototype,"diffuseTexture",void 0);Object(k.c)([Object(c.b)("_markAllSubMeshesAsTexturesDirty")],h.prototype,"shadowLights",void 0);Object(k.c)([Object(c.c)()],h.prototype,"_shadowLevel",void 0);Object(k.c)([Object(c.b)("_markAllSubMeshesAsTexturesDirty")],
h.prototype,"shadowLevel",void 0);Object(k.c)([Object(c.o)()],h.prototype,"_sceneCenter",void 0);Object(k.c)([Object(c.b)("_markAllSubMeshesAsTexturesDirty")],h.prototype,"sceneCenter",void 0);Object(k.c)([Object(c.c)()],h.prototype,"_opacityFresnel",void 0);Object(k.c)([Object(c.b)("_markAllSubMeshesAsTexturesDirty")],h.prototype,"opacityFresnel",void 0);Object(k.c)([Object(c.c)()],h.prototype,"_reflectionFresnel",void 0);Object(k.c)([Object(c.b)("_markAllSubMeshesAsTexturesDirty")],h.prototype,
"reflectionFresnel",void 0);Object(k.c)([Object(c.c)()],h.prototype,"_reflectionFalloffDistance",void 0);Object(k.c)([Object(c.b)("_markAllSubMeshesAsTexturesDirty")],h.prototype,"reflectionFalloffDistance",void 0);Object(k.c)([Object(c.c)()],h.prototype,"_reflectionAmount",void 0);Object(k.c)([Object(c.b)("_markAllSubMeshesAsTexturesDirty")],h.prototype,"reflectionAmount",void 0);Object(k.c)([Object(c.c)()],h.prototype,"_reflectionReflectance0",void 0);Object(k.c)([Object(c.b)("_markAllSubMeshesAsTexturesDirty")],
h.prototype,"reflectionReflectance0",void 0);Object(k.c)([Object(c.c)()],h.prototype,"_reflectionReflectance90",void 0);Object(k.c)([Object(c.b)("_markAllSubMeshesAsTexturesDirty")],h.prototype,"reflectionReflectance90",void 0);Object(k.c)([Object(c.c)()],h.prototype,"_useRGBColor",void 0);Object(k.c)([Object(c.b)("_markAllSubMeshesAsTexturesDirty")],h.prototype,"useRGBColor",void 0);Object(k.c)([Object(c.c)()],h.prototype,"_enableNoise",void 0);Object(k.c)([Object(c.b)("_markAllSubMeshesAsTexturesDirty")],
h.prototype,"enableNoise",void 0);Object(k.c)([Object(c.c)()],h.prototype,"_maxSimultaneousLights",void 0);Object(k.c)([Object(c.b)("_markAllSubMeshesAsTexturesDirty")],h.prototype,"maxSimultaneousLights",void 0);Object(k.c)([Object(c.c)()],h.prototype,"_shadowOnly",void 0);Object(k.c)([Object(c.b)("_markAllSubMeshesAsLightsDirty")],h.prototype,"shadowOnly",void 0);Object(k.c)([Object(c.i)()],h.prototype,"_imageProcessingConfiguration",void 0);return h}(g.a);V.a.RegisteredTypes["BABYLON.BackgroundMaterial"]=
z},R0D4:function(e,g,b){b.d(g,"a",function(){return V});var k=b("YKqZ"),c=b("ps+7"),B=b("SLoj"),K=b("tVVT"),E=b("qUIE"),w=b("e2Mr"),q=b("uyO6"),G=b("mzcJ"),y;(function(c){c[c.Clean=0]="Clean";c[c.Stop=1]="Stop";c[c.Sync=2]="Sync";c[c.NoSync=3]="NoSync"})(y||(y={}));var V=function(){function b(){}Object.defineProperty(b,"ForceFullSceneLoadingForIncremental",{get:function(){return G.a.ForceFullSceneLoadingForIncremental},set:function(b){G.a.ForceFullSceneLoadingForIncremental=b},enumerable:!1,configurable:!0});
Object.defineProperty(b,"ShowLoadingScreen",{get:function(){return G.a.ShowLoadingScreen},set:function(b){G.a.ShowLoadingScreen=b},enumerable:!1,configurable:!0});Object.defineProperty(b,"loggingLevel",{get:function(){return G.a.loggingLevel},set:function(b){G.a.loggingLevel=b},enumerable:!1,configurable:!0});Object.defineProperty(b,"CleanBoneMatrixWeights",{get:function(){return G.a.CleanBoneMatrixWeights},set:function(b){G.a.CleanBoneMatrixWeights=b},enumerable:!1,configurable:!0});b.GetDefaultPlugin=
function(){return b._registeredPlugins[".babylon"]};b._GetPluginForExtension=function(c){var e=b._registeredPlugins[c];if(e)return e;q.a.Warn("Unable to find a plugin to load "+c+" files. Trying to use .babylon default plugin. To load from a specific filetype (eg. gltf) see: https://doc.babylonjs.com/how_to/load_from_any_file_type");return b.GetDefaultPlugin()};b._GetPluginForDirectLoad=function(c){for(var e in b._registeredPlugins){var t=b._registeredPlugins[e].plugin;if(t.canDirectLoad&&t.canDirectLoad(c))return b._registeredPlugins[e]}return b.GetDefaultPlugin()};
b._GetPluginForFilename=function(c){var e=c.indexOf("?");-1!==e&&(c=c.substring(0,e));e=c.lastIndexOf(".");c=c.substring(e,c.length).toLowerCase();return b._GetPluginForExtension(c)};b._GetDirectLoad=function(b){return"data:"===b.substr(0,5)?b.substr(5):null};b._LoadData=function(c,e,t,k,g,h,a){var f=b._GetDirectLoad(c.name);a=a?b._GetPluginForExtension(a):f?b._GetPluginForDirectLoad(c.name):b._GetPluginForFilename(c.name);var n=void 0!==a.plugin.createPlugin?a.plugin.createPlugin():a.plugin;if(!n)throw"The loader plugin corresponding to the file type you are trying to load has not been found. If using es6, please import the plugin you wish to use before.";
b.OnPluginActivatedObservable.notifyObservers(n);if(f)return n.directLoad?(f=n.directLoad(e,f),f.then?f.then(function(a){t(n,a)}).catch(function(a){g("Error in directLoad of _loadData: "+a,a)}):t(n,f)):t(n,f),n;var p=a.isBinary,z=function(a,b){e.isDisposed?g("Scene has been disposed"):t(n,a,b)},d=null,F=!1;(f=n.onDisposeObservable)&&f.add(function(){F=!0;d&&(d.abort(),d=null);h()});f=function(){if(!F){var a=function(a,b){z(a,b?b.responseURL:void 0)},b=function(a){g(a.message,a)};d=n.requestFile?n.requestFile(e,
c.url,a,k,p,b):e._requestFile(c.url,a,k,!0,p,b)}};a=c.file||B.a.FilesToLoad[c.name.toLowerCase()];if(-1===c.rootUrl.indexOf("file:")||-1!==c.rootUrl.indexOf("file:")&&!a){a=e.getEngine();var q=a.enableOfflineSupport;if(q){q=!1;for(var v=0,I=e.disableOfflineSupportExceptionRules;v<I.length;v++)if(I[v].test(c.url)){q=!0;break}q=!q}q&&E.a.OfflineProviderFactory?e.offlineProvider=E.a.OfflineProviderFactory(c.url,f,a.disableManifestCheck):f()}else a?(f=function(a){g(a.message,a)},d=n.readFile?n.readFile(e,
a,z,k,p,f):e._readFile(a,z,k,p,f)):g("Unable to find file named "+c.name);return n};b._GetFileInfo=function(b,c){var e=null;if(c)if(c.name){var g=b+c.name;var n=c.name;e=c}else{if("/"===c.substr(0,1))return k.b.Error("Wrong sceneFilename parameter"),null;g=b+c;n=c}else g=b,n=k.b.GetFilename(b),b=k.b.GetFolderPath(b);return{url:g,rootUrl:b,name:n,file:e}};b.GetPluginForExtension=function(c){return b._GetPluginForExtension(c).plugin};b.IsPluginForExtensionAvailable=function(c){return!!b._registeredPlugins[c]};
b.RegisterPlugin=function(c){if("string"===typeof c.extensions)b._registeredPlugins[c.extensions.toLowerCase()]={plugin:c,isBinary:!1};else{var e=c.extensions;Object.keys(e).forEach(function(t){b._registeredPlugins[t.toLowerCase()]={plugin:c,isBinary:e[t].isBinary}})}};b.ImportMesh=function(c,e,t,g,k,h,a,f){void 0===t&&(t="");void 0===g&&(g=w.a.LastCreatedScene);void 0===k&&(k=null);void 0===h&&(h=null);void 0===a&&(a=null);void 0===f&&(f=null);if(!g)return q.a.Error("No scene available to import mesh to"),
null;var n=b._GetFileInfo(e,t);if(!n)return null;var p={};g._addPendingData(p);var z=function(){g._removePendingData(p)},d=function(b,c){b="Unable to import meshes from "+n.url+": "+b;a?a(g,b,c):q.a.Error(b);z()},F=h?function(a){try{h(a)}catch(I){d("Error in onProgress callback: "+I,I)}}:void 0,M=function(a,b,c,f,h,e,t){g.importedMeshesFiles.push(n.url);if(k)try{k(a,b,c,f,h,e,t)}catch(S){d("Error in onSuccess callback: "+S,S)}g._removePendingData(p)};return b._LoadData(n,g,function(a,b,f){a.rewriteRootURL&&
(n.rootUrl=a.rewriteRootURL(n.rootUrl,f));if(a.importMesh){f=[];var h=[],e=[];a.importMesh(c,g,b,n.rootUrl,f,h,e,d)&&(g.loadingPluginName=a.name,M(f,h,e,[],[],[],[]))}else a.importMeshAsync(c,g,b,n.rootUrl,F,n.name).then(function(b){g.loadingPluginName=a.name;M(b.meshes,b.particleSystems,b.skeletons,b.animationGroups,b.transformNodes,b.geometries,b.lights)}).catch(function(a){d(a.message,a)})},F,d,z,f)};b.ImportMeshAsync=function(c,e,g,k,p,h){void 0===g&&(g="");void 0===k&&(k=w.a.LastCreatedScene);
void 0===p&&(p=null);void 0===h&&(h=null);return new Promise(function(a,f){b.ImportMesh(c,e,g,k,function(b,c,f,d,h,e,g){a({meshes:b,particleSystems:c,skeletons:f,animationGroups:d,transformNodes:h,geometries:e,lights:g})},p,function(a,b,c){f(c||Error(b))},h)})};b.Load=function(c,e,g,z,p,h,a){void 0===e&&(e="");void 0===g&&(g=w.a.LastCreatedEngine);void 0===z&&(z=null);void 0===p&&(p=null);void 0===h&&(h=null);void 0===a&&(a=null);return g?b.Append(c,e,new K.a(g),z,p,h,a):(k.b.Error("No engine available"),
null)};b.LoadAsync=function(c,e,g,k,p){void 0===e&&(e="");void 0===g&&(g=w.a.LastCreatedEngine);void 0===k&&(k=null);void 0===p&&(p=null);return new Promise(function(h,a){b.Load(c,e,g,function(a){h(a)},k,function(b,c,e){a(e||Error(c))},p)})};b.Append=function(c,e,g,k,p,h,a){var f=this;void 0===e&&(e="");void 0===g&&(g=w.a.LastCreatedScene);void 0===k&&(k=null);void 0===p&&(p=null);void 0===h&&(h=null);void 0===a&&(a=null);if(!g)return q.a.Error("No scene available to append to"),null;var n=b._GetFileInfo(c,
e);if(!n)return null;b.ShowLoadingScreen&&!this._showingLoadingScreen&&(this._showingLoadingScreen=!0,g.getEngine().displayLoadingUI(),g.executeWhenReady(function(){g.getEngine().hideLoadingUI();f._showingLoadingScreen=!1}));var t={};g._addPendingData(t);var z=function(){g._removePendingData(t)},d=function(a,b){a="Unable to load from "+n.url+(a?": "+a:"");h?h(g,a,b):q.a.Error(a);z()},F=p?function(a){try{p(a)}catch(I){d("Error in onProgress callback",I)}}:void 0,M=function(){if(k)try{k(g)}catch(v){d("Error in onSuccess callback",
v)}g._removePendingData(t)};return b._LoadData(n,g,function(a,b){a.load?a.load(g,b,n.rootUrl,d)&&(g.loadingPluginName=a.name,M()):a.loadAsync(g,b,n.rootUrl,F,n.name).then(function(){g.loadingPluginName=a.name;M()}).catch(function(a){d(a.message,a)})},F,d,z,a)};b.AppendAsync=function(c,e,g,k,p){void 0===e&&(e="");void 0===g&&(g=w.a.LastCreatedScene);void 0===k&&(k=null);void 0===p&&(p=null);return new Promise(function(h,a){b.Append(c,e,g,function(a){h(a)},k,function(b,c,e){a(e||Error(c))},p)})};b.LoadAssetContainer=
function(c,e,g,k,p,h,a){void 0===e&&(e="");void 0===g&&(g=w.a.LastCreatedScene);void 0===k&&(k=null);void 0===p&&(p=null);void 0===h&&(h=null);void 0===a&&(a=null);if(!g)return q.a.Error("No scene available to load asset container to"),null;var f=b._GetFileInfo(c,e);if(!f)return null;var n={};g._addPendingData(n);var t=function(){g._removePendingData(n)},u=function(a,b){a="Unable to load assets from "+f.url+(a?": "+a:"");b&&b.message&&(a+=" ("+b.message+")");h?h(g,a,b):q.a.Error(a);t()},d=p?function(a){try{p(a)}catch(v){u("Error in onProgress callback",
v)}}:void 0,z=function(a){if(k)try{k(a)}catch(v){u("Error in onSuccess callback",v)}g._removePendingData(n)};return b._LoadData(f,g,function(a,b){if(a.loadAssetContainer){if(b=a.loadAssetContainer(g,b,f.rootUrl,u))g.loadingPluginName=a.name,z(b)}else a.loadAssetContainerAsync?a.loadAssetContainerAsync(g,b,f.rootUrl,d,f.name).then(function(b){g.loadingPluginName=a.name;z(b)}).catch(function(a){u(a.message,a)}):u("LoadAssetContainer is not supported by this plugin. Plugin did not provide a loadAssetContainer or loadAssetContainerAsync method.")},
d,u,t,a)};b.LoadAssetContainerAsync=function(c,e,g,k,p){void 0===e&&(e="");void 0===g&&(g=w.a.LastCreatedScene);void 0===k&&(k=null);void 0===p&&(p=null);return new Promise(function(h,a){b.LoadAssetContainer(c,e,g,function(a){h(a)},k,function(b,c,e){a(e||Error(c))},p)})};b.ImportAnimations=function(b,c,e,g,k,h,a,f,B,A){void 0===c&&(c="");void 0===e&&(e=w.a.LastCreatedScene);void 0===g&&(g=!0);void 0===k&&(k=y.Clean);void 0===h&&(h=null);void 0===a&&(a=null);void 0===f&&(f=null);void 0===B&&(B=null);
void 0===A&&(A=null);if(e){if(g){g=0;for(k=e.animatables;g<k.length;g++)k[g].reset();e.stopAllAnimations();e.animationGroups.slice().forEach(function(a){a.dispose()});e.getNodes().forEach(function(a){a.animations&&(a.animations=[])})}else switch(k){case y.Clean:e.animationGroups.slice().forEach(function(a){a.dispose()});break;case y.Stop:e.animationGroups.forEach(function(a){a.stop()});break;case y.Sync:e.animationGroups.forEach(function(a){a.reset();a.restart()});break;case y.NoSync:break;default:q.a.Error("Unknown animation group loading mode value '"+
k+"'");return}var n=e.animatables.length;this.LoadAssetContainer(b,c,e,function(b){b.mergeAnimationsTo(e,e.animatables.slice(n),h);b.dispose();e.onAnimationFileImportedObservable.notifyObservers(e);a&&a(e)},f,B,A)}else q.a.Error("No scene available to load animations to")};b.ImportAnimationsAsync=function(c,e,g,k,p,h,a,f,q,B){void 0===e&&(e="");void 0===g&&(g=w.a.LastCreatedScene);void 0===k&&(k=!0);void 0===p&&(p=y.Clean);void 0===h&&(h=null);void 0===a&&(a=null);void 0===f&&(f=null);void 0===q&&
(q=null);void 0===B&&(B=null);return new Promise(function(a,d){b.ImportAnimations(c,e,g,k,p,h,function(b){a(b)},f,function(a,b,c){d(c||Error(b))},B)})};b.NO_LOGGING=0;b.MINIMAL_LOGGING=1;b.SUMMARY_LOGGING=2;b.DETAILED_LOGGING=3;b.OnPluginActivatedObservable=new c.a;b._registeredPlugins={};b._showingLoadingScreen=!1;return b}()},mzcJ:function(e,g,b){b.d(g,"a",function(){return k});var k=function(){function b(){}Object.defineProperty(b,"ForceFullSceneLoadingForIncremental",{get:function(){return b._ForceFullSceneLoadingForIncremental},
set:function(c){b._ForceFullSceneLoadingForIncremental=c},enumerable:!1,configurable:!0});Object.defineProperty(b,"ShowLoadingScreen",{get:function(){return b._ShowLoadingScreen},set:function(c){b._ShowLoadingScreen=c},enumerable:!1,configurable:!0});Object.defineProperty(b,"loggingLevel",{get:function(){return b._loggingLevel},set:function(c){b._loggingLevel=c},enumerable:!1,configurable:!0});Object.defineProperty(b,"CleanBoneMatrixWeights",{get:function(){return b._CleanBoneMatrixWeights},set:function(c){b._CleanBoneMatrixWeights=
c},enumerable:!1,configurable:!0});b._ForceFullSceneLoadingForIncremental=!1;b._ShowLoadingScreen=!0;b._CleanBoneMatrixWeights=!1;b._loggingLevel=0;return b}()}}]);
