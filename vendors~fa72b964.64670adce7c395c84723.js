var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(t){var Y=0;return function(){return Y<t.length?{done:!1,value:t[Y++]}:{done:!0}}};$jscomp.arrayIterator=function(t){return{next:$jscomp.arrayIteratorImpl(t)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(t,Y,E){t!=Array.prototype&&t!=Object.prototype&&(t[Y]=E.value)};$jscomp.getGlobal=function(t){return"undefined"!=typeof window&&window===t?t:"undefined"!=typeof global&&null!=global?global:t};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(t,Y){this.$jscomp$symbol$id_=t;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:Y})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function t(E){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(E||"")+"_"+Y++,E)}var Y=0;return t}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var t=$jscomp.global.Symbol.iterator;t||(t=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[t]&&$jscomp.defineProperty(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var t=$jscomp.global.Symbol.asyncIterator;t||(t=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(t){$jscomp.initSymbolIterator();t={next:t};t[$jscomp.global.Symbol.iterator]=function(){return this};return t};
$jscomp.makeIterator=function(t){var Y="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return Y?Y.call(t):$jscomp.arrayIterator(t)};$jscomp.findInternal=function(t,Y,E){t instanceof String&&(t=String(t));for(var L=t.length,D=0;D<L;D++){var ma=t[D];if(Y.call(E,ma,D,t))return{i:D,v:ma}}return{i:-1,v:void 0}};
$jscomp.polyfill=function(t,Y,E,L){if(Y){E=$jscomp.global;t=t.split(".");for(L=0;L<t.length-1;L++){var D=t[L];D in E||(E[D]={});E=E[D]}t=t[t.length-1];L=E[t];Y=Y(L);Y!=L&&null!=Y&&$jscomp.defineProperty(E,t,{configurable:!0,writable:!0,value:Y})}};$jscomp.polyfill("Array.prototype.find",function(t){return t?t:function(t,E){return $jscomp.findInternal(this,t,E).v}},"es6","es3");
$jscomp.iteratorFromArray=function(t,Y){$jscomp.initSymbolIterator();t instanceof String&&(t+="");var E=0,L={next:function(){if(E<t.length){var D=E++;return{value:Y(D,t[D]),done:!1}}L.next=function(){return{done:!0,value:void 0}};return L.next()}};L[Symbol.iterator]=function(){return L};return L};$jscomp.polyfill("Array.prototype.keys",function(t){return t?t:function(){return $jscomp.iteratorFromArray(this,function(t){return t})}},"es6","es3");
$jscomp.checkStringArgs=function(t,Y,E){if(null==t)throw new TypeError("The 'this' value for String.prototype."+E+" must not be null or undefined");if(Y instanceof RegExp)throw new TypeError("First argument to String.prototype."+E+" must not be a regular expression");return t+""};
$jscomp.polyfill("String.prototype.repeat",function(t){return t?t:function(t){var E=$jscomp.checkStringArgs(this,null,"repeat");if(0>t||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var L="";t;)if(t&1&&(L+=E),t>>>=1)E+=E;return L}},"es6","es3");$jscomp.stringPadding=function(t,Y){t=void 0!==t?String(t):" ";return 0<Y&&t?t.repeat(Math.ceil(Y/t.length)).substring(0,Y):""};
$jscomp.polyfill("String.prototype.padEnd",function(t){return t?t:function(t,E){var L=$jscomp.checkStringArgs(this,null,"padStart");return L+$jscomp.stringPadding(E,t-L.length)}},"es8","es3");$jscomp.polyfill("String.prototype.startsWith",function(t){return t?t:function(t,E){var L=$jscomp.checkStringArgs(this,t,"startsWith");t+="";var D=L.length,Y=t.length;E=Math.max(0,Math.min(E|0,L.length));for(var ja=0;ja<Y&&E<D;)if(L[E++]!=t[ja++])return!1;return ja>=Y}},"es6","es3");
$jscomp.polyfill("String.prototype.endsWith",function(t){return t?t:function(t,E){var L=$jscomp.checkStringArgs(this,t,"endsWith");t+="";void 0===E&&(E=L.length);E=Math.max(0,Math.min(E|0,L.length));for(var D=t.length;0<D&&0<E;)if(L[--E]!=t[--D])return!1;return 0>=D}},"es6","es3");$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(t){function Y(){this.batch_=null}function E(t){return t instanceof D?t:new D(function(a,D){a(t)})}if(t&&!$jscomp.FORCE_POLYFILL_PROMISE)return t;Y.prototype.asyncExecute=function(t){if(null==this.batch_){this.batch_=[];var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})}this.batch_.push(t)};var L=$jscomp.global.setTimeout;Y.prototype.asyncExecuteFunction=function(t){L(t,0)};Y.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var t=
this.batch_;this.batch_=[];for(var a=0;a<t.length;++a){var D=t[a];t[a]=null;try{D()}catch(b){this.asyncThrow_(b)}}}this.batch_=null};Y.prototype.asyncThrow_=function(t){this.asyncExecuteFunction(function(){throw t;})};var D=function(t){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var a=this.createResolveAndReject_();try{t(a.resolve,a.reject)}catch(ra){a.reject(ra)}};D.prototype.createResolveAndReject_=function(){function t(b){return function(c){D||(D=!0,b.call(a,c))}}var a=this,D=
!1;return{resolve:t(this.resolveTo_),reject:t(this.reject_)}};D.prototype.resolveTo_=function(t){if(t===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof D)this.settleSameAsPromise_(t);else{a:switch(typeof t){case "object":var a=null!=t;break a;case "function":a=!0;break a;default:a=!1}a?this.resolveToNonPromiseObj_(t):this.fulfill_(t)}};D.prototype.resolveToNonPromiseObj_=function(t){var a=void 0;try{a=t.then}catch(ra){this.reject_(ra);return}"function"==
typeof a?this.settleSameAsThenable_(a,t):this.fulfill_(t)};D.prototype.reject_=function(t){this.settle_(2,t)};D.prototype.fulfill_=function(t){this.settle_(1,t)};D.prototype.settle_=function(t,a){if(0!=this.state_)throw Error("Cannot settle("+t+", "+a+"): Promise already settled in state"+this.state_);this.state_=t;this.result_=a;this.executeOnSettledCallbacks_()};D.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var t=0;t<this.onSettledCallbacks_.length;++t)ma.asyncExecute(this.onSettledCallbacks_[t]);
this.onSettledCallbacks_=null}};var ma=new Y;D.prototype.settleSameAsPromise_=function(t){var a=this.createResolveAndReject_();t.callWhenSettled_(a.resolve,a.reject)};D.prototype.settleSameAsThenable_=function(t,a){var D=this.createResolveAndReject_();try{t.call(a,D.resolve,D.reject)}catch(b){D.reject(b)}};D.prototype.then=function(t,a){function ra(a,d){return"function"==typeof a?function(d){try{b(a(d))}catch(p){c(p)}}:d}var b,c,d=new D(function(a,d){b=a;c=d});this.callWhenSettled_(ra(t,b),ra(a,c));
return d};D.prototype.catch=function(t){return this.then(void 0,t)};D.prototype.callWhenSettled_=function(t,a){function D(){switch(b.state_){case 1:t(b.result_);break;case 2:a(b.result_);break;default:throw Error("Unexpected state: "+b.state_);}}var b=this;null==this.onSettledCallbacks_?ma.asyncExecute(D):this.onSettledCallbacks_.push(D)};D.resolve=E;D.reject=function(t){return new D(function(a,D){D(t)})};D.race=function(t){return new D(function(a,D){for(var b=$jscomp.makeIterator(t),c=b.next();!c.done;c=
b.next())E(c.value).callWhenSettled_(a,D)})};D.all=function(t){var a=$jscomp.makeIterator(t),ra=a.next();return ra.done?E([]):new D(function(b,c){function d(a){return function(c){h[a]=c;n--;0==n&&b(h)}}var h=[],n=0;do h.push(void 0),n++,E(ra.value).callWhenSettled_(d(h.length-1),c),ra=a.next();while(!ra.done)})};return D},"es6","es3");$jscomp.owns=function(t,Y){return Object.prototype.hasOwnProperty.call(t,Y)};
$jscomp.assign="function"==typeof Object.assign?Object.assign:function(t,Y){for(var E=1;E<arguments.length;E++){var L=arguments[E];if(L)for(var D in L)$jscomp.owns(L,D)&&(t[D]=L[D])}return t};$jscomp.polyfill("Object.assign",function(t){return t||$jscomp.assign},"es6","es3");$jscomp.checkEs6ConformanceViaProxy=function(){try{var t={},Y=Object.create(new $jscomp.global.Proxy(t,{get:function(E,L,D){return E==t&&"q"==L&&D==Y}}));return!0===Y.q}catch(E){return!1}};
$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();
$jscomp.polyfill("WeakMap",function(t){function Y(){if(!t||!Object.seal)return!1;try{var a=Object.seal({}),b=Object.seal({}),c=new t([[a,2],[b,3]]);if(2!=c.get(a)||3!=c.get(b))return!1;c.delete(a);c.set(b,4);return!c.has(a)&&4==c.get(b)}catch(d){return!1}}function E(){}function L(a){if(!$jscomp.owns(a,ma)){var b=new E;$jscomp.defineProperty(a,ma,{value:b})}}function D(a){var b=Object[a];b&&(Object[a]=function(a){if(a instanceof E)return a;L(a);return b(a)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(t&&
$jscomp.ES6_CONFORMANCE)return t}else if(Y())return t;var ma="$jscomp_hidden_"+Math.random();D("freeze");D("preventExtensions");D("seal");var ja=0,a=function(a){this.id_=(ja+=Math.random()+1).toString();if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};a.prototype.set=function(a,b){L(a);if(!$jscomp.owns(a,ma))throw Error("WeakMap key fail: "+a);a[ma][this.id_]=b;return this};a.prototype.get=function(a){return $jscomp.owns(a,ma)?a[ma][this.id_]:void 0};a.prototype.has=
function(a){return $jscomp.owns(a,ma)&&$jscomp.owns(a[ma],this.id_)};a.prototype.delete=function(a){return $jscomp.owns(a,ma)&&$jscomp.owns(a[ma],this.id_)?delete a[ma][this.id_]:!1};return a},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(t){function Y(){if($jscomp.ASSUME_NO_NATIVE_MAP||!t||"function"!=typeof t||!t.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),b=new t($jscomp.makeIterator([[a,"s"]]));if("s"!=b.get(a)||1!=b.size||b.get({x:4})||b.set({x:4},"t")!=b||2!=b.size)return!1;var c=b.entries(),d=c.next();if(d.done||d.value[0]!=a||"s"!=d.value[1])return!1;d=c.next();return d.done||4!=d.value[0].x||"t"!=d.value[1]||!c.next().done?!1:!0}catch(h){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(t&&$jscomp.ES6_CONFORMANCE)return t}else if(Y())return t;$jscomp.initSymbolIterator();var E=new WeakMap,L=function(a){this.data_={};this.head_=ja();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};L.prototype.set=function(a,b){a=0===a?0:a;var c=D(this,a);c.list||(c.list=this.data_[c.id]=[]);c.entry?c.entry.value=b:(c.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,
value:b},c.list.push(c.entry),this.head_.previous.next=c.entry,this.head_.previous=c.entry,this.size++);return this};L.prototype.delete=function(a){a=D(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};L.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=ja();this.size=0};L.prototype.has=function(a){return!!D(this,a).entry};
L.prototype.get=function(a){return(a=D(this,a).entry)&&a.value};L.prototype.entries=function(){return ma(this,function(a){return[a.key,a.value]})};L.prototype.keys=function(){return ma(this,function(a){return a.key})};L.prototype.values=function(){return ma(this,function(a){return a.value})};L.prototype.forEach=function(a,b){for(var c=this.entries(),d;!(d=c.next()).done;)d=d.value,a.call(b,d[1],d[0],this)};L.prototype[Symbol.iterator]=L.prototype.entries;var D=function(t,b){var c=b&&typeof b;"object"==
c||"function"==c?E.has(b)?c=E.get(b):(c=""+ ++a,E.set(b,c)):c="p_"+b;var d=t.data_[c];if(d&&$jscomp.owns(t.data_,c))for(t=0;t<d.length;t++){var h=d[t];if(b!==b&&h.key!==h.key||b===h.key)return{id:c,list:d,index:t,entry:h}}return{id:c,list:d,index:-1,entry:void 0}},ma=function(a,b){var c=a.head_;return $jscomp.iteratorPrototype(function(){if(c){for(;c.head!=a.head_;)c=c.previous;for(;c.next!=c.head;)return c=c.next,{done:!1,value:b(c)};c=null}return{done:!0,value:void 0}})},ja=function(){var a={};
return a.previous=a.next=a.head=a},a=0;return L},"es6","es3");
$jscomp.polyfill("Set",function(t){function Y(){if($jscomp.ASSUME_NO_NATIVE_SET||!t||"function"!=typeof t||!t.prototype.entries||"function"!=typeof Object.seal)return!1;try{var E=Object.seal({x:4}),D=new t($jscomp.makeIterator([E]));if(!D.has(E)||1!=D.size||D.add(E)!=D||1!=D.size||D.add({x:4})!=D||2!=D.size)return!1;var Y=D.entries(),ja=Y.next();if(ja.done||ja.value[0]!=E||ja.value[1]!=E)return!1;ja=Y.next();return ja.done||ja.value[0]==E||4!=ja.value[0].x||ja.value[1]!=ja.value[0]?!1:Y.next().done}catch(a){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(t&&$jscomp.ES6_CONFORMANCE)return t}else if(Y())return t;$jscomp.initSymbolIterator();var E=function(t){this.map_=new Map;if(t){t=$jscomp.makeIterator(t);for(var D;!(D=t.next()).done;)this.add(D.value)}this.size=this.map_.size};E.prototype.add=function(t){t=0===t?0:t;this.map_.set(t,t);this.size=this.map_.size;return this};E.prototype.delete=function(t){t=this.map_.delete(t);this.size=this.map_.size;return t};E.prototype.clear=function(){this.map_.clear();
this.size=0};E.prototype.has=function(t){return this.map_.has(t)};E.prototype.entries=function(){return this.map_.entries()};E.prototype.values=function(){return this.map_.values()};E.prototype.keys=E.prototype.values;E.prototype[Symbol.iterator]=E.prototype.values;E.prototype.forEach=function(t,D){var E=this;this.map_.forEach(function(Y){return t.call(D,Y,Y,E)})};return E},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(t){return t?t:function(t,E,L){var D=this.length||0;0>E&&(E=Math.max(0,D+E));if(null==L||L>D)L=D;L=Number(L);0>L&&(L=Math.max(0,D+L));for(E=Number(E||0);E<L;E++)this[E]=t;return this}},"es6","es3");$jscomp.polyfill("Object.is",function(t){return t?t:function(t,E){return t===E?0!==t||1/t===1/E:t!==t&&E!==E}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(t){return t?t:function(t,E){var L=this;L instanceof String&&(L=String(L));var D=L.length;E=E||0;for(0>E&&(E=Math.max(E+D,0));E<D;E++){var Y=L[E];if(Y===t||Object.is(Y,t))return!0}return!1}},"es7","es3");$jscomp.polyfill("String.prototype.includes",function(t){return t?t:function(t,E){return-1!==$jscomp.checkStringArgs(this,t,"includes").indexOf(t,E||0)}},"es6","es3");
$jscomp.polyfill("Number.isFinite",function(t){return t?t:function(t){return"number"!==typeof t?!1:!isNaN(t)&&Infinity!==t&&-Infinity!==t}},"es6","es3");$jscomp.polyfill("Number.isInteger",function(t){return t?t:function(t){return Number.isFinite(t)?t===Math.floor(t):!1}},"es6","es3");
(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{VS3o:function(t,Y,E){(function(E,D){var L,ja;!function(b,a){"object"==typeof t.exports?t.exports=b.document?a(b,!0):function(b){if(!b.document)throw Error("jQuery requires a window with a document");return a(b)}:a(b)}("undefined"!=typeof window?window:this,function(b,a){function c(b,a,c){var y,e,sa=(c=c||na).createElement("script");if(sa.text=b,a)for(y in Ta)(e=a[y]||a.getAttribute&&a.getAttribute(y))&&sa.setAttribute(y,e);c.head.appendChild(sa).parentNode.removeChild(sa)}
function h(b){return null==b?b+"":"object"==typeof b||"function"==typeof b?Ya[ma.call(b)]||"object":typeof b}function n(b){var a=!!b&&"length"in b&&b.length,y=h(b);return!ea(b)&&!Za(b)&&("array"===y||0===a||"number"==typeof a&&0<a&&a-1 in b)}function g(b,a){return b.nodeName&&b.nodeName.toLowerCase()===a.toLowerCase()}function p(b,a,c){return ea(a)?r.grep(b,function(b,y){return!!a.call(b,y,b)!==c}):a.nodeType?r.grep(b,function(b){return b===a!==c}):"string"!=typeof a?r.grep(b,function(b){return-1<
Ma.call(a,b)!==c}):r.filter(a,b,c)}function q(b,a){for(;(b=b[a])&&1!==b.nodeType;);return b}function x(b){return b}function A(b){throw b;}function v(b,a,c,e){var y;try{b&&ea(y=b.promise)?y.call(b).done(a).fail(c):b&&ea(y=b.then)?y.call(b,a,c):a.apply(void 0,[b].slice(e))}catch(pc){c.apply(void 0,[pc])}}function B(){na.removeEventListener("DOMContentLoaded",B);b.removeEventListener("load",B);r.ready()}function e(b,a){return a.toUpperCase()}function k(b){return b.replace(wa,"ms-").replace($a,e)}function z(){this.expando=
r.expando+z.uid++}function l(b,a,c){var y;if(void 0===c&&1===b.nodeType)if(y="data-"+a.replace(Mb,"-$&").toLowerCase(),"string"==typeof(c=b.getAttribute(y))){try{y=c,c="true"===y||"false"!==y&&("null"===y?null:y===+y+""?+y:ra.test(y)?JSON.parse(y):y)}catch(wc){}Aa.set(b,a,c)}else c=void 0;return c}function u(b,a,c,e){var y,f,sa=20,k=e?function(){return e.cur()}:function(){return r.css(b,a,"")},d=k(),l=c&&c[3]||(r.cssNumber[a]?"":"px"),m=b.nodeType&&(r.cssNumber[a]||"px"!==l&&+d)&&ub.exec(r.css(b,
a));if(m&&m[3]!==l){d/=2;l=l||m[3];for(m=+d||1;sa--;)r.style(b,a,m+l),0>=(1-f)*(1-(f=k()/d||.5))&&(sa=0),m/=f;m*=2;r.style(b,a,m+l);c=c||[]}return c&&(m=+m||+d||0,y=c[1]?m+(c[1]+1)*c[2]:+c[2],e&&(e.unit=l,e.start=m,e.end=y)),y}function C(b,a){for(var y,c,e=[],f=0,sa=b.length;f<sa;f++)if((c=b[f]).style)if(y=c.style.display,a){if("none"===y&&(e[f]=fa.get(c,"display")||null,e[f]||(c.style.display="")),""===c.style.display&&jb(c)){y=f;var d=void 0;var k=c.ownerDocument;var l=c.nodeName;k=(c=Ea[l])||(d=
k.body.appendChild(k.createElement(l)),c=r.css(d,"display"),d.parentNode.removeChild(d),"none"===c&&(c="block"),Ea[l]=c,c);e[y]=k}}else"none"!==y&&(e[f]="none",fa.set(c,"display",y));for(f=0;f<sa;f++)null!=e[f]&&(b[f].style.display=e[f]);return b}function w(b,a){var y;return y=void 0!==b.getElementsByTagName?b.getElementsByTagName(a||"*"):void 0!==b.querySelectorAll?b.querySelectorAll(a||"*"):[],void 0===a||a&&g(b,a)?r.merge([b],y):y}function J(b,a){for(var y=0,c=b.length;y<c;y++)fa.set(b[y],"globalEval",
!a||fa.get(a[y],"globalEval"))}function G(b,a,c,e,f){for(var y,sa,d,k,l=a.createDocumentFragment(),m=[],ba=0,p=b.length;ba<p;ba++)if((y=b[ba])||0===y)if("object"===h(y))r.merge(m,y.nodeType?[y]:y);else if(Tb.test(y)){sa=sa||l.appendChild(a.createElement("div"));d=(yb.exec(y)||["",""])[1].toLowerCase();d=ab[d]||ab._default;sa.innerHTML=d[1]+r.htmlPrefilter(y)+d[2];for(d=d[0];d--;)sa=sa.lastChild;r.merge(m,sa.childNodes);(sa=l.firstChild).textContent=""}else m.push(a.createTextNode(y));l.textContent=
"";for(ba=0;y=m[ba++];)if(e&&-1<r.inArray(y,e))f&&f.push(y);else if(k=Qa(y),sa=w(l.appendChild(y),"script"),k&&J(sa),c)for(d=0;y=sa[d++];)Ua.test(y.type||"")&&c.push(y);return l}function m(){return!0}function f(){return!1}function N(b,a){a:{try{var y=na.activeElement;break a}catch(cc){}y=void 0}return b===y==("focus"===a)}function M(b,a,c,e,d,k){var y,sa;if("object"==typeof a){for(sa in"string"!=typeof c&&(e=e||c,c=void 0),a)M(b,sa,c,e,a[sa],k);return b}if(null==e&&null==d?(d=c,e=c=void 0):null==
d&&("string"==typeof c?(d=e,e=void 0):(d=e,e=c,c=void 0)),!1===d)d=f;else if(!d)return b;return 1===k&&(y=d,(d=function(b){return r().off(b),y.apply(this,arguments)}).guid=y.guid||(y.guid=r.guid++)),b.each(function(){r.event.add(this,a,d,e,c)})}function da(b,a,c){c?(fa.set(b,a,!1),r.event.add(b,a,{namespace:!1,handler:function(b){var y,e,f=fa.get(this,a);if(1&b.isTrigger&&this[a])if(f.length)(r.event.special[a]||{}).delegateType&&b.stopPropagation();else{if(f=Na.call(arguments),fa.set(this,a,f),y=
c(this,a),this[a](),f!==(e=fa.get(this,a))||y?fa.set(this,a,!1):e={},f!==e)return b.stopImmediatePropagation(),b.preventDefault(),e.value}else f.length&&(fa.set(this,a,{value:r.event.trigger(r.extend(f[0],r.Event.prototype),f.slice(1),this)}),b.stopImmediatePropagation())}})):void 0===fa.get(b,a)&&r.event.add(b,a,m)}function X(b,a){return g(b,"table")&&g(11!==a.nodeType?a:a.firstChild,"tr")&&r(b).children("tbody")[0]||b}function Q(b){return b.type=(null!==b.getAttribute("type"))+"/"+b.type,b}function F(b){return"true/"===
(b.type||"").slice(0,5)?b.type=b.type.slice(5):b.removeAttribute("type"),b}function Ba(b,a){var y,c,e,f,d;if(1===a.nodeType){if(fa.hasData(b)&&(d=fa.get(b).events))for(c in fa.remove(a,"handle events"),d){var k=0;for(y=d[c].length;k<y;k++)r.event.add(a,c,d[c][k])}Aa.hasData(b)&&(e=Aa.access(b),f=r.extend({},e),Aa.set(a,f))}}function Z(b,a,e,f){a=Oa(a);var y,d,k,l=0,m=b.length,sa=m-1,h=a[0],ba=ea(h);if(ba||1<m&&"string"==typeof h&&!qa.checkClone&&kb.test(h))return b.each(function(y){var c=b.eq(y);
ba&&(a[0]=h.call(this,y,c.html()));Z(c,a,e,f)});if(m&&(d=(y=G(a,b[0].ownerDocument,!1,b,f)).firstChild,1===y.childNodes.length&&(y=d),d||f)){for(k=(d=r.map(w(y,"script"),Q)).length;l<m;l++){var p=y;l!==sa&&(p=r.clone(p,!0,!0),k&&r.merge(d,w(p,"script")));e.call(b[l],p,l)}if(k)for(y=d[d.length-1].ownerDocument,r.map(d,F),l=0;l<k;l++)p=d[l],Ua.test(p.type||"")&&!fa.access(p,"globalEval")&&r.contains(y,p)&&(p.src&&"module"!==(p.type||"").toLowerCase()?r._evalUrl&&!p.noModule&&r._evalUrl(p.src,{nonce:p.nonce||
p.getAttribute("nonce")},y):c(p.textContent.replace(Ib,""),p,y))}return b}function P(b,a,c){for(var y=a?r.filter(a,b):b,e=0;null!=(a=y[e]);e++)c||1!==a.nodeType||r.cleanData(w(a)),a.parentNode&&(c&&Qa(a)&&J(w(a,"script")),a.parentNode.removeChild(a));return b}function ta(b,a,c){var y,e,f,d,k=b.style;return(c=c||fb(b))&&(""!==(d=c.getPropertyValue(a)||c[a])||Qa(b)||(d=r.style(b,a)),!qa.pixelBoxStyles()&&Ha.test(d)&&oa.test(a)&&(y=k.width,e=k.minWidth,f=k.maxWidth,k.minWidth=k.maxWidth=k.width=d,d=
c.width,k.width=y,k.minWidth=e,k.maxWidth=f)),void 0!==d?d+"":d}function S(b,a){return{get:function(){if(!b())return(this.get=a).apply(this,arguments);delete this.get}}}function R(b){var a;if(!(a=r.cssProps[b]||Nb[b])){if(!(b in Ca)){a:{a=b;for(var y=a[0].toUpperCase()+a.slice(1),c=dc.length;c--;)if((a=dc[c]+y)in Ca)break a;a=void 0}b=Nb[b]=a||b}a=b}return a}function W(b,a,c){return(b=ub.exec(a))?Math.max(0,b[2]-(c||0))+(b[3]||"px"):a}function O(b,a,c,e,f,d){var y="width"===a?1:0,k=0,l=0;if(c===(e?
"border":"content"))return 0;for(;4>y;y+=2)"margin"===c&&(l+=r.css(b,c+xa[y],!0,f)),e?("content"===c&&(l-=r.css(b,"padding"+xa[y],!0,f)),"margin"!==c&&(l-=r.css(b,"border"+xa[y]+"Width",!0,f))):(l+=r.css(b,"padding"+xa[y],!0,f),"padding"!==c?l+=r.css(b,"border"+xa[y]+"Width",!0,f):k+=r.css(b,"border"+xa[y]+"Width",!0,f));return!e&&0<=d&&(l+=Math.max(0,Math.ceil(b["offset"+a[0].toUpperCase()+a.slice(1)]-d-l-k-.5))||0),l}function I(b,a,c){var y=fb(b),e=(!qa.boxSizingReliable()||c)&&"border-box"===r.css(b,
"boxSizing",!1,y),f=e,d=ta(b,a,y),k="offset"+a[0].toUpperCase()+a.slice(1);if(Ha.test(d)){if(!c)return d;d="auto"}return(!qa.boxSizingReliable()&&e||!qa.reliableTrDimensions()&&g(b,"tr")||"auto"===d||!parseFloat(d)&&"inline"===r.css(b,"display",!1,y))&&b.getClientRects().length&&(e="border-box"===r.css(b,"boxSizing",!1,y),(f=k in b)&&(d=b[k])),(d=parseFloat(d)||0)+O(b,a,c||(e?"border":"content"),f,y,d)+"px"}function H(b,a,c,e,f){return new H.prototype.init(b,a,c,e,f)}function K(){Fa&&(!1===na.hidden&&
b.requestAnimationFrame?b.requestAnimationFrame(K):b.setTimeout(K,r.fx.interval),r.fx.tick())}function ka(){return b.setTimeout(function(){ob=void 0}),ob=Date.now()}function ca(b,a){var y,c=0,e={height:b};for(a=a?1:0;4>c;c+=2-a)e["margin"+(y=xa[c])]=e["padding"+y]=b;return a&&(e.opacity=e.width=b),e}function ia(b,a,c){for(var y,e=(aa.tweeners[a]||[]).concat(aa.tweeners["*"]),f=0,d=e.length;f<d;f++)if(y=e[f].call(c,a,b))return y}function aa(b,a,c){var y,e=0,f=aa.prefilters.length,d=r.Deferred().always(function(){delete l.elem}),
l=function(){if(y)return!1;var a=ob||ka();a=Math.max(0,m.startTime+m.duration-a);for(var c=1-(a/m.duration||0),e=0,f=m.tweens.length;e<f;e++)m.tweens[e].run(c);return d.notifyWith(b,[m,c,a]),1>c&&f?a:(f||d.notifyWith(b,[m,1,0]),d.resolveWith(b,[m]),!1)},m=d.promise({elem:b,props:r.extend({},a),opts:r.extend(!0,{specialEasing:{},easing:r.easing._default},c),originalProperties:a,originalOptions:c,startTime:ob||ka(),duration:c.duration,tweens:[],createTween:function(a,c){a=r.Tween(b,m.opts,a,c,m.opts.specialEasing[a]||
m.opts.easing);return m.tweens.push(a),a},stop:function(a){var c=0,e=a?m.tweens.length:0;if(y)return this;for(y=!0;c<e;c++)m.tweens[c].run(1);return a?(d.notifyWith(b,[m,1,0]),d.resolveWith(b,[m,a])):d.rejectWith(b,[m,a]),this}});c=m.props;!function(b,a){var c,y,e,f,d;for(c in b)if(e=a[y=k(c)],f=b[c],Array.isArray(f)&&(e=f[1],f=b[c]=f[0]),c!==y&&(b[y]=f,delete b[c]),(d=r.cssHooks[y])&&"expand"in d)for(c in f=d.expand(f),delete b[y],f)c in b||(b[c]=f[c],a[c]=e);else a[y]=e}(c,m.opts.specialEasing);
for(;e<f;e++)if(a=aa.prefilters[e].call(m,b,c,m.opts))return ea(a.stop)&&(r._queueHooks(m.elem,m.opts.queue).stop=a.stop.bind(a)),a;return r.map(c,ia,m),ea(m.opts.start)&&m.opts.start.call(b,m),m.progress(m.opts.progress).done(m.opts.done,m.opts.complete).fail(m.opts.fail).always(m.opts.always),r.fx.timer(r.extend(l,{elem:b,anim:m,queue:m.opts.queue})),m}function T(b){return(b.match(Wa)||[]).join(" ")}function U(b){return b.getAttribute&&b.getAttribute("class")||""}function la(b){return Array.isArray(b)?
b:"string"==typeof b&&b.match(Wa)||[]}function D(b,a,c,e){var y;if(Array.isArray(a))r.each(a,function(a,y){c||va.test(b)?e(b,y):D(b+"["+("object"==typeof y&&null!=y?a:"")+"]",y,c,e)});else if(c||"object"!==h(a))e(b,a);else for(y in a)D(b+"["+y+"]",a[y],c,e)}function V(b){return function(a,c){"string"!=typeof a&&(c=a,a="*");var y=0,e=a.toLowerCase().match(Wa)||[];if(ea(c))for(;a=e[y++];)"+"===a[0]?(a=a.slice(1)||"*",(b[a]=b[a]||[]).unshift(c)):(b[a]=b[a]||[]).push(c)}}function ha(b,a,c,e){function y(m){var k;
return f[m]=!0,r.each(b[m]||[],function(b,m){b=m(a,c,e);return"string"!=typeof b||d||f[b]?d?!(k=b):void 0:(a.dataTypes.unshift(b),y(b),!1)}),k}var f={},d=b===zb;return y(a.dataTypes[0])||!f["*"]&&y("*")}function E(b,a){var c,y,e=r.ajaxSettings.flatOptions||{};for(c in a)void 0!==a[c]&&((e[c]?b:y||(y={}))[c]=a[c]);return y&&r.extend(!0,b,y),b}var pa=[],pb=Object.getPrototypeOf,Na=pa.slice,Oa=pa.flat?function(b){return pa.flat.call(b)}:function(b){return pa.concat.apply([],b)},bb=pa.push,Ma=pa.indexOf,
Ya={},ma=Ya.toString,vb=Ya.hasOwnProperty,wb=vb.toString,Ab=wb.call(Object),qa={},ea=function(b){return"function"==typeof b&&"number"!=typeof b.nodeType},Za=function(b){return null!=b&&b===b.window},na=b.document,Ta={type:!0,src:!0,nonce:!0,noModule:!0},r=function(b,a){return new r.fn.init(b,a)};$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();r.fn=r.prototype={jquery:"3.5.0",constructor:r,length:0,toArray:function(){return Na.call(this)},
get:function(b){return null==b?Na.call(this):0>b?this[b+this.length]:this[b]},pushStack:function(b){b=r.merge(this.constructor(),b);return b.prevObject=this,b},each:function(b){return r.each(this,b)},map:function(b){return this.pushStack(r.map(this,function(a,c){return b.call(a,c,a)}))},slice:function(){return this.pushStack(Na.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(r.grep(this,function(b,a){return(a+1)%
2}))},odd:function(){return this.pushStack(r.grep(this,function(b,a){return a%2}))},eq:function(b){var a=this.length;b=+b+(0>b?a:0);return this.pushStack(0<=b&&b<a?[this[b]]:[])},end:function(){return this.prevObject||this.constructor()},push:bb,sort:pa.sort,splice:pa.splice};r.extend=r.fn.extend=function(){var b,a,c,e,f,d=arguments[0]||{},m=1,k=arguments.length,l=!1;"boolean"==typeof d&&(l=d,d=arguments[m]||{},m++);"object"==typeof d||ea(d)||(d={});for(m===k&&(d=this,m--);m<k;m++)if(null!=(b=arguments[m]))for(a in b){var h=
b[a];"__proto__"!==a&&d!==h&&(l&&h&&(r.isPlainObject(h)||(e=Array.isArray(h)))?(c=d[a],f=e&&!Array.isArray(c)?[]:e||r.isPlainObject(c)?c:{},e=!1,d[a]=r.extend(l,f,h)):void 0!==h&&(d[a]=h))}return d};r.extend({expando:"jQuery"+("3.5.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(b){throw Error(b);},noop:function(){},isPlainObject:function(b){var a,c;return!(!b||"[object Object]"!==ma.call(b))&&(!(a=pb(b))||"function"==typeof(c=vb.call(a,"constructor")&&a.constructor)&&wb.call(c)===Ab)},
isEmptyObject:function(b){for(var a in b)return!1;return!0},globalEval:function(b,a,e){c(b,{nonce:a&&a.nonce},e)},each:function(b,a){var c,y=0;if(n(b))for(c=b.length;y<c&&!1!==a.call(b[y],y,b[y]);y++);else for(y in b)if(!1===a.call(b[y],y,b[y]))break;return b},makeArray:function(b,a){a=a||[];return null!=b&&(n(Object(b))?r.merge(a,"string"==typeof b?[b]:b):bb.call(a,b)),a},inArray:function(b,a,c){return null==a?-1:Ma.call(a,b,c)},merge:function(b,a){for(var c=+a.length,y=0,e=b.length;y<c;y++)b[e++]=
a[y];return b.length=e,b},grep:function(b,a,c){var y=[],e=0,f=b.length;for(c=!c;e<f;e++)!a(b[e],e)!==c&&y.push(b[e]);return y},map:function(b,a,c){var y,e,f=0,d=[];if(n(b))for(y=b.length;f<y;f++)null!=(e=a(b[f],f,c))&&d.push(e);else for(f in b)null!=(e=a(b[f],f,c))&&d.push(e);return Oa(d)},guid:1,support:qa});"function"==typeof Symbol&&(r.fn[Symbol.iterator]=pa[Symbol.iterator]);r.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(b,a){Ya["[object "+a+
"]"]=a.toLowerCase()});var lb=function(b){function a(b,a,c,y){var e,f,d,m,k=a&&a.ownerDocument;var l=a?a.nodeType:9;if(c=c||[],"string"!=typeof b||!b||1!==l&&9!==l&&11!==l)return c;if(!y&&(G(a),a=a||M,B)){if(11!==l&&(m=E.exec(b)))if(e=m[1])if(9===l){if(!(f=a.getElementById(e)))return c;if(f.id===e)return c.push(f),c}else{if(k&&(f=k.getElementById(e))&&ka(a,f)&&f.id===e)return c.push(f),c}else{if(m[2])return U.apply(c,a.getElementsByTagName(b)),c;if((e=m[3])&&w.getElementsByClassName&&a.getElementsByClassName)return U.apply(c,
a.getElementsByClassName(e)),c}if(!(!w.qsa||Ba[b+" "]||N&&N.test(b)||1===l&&"object"===a.nodeName.toLowerCase())){if(e=b,k=a,1===l&&(la.test(b)||V.test(b))){(k=eb.test(b)&&p(a.parentNode)||a)===a&&w.scope||((d=a.getAttribute("id"))?d=d.replace(lb,pa):a.setAttribute("id",d=F));for(l=(e=H(b)).length;l--;)e[l]=(d?"#"+d:":scope")+" "+g(e[l]);e=e.join(",")}try{return U.apply(c,k.querySelectorAll(e)),c}catch(Ac){Ba(b,!0)}finally{d===F&&a.removeAttribute("id")}}}return ub(b.replace(Qa,"$1"),a,c,y)}function c(){var b=
[];return function qc(a,c){return b.push(a+" ")>C.cacheLength&&delete qc[b.shift()],qc[a+" "]=c}}function y(b){return b[F]=!0,b}function e(b){var a=M.createElement("fieldset");try{return!!b(a)}catch(yc){return!1}finally{a.parentNode&&a.parentNode.removeChild(a)}}function f(b,a){b=b.split("|");for(var c=b.length;c--;)C.attrHandle[b[c]]=a}function d(b,a){var c=a&&b,y=c&&1===b.nodeType&&1===a.nodeType&&b.sourceIndex-a.sourceIndex;if(y)return y;if(c)for(;c=c.nextSibling;)if(c===a)return-1;return b?1:
-1}function m(b){return function(a){return"input"===a.nodeName.toLowerCase()&&a.type===b}}function k(b){return function(a){var c=a.nodeName.toLowerCase();return("input"===c||"button"===c)&&a.type===b}}function l(b){return function(a){return"form"in a?a.parentNode&&!1===a.disabled?"label"in a?"label"in a.parentNode?a.parentNode.disabled===b:a.disabled===b:a.isDisabled===b||a.isDisabled!==!b&&fa(a)===b:a.disabled===b:"label"in a&&a.disabled===b}}function h(b){return y(function(a){return a=+a,y(function(c,
y){for(var e,f=b([],c.length,a),d=f.length;d--;)c[e=f[d]]&&(c[e]=!(y[e]=c[e]))})})}function p(b){return b&&void 0!==b.getElementsByTagName&&b}function ba(){}function g(b){for(var a=0,c=b.length,y="";a<c;a++)y+=b[a].value;return y}function r(b,a,c){var y=a.dir,e=a.next,f=e||y,d=c&&"parentNode"===f,m=ia++;return a.first?function(a,c,e){for(;a=a[y];)if(1===a.nodeType||d)return b(a,c,e);return!1}:function(a,c,k){var l,h,p,ba=[W,m];if(k)for(;a=a[y];){if((1===a.nodeType||d)&&b(a,c,k))return!0}else for(;a=
a[y];)if(1===a.nodeType||d)if(h=(p=a[F]||(a[F]={}))[a.uniqueID]||(p[a.uniqueID]={}),e&&e===a.nodeName.toLowerCase())a=a[y]||a;else{if((l=h[f])&&l[0]===W&&l[1]===m)return ba[2]=l[2];if(h[f]=ba,ba[2]=b(a,c,k))return!0}return!1}}function u(b){return 1<b.length?function(a,c,y){for(var e=b.length;e--;)if(!b[e](a,c,y))return!1;return!0}:b[0]}function n(b,a,c,y,e){for(var f,d=[],m=0,k=b.length,l=null!=a;m<k;m++)(f=b[m])&&(c&&!c(f,y,e)||(d.push(f),l&&a.push(m)));return d}function z(b,c,e,f,d,m){return f&&
!f[F]&&(f=z(f)),d&&!d[F]&&(d=z(d,m)),y(function(y,m,k,l){var h,p=[],ba=[],g=m.length,r;if(!(r=y)){r=c||"*";for(var u=k.nodeType?[k]:k,z=[],q=0,w=u.length;q<w;q++)a(r,u[q],z);r=z}r=!b||!y&&c?r:n(r,p,b,k,l);u=e?d||(y?b:g||f)?[]:m:r;if(e&&e(r,u,k,l),f){var J=n(u,ba);f(J,[],k,l);for(k=J.length;k--;)(h=J[k])&&(u[ba[k]]=!(r[ba[k]]=h))}if(y){if(d||b){if(d){J=[];for(k=u.length;k--;)(h=u[k])&&J.push(r[k]=h);d(null,u=[],J,l)}for(k=u.length;k--;)(h=u[k])&&-1<(J=d?ta(y,h):p[k])&&(y[J]=!(m[J]=h))}}else u=n(u===
m?u.splice(g,u.length):u),d?d(null,m,u,l):U.apply(m,u)})}function q(b){var a,c,y=b.length,e=C.relative[b[0].type];var f=e||C.relative[" "];for(var d=e?1:0,k=r(function(b){return b===a},f,!0),m=r(function(b){return-1<ta(a,b)},f,!0),l=[function(b,c,y){b=!e&&(y||c!==I)||((a=c).nodeType?k(b,c,y):m(b,c,y));return a=null,b}];d<y;d++)if(f=C.relative[b[d].type])l=[r(u(l),f)];else{if((f=C.filter[b[d].type].apply(null,b[d].matches))[F]){for(c=++d;c<y&&!C.relative[b[c].type];c++);return z(1<d&&u(l),1<d&&g(b.slice(0,
d-1).concat({value:" "===b[d-2].type?"*":""})).replace(Qa,"$1"),f,d<c&&q(b.slice(d,c)),c<y&&q(b=b.slice(c)),c<y&&g(b))}l.push(f)}return u(l)}var J,w,C,O,K,H,x,ub,I,X,A,G,M,v,B,N,ca,da,ka,F="sizzle"+1*new Date,Q=b.document,W=0,ia=0,xa=c(),aa=c(),T=c(),Ba=c(),Ja=function(b,a){return b===a&&(A=!0),0},t={}.hasOwnProperty,Z=[],Za=Z.pop,P=Z.push,U=Z.push,na=Z.slice,ta=function(b,a){for(var c=0,y=b.length;c<y;c++)if(b[c]===a)return c;return-1},S=/[\x20\t\r\n\f]+/g,Qa=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,
R=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,V=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,la=/[\x20\t\r\n\f]|>/,D=/:((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,
jb=/^(?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+$/,mb={ID:/^#((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+)/,CLASS:/^\.((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+)/,TAG:/^((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+|[*])/,ATTR:/^\[[\x20\t\r\n\f]*((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+))|)[\x20\t\r\n\f]*\]/,
PSEUDO:/^:((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,
bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},Pa=/HTML$/i,Ea=/^(?:input|select|textarea|button)$/i,uc=/^h\d$/i,ha=/^[^{]+\{\s*\[native \w/,E=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,eb=/[+~]/,Ta=/\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\([^\r\n\f])/g,ea=function(b,a){b="0x"+b.slice(1)-
65536;return a||(0>b?String.fromCharCode(b+65536):String.fromCharCode(b>>10|55296,1023&b|56320))},lb=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,pa=function(b,a){return a?"\x00"===b?"\ufffd":b.slice(0,-1)+"\\"+b.charCodeAt(b.length-1).toString(16)+" ":"\\"+b},L=function(){G()},fa=r(function(b){return!0===b.disabled&&"fieldset"===b.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{U.apply(Z=na.call(Q.childNodes),Q.childNodes),Z[Q.childNodes.length].nodeType}catch(xc){U={apply:Z.length?
function(b,a){P.apply(b,na.call(a))}:function(b,a){for(var c=b.length,y=0;b[c++]=a[y++];);b.length=c-1}}}for(J in w=a.support={},K=a.isXML=function(b){var a=(b.ownerDocument||b).documentElement;return!Pa.test(b.namespaceURI||a&&a.nodeName||"HTML")},G=a.setDocument=function(b){var a,c;b=b?b.ownerDocument||b:Q;return b!=M&&9===b.nodeType&&b.documentElement?(v=(M=b).documentElement,B=!K(M),Q!=M&&(c=M.defaultView)&&c.top!==c&&(c.addEventListener?c.addEventListener("unload",L,!1):c.attachEvent&&c.attachEvent("onunload",
L)),w.scope=e(function(b){return v.appendChild(b).appendChild(M.createElement("div")),void 0!==b.querySelectorAll&&!b.querySelectorAll(":scope fieldset div").length}),w.attributes=e(function(b){return b.className="i",!b.getAttribute("className")}),w.getElementsByTagName=e(function(b){return b.appendChild(M.createComment("")),!b.getElementsByTagName("*").length}),w.getElementsByClassName=ha.test(M.getElementsByClassName),w.getById=e(function(b){return v.appendChild(b).id=F,!M.getElementsByName||!M.getElementsByName(F).length}),
w.getById?(C.filter.ID=function(b){var a=b.replace(Ta,ea);return function(b){return b.getAttribute("id")===a}},C.find.ID=function(b,a){if(void 0!==a.getElementById&&B)return(b=a.getElementById(b))?[b]:[]}):(C.filter.ID=function(b){var a=b.replace(Ta,ea);return function(b){return(b=void 0!==b.getAttributeNode&&b.getAttributeNode("id"))&&b.value===a}},C.find.ID=function(b,a){if(void 0!==a.getElementById&&B){var c,y=a.getElementById(b);if(y){if((c=y.getAttributeNode("id"))&&c.value===b)return[y];var e=
a.getElementsByName(b);for(a=0;y=e[a++];)if((c=y.getAttributeNode("id"))&&c.value===b)return[y]}return[]}}),C.find.TAG=w.getElementsByTagName?function(b,a){return void 0!==a.getElementsByTagName?a.getElementsByTagName(b):w.qsa?a.querySelectorAll(b):void 0}:function(b,a){var c=[],y=0;a=a.getElementsByTagName(b);if("*"===b){for(;b=a[y++];)1===b.nodeType&&c.push(b);return c}return a},C.find.CLASS=w.getElementsByClassName&&function(b,a){if(void 0!==a.getElementsByClassName&&B)return a.getElementsByClassName(b)},
ca=[],N=[],(w.qsa=ha.test(M.querySelectorAll))&&(e(function(b){var a;v.appendChild(b).innerHTML="<a id='"+F+"'></a><select id='"+F+"-\r\\' msallowcapture=''><option selected=''></option></select>";b.querySelectorAll("[msallowcapture^='']").length&&N.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");b.querySelectorAll("[selected]").length||N.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");
b.querySelectorAll("[id~="+F+"-]").length||N.push("~=");(a=M.createElement("input")).setAttribute("name","");b.appendChild(a);b.querySelectorAll("[name='']").length||N.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");b.querySelectorAll(":checked").length||N.push(":checked");b.querySelectorAll("a#"+F+"+*").length||N.push(".#.+[+~]");b.querySelectorAll("\\\f");N.push("[\\r\\n\\f]")}),e(function(b){b.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";
var a=M.createElement("input");a.setAttribute("type","hidden");b.appendChild(a).setAttribute("name","D");b.querySelectorAll("[name=d]").length&&N.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");2!==b.querySelectorAll(":enabled").length&&N.push(":enabled",":disabled");v.appendChild(b).disabled=!0;2!==b.querySelectorAll(":disabled").length&&N.push(":enabled",":disabled");b.querySelectorAll("*,:x");N.push(",.*:")})),(w.matchesSelector=ha.test(da=v.matches||v.webkitMatchesSelector||v.mozMatchesSelector||v.oMatchesSelector||
v.msMatchesSelector))&&e(function(b){w.disconnectedMatch=da.call(b,"*");da.call(b,"[s!='']:x");ca.push("!=",":((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)")}),
N=N.length&&new RegExp(N.join("|")),ca=ca.length&&new RegExp(ca.join("|")),a=ha.test(v.compareDocumentPosition),ka=a||ha.test(v.contains)?function(b,a){var c=9===b.nodeType?b.documentElement:b;a=a&&a.parentNode;return b===a||!(!a||1!==a.nodeType||!(c.contains?c.contains(a):b.compareDocumentPosition&&16&b.compareDocumentPosition(a)))}:function(b,a){if(a)for(;a=a.parentNode;)if(a===b)return!0;return!1},Ja=a?function(b,a){if(b===a)return A=!0,0;var c=!b.compareDocumentPosition-!a.compareDocumentPosition;
return c||(1&(c=(b.ownerDocument||b)==(a.ownerDocument||a)?b.compareDocumentPosition(a):1)||!w.sortDetached&&a.compareDocumentPosition(b)===c?b==M||b.ownerDocument==Q&&ka(Q,b)?-1:a==M||a.ownerDocument==Q&&ka(Q,a)?1:X?ta(X,b)-ta(X,a):0:4&c?-1:1)}:function(b,a){if(b===a)return A=!0,0;var c=0,y=b.parentNode,e=a.parentNode,f=[b],k=[a];if(!y||!e)return b==M?-1:a==M?1:y?-1:e?1:X?ta(X,b)-ta(X,a):0;if(y===e)return d(b,a);for(;b=b.parentNode;)f.unshift(b);for(b=a;b=b.parentNode;)k.unshift(b);for(;f[c]===k[c];)c++;
return c?d(f[c],k[c]):f[c]==Q?-1:k[c]==Q?1:0},M):M},a.matches=function(b,c){return a(b,null,null,c)},a.matchesSelector=function(b,c){if(G(b),!(!w.matchesSelector||!B||Ba[c+" "]||ca&&ca.test(c)||N&&N.test(c)))try{var y=da.call(b,c);if(y||w.disconnectedMatch||b.document&&11!==b.document.nodeType)return y}catch(zc){Ba(c,!0)}return 0<a(c,M,null,[b]).length},a.contains=function(b,a){return(b.ownerDocument||b)!=M&&G(b),ka(b,a)},a.attr=function(b,a){(b.ownerDocument||b)!=M&&G(b);var c=C.attrHandle[a.toLowerCase()];
c=c&&t.call(C.attrHandle,a.toLowerCase())?c(b,a,!B):void 0;return void 0!==c?c:w.attributes||!B?b.getAttribute(a):(c=b.getAttributeNode(a))&&c.specified?c.value:null},a.escape=function(b){return(b+"").replace(lb,pa)},a.error=function(b){throw Error("Syntax error, unrecognized expression: "+b);},a.uniqueSort=function(b){var a,c=[],y=0,e=0;if(A=!w.detectDuplicates,X=!w.sortStable&&b.slice(0),b.sort(Ja),A){for(;a=b[e++];)a===b[e]&&(y=c.push(e));for(;y--;)b.splice(c[y],1)}return X=null,b},O=a.getText=
function(b){var a,c="",y=0;if(a=b.nodeType)if(1===a||9===a||11===a){if("string"==typeof b.textContent)return b.textContent;for(b=b.firstChild;b;b=b.nextSibling)c+=O(b)}else{if(3===a||4===a)return b.nodeValue}else for(;a=b[y++];)c+=O(a);return c},(C=a.selectors={cacheLength:50,createPseudo:y,match:mb,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(b){return b[1]=b[1].replace(Ta,
ea),b[3]=(b[3]||b[4]||b[5]||"").replace(Ta,ea),"~="===b[2]&&(b[3]=" "+b[3]+" "),b.slice(0,4)},CHILD:function(b){return b[1]=b[1].toLowerCase(),"nth"===b[1].slice(0,3)?(b[3]||a.error(b[0]),b[4]=+(b[4]?b[5]+(b[6]||1):2*("even"===b[3]||"odd"===b[3])),b[5]=+(b[7]+b[8]||"odd"===b[3])):b[3]&&a.error(b[0]),b},PSEUDO:function(b){var a,c=!b[6]&&b[2];return mb.CHILD.test(b[0])?null:(b[3]?b[2]=b[4]||b[5]||"":c&&D.test(c)&&(a=H(c,!0))&&(a=c.indexOf(")",c.length-a)-c.length)&&(b[0]=b[0].slice(0,a),b[2]=c.slice(0,
a)),b.slice(0,3))}},filter:{TAG:function(b){var a=b.replace(Ta,ea).toLowerCase();return"*"===b?function(){return!0}:function(b){return b.nodeName&&b.nodeName.toLowerCase()===a}},CLASS:function(b){var a=xa[b+" "];return a||(a=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+b+"([\\x20\\t\\r\\n\\f]|$)"),xa(b,function(b){return a.test("string"==typeof b.className&&b.className||void 0!==b.getAttribute&&b.getAttribute("class")||"")}))},ATTR:function(b,c,y){return function(e){e=a.attr(e,b);return null==e?"!="===c:
!c||(e+="","="===c?e===y:"!="===c?e!==y:"^="===c?y&&0===e.indexOf(y):"*="===c?y&&-1<e.indexOf(y):"$="===c?y&&e.slice(-y.length)===y:"~="===c?-1<(" "+e.replace(S," ")+" ").indexOf(y):"|="===c&&(e===y||e.slice(0,y.length+1)===y+"-"))}},CHILD:function(b,a,c,y,e){var f="nth"!==b.slice(0,3),d="last"!==b.slice(-4),k="of-type"===a;return 1===y&&0===e?function(b){return!!b.parentNode}:function(a,c,m){var l,h,ba,p;c=f!==d?"nextSibling":"previousSibling";var g=a.parentNode,r=k&&a.nodeName.toLowerCase(),u=!m&&
!k,n=!1;if(g){if(f){for(;c;){for(ba=a;ba=ba[c];)if(k?ba.nodeName.toLowerCase()===r:1===ba.nodeType)return!1;var z=c="only"===b&&!z&&"nextSibling"}return!0}if(z=[d?g.firstChild:g.lastChild],d&&u)for(n=(p=(l=(m=(h=(ba=g)[F]||(ba[F]={}))[ba.uniqueID]||(h[ba.uniqueID]={}))[b]||[])[0]===W&&l[1])&&l[2],ba=p&&g.childNodes[p];ba=++p&&ba&&ba[c]||(n=p=0)||z.pop();){if(1===ba.nodeType&&++n&&ba===a){m[b]=[W,p,n];break}}else if(u&&(n=p=(l=((h=(ba=a)[F]||(ba[F]={}))[ba.uniqueID]||(h[ba.uniqueID]={}))[b]||[])[0]===
W&&l[1]),!1===n)for(;(ba=++p&&ba&&ba[c]||(n=p=0)||z.pop())&&((k?ba.nodeName.toLowerCase()!==r:1!==ba.nodeType)||!++n||(u&&((m=(h=ba[F]||(ba[F]={}))[ba.uniqueID]||(h[ba.uniqueID]={}))[b]=[W,n]),ba!==a)););return(n-=e)===y||0==n%y&&0<=n/y}}},PSEUDO:function(b,c){var e,f=C.pseudos[b]||C.setFilters[b.toLowerCase()]||a.error("unsupported pseudo: "+b);return f[F]?f(c):1<f.length?(e=[b,b,"",c],C.setFilters.hasOwnProperty(b.toLowerCase())?y(function(b,a){for(var y,e=f(b,c),d=e.length;d--;)b[y=ta(b,e[d])]=
!(a[y]=e[d])}):function(b){return f(b,0,e)}):f}},pseudos:{not:y(function(b){var a=[],c=[],e=x(b.replace(Qa,"$1"));return e[F]?y(function(b,a,c,y){var f;c=e(b,null,y,[]);for(y=b.length;y--;)(f=c[y])&&(b[y]=!(a[y]=f))}):function(b,y,f){return a[0]=b,e(a,null,f,c),a[0]=null,!c.pop()}}),has:y(function(b){return function(c){return 0<a(b,c).length}}),contains:y(function(b){return b=b.replace(Ta,ea),function(a){return-1<(a.textContent||O(a)).indexOf(b)}}),lang:y(function(b){return jb.test(b||"")||a.error("unsupported lang: "+
b),b=b.replace(Ta,ea).toLowerCase(),function(a){var c;do if(c=B?a.lang:a.getAttribute("xml:lang")||a.getAttribute("lang"))return(c=c.toLowerCase())===b||0===c.indexOf(b+"-");while((a=a.parentNode)&&1===a.nodeType);return!1}}),target:function(a){var c=b.location&&b.location.hash;return c&&c.slice(1)===a.id},root:function(b){return b===v},focus:function(b){return b===M.activeElement&&(!M.hasFocus||M.hasFocus())&&!!(b.type||b.href||~b.tabIndex)},enabled:l(!1),disabled:l(!0),checked:function(b){var a=
b.nodeName.toLowerCase();return"input"===a&&!!b.checked||"option"===a&&!!b.selected},selected:function(b){return b.parentNode&&b.parentNode.selectedIndex,!0===b.selected},empty:function(b){for(b=b.firstChild;b;b=b.nextSibling)if(6>b.nodeType)return!1;return!0},parent:function(b){return!C.pseudos.empty(b)},header:function(b){return uc.test(b.nodeName)},input:function(b){return Ea.test(b.nodeName)},button:function(b){var a=b.nodeName.toLowerCase();return"input"===a&&"button"===b.type||"button"===a},
text:function(b){var a;return"input"===b.nodeName.toLowerCase()&&"text"===b.type&&(null==(a=b.getAttribute("type"))||"text"===a.toLowerCase())},first:h(function(){return[0]}),last:h(function(b,a){return[a-1]}),eq:h(function(b,a,c){return[0>c?c+a:c]}),even:h(function(b,a){for(var c=0;c<a;c+=2)b.push(c);return b}),odd:h(function(b,a){for(var c=1;c<a;c+=2)b.push(c);return b}),lt:h(function(b,a,c){for(a=0>c?c+a:c>a?a:c;0<=--a;)b.push(a);return b}),gt:h(function(b,a,c){for(c=0>c?c+a:c;++c<a;)b.push(c);
return b})}}).pseudos.nth=C.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[J]=m(J);for(J in{submit:!0,reset:!0})C.pseudos[J]=k(J);return ba.prototype=C.filters=C.pseudos,C.setFilters=new ba,H=a.tokenize=function(b,c){var y,e,f,d,k,m;if(k=aa[b+" "])return c?0:k.slice(0);k=b;var l=[];for(m=C.preFilter;k;){for(d in y&&!(e=R.exec(k))||(e&&(k=k.slice(e[0].length)||k),l.push(f=[])),y=!1,(e=V.exec(k))&&(y=e.shift(),f.push({value:y,type:e[0].replace(Qa," ")}),k=k.slice(y.length)),
C.filter)!(e=mb[d].exec(k))||m[d]&&!(e=m[d](e))||(y=e.shift(),f.push({value:y,type:d,matches:e}),k=k.slice(y.length));if(!y)break}return c?k.length:k?a.error(b):aa(b,l).slice(0)},x=a.compile=function(b,c){var e,f=[],d=[],k=T[b+" "];if(!k){c||(c=H(b));for(e=c.length;e--;)(k=q(c[e]))[F]?f.push(k):d.push(k);(k=T(b,function(b,c){var e=0<c.length,f=0<b.length,d=function(y,d,k,m,l){var h,ba,p=0,g="0",r=y&&[],u=[],z=I,q=y||f&&C.find.TAG("*",l),w=W+=null==z?1:Math.random()||.1,J=q.length;for(l&&(I=d==M||
d||l);g!==J&&null!=(h=q[g]);g++){if(f&&h){var sa=0;for(d||h.ownerDocument==M||(G(h),k=!B);ba=b[sa++];)if(ba(h,d||M,k)){m.push(h);break}l&&(W=w)}e&&((h=!ba&&h)&&p--,y&&r.push(h))}if(p+=g,e&&g!==p){for(sa=0;ba=c[sa++];)ba(r,u,d,k);if(y){if(0<p)for(;g--;)r[g]||u[g]||(u[g]=Za.call(m));u=n(u)}U.apply(m,u);l&&!y&&0<u.length&&1<p+c.length&&a.uniqueSort(m)}return l&&(W=w,I=z),r};return e?y(d):d}(d,f))).selector=b}return k},ub=a.select=function(b,a,c,y){var e,f,d,k,m,l="function"==typeof b&&b,h=!y&&H(b=l.selector||
b);if(c=c||[],1===h.length){if(2<(f=h[0]=h[0].slice(0)).length&&"ID"===(d=f[0]).type&&9===a.nodeType&&B&&C.relative[f[1].type]){if(!(a=(C.find.ID(d.matches[0].replace(Ta,ea),a)||[])[0]))return c;l&&(a=a.parentNode);b=b.slice(f.shift().value.length)}for(e=mb.needsContext.test(b)?0:f.length;e--&&(d=f[e],!C.relative[k=d.type]);)if((m=C.find[k])&&(y=m(d.matches[0].replace(Ta,ea),eb.test(f[0].type)&&p(a.parentNode)||a))){if(f.splice(e,1),!(b=y.length&&g(f)))return U.apply(c,y),c;break}}return(l||x(b,h))(y,
a,!B,c,!a||eb.test(b)&&p(a.parentNode)||a),c},w.sortStable=F.split("").sort(Ja).join("")===F,w.detectDuplicates=!!A,G(),w.sortDetached=e(function(b){return 1&b.compareDocumentPosition(M.createElement("fieldset"))}),e(function(b){return b.innerHTML="<a href='#'></a>","#"===b.firstChild.getAttribute("href")})||f("type|href|height|width",function(b,a,c){if(!c)return b.getAttribute(a,"type"===a.toLowerCase()?1:2)}),w.attributes&&e(function(b){return b.innerHTML="<input/>",b.firstChild.setAttribute("value",
""),""===b.firstChild.getAttribute("value")})||f("value",function(b,a,c){if(!c&&"input"===b.nodeName.toLowerCase())return b.defaultValue}),e(function(b){return null==b.getAttribute("disabled")})||f("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(b,a,c){var y;if(!c)return!0===b[a]?a.toLowerCase():(y=b.getAttributeNode(a))&&y.specified?y.value:null}),a}(b);r.find=lb;r.expr=lb.selectors;r.expr[":"]=r.expr.pseudos;r.uniqueSort=
r.unique=lb.uniqueSort;r.text=lb.getText;r.isXMLDoc=lb.isXML;r.contains=lb.contains;r.escapeSelector=lb.escape;var Bb=function(b,a,c){for(var y=[],e=void 0!==c;(b=b[a])&&9!==b.nodeType;)if(1===b.nodeType){if(e&&r(b).is(c))break;y.push(b)}return y},Xb=function(b,a){for(var c=[];b;b=b.nextSibling)1===b.nodeType&&b!==a&&c.push(b);return c},cb=r.expr.match.needsContext,La=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;r.filter=function(b,a,c){var y=a[0];return c&&(b=":not("+b+")"),
1===a.length&&1===y.nodeType?r.find.matchesSelector(y,b)?[y]:[]:r.find.matches(b,r.grep(a,function(b){return 1===b.nodeType}))};r.fn.extend({find:function(b){var a,c=this.length,y=this;if("string"!=typeof b)return this.pushStack(r(b).filter(function(){for(a=0;a<c;a++)if(r.contains(y[a],this))return!0}));var e=this.pushStack([]);for(a=0;a<c;a++)r.find(b,y[a],e);return 1<c?r.uniqueSort(e):e},filter:function(b){return this.pushStack(p(this,b||[],!1))},not:function(b){return this.pushStack(p(this,b||
[],!0))},is:function(b){return!!p(this,"string"==typeof b&&cb.test(b)?r(b):b||[],!1).length}});var db=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(r.fn.init=function(b,a,c){var y,e;if(!b)return this;if(c=c||ya,"string"==typeof b){if(!(y="<"===b[0]&&">"===b[b.length-1]&&3<=b.length?[null,b,null]:db.exec(b))||!y[1]&&a)return!a||a.jquery?(a||c).find(b):this.constructor(a).find(b);if(y[1]){if(a=a instanceof r?a[0]:a,r.merge(this,r.parseHTML(y[1],a&&a.nodeType?a.ownerDocument||a:na,!0)),La.test(y[1])&&r.isPlainObject(a))for(y in a)ea(this[y])?
this[y](a[y]):this.attr(y,a[y]);return this}return(e=na.getElementById(y[2]))&&(this[0]=e,this.length=1),this}return b.nodeType?(this[0]=b,this.length=1,this):ea(b)?void 0!==c.ready?c.ready(b):b(r):r.makeArray(b,this)}).prototype=r.fn;var ya=r(na);var Yb=/^(?:parents|prev(?:Until|All))/,Ob={children:!0,contents:!0,next:!0,prev:!0};r.fn.extend({has:function(b){var a=r(b,this),c=a.length;return this.filter(function(){for(var b=0;b<c;b++)if(r.contains(this,a[b]))return!0})},closest:function(b,a){var c,
y=0,e=this.length,f=[],d="string"!=typeof b&&r(b);if(!cb.test(b))for(;y<e;y++)for(c=this[y];c&&c!==a;c=c.parentNode)if(11>c.nodeType&&(d?-1<d.index(c):1===c.nodeType&&r.find.matchesSelector(c,b))){f.push(c);break}return this.pushStack(1<f.length?r.uniqueSort(f):f)},index:function(b){return b?"string"==typeof b?Ma.call(r(b),this[0]):Ma.call(this,b.jquery?b[0]:b):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(b,a){return this.pushStack(r.uniqueSort(r.merge(this.get(),r(b,
a))))},addBack:function(b){return this.add(null==b?this.prevObject:this.prevObject.filter(b))}});r.each({parent:function(b){return(b=b.parentNode)&&11!==b.nodeType?b:null},parents:function(b){return Bb(b,"parentNode")},parentsUntil:function(b,a,c){return Bb(b,"parentNode",c)},next:function(b){return q(b,"nextSibling")},prev:function(b){return q(b,"previousSibling")},nextAll:function(b){return Bb(b,"nextSibling")},prevAll:function(b){return Bb(b,"previousSibling")},nextUntil:function(b,a,c){return Bb(b,
"nextSibling",c)},prevUntil:function(b,a,c){return Bb(b,"previousSibling",c)},siblings:function(b){return Xb((b.parentNode||{}).firstChild,b)},children:function(b){return Xb(b.firstChild)},contents:function(b){return null!=b.contentDocument&&pb(b.contentDocument)?b.contentDocument:(g(b,"template")&&(b=b.content||b),r.merge([],b.childNodes))}},function(b,a){r.fn[b]=function(c,e){var y=r.map(this,a,c);return"Until"!==b.slice(-5)&&(e=c),e&&"string"==typeof e&&(y=r.filter(e,y)),1<this.length&&(Ob[b]||
r.uniqueSort(y),Yb.test(b)&&y.reverse()),this.pushStack(y)}});var Wa=/[^\x20\t\r\n\f]+/g;r.Callbacks=function(b){b="string"==typeof b?function(b){var a={};return r.each(b.match(Wa)||[],function(b,c){a[c]=!0}),a}(b):r.extend({},b);var a,c,e,y,f=[],d=[],k=-1,m=function(){y=y||b.once;for(e=a=!0;d.length;k=-1)for(c=d.shift();++k<f.length;)!1===f[k].apply(c[0],c[1])&&b.stopOnFalse&&(k=f.length,c=!1);b.memory||(c=!1);a=!1;y&&(f=c?[]:"")},l={add:function(){return f&&(c&&!a&&(k=f.length-1,d.push(c)),function tc(a){r.each(a,
function(a,c){ea(c)?b.unique&&l.has(c)||f.push(c):c&&c.length&&"string"!==h(c)&&tc(c)})}(arguments),c&&!a&&m()),this},remove:function(){return r.each(arguments,function(b,a){for(var c;-1<(c=r.inArray(a,f,c));)f.splice(c,1),c<=k&&k--}),this},has:function(b){return b?-1<r.inArray(b,f):0<f.length},empty:function(){return f&&(f=[]),this},disable:function(){return y=d=[],f=c="",this},disabled:function(){return!f},lock:function(){return y=d=[],c||a||(f=c=""),this},locked:function(){return!!y},fireWith:function(b,
c){return y||(c=[b,(c=c||[]).slice?c.slice():c],d.push(c),a||m()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!e}};return l};r.extend({Deferred:function(a){var c=[["notify","progress",r.Callbacks("memory"),r.Callbacks("memory"),2],["resolve","done",r.Callbacks("once memory"),r.Callbacks("once memory"),0,"resolved"],["reject","fail",r.Callbacks("once memory"),r.Callbacks("once memory"),1,"rejected"]],e="pending",y={state:function(){return e},always:function(){return f.done(arguments).fail(arguments),
this},catch:function(b){return y.then(null,b)},pipe:function(){var b=arguments;return r.Deferred(function(a){r.each(c,function(c,e){var y=ea(b[e[4]])&&b[e[4]];f[e[1]](function(){var b=y&&y.apply(this,arguments);b&&ea(b.promise)?b.promise().progress(a.notify).done(a.resolve).fail(a.reject):a[e[0]+"With"](this,y?[b]:arguments)})});b=null}).promise()},then:function(a,e,y){function f(a,c,e,y){return function(){var k=this,m=arguments,l=function(){var b;if(!(a<d)){if((b=e.apply(k,m))===c.promise())throw new TypeError("Thenable self-resolution");
var l=b&&("object"==typeof b||"function"==typeof b)&&b.then;ea(l)?y?l.call(b,f(d,c,x,y),f(d,c,A,y)):(d++,l.call(b,f(d,c,x,y),f(d,c,A,y),f(d,c,x,c.notifyWith))):(e!==x&&(k=void 0,m=[b]),(y||c.resolveWith)(k,m))}},h=y?l:function(){try{l()}catch(rc){r.Deferred.exceptionHook&&r.Deferred.exceptionHook(rc,h.stackTrace),a+1>=d&&(e!==A&&(k=void 0,m=[rc]),c.rejectWith(k,m))}};a?h():(r.Deferred.getStackHook&&(h.stackTrace=r.Deferred.getStackHook()),b.setTimeout(h))}}var d=0;return r.Deferred(function(b){c[0][3].add(f(0,
b,ea(y)?y:x,b.notifyWith));c[1][3].add(f(0,b,ea(a)?a:x));c[2][3].add(f(0,b,ea(e)?e:A))}).promise()},promise:function(b){return null!=b?r.extend(b,y):y}},f={};return r.each(c,function(b,a){var d=a[2],k=a[5];y[a[1]]=d.add;k&&d.add(function(){e=k},c[3-b][2].disable,c[3-b][3].disable,c[0][2].lock,c[0][3].lock);d.add(a[3].fire);f[a[0]]=function(){return f[a[0]+"With"](this===f?void 0:this,arguments),this};f[a[0]+"With"]=d.fireWith}),y.promise(f),a&&a.call(f,f),f},when:function(b){var a=arguments.length,
c=a,e=Array(c),y=Na.call(arguments),f=r.Deferred(),d=function(b){return function(c){e[b]=this;y[b]=1<arguments.length?Na.call(arguments):c;--a||f.resolveWith(e,y)}};if(1>=a&&(v(b,f.done(d(c)).resolve,f.reject,!a),"pending"===f.state()||ea(y[c]&&y[c].then)))return f.then();for(;c--;)v(y[c],d(c),f.reject);return f.promise()}});var Jb=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;r.Deferred.exceptionHook=function(a,c){b.console&&b.console.warn&&a&&Jb.test(a.name)&&b.console.warn("jQuery.Deferred exception: "+
a.message,a.stack,c)};r.readyException=function(a){b.setTimeout(function(){throw a;})};var Ia=r.Deferred();r.fn.ready=function(b){return Ia.then(b).catch(function(b){r.readyException(b)}),this};r.extend({isReady:!1,readyWait:1,ready:function(b){(!0===b?--r.readyWait:r.isReady)||(r.isReady=!0,!0!==b&&0<--r.readyWait||Ia.resolveWith(na,[r]))}});r.ready.then=Ia.then;"complete"===na.readyState||"loading"!==na.readyState&&!na.documentElement.doScroll?b.setTimeout(r.ready):(na.addEventListener("DOMContentLoaded",
B),b.addEventListener("load",B));var ua=function(b,a,c,e,f,d,k){var y=0,m=b.length,l=null==c;if("object"===h(c))for(y in f=!0,c)ua(b,a,y,c[y],!0,d,k);else if(void 0!==e&&(f=!0,ea(e)||(k=!0),l&&(k?(a.call(b,e),a=null):(l=a,a=function(b,a,c){return l.call(r(b),c)})),a))for(;y<m;y++)a(b[y],c,k?e:e.call(b[y],y,a(b[y],c)));return f?b:l?a.call(b):m?a(b[0],c):d},wa=/^-ms-/,$a=/-([a-z])/g,Ga=function(b){return 1===b.nodeType||9===b.nodeType||!+b.nodeType};z.uid=1;z.prototype={cache:function(b){var a=b[this.expando];
return a||(a=Object.create(null),Ga(b)&&(b.nodeType?b[this.expando]=a:Object.defineProperty(b,this.expando,{value:a,configurable:!0}))),a},set:function(b,a,c){var e;b=this.cache(b);if("string"==typeof a)b[k(a)]=c;else for(e in a)b[k(e)]=a[e];return b},get:function(b,a){return void 0===a?this.cache(b):b[this.expando]&&b[this.expando][k(a)]},access:function(b,a,c){return void 0===a||a&&"string"==typeof a&&void 0===c?this.get(b,a):(this.set(b,a,c),void 0!==c?c:a)},remove:function(b,a){var c=b[this.expando];
if(void 0!==c){if(void 0!==a){var e=(a=Array.isArray(a)?a.map(k):(a=k(a))in c?[a]:a.match(Wa)||[]).length;for(;e--;)delete c[a[e]]}(void 0===a||r.isEmptyObject(c))&&(b.nodeType?b[this.expando]=void 0:delete b[this.expando])}},hasData:function(b){b=b[this.expando];return void 0!==b&&!r.isEmptyObject(b)}};var fa=new z,Aa=new z,ra=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Mb=/[A-Z]/g;r.extend({hasData:function(b){return Aa.hasData(b)||fa.hasData(b)},data:function(b,a,c){return Aa.access(b,a,c)},removeData:function(b,
a){Aa.remove(b,a)},_data:function(b,a,c){return fa.access(b,a,c)},_removeData:function(b,a){fa.remove(b,a)}});r.fn.extend({data:function(b,a){var c,e,y,f=this[0],d=f&&f.attributes;if(void 0===b){if(this.length&&(y=Aa.get(f),1===f.nodeType&&!fa.get(f,"hasDataAttrs"))){for(c=d.length;c--;)d[c]&&0===(e=d[c].name).indexOf("data-")&&(e=k(e.slice(5)),l(f,e,y[e]));fa.set(f,"hasDataAttrs",!0)}return y}return"object"==typeof b?this.each(function(){Aa.set(this,b)}):ua(this,function(a){var c;if(f&&void 0===
a)return void 0!==(c=Aa.get(f,b))?c:void 0!==(c=l(f,b))?c:void 0;this.each(function(){Aa.set(this,b,a)})},null,a,1<arguments.length,null,!0)},removeData:function(b){return this.each(function(){Aa.remove(this,b)})}});r.extend({queue:function(b,a,c){var e;if(b)return a=(a||"fx")+"queue",e=fa.get(b,a),c&&(!e||Array.isArray(c)?e=fa.access(b,a,r.makeArray(c)):e.push(c)),e||[]},dequeue:function(b,a){a=a||"fx";var c=r.queue(b,a),e=c.length,y=c.shift(),f=r._queueHooks(b,a);"inprogress"===y&&(y=c.shift(),
e--);y&&("fx"===a&&c.unshift("inprogress"),delete f.stop,y.call(b,function(){r.dequeue(b,a)},f));!e&&f&&f.empty.fire()},_queueHooks:function(b,a){var c=a+"queueHooks";return fa.get(b,c)||fa.access(b,c,{empty:r.Callbacks("once memory").add(function(){fa.remove(b,[a+"queue",c])})})}});r.fn.extend({queue:function(b,a){var c=2;return"string"!=typeof b&&(a=b,b="fx",c--),arguments.length<c?r.queue(this[0],b):void 0===a?this:this.each(function(){var c=r.queue(this,b,a);r._queueHooks(this,b);"fx"===b&&"inprogress"!==
c[0]&&r.dequeue(this,b)})},dequeue:function(b){return this.each(function(){r.dequeue(this,b)})},clearQueue:function(b){return this.queue(b||"fx",[])},promise:function(b,a){var c,e=1,y=r.Deferred(),f=this,d=this.length,k=function(){--e||y.resolveWith(f,[f])};"string"!=typeof b&&(a=b,b=void 0);for(b=b||"fx";d--;)(c=fa.get(f[d],b+"queueHooks"))&&c.empty&&(e++,c.empty.add(k));return k(),y.promise(a)}});var ba=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ub=new RegExp("^(?:([+-])=|)("+ba+")([a-z%]*)$",
"i"),xa=["Top","Right","Bottom","Left"],Ja=na.documentElement,Qa=function(b){return r.contains(b.ownerDocument,b)},mb={composed:!0};Ja.getRootNode&&(Qa=function(b){return r.contains(b.ownerDocument,b)||b.getRootNode(mb)===b.ownerDocument});var jb=function(b,a){return"none"===(b=a||b).style.display||""===b.style.display&&Qa(b)&&"none"===r.css(b,"display")},Ea={};r.fn.extend({show:function(){return C(this,!0)},hide:function(){return C(this)},toggle:function(b){return"boolean"==typeof b?b?this.show():
this.hide():this.each(function(){jb(this)?r(this).show():r(this).hide()})}});var eb,Pa=/^(?:checkbox|radio)$/i,yb=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ua=/^$|^module$|\/(?:java|ecma)script/i;var za=na.createDocumentFragment().appendChild(na.createElement("div"));(eb=na.createElement("input")).setAttribute("type","radio");eb.setAttribute("checked","checked");eb.setAttribute("name","t");za.appendChild(eb);qa.checkClone=za.cloneNode(!0).cloneNode(!0).lastChild.checked;za.innerHTML="<textarea>x</textarea>";
qa.noCloneChecked=!!za.cloneNode(!0).lastChild.defaultValue;za.innerHTML="<option></option>";qa.option=!!za.lastChild;var ab={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ab.tbody=ab.tfoot=ab.colgroup=ab.caption=ab.thead;ab.th=ab.td;qa.option||(ab.optgroup=ab.option=[1,"<select multiple='multiple'>","</select>"]);var Tb=/<|&#?\w+;/,Ub=/^key/,ec=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,
Pb=/^([^.]*)(?:\.(.+)|)/;r.event={global:{},add:function(b,a,c,e,f){var y,d,k,m,l,h,ba,p;var g=fa.get(b);if(Ga(b))for(c.handler&&(c=(y=c).handler,f=y.selector),f&&r.find.matchesSelector(Ja,f),c.guid||(c.guid=r.guid++),(m=g.events)||(m=g.events=Object.create(null)),(d=g.handle)||(d=g.handle=function(a){return void 0!==r&&r.event.triggered!==a.type?r.event.dispatch.apply(b,arguments):void 0}),g=(a=(a||"").match(Wa)||[""]).length;g--;){var u=p=(k=Pb.exec(a[g])||[])[1];k=(k[2]||"").split(".").sort();
u&&(h=r.event.special[u]||{},u=(f?h.delegateType:h.bindType)||u,h=r.event.special[u]||{},l=r.extend({type:u,origType:p,data:e,handler:c,guid:c.guid,selector:f,needsContext:f&&r.expr.match.needsContext.test(f),namespace:k.join(".")},y),(ba=m[u])||((ba=m[u]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(b,e,k,d)||b.addEventListener&&b.addEventListener(u,d)),h.add&&(h.add.call(b,l),l.handler.guid||(l.handler.guid=c.guid)),f?ba.splice(ba.delegateCount++,0,l):ba.push(l),r.event.global[u]=!0)}},remove:function(b,
a,c,e,f){var y,d,k,m,l,h,ba,p,g=fa.hasData(b)&&fa.get(b);if(g&&(m=g.events)){for(l=(a=(a||"").match(Wa)||[""]).length;l--;)if(h=p=(k=Pb.exec(a[l])||[])[1],ba=(k[2]||"").split(".").sort(),h){var u=r.event.special[h]||{};var n=m[h=(e?u.delegateType:u.bindType)||h]||[];k=k[2]&&new RegExp("(^|\\.)"+ba.join("\\.(?:.*\\.|)")+"(\\.|$)");for(d=y=n.length;y--;){var z=n[y];!f&&p!==z.origType||c&&c.guid!==z.guid||k&&!k.test(z.namespace)||e&&e!==z.selector&&("**"!==e||!z.selector)||(n.splice(y,1),z.selector&&
n.delegateCount--,u.remove&&u.remove.call(b,z))}d&&!n.length&&(u.teardown&&!1!==u.teardown.call(b,ba,g.handle)||r.removeEvent(b,h,g.handle),delete m[h])}else for(h in m)r.event.remove(b,h+a[l],c,e,!0);r.isEmptyObject(m)&&fa.remove(b,"handle events")}},dispatch:function(b){var a,c,e,f,y=Array(arguments.length),d=r.event.fix(b);var k=(fa.get(this,"events")||Object.create(null))[d.type]||[];var m=r.event.special[d.type]||{};y[0]=d;for(a=1;a<arguments.length;a++)y[a]=arguments[a];if(d.delegateTarget=
this,!m.preDispatch||!1!==m.preDispatch.call(this,d)){var l=r.event.handlers.call(this,d,k);for(a=0;(e=l[a++])&&!d.isPropagationStopped();)for(d.currentTarget=e.elem,k=0;(f=e.handlers[k++])&&!d.isImmediatePropagationStopped();)d.rnamespace&&!1!==f.namespace&&!d.rnamespace.test(f.namespace)||(d.handleObj=f,d.data=f.data,void 0!==(c=((r.event.special[f.origType]||{}).handle||f.handler).apply(e.elem,y))&&!1===(d.result=c)&&(d.preventDefault(),d.stopPropagation()));return m.postDispatch&&m.postDispatch.call(this,
d),d.result}},handlers:function(b,a){var c,e,f,y=[],d=a.delegateCount,k=b.target;if(d&&k.nodeType&&!("click"===b.type&&1<=b.button))for(;k!==this;k=k.parentNode||this)if(1===k.nodeType&&("click"!==b.type||!0!==k.disabled)){var m=[];var l={};for(c=0;c<d;c++)void 0===l[f=(e=a[c]).selector+" "]&&(l[f]=e.needsContext?-1<r(f,this).index(k):r.find(f,this,null,[k]).length),l[f]&&m.push(e);m.length&&y.push({elem:k,handlers:m})}return k=this,d<a.length&&y.push({elem:k,handlers:a.slice(d)}),y},addProp:function(b,
a){Object.defineProperty(r.Event.prototype,b,{enumerable:!0,configurable:!0,get:ea(a)?function(){if(this.originalEvent)return a(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[b]},set:function(a){Object.defineProperty(this,b,{enumerable:!0,configurable:!0,writable:!0,value:a})}})},fix:function(b){return b[r.expando]?b:new r.Event(b)},special:{load:{noBubble:!0},click:{setup:function(b){b=this||b;return Pa.test(b.type)&&b.click&&g(b,"input")&&da(b,"click",m),!1},trigger:function(b){b=
this||b;return Pa.test(b.type)&&b.click&&g(b,"input")&&da(b,"click"),!0},_default:function(b){b=b.target;return Pa.test(b.type)&&b.click&&g(b,"input")&&fa.get(b,"click")||g(b,"a")}},beforeunload:{postDispatch:function(b){void 0!==b.result&&b.originalEvent&&(b.originalEvent.returnValue=b.result)}}}};r.removeEvent=function(b,a,c){b.removeEventListener&&b.removeEventListener(a,c)};r.Event=function(b,a){if(!(this instanceof r.Event))return new r.Event(b,a);b&&b.type?(this.originalEvent=b,this.type=b.type,
this.isDefaultPrevented=b.defaultPrevented||void 0===b.defaultPrevented&&!1===b.returnValue?m:f,this.target=b.target&&3===b.target.nodeType?b.target.parentNode:b.target,this.currentTarget=b.currentTarget,this.relatedTarget=b.relatedTarget):this.type=b;a&&r.extend(this,a);this.timeStamp=b&&b.timeStamp||Date.now();this[r.expando]=!0};r.Event.prototype={constructor:r.Event,isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f,isSimulated:!1,preventDefault:function(){var b=this.originalEvent;
this.isDefaultPrevented=m;b&&!this.isSimulated&&b.preventDefault()},stopPropagation:function(){var b=this.originalEvent;this.isPropagationStopped=m;b&&!this.isSimulated&&b.stopPropagation()},stopImmediatePropagation:function(){var b=this.originalEvent;this.isImmediatePropagationStopped=m;b&&!this.isSimulated&&b.stopImmediatePropagation();this.stopPropagation()}};r.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,
view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(b){var a=b.button;return null==b.which&&Ub.test(b.type)?null!=b.charCode?b.charCode:b.keyCode:!b.which&&void 0!==a&&ec.test(b.type)?1&a?1:2&a?3:4&a?2:0:b.which}},r.event.addProp);r.each({focus:"focusin",blur:"focusout"},function(b,a){r.event.special[b]={setup:function(){return da(this,
b,N),!1},trigger:function(){return da(this,b),!0},delegateType:a}});r.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(b,a){r.event.special[b]={delegateType:a,bindType:a,handle:function(b){var c,e=b.relatedTarget,f=b.handleObj;return e&&(e===this||r.contains(this,e))||(b.type=f.origType,c=f.handler.apply(this,arguments),b.type=a),c}}});r.fn.extend({on:function(b,a,c,e){return M(this,b,a,c,e)},one:function(b,a,c,e){return M(this,b,a,
c,e,1)},off:function(b,a,c){var e,d;if(b&&b.preventDefault&&b.handleObj)return e=b.handleObj,r(b.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof b){for(d in b)this.off(d,a,b[d]);return this}return!1!==a&&"function"!=typeof a||(c=a,a=void 0),!1===c&&(c=f),this.each(function(){r.event.remove(this,b,c,a)})}});var Vb=/<script|<style|<link/i,kb=/checked\s*(?:[^=]|=\s*.checked.)/i,Ib=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;r.extend({htmlPrefilter:function(b){return b},
clone:function(b,a,c){var e,f,d=b.cloneNode(!0),y=Qa(b);if(!(qa.noCloneChecked||1!==b.nodeType&&11!==b.nodeType||r.isXMLDoc(b))){var k=w(d);var m=0;for(e=(f=w(b)).length;m<e;m++){var l=f[m],h=k[m],ba=h.nodeName.toLowerCase();"input"===ba&&Pa.test(l.type)?h.checked=l.checked:"input"!==ba&&"textarea"!==ba||(h.defaultValue=l.defaultValue)}}if(a)if(c)for(f=f||w(b),k=k||w(d),m=0,e=f.length;m<e;m++)Ba(f[m],k[m]);else Ba(b,d);return 0<(k=w(d,"script")).length&&J(k,!y&&w(b,"script")),d},cleanData:function(b){for(var a,
c,e,f=r.event.special,d=0;void 0!==(c=b[d]);d++)if(Ga(c)){if(a=c[fa.expando]){if(a.events)for(e in a.events)f[e]?r.event.remove(c,e):r.removeEvent(c,e,a.handle);c[fa.expando]=void 0}c[Aa.expando]&&(c[Aa.expando]=void 0)}}});r.fn.extend({detach:function(b){return P(this,b,!0)},remove:function(b){return P(this,b)},text:function(b){return ua(this,function(b){return void 0===b?r.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=b)})},null,
b,arguments.length)},append:function(){return Z(this,arguments,function(b){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||X(this,b).appendChild(b)})},prepend:function(){return Z(this,arguments,function(b){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var a=X(this,b);a.insertBefore(b,a.firstChild)}})},before:function(){return Z(this,arguments,function(b){this.parentNode&&this.parentNode.insertBefore(b,this)})},after:function(){return Z(this,arguments,function(b){this.parentNode&&
this.parentNode.insertBefore(b,this.nextSibling)})},empty:function(){for(var b,a=0;null!=(b=this[a]);a++)1===b.nodeType&&(r.cleanData(w(b,!1)),b.textContent="");return this},clone:function(b,a){return b=null!=b&&b,a=null==a?b:a,this.map(function(){return r.clone(this,b,a)})},html:function(b){return ua(this,function(b){var a=this[0]||{},c=0,e=this.length;if(void 0===b&&1===a.nodeType)return a.innerHTML;if("string"==typeof b&&!Vb.test(b)&&!ab[(yb.exec(b)||["",""])[1].toLowerCase()]){b=r.htmlPrefilter(b);
try{for(;c<e;c++)1===(a=this[c]||{}).nodeType&&(r.cleanData(w(a,!1)),a.innerHTML=b);a=0}catch(pc){}}a&&this.empty().append(b)},null,b,arguments.length)},replaceWith:function(){var b=[];return Z(this,arguments,function(a){var c=this.parentNode;0>r.inArray(this,b)&&(r.cleanData(w(this)),c&&c.replaceChild(a,this))},b)}});r.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(b,a){r.fn[b]=function(b){for(var c=[],e=r(b),f=e.length-1,
d=0;d<=f;d++)b=d===f?this:this.clone(!0),r(e[d])[a](b),bb.apply(c,b.get());return this.pushStack(c)}});var Ha=new RegExp("^("+ba+")(?!px)[a-z%]+$","i"),fb=function(a){var c=a.ownerDocument.defaultView;return c&&c.opener||(c=b),c.getComputedStyle(a)},qb=function(b,a,c){var e,f={};for(e in a)f[e]=b.style[e],b.style[e]=a[e];for(e in c=c.call(b),a)b.style[e]=f[e];return c},oa=new RegExp(xa.join("|"),"i");!function(){function a(){if(h){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0";
h.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%";Ja.appendChild(l).appendChild(h);var a=b.getComputedStyle(h);c="1%"!==a.top;m=12===Math.round(parseFloat(a.marginLeft));h.style.right="60%";d=36===Math.round(parseFloat(a.right));e=36===Math.round(parseFloat(a.width));h.style.position="absolute";f=12===Math.round(parseFloat(h.offsetWidth/3));Ja.removeChild(l);h=null}}var c,e,f,d,k,m,l=na.createElement("div"),
h=na.createElement("div");h.style&&(h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",qa.clearCloneStyle="content-box"===h.style.backgroundClip,r.extend(qa,{boxSizingReliable:function(){return a(),e},pixelBoxStyles:function(){return a(),d},pixelPosition:function(){return a(),c},reliableMarginLeft:function(){return a(),m},scrollboxSize:function(){return a(),f},reliableTrDimensions:function(){var a,c,e,f;return null==k&&(a=na.createElement("table"),c=na.createElement("tr"),
e=na.createElement("div"),a.style.cssText="position:absolute;left:-11111px",c.style.height="1px",e.style.height="9px",Ja.appendChild(a).appendChild(c).appendChild(e),f=b.getComputedStyle(c),k=3<parseInt(f.height),Ja.removeChild(a)),k}}))}();var dc=["Webkit","Moz","ms"],Ca=na.createElement("div").style,Nb={},Qb=/^(none|table(?!-c[ea]).+)/,Ra=/^--/,fc={position:"absolute",visibility:"hidden",display:"block"},Kb={letterSpacing:"0",fontWeight:"400"};r.extend({cssHooks:{opacity:{get:function(b,a){if(a)return b=
ta(b,"opacity"),""===b?"1":b}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(b,a,c,e){if(b&&3!==b.nodeType&&8!==b.nodeType&&b.style){var f,d,m,l=k(a),y=Ra.test(a),h=b.style;if(y||(a=R(l)),m=r.cssHooks[a]||r.cssHooks[l],void 0===c)return m&&
"get"in m&&void 0!==(f=m.get(b,!1,e))?f:h[a];"string"===(d=typeof c)&&(f=ub.exec(c))&&f[1]&&(c=u(b,a,f),d="number");null!=c&&c==c&&("number"!==d||y||(c+=f&&f[3]||(r.cssNumber[l]?"":"px")),qa.clearCloneStyle||""!==c||0!==a.indexOf("background")||(h[a]="inherit"),m&&"set"in m&&void 0===(c=m.set(b,c,e))||(y?h.setProperty(a,c):h[a]=c))}},css:function(b,a,c,e){var f,d,m,l=k(a);return Ra.test(a)||(a=R(l)),(m=r.cssHooks[a]||r.cssHooks[l])&&"get"in m&&(f=m.get(b,!0,c)),void 0===f&&(f=ta(b,a,e)),"normal"===
f&&a in Kb&&(f=Kb[a]),""===c||c?(d=parseFloat(f),!0===c||isFinite(d)?d||0:f):f}});r.each(["height","width"],function(b,a){r.cssHooks[a]={get:function(b,c,e){if(c)return!Qb.test(r.css(b,"display"))||b.getClientRects().length&&b.getBoundingClientRect().width?I(b,a,e):qb(b,fc,function(){return I(b,a,e)})},set:function(b,c,e){var f,d=fb(b),k=!qa.scrollboxSize()&&"absolute"===d.position,m=(k||e)&&"border-box"===r.css(b,"boxSizing",!1,d);e=e?O(b,a,e,m,d):0;return m&&k&&(e-=Math.ceil(b["offset"+a[0].toUpperCase()+
a.slice(1)]-parseFloat(d[a])-O(b,a,"border",!1,d)-.5)),e&&(f=ub.exec(c))&&"px"!==(f[3]||"px")&&(b.style[a]=c,c=r.css(b,a)),W(0,c,e)}}});r.cssHooks.marginLeft=S(qa.reliableMarginLeft,function(b,a){if(a)return(parseFloat(ta(b,"marginLeft"))||b.getBoundingClientRect().left-qb(b,{marginLeft:0},function(){return b.getBoundingClientRect().left}))+"px"});r.each({margin:"",padding:"",border:"Width"},function(b,a){r.cssHooks[b+a]={expand:function(c){var e=0,f={};for(c="string"==typeof c?c.split(" "):[c];4>
e;e++)f[b+xa[e]+a]=c[e]||c[e-2]||c[0];return f}};"margin"!==b&&(r.cssHooks[b+a].set=W)});r.fn.extend({css:function(b,a){return ua(this,function(b,a,c){var e,f={},d=0;if(Array.isArray(a)){c=fb(b);for(e=a.length;d<e;d++)f[a[d]]=r.css(b,a[d],!1,c);return f}return void 0!==c?r.style(b,a,c):r.css(b,a)},b,a,1<arguments.length)}});r.Tween=H;H.prototype={constructor:H,init:function(b,a,c,e,f,d){this.elem=b;this.prop=c;this.easing=f||r.easing._default;this.options=a;this.start=this.now=this.cur();this.end=
e;this.unit=d||(r.cssNumber[c]?"":"px")},cur:function(){var b=H.propHooks[this.prop];return b&&b.get?b.get(this):H.propHooks._default.get(this)},run:function(b){var a,c=H.propHooks[this.prop];return this.options.duration?this.pos=a=r.easing[this.easing](b,this.options.duration*b,0,1,this.options.duration):this.pos=a=b,this.now=(this.end-this.start)*a+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):H.propHooks._default.set(this),this}};H.prototype.init.prototype=
H.prototype;H.propHooks={_default:{get:function(b){var a;return 1!==b.elem.nodeType||null!=b.elem[b.prop]&&null==b.elem.style[b.prop]?b.elem[b.prop]:(a=r.css(b.elem,b.prop,""))&&"auto"!==a?a:0},set:function(b){r.fx.step[b.prop]?r.fx.step[b.prop](b):1!==b.elem.nodeType||!r.cssHooks[b.prop]&&null==b.elem.style[R(b.prop)]?b.elem[b.prop]=b.now:r.style(b.elem,b.prop,b.now+b.unit)}}};H.propHooks.scrollTop=H.propHooks.scrollLeft={set:function(b){b.elem.nodeType&&b.elem.parentNode&&(b.elem[b.prop]=b.now)}};
r.easing={linear:function(b){return b},swing:function(b){return.5-Math.cos(b*Math.PI)/2},_default:"swing"};r.fx=H.prototype.init;r.fx.step={};var ob,Fa,Ka=/^(?:toggle|show|hide)$/,Da=/queueHooks$/;r.Animation=r.extend(aa,{tweeners:{"*":[function(b,a){var c=this.createTween(b,a);return u(c.elem,b,ub.exec(a),c),c}]},tweener:function(b,a){ea(b)?(a=b,b=["*"]):b=b.match(Wa);for(var c,e=0,f=b.length;e<f;e++)c=b[e],aa.tweeners[c]=aa.tweeners[c]||[],aa.tweeners[c].unshift(a)},prefilters:[function(b,a,c){var e,
f,d,k,m,l,h,y="width"in a||"height"in a,ba=this,p={},g=b.style,u=b.nodeType&&jb(b),n=fa.get(b,"fxshow");for(e in c.queue||(null==(k=r._queueHooks(b,"fx")).unqueued&&(k.unqueued=0,m=k.empty.fire,k.empty.fire=function(){k.unqueued||m()}),k.unqueued++,ba.always(function(){ba.always(function(){k.unqueued--;r.queue(b,"fx").length||k.empty.fire()})})),a)if(f=a[e],Ka.test(f)){if(delete a[e],d=d||"toggle"===f,f===(u?"hide":"show")){if("show"!==f||!n||void 0===n[e])continue;u=!0}p[e]=n&&n[e]||r.style(b,e)}if((a=
!r.isEmptyObject(a))||!r.isEmptyObject(p))for(e in y&&1===b.nodeType&&(c.overflow=[g.overflow,g.overflowX,g.overflowY],null==(l=n&&n.display)&&(l=fa.get(b,"display")),"none"===(h=r.css(b,"display"))&&(l?h=l:(C([b],!0),l=b.style.display||l,h=r.css(b,"display"),C([b]))),("inline"===h||"inline-block"===h&&null!=l)&&"none"===r.css(b,"float")&&(a||(ba.done(function(){g.display=l}),null==l&&(h=g.display,l="none"===h?"":h)),g.display="inline-block")),c.overflow&&(g.overflow="hidden",ba.always(function(){g.overflow=
c.overflow[0];g.overflowX=c.overflow[1];g.overflowY=c.overflow[2]})),a=!1,p)a||(n?"hidden"in n&&(u=n.hidden):n=fa.access(b,"fxshow",{display:l}),d&&(n.hidden=!u),u&&C([b],!0),ba.done(function(){for(e in u||C([b]),fa.remove(b,"fxshow"),p)r.style(b,e,p[e])})),a=ia(u?n[e]:0,e,ba),e in n||(n[e]=a.start,u&&(a.end=a.start,a.start=0))}],prefilter:function(b,a){a?aa.prefilters.unshift(b):aa.prefilters.push(b)}});r.speed=function(b,a,c){var e=b&&"object"==typeof b?r.extend({},b):{complete:c||!c&&a||ea(b)&&
b,duration:b,easing:c&&a||a&&!ea(a)&&a};return r.fx.off?e.duration=0:"number"!=typeof e.duration&&(e.duration in r.fx.speeds?e.duration=r.fx.speeds[e.duration]:e.duration=r.fx.speeds._default),null!=e.queue&&!0!==e.queue||(e.queue="fx"),e.old=e.complete,e.complete=function(){ea(e.old)&&e.old.call(this);e.queue&&r.dequeue(this,e.queue)},e};r.fn.extend({fadeTo:function(b,a,c,e){return this.filter(jb).css("opacity",0).show().end().animate({opacity:a},b,c,e)},animate:function(b,a,c,e){var f=r.isEmptyObject(b),
d=r.speed(a,c,e);a=function(){var a=aa(this,r.extend({},b),d);(f||fa.get(this,"finish"))&&a.stop(!0)};return a.finish=a,f||!1===d.queue?this.each(a):this.queue(d.queue,a)},stop:function(b,a,c){var e=function(b){var a=b.stop;delete b.stop;a(c)};return"string"!=typeof b&&(c=a,a=b,b=void 0),a&&this.queue(b||"fx",[]),this.each(function(){var a=!0,f=null!=b&&b+"queueHooks",d=r.timers,k=fa.get(this);if(f)k[f]&&k[f].stop&&e(k[f]);else for(f in k)k[f]&&k[f].stop&&Da.test(f)&&e(k[f]);for(f=d.length;f--;)d[f].elem!==
this||null!=b&&d[f].queue!==b||(d[f].anim.stop(c),a=!1,d.splice(f,1));!a&&c||r.dequeue(this,b)})},finish:function(b){return!1!==b&&(b=b||"fx"),this.each(function(){var a=fa.get(this),c=a[b+"queue"];var e=a[b+"queueHooks"];var f=r.timers,d=c?c.length:0;a.finish=!0;r.queue(this,b,[]);e&&e.stop&&e.stop.call(this,!0);for(e=f.length;e--;)f[e].elem===this&&f[e].queue===b&&(f[e].anim.stop(!0),f.splice(e,1));for(e=0;e<d;e++)c[e]&&c[e].finish&&c[e].finish.call(this);delete a.finish})}});r.each(["toggle","show",
"hide"],function(b,a){var c=r.fn[a];r.fn[a]=function(b,e,f){return null==b||"boolean"==typeof b?c.apply(this,arguments):this.animate(ca(a,!0),b,e,f)}});r.each({slideDown:ca("show"),slideUp:ca("hide"),slideToggle:ca("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(b,a){r.fn[b]=function(b,c,e){return this.animate(a,b,c,e)}});r.timers=[];r.fx.tick=function(){var b,a=0,c=r.timers;for(ob=Date.now();a<c.length;a++)(b=c[a])()||c[a]!==b||c.splice(a--,1);c.length||
r.fx.stop();ob=void 0};r.fx.timer=function(b){r.timers.push(b);r.fx.start()};r.fx.interval=13;r.fx.start=function(){Fa||(Fa=!0,K())};r.fx.stop=function(){Fa=null};r.fx.speeds={slow:600,fast:200,_default:400};r.fn.delay=function(a,c){return a=r.fx&&r.fx.speeds[a]||a,c=c||"fx",this.queue(c,function(c,e){var f=b.setTimeout(c,a);e.stop=function(){b.clearTimeout(f)}})};(function(){var b=na.createElement("input"),a=na.createElement("select").appendChild(na.createElement("option"));b.type="checkbox";qa.checkOn=
""!==b.value;qa.optSelected=a.selected;(b=na.createElement("input")).value="t";b.type="radio";qa.radioValue="t"===b.value})();var Eb=r.expr.attrHandle;r.fn.extend({attr:function(b,a){return ua(this,r.attr,b,a,1<arguments.length)},removeAttr:function(b){return this.each(function(){r.removeAttr(this,b)})}});r.extend({attr:function(b,a,c){var e,f,d=b.nodeType;if(3!==d&&8!==d&&2!==d)return void 0===b.getAttribute?r.prop(b,a,c):(1===d&&r.isXMLDoc(b)||(f=r.attrHooks[a.toLowerCase()]||(r.expr.match.bool.test(a)?
rb:void 0)),void 0!==c?null===c?void r.removeAttr(b,a):f&&"set"in f&&void 0!==(e=f.set(b,c,a))?e:(b.setAttribute(a,c+""),c):f&&"get"in f&&null!==(e=f.get(b,a))?e:null==(e=r.find.attr(b,a))?void 0:e)},attrHooks:{type:{set:function(b,a){if(!qa.radioValue&&"radio"===a&&g(b,"input")){var c=b.value;return b.setAttribute("type",a),c&&(b.value=c),a}}}},removeAttr:function(b,a){var c=0,e=a&&a.match(Wa);if(e&&1===b.nodeType)for(;a=e[c++];)b.removeAttribute(a)}});var rb={set:function(b,a,c){return!1===a?r.removeAttr(b,
c):b.setAttribute(c,c),c}};r.each(r.expr.match.bool.source.match(/\w+/g),function(b,a){var c=Eb[a]||r.find.attr;Eb[a]=function(b,a,e){var f,d,k=a.toLowerCase();return e||(d=Eb[k],Eb[k]=f,f=null!=c(b,a,e)?k:null,Eb[k]=d),f}});var Sa=/^(?:input|select|textarea|button)$/i,gb=/^(?:a|area)$/i;r.fn.extend({prop:function(b,a){return ua(this,r.prop,b,a,1<arguments.length)},removeProp:function(b){return this.each(function(){delete this[r.propFix[b]||b]})}});r.extend({prop:function(b,a,c){var e,f,d=b.nodeType;
if(3!==d&&8!==d&&2!==d)return 1===d&&r.isXMLDoc(b)||(a=r.propFix[a]||a,f=r.propHooks[a]),void 0!==c?f&&"set"in f&&void 0!==(e=f.set(b,c,a))?e:b[a]=c:f&&"get"in f&&null!==(e=f.get(b,a))?e:b[a]},propHooks:{tabIndex:{get:function(b){var a=r.find.attr(b,"tabindex");return a?parseInt(a,10):Sa.test(b.nodeName)||gb.test(b.nodeName)&&b.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}});qa.optSelected||(r.propHooks.selected={get:function(b){b=b.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,
null},set:function(b){b=b.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}});r.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){r.propFix[this.toLowerCase()]=this});r.fn.extend({addClass:function(b){var a,c,e,f,d,k,m,l=0;if(ea(b))return this.each(function(a){r(this).addClass(b.call(this,a,U(this)))});if((a=la(b)).length)for(;c=this[l++];)if(f=U(c),e=1===c.nodeType&&" "+T(f)+" "){for(k=0;d=a[k++];)0>
e.indexOf(" "+d+" ")&&(e+=d+" ");f!==(m=T(e))&&c.setAttribute("class",m)}return this},removeClass:function(b){var a,c,e,f,d,k,m,l=0;if(ea(b))return this.each(function(a){r(this).removeClass(b.call(this,a,U(this)))});if(!arguments.length)return this.attr("class","");if((a=la(b)).length)for(;c=this[l++];)if(f=U(c),e=1===c.nodeType&&" "+T(f)+" "){for(k=0;d=a[k++];)for(;-1<e.indexOf(" "+d+" ");)e=e.replace(" "+d+" "," ");f!==(m=T(e))&&c.setAttribute("class",m)}return this},toggleClass:function(b,a){var c=
typeof b,e="string"===c||Array.isArray(b);return"boolean"==typeof a&&e?a?this.addClass(b):this.removeClass(b):ea(b)?this.each(function(c){r(this).toggleClass(b.call(this,c,U(this),a),a)}):this.each(function(){var a,f;if(e){var d=0;var k=r(this);for(f=la(b);a=f[d++];)k.hasClass(a)?k.removeClass(a):k.addClass(a)}else void 0!==b&&"boolean"!==c||((a=U(this))&&fa.set(this,"__className__",a),this.setAttribute&&this.setAttribute("class",a||!1===b?"":fa.get(this,"__className__")||""))})},hasClass:function(b){var a,
c=0;for(b=" "+b+" ";a=this[c++];)if(1===a.nodeType&&-1<(" "+T(U(a))+" ").indexOf(b))return!0;return!1}});var nc=/\r/g;r.fn.extend({val:function(b){var a,c,e,f=this[0];return arguments.length?(e=ea(b),this.each(function(c){var f;1===this.nodeType&&(null==(f=e?b.call(this,c,r(this).val()):b)?f="":"number"==typeof f?f+="":Array.isArray(f)&&(f=r.map(f,function(b){return null==b?"":b+""})),(a=r.valHooks[this.type]||r.valHooks[this.nodeName.toLowerCase()])&&"set"in a&&void 0!==a.set(this,f,"value")||(this.value=
f))})):f?(a=r.valHooks[f.type]||r.valHooks[f.nodeName.toLowerCase()])&&"get"in a&&void 0!==(c=a.get(f,"value"))?c:"string"==typeof(c=f.value)?c.replace(nc,""):null==c?"":c:void 0}});r.extend({valHooks:{option:{get:function(b){var a=r.find.attr(b,"value");return null!=a?a:T(r.text(b))}},select:{get:function(b){var a,c,e=b.options,f=b.selectedIndex,d="select-one"===b.type,k=d?null:[],m=d?f+1:e.length;for(c=0>f?m:d?f:0;c<m;c++)if(!(!(a=e[c]).selected&&c!==f||a.disabled||a.parentNode.disabled&&g(a.parentNode,
"optgroup"))){if(b=r(a).val(),d)return b;k.push(b)}return k},set:function(b,a){var c,e,f=b.options;a=r.makeArray(a);for(var d=f.length;d--;)((e=f[d]).selected=-1<r.inArray(r.valHooks.option.get(e),a))&&(c=!0);return c||(b.selectedIndex=-1),a}}}});r.each(["radio","checkbox"],function(){r.valHooks[this]={set:function(b,a){if(Array.isArray(a))return b.checked=-1<r.inArray(r(b).val(),a)}};qa.checkOn||(r.valHooks[this].get=function(b){return null===b.getAttribute("value")?"on":b.value})});qa.focusin="onfocusin"in
b;var gc=/^(?:focusinfocus|focusoutblur)$/,hc=function(b){b.stopPropagation()};r.extend(r.event,{trigger:function(a,c,e,f){var d,k,m,l,h,ba,p=[e||na],g=vb.call(a,"type")?a.type:a;var u=vb.call(a,"namespace")?a.namespace.split("."):[];if(d=ba=k=e=e||na,3!==e.nodeType&&8!==e.nodeType&&!gc.test(g+r.event.triggered)&&(-1<g.indexOf(".")&&(u=g.split("."),g=u.shift(),u.sort()),m=0>g.indexOf(":")&&"on"+g,(a=a[r.expando]?a:new r.Event(g,"object"==typeof a&&a)).isTrigger=f?2:3,a.namespace=u.join("."),a.rnamespace=
a.namespace?new RegExp("(^|\\.)"+u.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,a.result=void 0,a.target||(a.target=e),c=null==c?[a]:r.makeArray(c,[a]),h=r.event.special[g]||{},f||!h.trigger||!1!==h.trigger.apply(e,c))){if(!f&&!h.noBubble&&!Za(e)){var n=h.delegateType||g;for(gc.test(n+g)||(d=d.parentNode);d;d=d.parentNode)p.push(d),k=d;k===(e.ownerDocument||na)&&p.push(k.defaultView||k.parentWindow||b)}for(u=0;(d=p[u++])&&!a.isPropagationStopped();)ba=d,a.type=1<u?n:h.bindType||g,(l=(fa.get(d,"events")||
Object.create(null))[a.type]&&fa.get(d,"handle"))&&l.apply(d,c),(l=m&&d[m])&&l.apply&&Ga(d)&&(a.result=l.apply(d,c),!1===a.result&&a.preventDefault());return a.type=g,f||a.isDefaultPrevented()||h._default&&!1!==h._default.apply(p.pop(),c)||!Ga(e)||m&&ea(e[g])&&!Za(e)&&((k=e[m])&&(e[m]=null),r.event.triggered=g,a.isPropagationStopped()&&ba.addEventListener(g,hc),e[g](),a.isPropagationStopped()&&ba.removeEventListener(g,hc),r.event.triggered=void 0,k&&(e[m]=k)),a.result}},simulate:function(b,a,c){b=
r.extend(new r.Event,c,{type:b,isSimulated:!0});r.event.trigger(b,null,a)}});r.fn.extend({trigger:function(b,a){return this.each(function(){r.event.trigger(b,a,this)})},triggerHandler:function(b,a){var c=this[0];if(c)return r.event.trigger(b,a,c,!0)}});qa.focusin||r.each({focus:"focusin",blur:"focusout"},function(b,a){var c=function(b){r.event.simulate(a,b.target,r.event.fix(b))};r.event.special[a]={setup:function(){var e=this.ownerDocument||this.document||this,f=fa.access(e,a);f||e.addEventListener(b,
c,!0);fa.access(e,a,(f||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,f=fa.access(e,a)-1;f?fa.access(e,a,f):(e.removeEventListener(b,c,!0),fa.remove(e,a))}}});var Rb=b.location,sb=Date.now(),nb=/\?/;r.parseXML=function(a){if(!a||"string"!=typeof a)return null;try{var c=(new b.DOMParser).parseFromString(a,"text/xml")}catch(lc){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||r.error("Invalid XML: "+a),c};var va=/\[\]$/,Va=/\r?\n/g,Xa=/^(?:submit|button|image|reset|file)$/i,
hb=/^(?:input|select|textarea|keygen)/i;r.param=function(b,a){var c,e=[],f=function(b,a){a=ea(a)?a():a;e[e.length]=encodeURIComponent(b)+"="+encodeURIComponent(null==a?"":a)};if(null==b)return"";if(Array.isArray(b)||b.jquery&&!r.isPlainObject(b))r.each(b,function(){f(this.name,this.value)});else for(c in b)D(c,b[c],a,f);return e.join("&")};r.fn.extend({serialize:function(){return r.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var b=r.prop(this,"elements");return b?
r.makeArray(b):this}).filter(function(){var b=this.type;return this.name&&!r(this).is(":disabled")&&hb.test(this.nodeName)&&!Xa.test(b)&&(this.checked||!Pa.test(b))}).map(function(b,a){b=r(this).val();return null==b?null:Array.isArray(b)?r.map(b,function(b){return{name:a.name,value:b.replace(Va,"\r\n")}}):{name:a.name,value:b.replace(Va,"\r\n")}}).get()}});var ib=/%20/g,Lb=/#.*$/,xb=/([?&])_=[^&]*/,Zb=/^(.*?):[ \t]*([^\r\n]*)$/gm,$b=/^(?:GET|HEAD)$/,ic=/^\/\//,Fb={},zb={},Gb="*/".concat("*"),Hb=na.createElement("a");
Hb.href=Rb.href;r.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Rb.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Rb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Gb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",
json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":r.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(b,a){return a?E(E(b,r.ajaxSettings),a):E(r.ajaxSettings,b)},ajaxPrefilter:V(Fb),ajaxTransport:V(zb),ajax:function(a,c){function e(a,c,e,m){var ba,p,J,C,y,H=c;K||(K=!0,l&&b.clearTimeout(l),f=void 0,k=m||"",O.readyState=0<a?4:0,ba=200<=a&&300>a||304===a,e&&(C=function(b,a,c){for(var e,f,d,k,m=b.contents,l=b.dataTypes;"*"===l[0];)l.shift(),
void 0===e&&(e=b.mimeType||a.getResponseHeader("Content-Type"));if(e)for(f in m)if(m[f]&&m[f].test(e)){l.unshift(f);break}if(l[0]in c)d=l[0];else{for(f in c){if(!l[0]||b.converters[f+" "+l[0]]){d=f;break}k||(k=f)}d=d||k}if(d)return d!==l[0]&&l.unshift(d),c[d]}(g,O,e)),!ba&&-1<r.inArray("script",g.dataTypes)&&(g.converters["text script"]=function(){}),C=function(b,a,c,e){var f,d,k,m,l,h={},g=b.dataTypes.slice();if(g[1])for(k in b.converters)h[k.toLowerCase()]=b.converters[k];for(d=g.shift();d;)if(b.responseFields[d]&&
(c[b.responseFields[d]]=a),!l&&e&&b.dataFilter&&(a=b.dataFilter(a,b.dataType)),l=d,d=g.shift())if("*"===d)d=l;else if("*"!==l&&l!==d){if(!(k=h[l+" "+d]||h["* "+d]))for(f in h)if((m=f.split(" "))[1]===d&&(k=h[l+" "+m[0]]||h["* "+m[0]])){!0===k?k=h[f]:!0!==h[f]&&(d=m[0],g.unshift(m[1]));break}if(!0!==k)if(k&&b.throws)a=k(a);else try{a=k(a)}catch(vc){return{state:"parsererror",error:k?vc:"No conversion from "+l+" to "+d}}}return{state:"success",data:a}}(g,C,O,ba),ba?(g.ifModified&&((y=O.getResponseHeader("Last-Modified"))&&
(r.lastModified[d]=y),(y=O.getResponseHeader("etag"))&&(r.etag[d]=y)),204===a||"HEAD"===g.type?H="nocontent":304===a?H="notmodified":(H=C.state,p=C.data,ba=!(J=C.error))):(J=H,!a&&H||(H="error",0>a&&(a=0))),O.status=a,O.statusText=(c||H)+"",ba?z.resolveWith(u,[p,H,O]):z.rejectWith(u,[O,H,J]),O.statusCode(w),w=void 0,h&&n.trigger(ba?"ajaxSuccess":"ajaxError",[O,g,ba?p:J]),q.fireWith(u,[O,H]),h&&(n.trigger("ajaxComplete",[O,g]),--r.active||r.event.trigger("ajaxStop")))}"object"==typeof a&&(c=a,a=void 0);
c=c||{};var f,d,k,m,l,h,ba,p,g=r.ajaxSetup({},c),u=g.context||g,n=g.context&&(u.nodeType||u.jquery)?r(u):r.event,z=r.Deferred(),q=r.Callbacks("once memory"),w=g.statusCode||{},J={},C={},y="canceled",O={readyState:0,getResponseHeader:function(b){var a;if(K){if(!m)for(m={};a=Zb.exec(k);)m[a[1].toLowerCase()+" "]=(m[a[1].toLowerCase()+" "]||[]).concat(a[2]);a=m[b.toLowerCase()+" "]}return null==a?null:a.join(", ")},getAllResponseHeaders:function(){return K?k:null},setRequestHeader:function(b,a){return null==
K&&(b=C[b.toLowerCase()]=C[b.toLowerCase()]||b,J[b]=a),this},overrideMimeType:function(b){return null==K&&(g.mimeType=b),this},statusCode:function(b){var a;if(b)if(K)O.always(b[O.status]);else for(a in b)w[a]=[w[a],b[a]];return this},abort:function(b){b=b||y;return f&&f.abort(b),e(0,b),this}};if(z.promise(O),g.url=((a||g.url||Rb.href)+"").replace(ic,Rb.protocol+"//"),g.type=c.method||c.type||g.method||g.type,g.dataTypes=(g.dataType||"*").toLowerCase().match(Wa)||[""],null==g.crossDomain){a=na.createElement("a");
try{a.href=g.url,a.href=a.href,g.crossDomain=Hb.protocol+"//"+Hb.host!=a.protocol+"//"+a.host}catch(mc){g.crossDomain=!0}}if(g.data&&g.processData&&"string"!=typeof g.data&&(g.data=r.param(g.data,g.traditional)),ha(Fb,g,c,O),K)return O;for(ba in(h=r.event&&g.global)&&0==r.active++&&r.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!$b.test(g.type),d=g.url.replace(Lb,""),g.hasContent?g.data&&g.processData&&0===(g.contentType||"").indexOf("application/x-www-form-urlencoded")&&(g.data=
g.data.replace(ib,"+")):(p=g.url.slice(d.length),g.data&&(g.processData||"string"==typeof g.data)&&(d+=(nb.test(d)?"&":"?")+g.data,delete g.data),!1===g.cache&&(d=d.replace(xb,"$1"),p=(nb.test(d)?"&":"?")+"_="+sb++ +p),g.url=d+p),g.ifModified&&(r.lastModified[d]&&O.setRequestHeader("If-Modified-Since",r.lastModified[d]),r.etag[d]&&O.setRequestHeader("If-None-Match",r.etag[d])),(g.data&&g.hasContent&&!1!==g.contentType||c.contentType)&&O.setRequestHeader("Content-Type",g.contentType),O.setRequestHeader("Accept",
g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+Gb+"; q=0.01":""):g.accepts["*"]),g.headers)O.setRequestHeader(ba,g.headers[ba]);if(g.beforeSend&&(!1===g.beforeSend.call(u,O,g)||K))return O.abort();if(y="abort",q.add(g.complete),O.done(g.success),O.fail(g.error),f=ha(zb,g,c,O)){if(O.readyState=1,h&&n.trigger("ajaxSend",[O,g]),K)return O;g.async&&0<g.timeout&&(l=b.setTimeout(function(){O.abort("timeout")},g.timeout));try{var K=!1;f.send(J,e)}catch(mc){if(K)throw mc;
e(-1,mc)}}else e(-1,"No Transport");return O},getJSON:function(b,a,c){return r.get(b,a,c,"json")},getScript:function(b,a){return r.get(b,void 0,a,"script")}});r.each(["get","post"],function(b,a){r[a]=function(b,c,e,f){return ea(c)&&(f=f||e,e=c,c=void 0),r.ajax(r.extend({url:b,type:a,dataType:f,data:c,success:e},r.isPlainObject(b)&&b))}});r.ajaxPrefilter(function(b){for(var a in b.headers)"content-type"===a.toLowerCase()&&(b.contentType=b.headers[a]||"")});r._evalUrl=function(b,a,c){return r.ajax({url:b,
type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(b){r.globalEval(b,a,c)}})};r.fn.extend({wrapAll:function(b){var a;return this[0]&&(ea(b)&&(b=b.call(this[0])),a=r(b,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&a.insertBefore(this[0]),a.map(function(){for(var b=this;b.firstElementChild;)b=b.firstElementChild;return b}).append(this)),this},wrapInner:function(b){return ea(b)?this.each(function(a){r(this).wrapInner(b.call(this,
a))}):this.each(function(){var a=r(this),c=a.contents();c.length?c.wrapAll(b):a.append(b)})},wrap:function(b){var a=ea(b);return this.each(function(c){r(this).wrapAll(a?b.call(this,c):b)})},unwrap:function(b){return this.parent(b).not("body").each(function(){r(this).replaceWith(this.childNodes)}),this}});r.expr.pseudos.hidden=function(b){return!r.expr.pseudos.visible(b)};r.expr.pseudos.visible=function(b){return!!(b.offsetWidth||b.offsetHeight||b.getClientRects().length)};r.ajaxSettings.xhr=function(){try{return new b.XMLHttpRequest}catch(y){}};
var tb={0:200,1223:204},Cb=r.ajaxSettings.xhr();qa.cors=!!Cb&&"withCredentials"in Cb;qa.ajax=Cb=!!Cb;r.ajaxTransport(function(a){var c,e;if(qa.cors||Cb&&!a.crossDomain)return{send:function(f,d){var k,m=a.xhr();if(m.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(k in a.xhrFields)m[k]=a.xhrFields[k];for(k in a.mimeType&&m.overrideMimeType&&m.overrideMimeType(a.mimeType),a.crossDomain||f["X-Requested-With"]||(f["X-Requested-With"]="XMLHttpRequest"),f)m.setRequestHeader(k,f[k]);c=function(b){return function(){c&&
(c=e=m.onload=m.onerror=m.onabort=m.ontimeout=m.onreadystatechange=null,"abort"===b?m.abort():"error"===b?"number"!=typeof m.status?d(0,"error"):d(m.status,m.statusText):d(tb[m.status]||m.status,m.statusText,"text"!==(m.responseType||"text")||"string"!=typeof m.responseText?{binary:m.response}:{text:m.responseText},m.getAllResponseHeaders()))}};m.onload=c();e=m.onerror=m.ontimeout=c("error");void 0!==m.onabort?m.onabort=e:m.onreadystatechange=function(){4===m.readyState&&b.setTimeout(function(){c&&
e()})};c=c("abort");try{m.send(a.hasContent&&a.data||null)}catch(sc){if(c)throw sc;}},abort:function(){c&&c()}}});r.ajaxPrefilter(function(b){b.crossDomain&&(b.contents.script=!1)});r.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(b){return r.globalEval(b),b}}});r.ajaxPrefilter("script",function(b){void 0===b.cache&&(b.cache=!1);b.crossDomain&&(b.type=
"GET")});r.ajaxTransport("script",function(b){var a,c;if(b.crossDomain||b.scriptAttrs)return{send:function(e,f){a=r("<script>").attr(b.scriptAttrs||{}).prop({charset:b.scriptCharset,src:b.url}).on("load error",c=function(b){a.remove();c=null;b&&f("error"===b.type?404:200,b.type)});na.head.appendChild(a[0])},abort:function(){c&&c()}}});var jc,kc=[],Sb=/(=)\?(?=&|$)|\?\?/;r.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var b=kc.pop()||r.expando+"_"+sb++;return this[b]=!0,b}});r.ajaxPrefilter("json jsonp",
function(a,c,e){var f,d,k,m=!1!==a.jsonp&&(Sb.test(a.url)?"url":"string"==typeof a.data&&0===(a.contentType||"").indexOf("application/x-www-form-urlencoded")&&Sb.test(a.data)&&"data");if(m||"jsonp"===a.dataTypes[0])return f=a.jsonpCallback=ea(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,m?a[m]=a[m].replace(Sb,"$1"+f):!1!==a.jsonp&&(a.url+=(nb.test(a.url)?"&":"?")+a.jsonp+"="+f),a.converters["script json"]=function(){return k||r.error(f+" was not called"),k[0]},a.dataTypes[0]="json",d=b[f],b[f]=
function(){k=arguments},e.always(function(){void 0===d?r(b).removeProp(f):b[f]=d;a[f]&&(a.jsonpCallback=c.jsonpCallback,kc.push(f));k&&ea(d)&&d(k[0]);k=d=void 0}),"script"});qa.createHTMLDocument=((jc=na.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===jc.childNodes.length);r.parseHTML=function(b,a,c){return"string"!=typeof b?[]:("boolean"==typeof a&&(c=a,a=!1),a||(qa.createHTMLDocument?((e=(a=na.implementation.createHTMLDocument("")).createElement("base")).href=
na.location.href,a.head.appendChild(e)):a=na),d=!c&&[],(f=La.exec(b))?[a.createElement(f[1])]:(f=G([b],a,d),d&&d.length&&r(d).remove(),r.merge([],f.childNodes)));var e,f,d};r.fn.load=function(b,a,c){var e,f,d,k=this,m=b.indexOf(" ");return-1<m&&(e=T(b.slice(m)),b=b.slice(0,m)),ea(a)?(c=a,a=void 0):a&&"object"==typeof a&&(f="POST"),0<k.length&&r.ajax({url:b,type:f||"GET",dataType:"html",data:a}).done(function(b){d=arguments;k.html(e?r("<div>").append(r.parseHTML(b)).find(e):b)}).always(c&&function(b,
a){k.each(function(){c.apply(this,d||[b.responseText,a,b])})}),this};r.expr.pseudos.animated=function(b){return r.grep(r.timers,function(a){return b===a.elem}).length};r.offset={setOffset:function(b,a,c){var e,f,d,k=r.css(b,"position"),m=r(b),l={};"static"===k&&(b.style.position="relative");var h=m.offset();var g=r.css(b,"top");var ba=r.css(b,"left");("absolute"===k||"fixed"===k)&&-1<(g+ba).indexOf("auto")?(d=(e=m.position()).top,f=e.left):(d=parseFloat(g)||0,f=parseFloat(ba)||0);ea(a)&&(a=a.call(b,
c,r.extend({},h)));null!=a.top&&(l.top=a.top-h.top+d);null!=a.left&&(l.left=a.left-h.left+f);"using"in a?a.using.call(b,l):("number"==typeof l.top&&(l.top+="px"),"number"==typeof l.left&&(l.left+="px"),m.css(l))}};r.fn.extend({offset:function(b){if(arguments.length)return void 0===b?this:this.each(function(a){r.offset.setOffset(this,b,a)});var a,c,e=this[0];return e?e.getClientRects().length?(a=e.getBoundingClientRect(),c=e.ownerDocument.defaultView,{top:a.top+c.pageYOffset,left:a.left+c.pageXOffset}):
{top:0,left:0}:void 0},position:function(){if(this[0]){var b,a=this[0],c={top:0,left:0};if("fixed"===r.css(a,"position"))var e=a.getBoundingClientRect();else{e=this.offset();var f=a.ownerDocument;for(b=a.offsetParent||f.documentElement;b&&(b===f.body||b===f.documentElement)&&"static"===r.css(b,"position");)b=b.parentNode;b&&b!==a&&1===b.nodeType&&((c=r(b).offset()).top+=r.css(b,"borderTopWidth",!0),c.left+=r.css(b,"borderLeftWidth",!0))}return{top:e.top-c.top-r.css(a,"marginTop",!0),left:e.left-c.left-
r.css(a,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var b=this.offsetParent;b&&"static"===r.css(b,"position");)b=b.offsetParent;return b||Ja})}});r.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,a){var c="pageYOffset"===a;r.fn[b]=function(e){return ua(this,function(b,e,f){var d;if(Za(b)?d=b:9===b.nodeType&&(d=b.defaultView),void 0===f)return d?d[a]:b[e];d?d.scrollTo(c?d.pageXOffset:f,c?f:d.pageYOffset):b[e]=f},b,e,arguments.length)}});r.each(["top",
"left"],function(b,a){r.cssHooks[a]=S(qa.pixelPosition,function(b,c){if(c)return c=ta(b,a),Ha.test(c)?r(b).position()[a]+"px":c})});r.each({Height:"height",Width:"width"},function(b,a){r.each({padding:"inner"+b,content:a,"":"outer"+b},function(c,e){r.fn[e]=function(f,d){var k=arguments.length&&(c||"boolean"!=typeof f),m=c||(!0===f||!0===d?"margin":"border");return ua(this,function(a,c,f){var d;return Za(a)?0===e.indexOf("outer")?a["inner"+b]:a.document.documentElement["client"+b]:9===a.nodeType?(d=
a.documentElement,Math.max(a.body["scroll"+b],d["scroll"+b],a.body["offset"+b],d["offset"+b],d["client"+b])):void 0===f?r.css(a,c,m):r.style(a,c,f,m)},a,k?f:void 0,k)}})});r.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(b,a){r.fn[a]=function(b){return this.on(a,b)}});r.fn.extend({bind:function(b,a,c){return this.on(b,null,a,c)},unbind:function(b,a){return this.off(b,null,a)},delegate:function(b,a,c,e){return this.on(a,b,c,e)},undelegate:function(b,a,c){return 1===
arguments.length?this.off(b,"**"):this.off(a,b||"**",c)},hover:function(b,a){return this.mouseenter(b).mouseleave(a||b)}});r.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(b,a){r.fn[a]=function(b,c){return 0<arguments.length?this.on(a,null,b,c):this.trigger(a)}});var ac=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;r.proxy=function(b,a){var c,e,f;
if("string"==typeof a&&(c=b[a],a=b,b=c),ea(b))return e=Na.call(arguments,2),(f=function(){return b.apply(a||this,e.concat(Na.call(arguments)))}).guid=b.guid=b.guid||r.guid++,f};r.holdReady=function(b){b?r.readyWait++:r.ready(!0)};r.isArray=Array.isArray;r.parseJSON=JSON.parse;r.nodeName=g;r.isFunction=ea;r.isWindow=Za;r.camelCase=k;r.type=h;r.now=Date.now;r.isNumeric=function(b){var a=r.type(b);return("number"===a||"string"===a)&&!isNaN(b-parseFloat(b))};r.trim=function(b){return null==b?"":(b+"").replace(ac,
"")};!(L=[],ja=function(){return r}.apply(Y,L),void 0!==ja&&(t.exports=ja));var oc=b.jQuery,bc=b.$;return r.noConflict=function(a){return b.$===r&&(b.$=bc),a&&b.jQuery===r&&(b.jQuery=oc),r},void 0===a&&(b.jQuery=b.$=r),r});(function(b,a){!function(b){function a(b,a,c){b.byteLength;for(var e=0,f=c.length;e<f;e++){var d=c.charCodeAt(e);if(128>d)b.setUint8(a++,d>>>0&127|0);else{if(2048>d)b.setUint8(a++,d>>>6&31|192);else{if(65536>d)b.setUint8(a++,d>>>12&15|224);else{if(!(1114112>d))throw Error("bad codepoint "+
d);b.setUint8(a++,d>>>18&7|240);b.setUint8(a++,d>>>12&63|128)}b.setUint8(a++,d>>>6&63|128)}b.setUint8(a++,d>>>0&63|128)}}}function c(b){for(var a=0,c=0,e=b.length;c<e;c++){var f=b.charCodeAt(c);if(128>f)a+=1;else if(2048>f)a+=2;else if(65536>f)a+=3;else{if(!(1114112>f))throw Error("bad codepoint "+f);a+=4}}return a}function d(b){var e=new ArrayBuffer(function K(b){var a=typeof b;if("string"===a){if(32>(e=c(b)))return 1+e;if(256>e)return 2+e;if(65536>e)return 3+e;if(4294967296>e)return 5+e}if(b instanceof
Uint8Array){if(256>(e=b.byteLength))return 2+e;if(65536>e)return 3+e;if(4294967296>e)return 5+e}if("number"===a){if(Math.floor(b)!==b)return 9;if(0<=b){if(128>b)return 1;if(256>b)return 2;if(65536>b)return 3;if(4294967296>b)return 5;throw Error("Number too big 0x"+b.toString(16));}if(-32<=b)return 1;if(-128<=b)return 2;if(-32768<=b)return 3;if(-2147483648<=b)return 5;throw Error("Number too small -0x"+b.toString(16).substr(1));}if("boolean"===a||null===b)return 1;if("object"===a){var e;a=0;if(Array.isArray(b)){e=
b.length;for(var f=0;f<e;f++)a+=K(b[f])}else{var d=Object.keys(b);e=d.length;for(f=0;f<e;f++){var k=d[f];a+=K(k)+K(b[k])}}if(16>e)return 1+a;if(65536>e)return 3+a;if(4294967296>e)return 5+a;throw Error("Array or object too long 0x"+e.toString(16));}throw Error("Unknown type "+a);}(b));return function ia(b,e,f){var d=typeof b;if("string"===d){if(32>(k=c(b)))return e.setUint8(f,160|k),a(e,f+1,b),1+k;if(256>k)return e.setUint8(f,217),e.setUint8(f+1,k),a(e,f+2,b),2+k;if(65536>k)return e.setUint8(f,218),
e.setUint16(f+1,k),a(e,f+3,b),3+k;if(4294967296>k)return e.setUint8(f,219),e.setUint32(f+1,k),a(e,f+5,b),5+k}if(b instanceof Uint8Array){var k=b.byteLength,m=new Uint8Array(e.buffer);if(256>k)return e.setUint8(f,196),e.setUint8(f+1,k),m.set(b,f+2),2+k;if(65536>k)return e.setUint8(f,197),e.setUint16(f+1,k),m.set(b,f+3),3+k;if(4294967296>k)return e.setUint8(f,198),e.setUint32(f+1,k),m.set(b,f+5),5+k}if("number"===d){if(!isFinite(b))throw Error("Number not finite: "+b);if(Math.floor(b)!==b)return e.setUint8(f,
203),e.setFloat64(f+1,b),9;if(0<=b){if(128>b)return e.setUint8(f,b),1;if(256>b)return e.setUint8(f,204),e.setUint8(f+1,b),2;if(65536>b)return e.setUint8(f,205),e.setUint16(f+1,b),3;if(4294967296>b)return e.setUint8(f,206),e.setUint32(f+1,b),5;throw Error("Number too big 0x"+b.toString(16));}if(-32<=b)return e.setInt8(f,b),1;if(-128<=b)return e.setUint8(f,208),e.setInt8(f+1,b),2;if(-32768<=b)return e.setUint8(f,209),e.setInt16(f+1,b),3;if(-2147483648<=b)return e.setUint8(f,210),e.setInt32(f+1,b),5;
throw Error("Number too small -0x"+(-b).toString(16).substr(1));}if(null===b)return e.setUint8(f,192),1;if("boolean"===d)return e.setUint8(f,b?195:194),1;if("object"===d){d=0;if(m=Array.isArray(b))k=b.length;else{var l=Object.keys(b);k=l.length}if(16>k?(e.setUint8(f,k|(m?144:128)),d=1):65536>k?(e.setUint8(f,m?220:222),e.setUint16(f+1,k),d=3):4294967296>k&&(e.setUint8(f,m?221:223),e.setUint32(f+1,k),d=5),m)for(m=0;m<k;m++)d+=ia(b[m],e,f+d);else for(m=0;m<k;m++){var h=l[m];d+=ia(h,e,f+d);d+=ia(b[h],
e,f+d)}return d}throw Error("Unknown type "+d);}(b,new DataView(e),0),new Uint8Array(e)}function p(b,a,c){return a?new b(a.buffer,a.byteOffset,a.byteLength/(c||1)):void 0}function q(b,a){var c=b.length/2;a||(a=new Int16Array(c));for(var e=0,f=0;e<c;++e,f+=2)a[e]=b[f]<<8^b[f+1]<<0;return a}function x(b,a){var c=b.length/4;a||(a=new Int32Array(c));for(var e=0,f=0;e<c;++e,f+=4)a[e]=b[f]<<24^b[f+1]<<16^b[f+2]<<8^b[f+3]<<0;return a}function A(b,a){var c=b.length;a||(a=new Uint8Array(4*c));for(var e=p(DataView,
a),f=0;f<c;++f)e.setInt32(4*f,b[f]);return p(Uint8Array,a)}function v(b,a,c){var e=b.length;a=1/a;c||(c=new Float32Array(e));for(var f=0;f<e;++f)c[f]=b[f]*a;return c}function B(b,a,c){var e=b.length;c||(c=new Int32Array(e));for(var f=0;f<e;++f)c[f]=Math.round(b[f]*a);return c}function e(b,a){var c;if(!a){var e=a=0;for(c=b.length;e<c;e+=2)a+=b[e+1];a=new b.constructor(a)}var f=0;e=0;for(c=b.length;e<c;e+=2)for(var d=b[e],k=b[e+1],m=0;m<k;++m)a[f]=d,++f;return a}function k(b){if(0===b.length)return new Int32Array;
var a,c=2;var e=1;for(a=b.length;e<a;++e)b[e-1]!==b[e]&&(c+=2);c=new Int32Array(c);var f=0,d=1;e=1;for(a=b.length;e<a;++e)b[e-1]!==b[e]?(c[f]=b[e-1],c[f+1]=d,d=1,f+=2):++d;return c[f]=b[b.length-1],c[f+1]=d,c}function z(b,a){var c=b.length;a||(a=new b.constructor(c));c&&(a[0]=b[0]);for(var e=1;e<c;++e)a[e]=b[e]+a[e-1];return a}function l(b,a){var c=b.length;a||(a=new b.constructor(c));a[0]=b[0];for(var e=1;e<c;++e)a[e]=b[e]-b[e-1];return a}function u(b,a){var c,e,f=b instanceof Int8Array?127:32767,
d=-f-1,k=b.length;if(!a){for(c=a=0;c<k;++c)b[c]<f&&b[c]>d&&++a;a=new Int32Array(a)}for(e=c=0;c<k;){for(var m=0;b[c]===f||b[c]===d;)m+=b[c],++c;m+=b[c];++c;a[e]=m;++e}return a}function C(b,a,c){return v(u(b,p(Int32Array,c,4)),a,c)}function w(b,a,c){b=u(b,p(Int32Array,c,4));c=p(Float32Array,b,4);return v(z(b,p(Int32Array,c,4)),a,c)}function J(b,a,c,e){var f=new ArrayBuffer(12+e.byteLength),d=new Uint8Array(f);f=new DataView(f);return f.setInt32(0,b),f.setInt32(4,a),c&&d.set(c,8),d.set(e,12),d}function G(b){return J(2,
b.length,void 0,p(Uint8Array,b))}function m(b){return J(4,b.length,void 0,A(b))}function f(b,a){return J(5,b.length/a,A([a]),p(Uint8Array,b))}function N(b){return J(6,b.length,void 0,A(k(b)))}function M(b){return J(8,b.length,void 0,A(k(l(b))))}function da(b,a){return J(9,b.length,A([a]),A(k(B(b,a))))}function X(b,a){var c=b.length,e=A([a]);a=l(B(b,a),void 0);var f,d=-32768,k=a.length;for(f=b=0;f<k;++f)0===(h=a[f])?++b:b+=32767===h||h===d?2:0<h?Math.ceil(h/32767):Math.ceil(h/d);b=new Int16Array(b);
var m=0;for(f=0;f<k;++f){var h;if(0<=(h=a[f]))for(;32767<=h;)b[m]=32767,++m,h-=32767;else for(;h<=d;)b[m]=d,++m,h-=d;b[m]=h;++m}h=void 0;a=b.length;h||(h=new Uint8Array(2*a));f=p(DataView,h);for(d=0;d<a;++d)f.setInt16(2*d,b[d]);b=p(Uint8Array,h);return J(10,c,e,b)}function Q(b){var a={};return S.forEach(function(c){void 0!==b[c]&&(a[c]=b[c])}),b.bondAtomList&&(a.bondAtomList=m(b.bondAtomList)),b.bondOrderList&&(a.bondOrderList=G(b.bondOrderList)),a.xCoordList=X(b.xCoordList,1E3),a.yCoordList=X(b.yCoordList,
1E3),a.zCoordList=X(b.zCoordList,1E3),b.bFactorList&&(a.bFactorList=X(b.bFactorList,100)),b.atomIdList&&(a.atomIdList=M(b.atomIdList)),b.altLocList&&(a.altLocList=N(b.altLocList)),b.occupancyList&&(a.occupancyList=da(b.occupancyList,100)),a.groupIdList=M(b.groupIdList),a.groupTypeList=m(b.groupTypeList),b.secStructList&&(a.secStructList=G(b.secStructList)),b.insCodeList&&(a.insCodeList=N(b.insCodeList)),b.sequenceIndexList&&(a.sequenceIndexList=M(b.sequenceIndexList)),a.chainIdList=f(b.chainIdList,
4),b.chainNameList&&(a.chainNameList=f(b.chainNameList,4)),a}function F(b){function a(b){for(var a={},c=0;c<b;c++)a[d()]=d();return a}function c(a){var c=b.subarray(k,k+a);return k+=a,c}function e(a){var c=b.subarray(k,k+a);k+=a;if(65535<a){a=[];for(var e=0;e<c.length;e+=65535)a.push(String.fromCharCode.apply(null,c.subarray(e,e+65535)));return a.join("")}return String.fromCharCode.apply(null,c)}function f(b){for(var a=Array(b),c=0;c<b;c++)a[c]=d();return a}function d(){var d,l,h=b[k];if(0==(128&
h))return k++,h;if(128==(240&h))return k++,a(15&h);if(144==(240&h))return k++,f(15&h);if(160==(224&h))return k++,e(31&h);if(224==(224&h))return d=m.getInt8(k),k++,d;switch(h){case 192:return k++,null;case 194:return k++,!1;case 195:return k++,!0;case 196:return l=m.getUint8(k+1),k+=2,c(l);case 197:return l=m.getUint16(k+1),k+=3,c(l);case 198:return l=m.getUint32(k+1),k+=5,c(l);case 202:return d=m.getFloat32(k+1),k+=5,d;case 203:return d=m.getFloat64(k+1),k+=9,d;case 204:return d=b[k+1],k+=2,d;case 205:return d=
m.getUint16(k+1),k+=3,d;case 206:return d=m.getUint32(k+1),k+=5,d;case 208:return d=m.getInt8(k+1),k+=2,d;case 209:return d=m.getInt16(k+1),k+=3,d;case 210:return d=m.getInt32(k+1),k+=5,d;case 217:return l=m.getUint8(k+1),k+=2,e(l);case 218:return l=m.getUint16(k+1),k+=3,e(l);case 219:return l=m.getUint32(k+1),k+=5,e(l);case 220:return l=m.getUint16(k+1),k+=3,f(l);case 221:return l=m.getUint32(k+1),k+=5,f(l);case 222:return l=m.getUint16(k+1),k+=3,a(l);case 223:return l=m.getUint32(k+1),k+=5,a(l)}throw Error("Unknown type 0x"+
h.toString(16));}var k=0,m=new DataView(b.buffer);return d()}function Ba(b,a,c,f){switch(b){case 1:return function(b,a){var c=b.length;a||(a=new Float32Array(c/4));var e=p(DataView,a);b=p(DataView,b);var f=0,d=0;for(c/=4;f<c;++f,d+=4)e.setFloat32(d,b.getFloat32(d),!0);return a}(a);case 2:return p(Int8Array,a);case 3:return q(a);case 4:return x(a);case 5:return p(Uint8Array,a);case 6:return e(x(a),new Uint8Array(c));case 7:return e(x(a));case 8:return z(e(x(a)),d);case 9:return function(b,a,c){return v(e(b,
p(Int32Array,c,4)),a,c)}(x(a),x(f)[0]);case 10:return w(q(a),x(f)[0]);case 11:return v(q(a),x(f)[0]);case 12:return C(q(a),x(f)[0]);case 13:return C(p(Int8Array,a),x(f)[0]);case 14:return u(q(a));case 15:return u(p(Int8Array,a))}var d}function t(b,a){var c=(a=a||{}).ignoreFields,e={};return R.forEach(function(a){var f,d,k,m,l=!!c&&-1!==c.indexOf(a),h=b[a];l||void 0===h||(h instanceof Uint8Array?e[a]=Ba.apply(null,(f=p(DataView,h),d=f.getInt32(0),k=f.getInt32(4),m=h.subarray(8,12),[d,h.subarray(12),
k,m])):e[a]=h)}),e}function P(b,a){return b instanceof ArrayBuffer&&(b=new Uint8Array(b)),t(b instanceof Uint8Array?F(b):b,a)}function ta(b,a,c,e){var f=new XMLHttpRequest;f.addEventListener("load",function(){try{var b=P(f.response);c(b)}catch(ca){e(ca)}},!0);f.addEventListener("error",e,!0);f.responseType="arraybuffer";f.open("GET",a+b.toUpperCase());f.send()}var S="mmtfVersion mmtfProducer unitCell spaceGroup structureId title depositionDate releaseDate experimentalMethods resolution rFree rWork bioAssemblyList ncsOperatorList entityList groupList numBonds numAtoms numGroups numChains numModels groupsPerChain chainsPerModel".split(" "),
R=S.concat("xCoordList yCoordList zCoordList groupIdList groupTypeList chainIdList bFactorList atomIdList altLocList occupancyList secStructList insCodeList sequenceIndexList chainNameList bondAtomList bondOrderList".split(" "));b.encode=function(b){return d(Q(b))};b.decode=P;b.traverse=function(b,a,c){var e,f;c=(c||{}).firstModelOnly;var d=a.onModel,k=a.onChain,m=a.onGroup,l=a.onAtom,h=a.onBond,g=0,p=0,u=0,n=0,z=-1,q=b.chainNameList,w=b.secStructList,J=b.insCodeList,C=b.sequenceIndexList,x=b.atomIdList,
M=b.bFactorList,X=b.altLocList,v=b.occupancyList,G=b.bondAtomList,A=b.bondOrderList;a=0;for(e=b.chainsPerModel.length;a<e&&!(c&&0<g);++a){var B=b.chainsPerModel[g];d&&d({chainCount:B,modelIndex:g});for(f=0;f<B;++f){var N=b.groupsPerChain[p];if(k){var O=String.fromCharCode.apply(null,b.chainIdList.subarray(4*p,4*p+4)).replace(/\0/g,"");var I=null;q&&(I=String.fromCharCode.apply(null,q.subarray(4*p,4*p+4)).replace(/\0/g,""));k({groupCount:N,chainIndex:p,modelIndex:g,chainId:O,chainName:I})}for(O=0;O<
N;++O){var da=b.groupList[b.groupTypeList[u]],F=da.atomNameList.length;if(m){I=null;w&&(I=w[u]);var Q=null;b.insCodeList&&(Q=String.fromCharCode(J[u]));var r=null;C&&(r=C[u]);m({atomCount:F,groupIndex:u,chainIndex:p,modelIndex:g,groupId:b.groupIdList[u],groupType:b.groupTypeList[u],groupName:da.groupName,singleLetterCode:da.singleLetterCode,chemCompType:da.chemCompType,secStruct:I,insCode:Q,sequenceIndex:r})}for(I=0;I<F;++I){if(l){Q=null;x&&(Q=x[n]);r=null;M&&(r=M[n]);var Ba=null;X&&(Ba=String.fromCharCode(X[n]));
var t=null;v&&(t=v[n]);l({atomIndex:n,groupIndex:u,chainIndex:p,modelIndex:g,atomId:Q,element:da.elementList[I],atomName:da.atomNameList[I],formalCharge:da.formalChargeList[I],xCoord:b.xCoordList[n],yCoord:b.yCoordList[n],zCoord:b.zCoordList[n],bFactor:r,altLoc:Ba,occupancy:t})}n+=1}if(h)for(r=da.bondAtomList,I=0,Q=da.bondOrderList.length;I<Q;++I)h({atomIndex1:n-F+r[2*I],atomIndex2:n-F+r[2*I+1],bondOrder:da.bondOrderList[I]});u+=1}p+=1}if(f=z+1,z=n-1,h&&G)for(I=0,Q=G.length;I<Q;I+=2)B=G[I],N=G[I+
1],(B>=f&&B<=z||N>=f&&N<=z)&&h({atomIndex1:B,atomIndex2:N,bondOrder:A?A[I/2]:null});g+=1}};b.fetch=function(b,a,c){ta(b,"http://mmtf.rcsb.org/v1.0/full/",a,c)};b.fetchReduced=function(b,a,c){ta(b,"http://mmtf.rcsb.org/v1.0/reduced/",a,c)};b.version="v1.0.0";b.fetchUrl="http://mmtf.rcsb.org/v1.0/full/";b.fetchReducedUrl="http://mmtf.rcsb.org/v1.0/reduced/";b.encodeMsgpack=d;b.encodeMmtf=Q;b.decodeMsgpack=F;b.decodeMmtf=t;Object.defineProperty(b,"__esModule",{value:!0})}(b.MMTF=b.MMTF||{})})(this);
t.exports=function(){return function n(a,d,h){function c(g,q){if(!d[g]){if(!a[g]){if(p)return p(g,!0);q=Error("Cannot find module '"+g+"'");throw q.code="MODULE_NOT_FOUND",q;}q=d[g]={exports:{}};a[g][0].call(q.exports,function(d){return c(a[g][1][d]||d)},q,q.exports,n,a,d,h)}return d[g].exports}for(var p=!1,q=0;q<h.length;q++)c(h[q]);return c}({1:[function(a,d,h){a="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;h.assign=function(a){for(var c=Array.prototype.slice.call(arguments,
1);c.length;){var d=c.shift();if(d){if("object"!=typeof d)throw new TypeError(d+"must be non-object");for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&(a[h]=d[h])}}return a};h.shrinkBuf=function(a,c){return a.length===c?a:a.subarray?a.subarray(0,c):(a.length=c,a)};var c={arraySet:function(a,c,d,h,g){if(c.subarray&&a.subarray)a.set(c.subarray(d,d+h),g);else for(var p=0;p<h;p++)a[g+p]=c[d+p]},flattenChunks:function(a){var c,d;var h=d=0;for(c=a.length;h<c;h++)d+=a[h].length;var g=new Uint8Array(d);
h=d=0;for(c=a.length;h<c;h++){var p=a[h];g.set(p,d);d+=p.length}return g}},g={arraySet:function(a,c,d,h,g){for(var p=0;p<h;p++)a[g+p]=c[d+p]},flattenChunks:function(a){return[].concat.apply([],a)}};h.setTyped=function(a){a?(h.Buf8=Uint8Array,h.Buf16=Uint16Array,h.Buf32=Int32Array,h.assign(h,c)):(h.Buf8=Array,h.Buf16=Array,h.Buf32=Array,h.assign(h,g))};h.setTyped(a)},{}],2:[function(a,d,h){function c(a,c){if(65534>c&&(a.subarray&&q||!a.subarray&&p))return String.fromCharCode.apply(null,g.shrinkBuf(a,
c));for(var d="",e=0;e<c;e++)d+=String.fromCharCode(a[e]);return d}var g=a("./common"),p=!0,q=!0;try{String.fromCharCode.apply(null,[0])}catch(A){p=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(A){q=!1}var x=new g.Buf8(256);for(a=0;256>a;a++)x[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;x[254]=x[254]=1;h.string2buf=function(a){var c,d,e,k,h=a.length,l=0;for(e=0;e<h;e++)55296==(64512&(c=a.charCodeAt(e)))&&e+1<h&&56320==(64512&(d=a.charCodeAt(e+1)))&&(c=65536+(c-55296<<10)+(d-
56320),e++),l+=128>c?1:2048>c?2:65536>c?3:4;var p=new g.Buf8(l);for(e=k=0;k<l;e++)55296==(64512&(c=a.charCodeAt(e)))&&e+1<h&&56320==(64512&(d=a.charCodeAt(e+1)))&&(c=65536+(c-55296<<10)+(d-56320),e++),128>c?p[k++]=c:2048>c?(p[k++]=192|c>>>6,p[k++]=128|63&c):65536>c?(p[k++]=224|c>>>12,p[k++]=128|c>>>6&63,p[k++]=128|63&c):(p[k++]=240|c>>>18,p[k++]=128|c>>>12&63,p[k++]=128|c>>>6&63,p[k++]=128|63&c);return p};h.buf2binstring=function(a){return c(a,a.length)};h.binstring2buf=function(a){for(var c=new g.Buf8(a.length),
d=0,e=c.length;d<e;d++)c[d]=a.charCodeAt(d);return c};h.buf2string=function(a,d){var h,e,k,g=d||a.length,l=Array(2*g);for(d=h=0;d<g;)if(128>(e=a[d++]))l[h++]=e;else if(4<(k=x[e]))l[h++]=65533,d+=k-1;else{for(e&=2===k?31:3===k?15:7;1<k&&d<g;)e=e<<6|63&a[d++],k--;1<k?l[h++]=65533:65536>e?l[h++]=e:(e-=65536,l[h++]=55296|e>>10&1023,l[h++]=56320|1023&e)}return c(l,h)};h.utf8border=function(a,c){var d;(c=c||a.length)>a.length&&(c=a.length);for(d=c-1;0<=d&&128==(192&a[d]);)d--;return 0>d?c:0===d?c:d+x[a[d]]>
c?d:c}},{"./common":1}],3:[function(a,d,h){d.exports=function(a,c,d,h){var g=65535&a|0;a=a>>>16&65535|0;for(var p;0!==d;){d-=p=2E3<d?2E3:d;do a=a+(g=g+c[h++]|0)|0;while(--p);g%=65521;a%=65521}return g|a<<16|0}},{}],4:[function(a,d,h){d.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,
Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],5:[function(a,d,h){var c=function(){for(var a,c=[],d=0;256>d;d++){a=d;for(var h=0;8>h;h++)a=1&a?3988292384^a>>>1:a>>>1;c[d]=a}return c}();d.exports=function(a,d,h,n){h=n+h;for(a^=-1;n<h;n++)a=a>>>8^c[255&(a^d[n])];return-1^a}},{}],6:[function(a,d,h){d.exports=function(){this.os=this.xflags=this.time=this.text=0;this.extra=null;this.extra_len=0;this.comment=this.name="";this.hcrc=
0;this.done=!1}},{}],7:[function(a,d,h){d.exports=function(a,c){var d,h,g;var n=a.state;var v=a.next_in;var B=a.input;var e=v+(a.avail_in-5);var k=a.next_out;var z=a.output;c=k-(c-a.avail_out);var l=k+(a.avail_out-257);var u=n.dmax;var C=n.wsize;var w=n.whave;var J=n.wnext;var G=n.window;var m=n.hold;var f=n.bits;var N=n.lencode;var M=n.distcode;var da=(1<<n.lenbits)-1;var X=(1<<n.distbits)-1;a:do{15>f&&(m+=B[v++]<<f,f+=8,m+=B[v++]<<f,f+=8);var Q=N[m&da];b:for(;;){if(m>>>=d=Q>>>24,f-=d,0===(d=Q>>>
16&255))z[k++]=65535&Q;else{if(!(16&d)){if(0==(64&d)){Q=N[(65535&Q)+(m&(1<<d)-1)];continue b}if(32&d){n.mode=12;break a}a.msg="invalid literal/length code";n.mode=30;break a}var F=65535&Q;(d&=15)&&(f<d&&(m+=B[v++]<<f,f+=8),F+=m&(1<<d)-1,m>>>=d,f-=d);15>f&&(m+=B[v++]<<f,f+=8,m+=B[v++]<<f,f+=8);Q=M[m&X];c:for(;;){if(m>>>=d=Q>>>24,f-=d,!(16&(d=Q>>>16&255))){if(0==(64&d)){Q=M[(65535&Q)+(m&(1<<d)-1)];continue c}a.msg="invalid distance code";n.mode=30;break a}if(h=65535&Q,f<(d&=15)&&(m+=B[v++]<<f,(f+=8)<
d&&(m+=B[v++]<<f,f+=8)),(h+=m&(1<<d)-1)>u){a.msg="invalid distance too far back";n.mode=30;break a}if(m>>>=d,f-=d,h>(d=k-c)){if((d=h-d)>w&&n.sane){a.msg="invalid distance too far back";n.mode=30;break a}if(Q=0,g=G,0===J){if(Q+=C-d,d<F){F-=d;do z[k++]=G[Q++];while(--d);Q=k-h;g=z}}else if(J<d){if(Q+=C+J-d,(d-=J)<F){F-=d;do z[k++]=G[Q++];while(--d);if(Q=0,J<F){F-=d=J;do z[k++]=G[Q++];while(--d);Q=k-h;g=z}}}else if(Q+=J-d,d<F){F-=d;do z[k++]=G[Q++];while(--d);Q=k-h;g=z}for(;2<F;)z[k++]=g[Q++],z[k++]=
g[Q++],z[k++]=g[Q++],F-=3;F&&(z[k++]=g[Q++],1<F&&(z[k++]=g[Q++]))}else{Q=k-h;do z[k++]=z[Q++],z[k++]=z[Q++],z[k++]=z[Q++],F-=3;while(2<F);F&&(z[k++]=z[Q++],1<F&&(z[k++]=z[Q++]))}break}}break}}while(v<e&&k<l);v-=F=f>>3;m&=(1<<(f-=F<<3))-1;a.next_in=v;a.next_out=k;a.avail_in=v<e?e-v+5:5-(v-e);a.avail_out=k<l?l-k+257:257-(k-l);n.hold=m;n.bits=f}},{}],8:[function(a,d,h){function c(a){return(a>>>24&255)+(a>>>8&65280)+((65280&a)<<8)+((255&a)<<24)}function g(){this.mode=0;this.last=!1;this.wrap=0;this.havedict=
!1;this.total=this.check=this.dmax=this.flags=0;this.head=null;this.wnext=this.whave=this.wsize=this.wbits=0;this.window=null;this.extra=this.offset=this.length=this.bits=this.hold=0;this.distcode=this.lencode=null;this.have=this.ndist=this.nlen=this.ncode=this.distbits=this.lenbits=0;this.next=null;this.lens=new B.Buf16(320);this.work=new B.Buf16(288);this.distdyn=this.lendyn=null;this.was=this.back=this.sane=0}function p(a){var c;return a&&a.state?(c=a.state,a.total_in=a.total_out=c.total=0,a.msg=
"",c.wrap&&(a.adler=1&c.wrap),c.mode=1,c.last=0,c.havedict=0,c.dmax=32768,c.head=null,c.hold=0,c.bits=0,c.lencode=c.lendyn=new B.Buf32(852),c.distcode=c.distdyn=new B.Buf32(592),c.sane=1,c.back=-1,0):-2}function q(a){var c;return a&&a.state?((c=a.state).wsize=0,c.whave=0,c.wnext=0,p(a)):-2}function x(a,c){var e,f;return a&&a.state?(f=a.state,0>c?(e=0,c=-c):(e=1+(c>>4),48>c&&(c&=15)),c&&(8>c||15<c)?-2:(null!==f.window&&f.wbits!==c&&(f.window=null),f.wrap=e,f.wbits=c,q(a))):-2}function A(a,c){var e,
f;return a?(f=new g,a.state=f,f.window=null,0!==(e=x(a,c))&&(a.state=null),e):-2}function v(a,c,e,f){var d;a=a.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new B.Buf8(a.wsize)),f>=a.wsize?(B.arraySet(a.window,c,e-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((d=a.wsize-a.wnext)>f&&(d=f),B.arraySet(a.window,c,e-f,d,a.wnext),(f-=d)?(B.arraySet(a.window,c,e-f,f,0),a.wnext=f,a.whave=a.wsize):(a.wnext+=d,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=d))),
0}var B=a("../utils/common"),e=a("./adler32"),k=a("./crc32"),z=a("./inffast"),l=a("./inftrees"),u,C,w=!0;h.inflateReset=q;h.inflateReset2=x;h.inflateResetKeep=p;h.inflateInit=function(a){return A(a,15)};h.inflateInit2=A;h.inflate=function(a,d){var m,f,h,g,p,n,q,J,x=0,G=new B.Buf8(4),A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return-2;12===(m=a.state).mode&&(m.mode=13);var t=a.next_out;var S=a.output;var R=a.avail_out;var W=a.next_in;var O=
a.input;var I=a.avail_in;var H=m.hold;var K=m.bits;var ka=I;var ca=R;var ia=0;a:for(;;)switch(m.mode){case 1:if(0===m.wrap){m.mode=13;break}for(;16>K;){if(0===I)break a;I--;H+=O[W++]<<K;K+=8}if(2&m.wrap&&35615===H){m.check=0;G[0]=255&H;G[1]=H>>>8&255;m.check=k(m.check,G,2,0);K=H=0;m.mode=2;break}if(m.flags=0,m.head&&(m.head.done=!1),!(1&m.wrap)||(((255&H)<<8)+(H>>8))%31){a.msg="incorrect header check";m.mode=30;break}if(8!==(15&H)){a.msg="unknown compression method";m.mode=30;break}if(K-=4,q=8+(15&
(H>>>=4)),0===m.wbits)m.wbits=q;else if(q>m.wbits){a.msg="invalid window size";m.mode=30;break}m.dmax=1<<q;a.adler=m.check=1;m.mode=512&H?10:12;K=H=0;break;case 2:for(;16>K;){if(0===I)break a;I--;H+=O[W++]<<K;K+=8}if(m.flags=H,8!==(255&m.flags)){a.msg="unknown compression method";m.mode=30;break}if(57344&m.flags){a.msg="unknown header flags set";m.mode=30;break}m.head&&(m.head.text=H>>8&1);512&m.flags&&(G[0]=255&H,G[1]=H>>>8&255,m.check=k(m.check,G,2,0));K=H=0;m.mode=3;case 3:for(;32>K;){if(0===I)break a;
I--;H+=O[W++]<<K;K+=8}m.head&&(m.head.time=H);512&m.flags&&(G[0]=255&H,G[1]=H>>>8&255,G[2]=H>>>16&255,G[3]=H>>>24&255,m.check=k(m.check,G,4,0));K=H=0;m.mode=4;case 4:for(;16>K;){if(0===I)break a;I--;H+=O[W++]<<K;K+=8}m.head&&(m.head.xflags=255&H,m.head.os=H>>8);512&m.flags&&(G[0]=255&H,G[1]=H>>>8&255,m.check=k(m.check,G,2,0));K=H=0;m.mode=5;case 5:if(1024&m.flags){for(;16>K;){if(0===I)break a;I--;H+=O[W++]<<K;K+=8}m.length=H;m.head&&(m.head.extra_len=H);512&m.flags&&(G[0]=255&H,G[1]=H>>>8&255,m.check=
k(m.check,G,2,0));K=H=0}else m.head&&(m.head.extra=null);m.mode=6;case 6:if(1024&m.flags&&((f=m.length)>I&&(f=I),f&&(m.head&&(q=m.head.extra_len-m.length,m.head.extra||(m.head.extra=Array(m.head.extra_len)),B.arraySet(m.head.extra,O,W,f,q)),512&m.flags&&(m.check=k(m.check,O,f,W)),I-=f,W+=f,m.length-=f),m.length))break a;m.length=0;m.mode=7;case 7:if(2048&m.flags){if(0===I)break a;f=0;do q=O[W+f++],m.head&&q&&65536>m.length&&(m.head.name+=String.fromCharCode(q));while(q&&f<I);if(512&m.flags&&(m.check=
k(m.check,O,f,W)),I-=f,W+=f,q)break a}else m.head&&(m.head.name=null);m.length=0;m.mode=8;case 8:if(4096&m.flags){if(0===I)break a;f=0;do q=O[W+f++],m.head&&q&&65536>m.length&&(m.head.comment+=String.fromCharCode(q));while(q&&f<I);if(512&m.flags&&(m.check=k(m.check,O,f,W)),I-=f,W+=f,q)break a}else m.head&&(m.head.comment=null);m.mode=9;case 9:if(512&m.flags){for(;16>K;){if(0===I)break a;I--;H+=O[W++]<<K;K+=8}if(H!==(65535&m.check)){a.msg="header crc mismatch";m.mode=30;break}K=H=0}m.head&&(m.head.hcrc=
m.flags>>9&1,m.head.done=!0);a.adler=m.check=0;m.mode=12;break;case 10:for(;32>K;){if(0===I)break a;I--;H+=O[W++]<<K;K+=8}a.adler=m.check=c(H);K=H=0;m.mode=11;case 11:if(0===m.havedict)return a.next_out=t,a.avail_out=R,a.next_in=W,a.avail_in=I,m.hold=H,m.bits=K,2;a.adler=m.check=1;m.mode=12;case 12:if(5===d||6===d)break a;case 13:if(m.last){H>>>=7&K;K-=7&K;m.mode=27;break}for(;3>K;){if(0===I)break a;I--;H+=O[W++]<<K;K+=8}switch(m.last=1&H,--K,3&(H>>>=1)){case 0:m.mode=14;break;case 1:var aa=m;if(w){u=
new B.Buf32(512);C=new B.Buf32(32);for(g=0;144>g;)aa.lens[g++]=8;for(;256>g;)aa.lens[g++]=9;for(;280>g;)aa.lens[g++]=7;for(;288>g;)aa.lens[g++]=8;l(1,aa.lens,0,288,u,0,aa.work,{bits:9});for(g=0;32>g;)aa.lens[g++]=5;l(2,aa.lens,0,32,C,0,aa.work,{bits:5});w=!1}aa.lencode=u;aa.lenbits=9;aa.distcode=C;aa.distbits=5;if(m.mode=20,6===d){H>>>=2;K-=2;break a}break;case 2:m.mode=17;break;case 3:a.msg="invalid block type",m.mode=30}H>>>=2;K-=2;break;case 14:H>>>=7&K;for(K-=7&K;32>K;){if(0===I)break a;I--;H+=
O[W++]<<K;K+=8}if((65535&H)!=(H>>>16^65535)){a.msg="invalid stored block lengths";m.mode=30;break}if(m.length=65535&H,H=0,K=0,m.mode=15,6===d)break a;case 15:m.mode=16;case 16:if(f=m.length){if(f>I&&(f=I),f>R&&(f=R),0===f)break a;B.arraySet(S,O,W,f,t);I-=f;W+=f;R-=f;t+=f;m.length-=f;break}m.mode=12;break;case 17:for(;14>K;){if(0===I)break a;I--;H+=O[W++]<<K;K+=8}if(m.nlen=257+(31&H),H>>>=5,K-=5,m.ndist=1+(31&H),H>>>=5,K-=5,m.ncode=4+(15&H),H>>>=4,K-=4,286<m.nlen||30<m.ndist){a.msg="too many length or distance symbols";
m.mode=30;break}m.have=0;m.mode=18;case 18:for(;m.have<m.ncode;){for(;3>K;){if(0===I)break a;I--;H+=O[W++]<<K;K+=8}m.lens[A[m.have++]]=7&H;H>>>=3;K-=3}for(;19>m.have;)m.lens[A[m.have++]]=0;if(m.lencode=m.lendyn,m.lenbits=7,J={bits:m.lenbits},ia=l(0,m.lens,0,19,m.lencode,0,m.work,J),m.lenbits=J.bits,ia){a.msg="invalid code lengths set";m.mode=30;break}m.have=0;m.mode=19;case 19:for(;m.have<m.nlen+m.ndist;){for(;x=m.lencode[H&(1<<m.lenbits)-1],p=65535&x,!((g=x>>>24)<=K);){if(0===I)break a;I--;H+=O[W++]<<
K;K+=8}if(16>p)H>>>=g,K-=g,m.lens[m.have++]=p;else{if(16===p){for(aa=g+2;K<aa;){if(0===I)break a;I--;H+=O[W++]<<K;K+=8}if(H>>>=g,K-=g,0===m.have){a.msg="invalid bit length repeat";m.mode=30;break}q=m.lens[m.have-1];f=3+(3&H);H>>>=2;K-=2}else if(17===p){for(aa=g+3;K<aa;){if(0===I)break a;I--;H+=O[W++]<<K;K+=8}K-=g;q=0;f=3+(7&(H>>>=g));H>>>=3;K-=3}else{for(aa=g+7;K<aa;){if(0===I)break a;I--;H+=O[W++]<<K;K+=8}K-=g;q=0;f=11+(127&(H>>>=g));H>>>=7;K-=7}if(m.have+f>m.nlen+m.ndist){a.msg="invalid bit length repeat";
m.mode=30;break}for(;f--;)m.lens[m.have++]=q}}if(30===m.mode)break;if(0===m.lens[256]){a.msg="invalid code -- missing end-of-block";m.mode=30;break}if(m.lenbits=9,J={bits:m.lenbits},ia=l(1,m.lens,0,m.nlen,m.lencode,0,m.work,J),m.lenbits=J.bits,ia){a.msg="invalid literal/lengths set";m.mode=30;break}if(m.distbits=6,m.distcode=m.distdyn,J={bits:m.distbits},ia=l(2,m.lens,m.nlen,m.ndist,m.distcode,0,m.work,J),m.distbits=J.bits,ia){a.msg="invalid distances set";m.mode=30;break}if(m.mode=20,6===d)break a;
case 20:m.mode=21;case 21:if(6<=I&&258<=R){a.next_out=t;a.avail_out=R;a.next_in=W;a.avail_in=I;m.hold=H;m.bits=K;z(a,ca);t=a.next_out;S=a.output;R=a.avail_out;W=a.next_in;O=a.input;I=a.avail_in;H=m.hold;K=m.bits;12===m.mode&&(m.back=-1);break}for(m.back=0;aa=(x=m.lencode[H&(1<<m.lenbits)-1])>>>16&255,p=65535&x,!((g=x>>>24)<=K);){if(0===I)break a;I--;H+=O[W++]<<K;K+=8}if(aa&&0==(240&aa)){var T=g;var U=aa;for(n=p;aa=(x=m.lencode[n+((H&(1<<T+U)-1)>>T)])>>>16&255,p=65535&x,!(T+(g=x>>>24)<=K);){if(0===
I)break a;I--;H+=O[W++]<<K;K+=8}H>>>=T;K-=T;m.back+=T}if(H>>>=g,K-=g,m.back+=g,m.length=p,0===aa){m.mode=26;break}if(32&aa){m.back=-1;m.mode=12;break}if(64&aa){a.msg="invalid literal/length code";m.mode=30;break}m.extra=15&aa;m.mode=22;case 22:if(m.extra){for(aa=m.extra;K<aa;){if(0===I)break a;I--;H+=O[W++]<<K;K+=8}m.length+=H&(1<<m.extra)-1;H>>>=m.extra;K-=m.extra;m.back+=m.extra}m.was=m.length;m.mode=23;case 23:for(;aa=(x=m.distcode[H&(1<<m.distbits)-1])>>>16&255,p=65535&x,!((g=x>>>24)<=K);){if(0===
I)break a;I--;H+=O[W++]<<K;K+=8}if(0==(240&aa)){T=g;U=aa;for(n=p;aa=(x=m.distcode[n+((H&(1<<T+U)-1)>>T)])>>>16&255,p=65535&x,!(T+(g=x>>>24)<=K);){if(0===I)break a;I--;H+=O[W++]<<K;K+=8}H>>>=T;K-=T;m.back+=T}if(H>>>=g,K-=g,m.back+=g,64&aa){a.msg="invalid distance code";m.mode=30;break}m.offset=p;m.extra=15&aa;m.mode=24;case 24:if(m.extra){for(aa=m.extra;K<aa;){if(0===I)break a;I--;H+=O[W++]<<K;K+=8}m.offset+=H&(1<<m.extra)-1;H>>>=m.extra;K-=m.extra;m.back+=m.extra}if(m.offset>m.dmax){a.msg="invalid distance too far back";
m.mode=30;break}m.mode=25;case 25:if(0===R)break a;if(f=ca-R,m.offset>f){if((f=m.offset-f)>m.whave&&m.sane){a.msg="invalid distance too far back";m.mode=30;break}f>m.wnext?(f-=m.wnext,h=m.wsize-f):h=m.wnext-f;f>m.length&&(f=m.length);g=m.window}else g=S,h=t-m.offset,f=m.length;f>R&&(f=R);R-=f;m.length-=f;do S[t++]=g[h++];while(--f);0===m.length&&(m.mode=21);break;case 26:if(0===R)break a;S[t++]=m.length;R--;m.mode=21;break;case 27:if(m.wrap){for(;32>K;){if(0===I)break a;I--;H|=O[W++]<<K;K+=8}if(ca-=
R,a.total_out+=ca,m.total+=ca,ca&&(a.adler=m.check=m.flags?k(m.check,S,ca,t-ca):e(m.check,S,ca,t-ca)),ca=R,(m.flags?H:c(H))!==m.check){a.msg="incorrect data check";m.mode=30;break}K=H=0}m.mode=28;case 28:if(m.wrap&&m.flags){for(;32>K;){if(0===I)break a;I--;H+=O[W++]<<K;K+=8}if(H!==(4294967295&m.total)){a.msg="incorrect length check";m.mode=30;break}K=H=0}m.mode=29;case 29:ia=1;break a;case 30:ia=-3;break a;case 31:return-4;default:return-2}return a.next_out=t,a.avail_out=R,a.next_in=W,a.avail_in=
I,m.hold=H,m.bits=K,(m.wsize||ca!==a.avail_out&&30>m.mode&&(27>m.mode||4!==d))&&v(a,a.output,a.next_out,ca-a.avail_out)?(m.mode=31,-4):(ka-=a.avail_in,ca-=a.avail_out,a.total_in+=ka,a.total_out+=ca,m.total+=ca,m.wrap&&ca&&(a.adler=m.check=m.flags?k(m.check,S,ca,a.next_out-ca):e(m.check,S,ca,a.next_out-ca)),a.data_type=m.bits+(m.last?64:0)+(12===m.mode?128:0)+(20===m.mode||15===m.mode?256:0),(0===ka&&0===ca||4===d)&&0===ia&&(ia=-5),ia)};h.inflateEnd=function(a){if(!a||!a.state)return-2;var c=a.state;
return c.window&&(c.window=null),a.state=null,0};h.inflateGetHeader=function(a,c){var e;return a&&a.state?0==(2&(e=a.state).wrap)?-2:(e.head=c,c.done=!1,0):-2};h.inflateSetDictionary=function(a,c){var d,f=c.length;return a&&a.state?0!==(d=a.state).wrap&&11!==d.mode?-2:11===d.mode&&e(1,c,f,0)!==d.check?-3:v(a,c,f,f)?(d.mode=31,-4):(d.havedict=1,0):-2};h.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":5,"./inffast":7,"./inftrees":9}],9:[function(a,d,h){var c=
a("../utils/common"),g=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],p=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],q=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],x=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];d.exports=function(a,d,h,e,k,n,l,u){var z,w,J,G,m,f,N=u.bits,M,v,X,B,
A,t=0,Z,P=null,ta=0,S=new c.Buf16(16);var R=new c.Buf16(16);var W=null,O=0;for(M=0;15>=M;M++)S[M]=0;for(v=0;v<e;v++)S[d[h+v]]++;var I=N;for(X=15;1<=X&&0===S[X];X--);if(I>X&&(I=X),0===X)return k[n++]=20971520,k[n++]=20971520,u.bits=1,0;for(N=1;N<X&&0===S[N];N++);I<N&&(I=N);for(M=z=1;15>=M;M++)if(z<<=1,0>(z-=S[M]))return-1;if(0<z&&(0===a||1!==X))return-1;R[1]=0;for(M=1;15>M;M++)R[M+1]=R[M]+S[M];for(v=0;v<e;v++)0!==d[h+v]&&(l[R[d[h+v]]++]=v);if(0===a?(P=W=l,G=19):1===a?(P=g,ta-=257,W=p,O-=257,G=256):
(P=q,W=x,G=-1),Z=0,v=0,M=N,R=n,B=I,A=0,J=-1,e=(t=1<<I)-1,1===a&&852<t||2===a&&592<t)return 1;for(;;){var H=M-A;l[v]<G?(m=0,f=l[v]):l[v]>G?(m=W[O+l[v]],f=P[ta+l[v]]):(m=96,f=0);z=1<<M-A;N=w=1<<B;do k[R+(Z>>A)+(w-=z)]=H<<24|m<<16|f|0;while(0!==w);for(z=1<<M-1;Z&z;)z>>=1;if(0!==z?(Z&=z-1,Z+=z):Z=0,v++,0==--S[M]){if(M===X)break;M=d[h+l[v]]}if(M>I&&(Z&e)!==J){0===A&&(A=I);R+=N;for(z=1<<(B=M-A);B+A<X&&!(0>=(z-=S[B+A]));)B++,z<<=1;if(t+=1<<B,1===a&&852<t||2===a&&592<t)return 1;k[J=Z&e]=I<<24|B<<16|R-n|0}}return 0!==
Z&&(k[R+Z]=M-A<<24|4194304),u.bits=I,0}},{"../utils/common":1}],10:[function(a,d,h){d.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],11:[function(a,d,h){d.exports=function(){this.input=null;this.total_in=this.avail_in=this.next_in=0;this.output=null;this.total_out=this.avail_out=this.next_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}},{}],"/lib/inflate.js":[function(a,
d,h){function c(a){if(!(this instanceof c))return new c(a);var d=this.options=q.assign({chunkSize:16384,windowBits:0,to:""},a||{});d.raw&&0<=d.windowBits&&16>d.windowBits&&(d.windowBits=-d.windowBits,0===d.windowBits&&(d.windowBits=-15));!(0<=d.windowBits&&16>d.windowBits)||a&&a.windowBits||(d.windowBits+=32);15<d.windowBits&&48>d.windowBits&&0==(15&d.windowBits)&&(d.windowBits|=15);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new B;this.strm.avail_out=0;a=p.inflateInit2(this.strm,
d.windowBits);if(a!==A.Z_OK)throw Error(v[a]);if(this.header=new e,p.inflateGetHeader(this.strm,this.header),d.dictionary&&("string"==typeof d.dictionary?d.dictionary=x.string2buf(d.dictionary):"[object ArrayBuffer]"===k.call(d.dictionary)&&(d.dictionary=new Uint8Array(d.dictionary)),d.raw&&(a=p.inflateSetDictionary(this.strm,d.dictionary))!==A.Z_OK))throw Error(v[a]);}function g(a,e){e=new c(e);if(e.push(a,!0),e.err)throw e.msg||v[e.err];return e.result}var p=a("./zlib/inflate"),q=a("./utils/common"),
x=a("./utils/strings"),A=a("./zlib/constants"),v=a("./zlib/messages"),B=a("./zlib/zstream"),e=a("./zlib/gzheader"),k=Object.prototype.toString;c.prototype.push=function(a,c){var e,d,l,h,g=this.strm,m=this.options.chunkSize,f=this.options.dictionary,n=!1;if(this.ended)return!1;c=c===~~c?c:!0===c?A.Z_FINISH:A.Z_NO_FLUSH;"string"==typeof a?g.input=x.binstring2buf(a):"[object ArrayBuffer]"===k.call(a)?g.input=new Uint8Array(a):g.input=a;g.next_in=0;g.avail_in=g.input.length;do{if(0===g.avail_out&&(g.output=
new q.Buf8(m),g.next_out=0,g.avail_out=m),(e=p.inflate(g,A.Z_NO_FLUSH))===A.Z_NEED_DICT&&f&&(e=p.inflateSetDictionary(this.strm,f)),e===A.Z_BUF_ERROR&&!0===n&&(e=A.Z_OK,n=!1),e!==A.Z_STREAM_END&&e!==A.Z_OK)return this.onEnd(e),this.ended=!0,!1;g.next_out&&(0!==g.avail_out&&e!==A.Z_STREAM_END&&(0!==g.avail_in||c!==A.Z_FINISH&&c!==A.Z_SYNC_FLUSH)||("string"===this.options.to?(d=x.utf8border(g.output,g.next_out),l=g.next_out-d,h=x.buf2string(g.output,d),g.next_out=l,g.avail_out=m-l,l&&q.arraySet(g.output,
g.output,d,l,0),this.onData(h)):this.onData(q.shrinkBuf(g.output,g.next_out))));0===g.avail_in&&0===g.avail_out&&(n=!0)}while((0<g.avail_in||0===g.avail_out)&&e!==A.Z_STREAM_END);return e===A.Z_STREAM_END&&(c=A.Z_FINISH),c===A.Z_FINISH?(e=p.inflateEnd(this.strm),this.onEnd(e),this.ended=!0,e===A.Z_OK):c!==A.Z_SYNC_FLUSH||(this.onEnd(A.Z_OK),g.avail_out=0,!0)};c.prototype.onData=function(a){this.chunks.push(a)};c.prototype.onEnd=function(a){a===A.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):
this.result=q.flattenChunks(this.chunks));this.chunks=[];this.err=a;this.msg=this.strm.msg};h.Inflate=c;h.inflate=g;h.inflateRaw=function(a,c){return(c=c||{}).raw=!0,g(a,c)};h.ungzip=g},{"./utils/common":1,"./utils/strings":2,"./zlib/constants":4,"./zlib/gzheader":6,"./zlib/inflate":8,"./zlib/messages":10,"./zlib/zstream":11}]},{},[])("/lib/inflate.js")}();(function(b,a){t.exports=a()})("undefined"!=typeof self?self:this,function(){return function(b){function a(c){if(d[c])return d[c].exports;var h=
d[c]={i:c,l:!1,exports:{}};return b[c].call(h.exports,h,h.exports,a),h.l=!0,h.exports}var d={};return a.m=b,a.c=d,a.d=function(b,c,d){a.o(b,c)||Object.defineProperty(b,c,{enumerable:!0,get:d})},a.r=function(b){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});Object.defineProperty(b,"__esModule",{value:!0})},a.t=function(b,c){if((1&c&&(b=a(b)),8&c)||4&c&&"object"==typeof b&&b&&
b.__esModule)return b;var d=Object.create(null);if(a.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:b}),2&c&&"string"!=typeof b)for(var h in b)a.d(d,h,function(a){return b[a]}.bind(null,h));return d},a.n=function(b){var c=b&&b.__esModule?function(){return b.default}:function(){return b};return a.d(c,"a",c),c},a.o=function(b,a){return Object.prototype.hasOwnProperty.call(b,a)},a.p="",a(a.s=3)}([function(b,a,d){function c(b){0!=b.offset%4&&b.skip(4-b.offset%4)}b.exports.notNetcdf=function(b,
a){if(b)throw new TypeError("Not a valid NetCDF v3.x file: ".concat(a));};b.exports.padding=c;b.exports.readName=function(b){var a=b.readUint32();a=b.readChars(a);return c(b),a}},function(b,a,d){!function(b){function a(b){for(var a,c,e=[],d=0,h=b.length;d<h;)55296<=(a=b.charCodeAt(d++))&&56319>=a&&d<h?56320==(64512&(c=b.charCodeAt(d++)))?e.push(((1023&a)<<10)+(1023&c)+65536):(e.push(a),d--):e.push(a);return e}function c(b){if(55296<=b&&57343>=b)throw Error("Lone surrogate U+"+b.toString(16).toUpperCase()+
" is not a scalar value");}function d(){if(v>=A)throw Error("Invalid byte index");var b=255&x[v];if(v++,128==(192&b))return 63&b;throw Error("Invalid continuation byte");}function h(){var b,a;if(v>A)throw Error("Invalid byte index");if(v==A)return!1;if(b=255&x[v],v++,0==(128&b))return b;if(192==(224&b)){if(128<=(a=(31&b)<<6|d()))return a;throw Error("Invalid continuation byte");}if(224==(240&b)){if(2048<=(a=(15&b)<<12|d()<<6|d()))return c(a),a;throw Error("Invalid continuation byte");}if(240==(248&
b)&&65536<=(a=(7&b)<<18|d()<<12|d()<<6|d())&&1114111>=a)return a;throw Error("Invalid UTF-8 detected");}var x,A,v,B=String.fromCharCode;b.version="3.0.0";b.encode=function(b){b=a(b);for(var e=b.length,d=-1,l="";++d<e;){var h=b[d];if(0==(4294967168&h))h=B(h);else{var g="";h=(0==(4294965248&h)?g=B(h>>6&31|192):0==(4294901760&h)?(c(h),g=B(h>>12&15|224),g+=B(h>>6&63|128)):0==(4292870144&h)&&(g=B(h>>18&7|240),g+=B(h>>12&63|128),g+=B(h>>6&63|128)),g+B(63&h|128))}l+=h}return l};b.decode=function(b){x=a(b);
A=x.length;v=0;var c;for(b=[];!1!==(c=h());)b.push(c);var e;c=b.length;for(var d=-1,g="";++d<c;)65535<(e=b[d])&&(g+=B((e-=65536)>>>10&1023|55296),e=56320|1023&e),g+=B(e);return g}}(a)},function(b,a,d){function c(b,a){if(1!==b){for(var c=Array(b),d=0;d<b;d++)c[d]=a();return c}return a()}var n=d(0).notNetcdf,g={BYTE:1,CHAR:2,SHORT:3,INT:4,FLOAT:5,DOUBLE:6};b.exports=g;b.exports.num2str=function(b){switch(Number(b)){case g.BYTE:return"byte";case g.CHAR:return"char";case g.SHORT:return"short";case g.INT:return"int";
case g.FLOAT:return"float";case g.DOUBLE:return"double";default:return"undefined"}};b.exports.num2bytes=function(b){switch(Number(b)){case g.BYTE:case g.CHAR:return 1;case g.SHORT:return 2;case g.INT:case g.FLOAT:return 4;case g.DOUBLE:return 8;default:return-1}};b.exports.str2num=function(b){switch(String(b)){case "byte":return g.BYTE;case "char":return g.CHAR;case "short":return g.SHORT;case "int":return g.INT;case "float":return g.FLOAT;case "double":return g.DOUBLE;default:return-1}};b.exports.readType=
function(b,a,d){switch(a){case g.BYTE:return b.readBytes(d);case g.CHAR:return b=b.readChars(d),b=0===b.charCodeAt(b.length-1)?b.substring(0,b.length-1):b,b;case g.SHORT:return c(d,b.readInt16.bind(b));case g.INT:return c(d,b.readInt32.bind(b));case g.FLOAT:return c(d,b.readFloat32.bind(b));case g.DOUBLE:return c(d,b.readFloat64.bind(b));default:return void n(!0,"non valid type ".concat(a))}}},function(b,a,d){var c=d(4).IOBuffer,n=d(0),g=d(5),p=d(6),q=d(7);b.exports=function(b){b=new c(b);b.setBigEndian();
n.notNetcdf("CDF"!==b.readChars(3),"should start with CDF");var a=b.readByte();n.notNetcdf(2<a,"unknown version");this.header=p(b,a);this.buffer=b};b.exports.prototype.getAttribute=function(b){var a=this.globalAttributes.find(function(a){return a.name===b});return a?a.value:null};b.exports.prototype.getDataVariableAsString=function(b){return(b=this.getDataVariable(b))?b.join(""):null};b.exports.prototype.toString=function(){return q.call(this)};b.exports.prototype.getDataVariable=function(b){var a;
return a="string"==typeof b?this.header.variables.find(function(a){return a.name===b}):b,n.notNetcdf(void 0===a,"variable not found: ".concat(b)),this.buffer.seek(a.offset),a.record?g.record(this.buffer,a,this.header.recordDimension):g.nonRecord(this.buffer,a)};b.exports.prototype.dataVariableExists=function(b){return void 0!==this.header.variables.find(function(a){return a.name===b})};b.exports.prototype.attributeExists=function(b){return void 0!==this.globalAttributes.find(function(a){return a.name===
b})};$jscomp.global.Object.defineProperties(b.exports.prototype,{version:{configurable:!0,enumerable:!0,get:function(){return 1===this.header.version?"classic format":"64-bit offset format"}},recordDimension:{configurable:!0,enumerable:!0,get:function(){return this.header.recordDimension}},dimensions:{configurable:!0,enumerable:!0,get:function(){return this.header.dimensions}},globalAttributes:{configurable:!0,enumerable:!0,get:function(){return this.header.globalAttributes}},variables:{configurable:!0,
enumerable:!0,get:function(){return this.header.variables}}})},function(b,a,d){d.r(a);d.d(a,"IOBuffer",function(){return n});var c=d(1),n=function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:8192,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=!1;"number"==typeof b?b=new ArrayBuffer(b):(c=!0,this.lastWrittenByte=b.byteLength);a=a.offset?a.offset>>>0:0;var d=b.byteLength-a,h=a;(ArrayBuffer.isView(b)||b instanceof n)&&(b.byteLength!==b.buffer.byteLength&&(h=b.byteOffset+
a),b=b.buffer);this.lastWrittenByte=c?d:0;this.buffer=b;this.byteLength=this.length=d;this.byteOffset=h;this.offset=0;this.littleEndian=!0;this._data=new DataView(this.buffer,h,d);this._mark=0;this._marks=[]};n.prototype.available=function(){return this.offset+(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1)<=this.length};n.prototype.isLittleEndian=function(){return this.littleEndian};n.prototype.setLittleEndian=function(){return this.littleEndian=!0,this};n.prototype.isBigEndian=function(){return!this.littleEndian};
n.prototype.setBigEndian=function(){return this.littleEndian=!1,this};n.prototype.skip=function(){return this.offset+=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,this};n.prototype.seek=function(b){return this.offset=b,this};n.prototype.mark=function(){return this._mark=this.offset,this};n.prototype.reset=function(){return this.offset=this._mark,this};n.prototype.pushMark=function(){return this._marks.push(this.offset),this};n.prototype.popMark=function(){var b=this._marks.pop();if(void 0===
b)throw Error("Mark stack empty");return this.seek(b),this};n.prototype.rewind=function(){return this.offset=0,this};n.prototype.ensureAvailable=function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;if(!this.available(b)){b=2*(this.offset+b);var a=new Uint8Array(b);a.set(new Uint8Array(this.buffer));this.buffer=a.buffer;this.length=this.byteLength=b;this._data=new DataView(this.buffer)}return this};n.prototype.readBoolean=function(){return 0!==this.readUint8()};n.prototype.readInt8=
function(){return this._data.getInt8(this.offset++)};n.prototype.readUint8=function(){return this._data.getUint8(this.offset++)};n.prototype.readByte=function(){return this.readUint8()};n.prototype.readBytes=function(){for(var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,a=new Uint8Array(b),c=0;c<b;c++)a[c]=this.readByte();return a};n.prototype.readInt16=function(){var b=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,b};n.prototype.readUint16=function(){var b=
this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,b};n.prototype.readInt32=function(){var b=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,b};n.prototype.readUint32=function(){var b=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,b};n.prototype.readFloat32=function(){var b=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,b};n.prototype.readFloat64=function(){var b=this._data.getFloat64(this.offset,
this.littleEndian);return this.offset+=8,b};n.prototype.readChar=function(){return String.fromCharCode(this.readInt8())};n.prototype.readChars=function(){for(var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,a="",c=0;c<b;c++)a+=this.readChar();return a};n.prototype.readUtf8=function(){var b=this.readChars(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1);return Object(c.decode)(b)};n.prototype.writeBoolean=function(b){return this.writeUint8(b?255:0),this};n.prototype.writeInt8=
function(b){return this.ensureAvailable(1),this._data.setInt8(this.offset++,b),this._updateLastWrittenByte(),this};n.prototype.writeUint8=function(b){return this.ensureAvailable(1),this._data.setUint8(this.offset++,b),this._updateLastWrittenByte(),this};n.prototype.writeByte=function(b){return this.writeUint8(b)};n.prototype.writeBytes=function(b){this.ensureAvailable(b.length);for(var a=0;a<b.length;a++)this._data.setUint8(this.offset++,b[a]);return this._updateLastWrittenByte(),this};n.prototype.writeInt16=
function(b){return this.ensureAvailable(2),this._data.setInt16(this.offset,b,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this};n.prototype.writeUint16=function(b){return this.ensureAvailable(2),this._data.setUint16(this.offset,b,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this};n.prototype.writeInt32=function(b){return this.ensureAvailable(4),this._data.setInt32(this.offset,b,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this};n.prototype.writeUint32=
function(b){return this.ensureAvailable(4),this._data.setUint32(this.offset,b,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this};n.prototype.writeFloat32=function(b){return this.ensureAvailable(4),this._data.setFloat32(this.offset,b,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this};n.prototype.writeFloat64=function(b){return this.ensureAvailable(8),this._data.setFloat64(this.offset,b,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this};n.prototype.writeChar=
function(b){return this.writeUint8(b.charCodeAt(0))};n.prototype.writeChars=function(b){for(var a=0;a<b.length;a++)this.writeUint8(b.charCodeAt(a));return this};n.prototype.writeUtf8=function(b){b=Object(c.encode)(b);return this.writeChars(b)};n.prototype.toArray=function(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)};n.prototype._updateLastWrittenByte=function(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}},function(b,a,d){var c=d(2);b.exports.nonRecord=
function(b,a){var d=c.str2num(a.type);a=a.size/c.num2bytes(d);for(var h=Array(a),g=0;g<a;g++)h[g]=c.readType(b,d,1);return h};b.exports.record=function(b,a,d){var h=c.str2num(a.type);a=a.size?a.size/c.num2bytes(h):1;var g=d.length,p=Array(g);d=d.recordStep;for(var n=0;n<g;n++){var B=b.offset;p[n]=c.readType(b,h,a);b.seek(B+d)}return p}},function(b,a,d){function c(b){var a=b.readUint32();if(0===a)return n.notNetcdf(0!==b.readUint32(),"wrong empty tag for list of attributes"),[];n.notNetcdf(12!==a,
"wrong tag for list of attributes");a=b.readUint32();for(var c=Array(a),d=0;d<a;d++){var h=n.readName(b),p=b.readUint32();n.notNetcdf(1>p||6<p,"non valid type ".concat(p));var e=b.readUint32();e=g.readType(b,p,e);n.padding(b);c[d]={name:h,type:g.num2str(p),value:e}}return c}var n=d(0),g=d(2);b.exports=function(b,a){var d={recordDimension:{length:b.readUint32()}};d.version=a;var h=function(b){var a,c,d=b.readUint32();if(0===d)return n.notNetcdf(0!==b.readUint32(),"wrong empty tag for list of dimensions"),
[];n.notNetcdf(10!==d,"wrong tag for list of dimensions");d=b.readUint32();for(var h=Array(d),l=0;l<d;l++){var g=n.readName(b),p=b.readUint32();0===p&&(a=l,c=g);h[l]={name:g,size:p}}return{dimensions:h,recordId:a,recordName:c}}(b);d.recordDimension.id=h.recordId;d.recordDimension.name=h.recordName;d.dimensions=h.dimensions;d.globalAttributes=c(b);b=function(b,a,e){var d=b.readUint32(),h=0;if(0===d)return n.notNetcdf(0!==b.readUint32(),"wrong empty tag for list of variables"),[];n.notNetcdf(11!==d,
"wrong tag for list of variables");d=b.readUint32();for(var l=Array(d),u=0;u<d;u++){for(var p=n.readName(b),w=b.readUint32(),q=Array(w),x=0;x<w;x++)q[x]=b.readUint32();w=c(b);x=b.readUint32();n.notNetcdf(1>x&&6<x,"non valid type ".concat(x));var m=b.readUint32(),f=b.readUint32();2===e&&(n.notNetcdf(0<f,"offsets larger than 4GB not supported"),f=b.readUint32());var N=!1;void 0!==a&&q[0]===a&&(h+=m,N=!0);l[u]={name:p,dimensions:q,attributes:w,type:g.num2str(x),size:m,offset:f,record:N}}return{variables:l,
recordStep:h}}(b,h.recordId,a);return d.variables=b.variables,d.recordDimension.recordStep=b.recordStep,d}},function(b,a,d){b.exports=function(){var b=[];b.push("DIMENSIONS");for(var a=$jscomp.makeIterator(this.dimensions),c=a.next();!c.done;c=a.next())c=c.value,b.push("  ".concat(c.name.padEnd(30)," = size: ").concat(c.size));b.push("");b.push("GLOBAL ATTRIBUTES");a=$jscomp.makeIterator(this.globalAttributes);for(c=a.next();!c.done;c=a.next())c=c.value,b.push("  ".concat(c.name.padEnd(30)," = ").concat(c.value));
a=JSON.parse(JSON.stringify(this.variables));b.push("");b.push("VARIABLES:");a=$jscomp.makeIterator(a);for(c=a.next();!c.done;c=a.next()){c=c.value;c.value=this.getDataVariable(c);var d=JSON.stringify(c.value);50<d.length&&(d=d.substring(0,50));isNaN(c.value.length)||(d+=" (length: ".concat(c.value.length,")"));b.push("  ".concat(c.name.padEnd(30)," = ").concat(d))}return b.join("\n")}}])});a=E||{};"object"==typeof t.exports&&(t.exports=a);!0;String.prototype.startsWith||(String.prototype.startsWith=
function(b){return 0===this.lastIndexOf(b,0)});String.prototype.endsWith||(String.prototype.endsWith=function(b){return-1!==this.indexOf(b,this.length-b.length)});D.ajaxTransport("+binary",function(b,a,d){if(window.FormData&&(b.dataType&&"binary"==b.dataType||b.data&&(window.ArrayBuffer&&b.data instanceof ArrayBuffer||window.Blob&&b.data instanceof Blob)))return{send:function(a,c){var d=new XMLHttpRequest,h=b.url,n=b.type,x=b.async||!0,A=b.responseType||"blob",v=b.data||null,B=b.username||null,e=
b.password||null,k=function(){var a={};a[b.dataType]=d.response;c(d.status,d.statusText,a,d.getAllResponseHeaders())},z;for(z in d.addEventListener("load",k),d.addEventListener("error",k),d.addEventListener("abort",k),d.open(n,h,x,B,e),a)d.setRequestHeader(z,a[z]);d.responseType=A;d.send(v)},abort:function(){d.abort()}}});a.createViewer=function(b,c,d){if("string"===D.type(b)&&(b=D("#"+b)),b){c=c||{};d=d||{};try{return new a.GLViewer(b,c,d)}catch(h){throw"error creating viewer: "+h;}}};a.createViewerGrid=
function(b,c,d){if("string"===D.type(b)&&(b=D("#"+b)),b){c=c||{};d=d||{};var h=[],n=document.createElement("canvas");d.rows=c.rows;d.cols=c.cols;d.control_all=null!=c.control_all&&c.control_all;D(b).append(D(n));try{for(var g=0;g<c.rows;g++){for(var p=[],q=0;q<c.cols;q++){d.row=g;d.col=q;d.canvas=n;d.viewers=h;d.control_all=c.control_all;var x=a.createViewer(b,d);p.push(x)}h.unshift(p)}}catch(A){throw"error creating viewer grid: "+A;}return h}};a.viewers={};a.getbin=function(b,a,d,h){var c=new Promise(function(a,
c){d=null==d?"GET":d;D.ajax({url:b,dataType:"binary",method:d,data:h,responseType:"arraybuffer",processData:!1}).done(function(b){a(b)}).fail(function(b,a){console.log(a);c()})});return a?c.then(a):c};a.base64ToArray=function(b){b=window.atob(b);for(var a=b.length,d=new Uint8Array(a),h=0;h<a;h++)d[h]=b.charCodeAt(h);return d};a.download=function(b,c,d,h){var n="",g="",p="",q="",x=null,A=c.addModel();if("mmtf:"===b.substr(0,5))g=d&&d.pdbUri?d.pdbUri:"https://mmtf.rcsb.org/v1.0/full/",b=b.substr(5).toUpperCase(),
q=g+b,d&&void 0===d.noComputeSecondaryStructure&&(d.noComputeSecondaryStructure=!0),x=new Promise(function(b){a.getbin(q).then(function(a){A.addMolData(a,"mmtf",d);c.zoomTo();c.render();b(A)})});else{if("pdb:"===b.substr(0,4)){if(n="mmtf",d&&d.format&&(n=d.format),d&&void 0===d.noComputeSecondaryStructure&&(d.noComputeSecondaryStructure=!0),!(b=b.substr(4).toUpperCase()).match(/^[1-9][A-Za-z0-9]{3}$/))return void alert("Wrong PDB ID");"mmtf"==n?(p=d&&d.mmtfUri?d.mmtfUri:"https://mmtf.rcsb.org/v1.0/full/",
q=p+b.toUpperCase()):(g=d&&d.pdbUri?d.pdbUri:"https://files.rcsb.org/view/",q=g+b+"."+n)}else if("cid:"==b.substr(0,4)){if(n="sdf",!(b=b.substr(4)).match(/^[0-9]+$/))return void alert("Wrong Compound ID");q="https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+b+"/SDF?record_type=3d"}else"url:"==b.substr(0,4)&&(q=b.substr(4),n=q);var v=function(b){A.addMolData(b,n,d);c.zoomTo();c.render()};x=new Promise(function(b){"mmtf"==n?a.getbin(q).then(function(a){v(a);b(A)}):D.get(q,function(a){v(a);b(A)}).fail(function(b){console.log("fetch of "+
q+" failed: "+b.statusText)})})}return h?(x.then(function(b){h(b)}),A):x};a.SurfaceType={VDW:1,MS:2,SAS:3,SES:4};a.mergeGeos=function(b,a){a=a.geometry;void 0!==a&&b.geometryGroups.push(a.geometryGroups[0])};a.multiLineString=function(b){return b.toString().replace(/^[^\/]+\/\*!?/,"").replace(/\*\/[^\/]+$/,"")};a.syncSurface=!1;(0<=window.navigator.userAgent.indexOf("MSIE ")||0<=window.navigator.userAgent.indexOf("Trident/"))&&(a.syncSurface=!0);a.specStringToObject=function(b){if("object"==typeof b||
void 0===b||null==b)return b;var a=function(b){return D.isNumeric(b)?Math.floor(parseFloat(b))==parseInt(b)?parseFloat(b):0<=b.indexOf(".")?parseFloat(b):parseInt(b):"true"===b||"false"!==b&&b},d={};if("all"===(b=b.replace(/%7E/,"~")))return d;b=b.split(";");for(var h=0;h<b.length;h++){var n=b[h].split(":"),g=n[0],p={};if(n=n[1])if(-1!==(n=n.replace(/~/g,"=")).indexOf("=")){n=n.split(",");for(var q=0;q<n.length;q++){var x=n[q].split("=",2);p[x[0]]=a(x[1])}}else p=-1!==n.indexOf(",")?n.split(","):
a(n);d[g]=p}return d};a.getExtent=function(b,a){var c,h,n,g,p,q,x,A,v,B=!a;if(a=c=h=9999,n=g=p=-9999,q=x=A=v=0,0===b.length)return[[0,0,0],[0,0,0],[0,0,0]];for(var e=0;e<b.length;e++){var k=b[e];if(void 0!==k&&isFinite(k.x)&&isFinite(k.y)&&isFinite(k.z)&&(v++,q+=k.x,x+=k.y,A+=k.z,a=a<k.x?a:k.x,c=c<k.y?c:k.y,h=h<k.z?h:k.z,n=n>k.x?n:k.x,g=g>k.y?g:k.y,p=p>k.z?p:k.z,k.symmetries&&B))for(var z=0;z<k.symmetries.length;z++)v++,q+=k.symmetries[z].x,x+=k.symmetries[z].y,A+=k.symmetries[z].z,a=a<k.symmetries[z].x?
a:k.symmetries[z].x,c=c<k.symmetries[z].y?c:k.symmetries[z].y,h=h<k.symmetries[z].z?h:k.symmetries[z].z,n=n>k.symmetries[z].x?n:k.symmetries[z].x,g=g>k.symmetries[z].y?g:k.symmetries[z].y,p=p>k.symmetries[z].z?p:k.symmetries[z].z}return[[a,c,h],[n,g,p],[q/v,x/v,A/v]]};a.getAtomProperty=function(b,a){var c=null;return b.properties&&void 0!==b.properties[a]?c=b.properties[a]:void 0!==b[a]&&(c=b[a]),c};a.getPropertyRange=function(b,c){for(var d=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,n=0,
g=b.length;n<g;n++){var p=a.getAtomProperty(b[n],c);null!=p&&(p<d&&(d=p),p>h&&(h=p))}return isFinite(d)||isFinite(h)?isFinite(d)?isFinite(h)||(h=d):d=h:d=h=0,[d,h]};!(L=[],ja=function(){return a}.apply(Y,L),void 0!==ja&&(t.exports=ja));a.createStereoViewer=function(b){var c=this;if("string"===D.type(b)&&(b=D("#"+b)),b){b=a.createViewerGrid(b,{rows:1,cols:2,control_all:!0});this.glviewer1=b[0][0];this.glviewer2=b[0][1];this.glviewer1.setAutoEyeSeparation(!1);this.glviewer2.setAutoEyeSeparation(!0);
this.glviewer1.linkViewer(this.glviewer2);this.glviewer2.linkViewer(this.glviewer1);b=Object.getOwnPropertyNames(this.glviewer1).filter(function(b){return"function"==typeof c.glviewer1[b]});for(var d=0;d<b.length;d++)this[b[d]]=function(b){return function(){var a=this.glviewer1[b].apply(this.glviewer1,arguments),c=this.glviewer2[b].apply(this.glviewer2,arguments);return[a,c]}}(b[d]);this.setCoordinates=function(b,a,c){for(var d=0;d<b.length;d++)b[d].setCoordinates(a,c)};this.surfacesFinished=function(){return this.glviewer1.surfacesFinished()&&
this.glviewer2.surfacesFinished()};this.isAnimated=function(){return this.glviewer1.isAnimated()||this.glviewer2.isAnimated()};this.render=function(b){this.glviewer1.render();this.glviewer2.render();b&&b(this)};this.getCanvas=function(){return this.glviewer1.getCanvas()}}};var a=a||{};a.Math={clamp:function(b,a,d){return Math.min(Math.max(b,a),d)},degToRad:function(){var b=Math.PI/180;return function(a){return a*b}}()};a.Quaternion=function(b,a,d,h){this.x=b||0;this.y=a||0;this.z=d||0;this.w=void 0!==
h?h:1};a.Quaternion.prototype={constructor:a.Quaternion,set:function(b,a,d,h){return this.x=b,this.y=a,this.z=d,this.w=h,this},copy:function(b){return this.x=b.x,this.y=b.y,this.z=b.z,this.w=b.w,this},conjugate:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},inverse:function(){return this.conjugate().normalize()},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthxyz:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var b=
this.length();return 0===b?(this.x=0,this.y=0,this.z=0,this.w=1):(b=1/b,this.x*=b,this.y*=b,this.z*=b,this.w*=b),this},multiply:function(b){return this.multiplyQuaternions(this,b)},multiplyScalar:function(b){return this.x*=b,this.y*=b,this.z*=b,this.w*=b,this},multiplyQuaternions:function(b,a){var c=b.x,h=b.y,n=b.z;b=b.w;var g=a.x,p=a.y,q=a.z;a=a.w;return this.x=c*a+b*g+h*q-n*p,this.y=h*a+b*p+n*g-c*q,this.z=n*a+b*q+c*p-h*g,this.w=b*a-c*g-h*p-n*q,this},sub:function(b){return this.x-=b.x,this.y-=b.y,
this.z-=b.z,this.w-=b.w,this},clone:function(){return new a.Quaternion(this.x,this.y,this.z,this.w)},setFromEuler:function(b){var a=Math.cos(b.x/2),d=Math.cos(b.y/2),h=Math.cos(b.z/2),n=Math.sin(b.x/2),g=Math.sin(b.y/2);b=Math.sin(b.z/2);return this.x=n*d*h+a*g*b,this.y=a*g*h-n*d*b,this.z=a*d*b+n*g*h,this.w=a*d*h-n*g*b,this}};a.Vector2=function(b,a){this.x=b||0;this.y=a||0};a.Vector2.prototype={constructor:a.Vector2,set:function(b,a){return this.x=b,this.y=a,this},subVectors:function(b,a){return this.x=
b.x-a.x,this.y=b.y-a.y,this},copy:function(b){return this.x=b.x,this.y=b.y,this},clone:function(){return new a.Vector2(this.x,this.y)}};a.Vector3=function(b,a,d){this.x=b||0;this.y=a||0;this.z=d||0};a.Vector3.prototype={constructor:a.Vector3,set:function(b,a,d){return this.x=b,this.y=a,this.z=d,this},copy:function(b){return this.x=b.x,this.y=b.y,this.z=b.z,this},add:function(b){return this.x+=b.x,this.y+=b.y,this.z+=b.z,this},addVectors:function(b,a){return this.x=b.x+a.x,this.y=b.y+a.y,this.z=b.z+
a.z,this},sub:function(b){return this.x-=b.x,this.y-=b.y,this.z-=b.z,this},subVectors:function(b,a){return this.x=b.x-a.x,this.y=b.y-a.y,this.z=b.z-a.z,this},multiplyScalar:function(b){return this.x*=b,this.y*=b,this.z*=b,this},divideScalar:function(b){return 0!==b?(this.x/=b,this.y/=b,this.z/=b):(this.x=0,this.y=0,this.z=0),this},max:function(b){return this.x=Math.max(this.x,b.x),this.y=Math.max(this.y,b.y),this.z=Math.max(this.z,b.z),this},min:function(b){return this.x=Math.min(this.x,b.x),this.y=
Math.min(this.y,b.y),this.z=Math.min(this.z,b.z),this},distanceTo:function(b){return Math.sqrt(this.distanceToSquared(b))},distanceToSquared:function(b){var a=this.x-b.x,d=this.y-b.y;b=this.z-b.z;return a*a+d*d+b*b},applyMatrix3:function(b){var a=this.x,d=this.y,h=this.z;b=b.elements;return this.x=b[0]*a+b[3]*d+b[6]*h,this.y=b[1]*a+b[4]*d+b[7]*h,this.z=b[2]*a+b[5]*d+b[8]*h,this},applyMatrix4:function(b){var a=this.x,d=this.y,h=this.z;b=b.elements;return this.x=b[0]*a+b[4]*d+b[8]*h+b[12],this.y=b[1]*
a+b[5]*d+b[9]*h+b[13],this.z=b[2]*a+b[6]*d+b[10]*h+b[14],this},applyProjection:function(b){var a=this.x,d=this.y,h=this.z;b=b.elements;var n=b[3]*a+b[7]*d+b[11]*h+b[15];return this.x=(b[0]*a+b[4]*d+b[8]*h+b[12])/n,this.y=(b[1]*a+b[5]*d+b[9]*h+b[13])/n,this.z=(b[2]*a+b[6]*d+b[10]*h+b[14])/n,this},applyQuaternion:function(b){var a=this.x,d=this.y,h=this.z,n=b.x,g=b.y,p=b.z;b=b.w;var q=2*(d*p-h*g);var x=2*(h*n-a*p);var A=2*(a*g-d*n);var v,B,e;return v=x*p-A*g,B=A*n-q*p,e=q*g-x*n,this.x=a+b*q+v,this.y=
d+b*x+B,this.z=h+b*A+e,this},negate:function(){return this.multiplyScalar(-1)},dot:function(b){return this.x*b.x+this.y*b.y+this.z*b.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},normalize:function(){return this.divideScalar(this.length())},cross:function(b){var a=this.x,d=this.y,h=this.z;return this.x=d*b.z-h*b.y,this.y=h*b.x-a*b.z,this.z=a*b.y-d*b.x,this},crossVectors:function(b,a){return this.x=
b.y*a.z-b.z*a.y,this.y=b.z*a.x-b.x*a.z,this.z=b.x*a.y-b.y*a.x,this},getPositionFromMatrix:function(b){return this.x=b.elements[12],this.y=b.elements[13],this.z=b.elements[14],this},setEulerFromRotationMatrix:function(b,c){var d=b.elements;b=d[0];var h=d[4],n=d[8],g=d[5],p=d[9],q=d[6];d=d[10];return void 0===c||"XYZ"===c?(this.y=Math.asin(a.Math.clamp(n,-1,1)),.99999>Math.abs(n)?(this.x=Math.atan2(-p,d),this.z=Math.atan2(-h,b)):(this.x=Math.atan2(q,g),this.z=0)):console.error("Error with vector's setEulerFromRotationMatrix: Unknown order: "+
c),this},rotateAboutVector:function(b,a){b.normalize();var c=Math.cos(a),h=Math.sin(a);a=this.clone().multiplyScalar(c);h=b.clone().cross(this).multiplyScalar(h);b=b.clone().multiplyScalar(b.clone().dot(this)).multiplyScalar(1-c);b=a.add(h).add(b);return this.x=b.x,this.y=b.y,this.z=b.z,this},setFromMatrixPosition:function(b){b=b.elements;return this.x=b[12],this.y=b[13],this.z=b[14],this},transformDirection:function(b){var a=this.x,d=this.y,h=this.z;b=b.elements;return this.x=b[0]*a+b[4]*d+b[8]*
h,this.y=b[1]*a+b[5]*d+b[9]*h,this.z=b[2]*a+b[6]*d+b[10]*h,this.normalize()},clone:function(){return new a.Vector3(this.x,this.y,this.z)}};a.Matrix3=function(b,a,d,h,n,g,p,q,x){this.elements=new Float32Array(9);this.set(void 0!==b?b:1,a||0,d||0,h||0,void 0!==n?n:1,g||0,p||0,q||0,void 0!==x?x:1)};a.square=function(b){return b*b};a.conversionMatrix3=function(b,c,d,h,n,g){h=h*Math.PI/180;n=n*Math.PI/180;g=g*Math.PI/180;var p=a.square;h=Math.cos(h);n=Math.cos(n);var q=Math.cos(g);g=Math.sin(g);return new a.Matrix3(b,
c*q,d*n,0,c*g,d*(h-n*q)/g,0,0,d*Math.sqrt(1-p(h)-p(n)-p(q)+2*h*n*q)/g)};a.Matrix3.prototype={constructor:a.Matrix3,set:function(b,a,d,h,n,g,p,q,x){var c=this.elements;return c[0]=b,c[3]=a,c[6]=d,c[1]=h,c[4]=n,c[7]=g,c[2]=p,c[5]=q,c[8]=x,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},copy:function(b){b=b.elements;this.set(b[0],b[3],b[6],b[1],b[4],b[7],b[2],b[5],b[8])},multiplyScalar:function(b){var a=this.elements;return a[0]*=b,a[3]*=b,a[6]*=b,a[1]*=b,a[4]*=b,a[7]*=b,a[2]*=b,a[5]*=
b,a[8]*=b,this},getInverse3:function(b){b=b.elements;var a=this.elements;a[0]=b[4]*b[8]-b[5]*b[7];a[3]=b[6]*b[5]-b[3]*b[8];a[6]=b[3]*b[7]-b[6]*b[4];a[1]=b[7]*b[2]-b[1]*b[8];a[4]=b[0]*b[8]-b[6]*b[2];a[7]=b[1]*b[6]-b[0]*b[7];a[2]=b[1]*b[5]-b[2]*b[4];a[5]=b[2]*b[3]-b[0]*b[5];a[8]=b[0]*b[4]-b[1]*b[3];return this.multiplyScalar(1/(b[0]*a[0]+b[3]*a[1]+b[6]*a[2])),this},getInverse:function(b,a){b=b.elements;var c=this.elements;c[0]=b[10]*b[5]-b[6]*b[9];c[1]=-b[10]*b[1]+b[2]*b[9];c[2]=b[6]*b[1]-b[2]*b[5];
c[3]=-b[10]*b[4]+b[6]*b[8];c[4]=b[10]*b[0]-b[2]*b[8];c[5]=-b[6]*b[0]+b[2]*b[4];c[6]=b[9]*b[4]-b[5]*b[8];c[7]=-b[9]*b[0]+b[1]*b[8];c[8]=b[5]*b[0]-b[1]*b[4];b=b[0]*c[0]+b[1]*c[3]+b[2]*c[6];if(0===b){if(a)throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");return console.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0"),this.identity(),this}return this.multiplyScalar(1/b),this},getDeterminant:function(){var b=this.elements;return b[0]*b[4]*b[8]+b[1]*b[5]*b[6]+
b[2]*b[3]*b[7]-b[2]*b[4]*b[6]-b[1]*b[3]*b[8]-b[0]*b[5]*b[7]},getMatrix4:function(){var b=this.elements;return new a.Matrix4(b[0],b[3],b[6],0,b[1],b[4],b[7],0,b[2],b[5],b[8],0)},transpose:function(){var b,a=this.elements;return b=a[1],a[1]=a[3],a[3]=b,b=a[2],a[2]=a[6],a[6]=b,b=a[5],a[5]=a[7],a[7]=b,this},clone:function(){var b=this.elements;return new a.Matrix3(b[0],b[3],b[6],b[1],b[4],b[7],b[2],b[5],b[8])}};a.Matrix4=function(b,a,d,h,n,g,p,q,x,A,v,B,e,k,z,l){if(void 0===a&&void 0!==b)this.elements=
new Float32Array(b);else{var c=this.elements=new Float32Array(16);c[0]=void 0!==b?b:1;c[4]=a||0;c[8]=d||0;c[12]=h||0;c[1]=n||0;c[5]=void 0!==g?g:1;c[9]=p||0;c[13]=q||0;c[2]=x||0;c[6]=A||0;c[10]=void 0!==v?v:1;c[14]=B||0;c[3]=e||0;c[7]=k||0;c[11]=z||0;c[15]=void 0!==l?l:1}};a.Matrix4.prototype={constructor:a.Matrix4,set:function(b,a,d,h,n,g,p,q,x,A,v,B,e,k,z,l){var c=this.elements;return c[0]=b,c[4]=a,c[8]=d,c[12]=h,c[1]=n,c[5]=g,c[9]=p,c[13]=q,c[2]=x,c[6]=A,c[10]=v,c[14]=B,c[3]=e,c[7]=k,c[11]=z,c[15]=
l,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(b){b=b.elements;return this.set(b[0],b[4],b[8],b[12],b[1],b[5],b[9],b[13],b[2],b[6],b[10],b[14],b[3],b[7],b[11],b[15]),this},matrix3FromTopLeft:function(){var b=this.elements;return new a.Matrix3(b[0],b[4],b[8],b[1],b[5],b[9],b[2],b[6],b[10])},setRotationFromEuler:function(b,a){var c=this.elements,h=b.x,n=b.y,g=b.z;b=Math.cos(h);h=Math.sin(h);var p=Math.cos(n);n=Math.sin(n);var q=Math.cos(g);g=Math.sin(g);
if(void 0===a||"XYZ"===a){a=b*q;var x=b*g,A=h*q,v=h*g;c[0]=p*q;c[4]=-p*g;c[8]=n;c[1]=x+A*n;c[5]=a-v*n;c[9]=-h*p;c[2]=v-a*n;c[6]=A+x*n;c[10]=b*p}else console.error("Error with matrix4 setRotationFromEuler. Order: "+a);return this},setRotationFromQuaternion:function(b){var a=this.elements,d=b.x,h=b.y,n=b.z,g=b.w,p=d+d,q=h+h,x=n+n;b=d*p;var A=d*q;d*=x;var v=h*q;h*=x;n*=x;p*=g;q*=g;g*=x;return a[0]=1-(v+n),a[4]=A-g,a[8]=d+q,a[1]=A+g,a[5]=1-(b+n),a[9]=h-p,a[2]=d-q,a[6]=h+p,a[10]=1-(b+v),this},lookAt:function(){var b=
new a.Vector3,c=new a.Vector3,d=new a.Vector3;return function(a,n,g){var h=this.elements;return d.subVectors(a,n).normalize(),0===d.length()&&(d.z=1),b.crossVectors(g,d).normalize(),0===b.length()&&(d.x+=1E-4,b.crossVectors(g,d).normalize()),c.crossVectors(d,b),h[0]=b.x,h[4]=c.x,h[8]=d.x,h[1]=b.y,h[5]=c.y,h[9]=d.y,h[2]=b.z,h[6]=c.z,h[10]=d.z,this}}(),multiplyMatrices:function(b,a){var c=b.elements,h=a.elements;a=this.elements;b=c[0];var n=c[4],g=c[8],p=c[12],q=c[1],x=c[5],A=c[9],v=c[13],B=c[2],e=
c[6],k=c[10],z=c[14],l=c[3],u=c[7],C=c[11];c=c[15];var w=h[0],J=h[4],G=h[8],m=h[12],f=h[1],N=h[5],M=h[9],da=h[13],X=h[2],Q=h[6],F=h[10],t=h[14],Z=h[3],P=h[7],ta=h[11];h=h[15];return a[0]=b*w+n*f+g*X+p*Z,a[4]=b*J+n*N+g*Q+p*P,a[8]=b*G+n*M+g*F+p*ta,a[12]=b*m+n*da+g*t+p*h,a[1]=q*w+x*f+A*X+v*Z,a[5]=q*J+x*N+A*Q+v*P,a[9]=q*G+x*M+A*F+v*ta,a[13]=q*m+x*da+A*t+v*h,a[2]=B*w+e*f+k*X+z*Z,a[6]=B*J+e*N+k*Q+z*P,a[10]=B*G+e*M+k*F+z*ta,a[14]=B*m+e*da+k*t+z*h,a[3]=l*w+u*f+C*X+c*Z,a[7]=l*J+u*N+C*Q+c*P,a[11]=l*G+u*M+C*
F+c*ta,a[15]=l*m+u*da+C*t+c*h,this},multiplyScalar:function(b){var a=this.elements;return a[0]*=b,a[4]*=b,a[8]*=b,a[12]*=b,a[1]*=b,a[5]*=b,a[9]*=b,a[13]*=b,a[2]*=b,a[6]*=b,a[10]*=b,a[14]*=b,a[3]*=b,a[7]*=b,a[11]*=b,a[15]*=b,this},makeTranslation:function(b,a,d){return this.set(1,0,0,b,0,1,0,a,0,0,1,d,0,0,0,1),this},snap:function(b){b=Math.pow(10,4);for(var a=this.elements,d=0;16>d;d++){var h=Math.round(a[d]);h==Math.round(a[d]*b)/b&&(a[d]=h)}return this},transpose:function(){var b,a=this.elements;
return b=a[1],a[1]=a[4],a[4]=b,b=a[2],a[2]=a[8],a[8]=b,b=a[6],a[6]=a[9],a[9]=b,b=a[3],a[3]=a[12],a[12]=b,b=a[7],a[7]=a[13],a[13]=b,b=a[11],a[11]=a[14],a[14]=b,this},getPosition:function(){var b=new a.Vector3;return function(){console.warn("DEPRECATED: Matrix4's .getPosition() has been removed. Use Vector3.getPositionFromMatrix( matrix ) instead.");var a=this.elements;return b.set(a[12],a[13],a[14])}}(),setPosition:function(b){var a=this.elements;return a[12]=b.x,a[13]=b.y,a[14]=b.z,this},translate:function(b){var a=
this.elements;return a[12]+=b.x,a[13]+=b.y,a[14]+=b.z,this},getInverse:function(b,a){var c=this.elements;b=b.elements;var h=b[0],n=b[4],g=b[8],p=b[12],q=b[1],x=b[5],A=b[9],v=b[13],B=b[2],e=b[6],k=b[10],z=b[14],l=b[3],u=b[7],C=b[11],w=b[15];c[0]=A*z*u-v*k*u+v*e*C-x*z*C-A*e*w+x*k*w;c[4]=p*k*u-g*z*u-p*e*C+n*z*C+g*e*w-n*k*w;c[8]=g*v*u-p*A*u+p*x*C-n*v*C-g*x*w+n*A*w;c[12]=p*A*e-g*v*e-p*x*k+n*v*k+g*x*z-n*A*z;c[1]=v*k*l-A*z*l-v*B*C+q*z*C+A*B*w-q*k*w;c[5]=g*z*l-p*k*l+p*B*C-h*z*C-g*B*w+h*k*w;c[9]=p*A*l-g*v*
l-p*q*C+h*v*C+g*q*w-h*A*w;c[13]=g*v*B-p*A*B+p*q*k-h*v*k-g*q*z+h*A*z;c[2]=x*z*l-v*e*l+v*B*u-q*z*u-x*B*w+q*e*w;c[6]=p*e*l-n*z*l-p*B*u+h*z*u+n*B*w-h*e*w;c[10]=n*v*l-p*x*l+p*q*u-h*v*u-n*q*w+h*x*w;c[14]=p*x*B-n*v*B-p*q*e+h*v*e+n*q*z-h*x*z;c[3]=A*e*l-x*k*l-A*B*u+q*k*u+x*B*C-q*e*C;c[7]=n*k*l-g*e*l+g*B*u-h*k*u-n*B*C+h*e*C;c[11]=g*x*l-n*A*l-g*q*u+h*A*u+n*q*C-h*x*C;c[15]=n*A*B-g*x*B+g*q*e-h*A*e-n*q*k+h*x*k;c=b[0]*c[0]+b[1]*c[4]+b[2]*c[8]+b[3]*c[12];if(0===c){if(a)throw Error("Matrix4.getInverse(): can't invert matrix, determinant is 0");
return console.warn("Matrix4.getInverse(): can't invert matrix, determinant is 0"),this.identity(),this}return this.multiplyScalar(1/c),this},isReflected:function(){var b=this.elements,a=b[0],d=b[4],h=b[8],n=b[1],g=b[5],p=b[9],q=b[2],x=b[6];b=b[10];return 0>a*g*b+n*x*h+q*d*p-q*g*h-n*d*b-a*x*p},compose:function(){var b=new a.Matrix4,c=new a.Matrix4;return function(a,h,n){var d=this.elements;return b.identity(),b.setRotationFromQuaternion(h),c.makeScale(n.x,n.y,n.z),this.multiplyMatrices(b,c),d[12]=
a.x,d[13]=a.y,d[14]=a.z,this}}(),getScale:function(){var b=new a.Vector3,c=new a.Vector3,d=new a.Vector3;return function(h){var n=this.elements;return h=h instanceof a.Vector3?h:new a.Vector3,b.set(n[0],n[1],n[2]),c.set(n[4],n[5],n[6]),d.set(n[8],n[9],n[10]),h.x=b.length(),h.y=c.length(),h.z=d.length(),h}}(),decompose:function(){var b=new a.Vector3,c=new a.Vector3,d=new a.Vector3,h=new a.Matrix4;return function(n,g,p){var q=this.elements;return b.set(q[0],q[1],q[2]),c.set(q[4],q[5],q[6]),d.set(q[8],
q[9],q[10]),n=n instanceof a.Vector3?n:new a.Vector3,g=g instanceof a.Quaternion?g:new a.Quaternion,(p=p instanceof a.Vector3?p:new a.Vector3).x=b.length(),p.y=c.length(),p.z=d.length(),n.x=q[12],n.y=q[13],n.z=q[14],h.copy(this),h.elements[0]/=p.x,h.elements[1]/=p.x,h.elements[2]/=p.x,h.elements[4]/=p.y,h.elements[5]/=p.y,h.elements[6]/=p.y,h.elements[8]/=p.z,h.elements[9]/=p.z,h.elements[10]/=p.z,g.setFromRotationMatrix(h),[n,g,p]}}(),scale:function(b){var a=this.elements,d=b.x,h=b.y;b=b.z;return a[0]*=
d,a[4]*=h,a[8]*=b,a[1]*=d,a[5]*=h,a[9]*=b,a[2]*=d,a[6]*=h,a[10]*=b,a[3]*=d,a[7]*=h,a[11]*=b,this},getMaxScaleOnAxis:function(){var b=this.elements;return Math.sqrt(Math.max(b[0]*b[0]+b[1]*b[1]+b[2]*b[2],Math.max(b[4]*b[4]+b[5]*b[5]+b[6]*b[6],b[8]*b[8]+b[9]*b[9]+b[10]*b[10])))},makeFrustum:function(b,a,d,h,n,g){var c=this.elements;return c[0]=2*n/(a-b),c[4]=0,c[8]=(a+b)/(a-b),c[12]=0,c[1]=0,c[5]=2*n/(h-d),c[9]=(h+d)/(h-d),c[13]=0,c[2]=0,c[6]=0,c[10]=-(g+n)/(g-n),c[14]=-2*g*n/(g-n),c[3]=0,c[7]=0,c[11]=
-1,c[15]=0,this},makePerspective:function(b,c,d,h){b=d*Math.tan(a.Math.degToRad(.5*b));var n=-b;return this.makeFrustum(n*c,b*c,n,b,d,h)},makeOrthographic:function(b,a,d,h,n,g){var c=this.elements,q=1/(a-b),x=1/(d-h),A=1/(g-n);return c[0]=2*q,c[4]=0,c[8]=0,c[12]=-((a+b)*q),c[1]=0,c[5]=2*x,c[9]=0,c[13]=-((d+h)*x),c[2]=0,c[6]=0,c[10]=-2*A,c[14]=-((g+n)*A),c[3]=0,c[7]=0,c[11]=0,c[15]=1,this},isEqual:function(b){b=b.elements;var a=this.elements;return a[0]==b[0]&&a[4]==b[4]&&a[8]==b[8]&&a[12]==b[12]&&
a[1]==b[1]&&a[5]==b[5]&&a[9]==b[9]&&a[13]==b[13]&&a[2]==b[2]&&a[6]==b[6]&&a[10]==b[10]&&a[14]==b[14]&&a[3]==b[3]&&a[7]==b[7]&&a[11]==b[11]&&a[15]==b[15]},clone:function(){var b=this.elements;return new a.Matrix4(b[0],b[4],b[8],b[12],b[1],b[5],b[9],b[13],b[2],b[6],b[10],b[14],b[3],b[7],b[11],b[15])},isIdentity:function(){var b=this.elements;return 1==b[0]&&0==b[4]&&0==b[8]&&0==b[12]&&0==b[1]&&1==b[5]&&0==b[9]&&0==b[13]&&0==b[2]&&0==b[6]&&1==b[10]&&0==b[14]&&0==b[3]&&0==b[7]&&0==b[11]&&1==b[15]},isNearlyIdentity:function(b){return this.clone().snap(b).isIdentity()}};
a.Vector3.prototype.unproject=function(){var b=new a.Matrix4;return function(a){return b.multiplyMatrices(a.matrixWorld,b.getInverse(a.projectionMatrix)),this.applyMatrix4(b)}}();a.Ray=function(b,c){this.origin=void 0!==b?b:new a.Vector3;this.direction=void 0!==c?c:new a.Vector3};a.Ray.prototype={constructor:a.Ray,set:function(b,a){return this.origin.copy(b),this.direction.copy(a),this},copy:function(b){return this.origin.copy(b.origin),this.direction.copy(b.direction),this},at:function(b,c){return(c||
new a.Vector3).copy(this.direction).multiplyScalar(b).add(this.origin)},recast:function(){var b=new a.Vector3;return function(a){return this.origin.copy(this.at(a,b)),this}}(),closestPointToPoint:function(b,c){c=c||new a.Vector3;c.subVectors(b,this.origin);b=c.dot(this.direction);return c.copy(this.direction).multiplyScalar(b).add(this.origin)},distanceToPoint:function(){var b=new a.Vector3;return function(a){var c=b.subVectors(a,this.origin).dot(this.direction);return b.copy(this.direction).multiplyScalar(c).add(this.origin),
b.distanceTo(a)}}(),isIntersectionCylinder:function(){},isIntersectionSphere:function(b){return this.distanceToPoint(b.center)<=b.radius},isIntersectionPlane:function(b){return 0!==b.normal.dot(this.direction)||0===b.distanceToPoint(this.origin)},distanceToPlane:function(b){var a=b.normal.dot(this.direction);return 0===a?0===b.distanceToPoint(this.origin)?0:void 0:-(this.origin.dot(b.normal)+b.constant)/a},intersectPlane:function(b,a){b=this.distanceToPlane(b);if(void 0!==b)return this.at(b,a)},applyMatrix4:function(b){return this.direction.add(this.origin).applyMatrix4(b),
this.origin.applyMatrix4(b),this.direction.sub(this.origin),this},equals:function(b){return b.origin.equals(this.origin)&&b.direction.equals(this.direction)},clone:function(){return(new a.Ray).copy(this)}};a.Sphere=function(b,c){this.center=void 0!==b?b:new a.Vector3;this.radius=void 0!==c?c:0};a.Sphere.prototype={constructor:a.Sphere,set:function(b,a){return this.center.copy(b),this.radius=a,this},copy:function(b){return this.center.copy(b.center),this.radius=b.radius,this},applyMatrix4:function(b){return this.center.applyMatrix4(b),
this.radius*=b.getMaxScaleOnAxis(),this},translate:function(b){return this.center.add(b),this},equals:function(b){return b.center.equals(this.center)&&b.radius===this.radius},clone:function(){return(new a.Sphere).copy(this)}};a.Cylinder=function(b,c,d){this.c1=void 0!==b?b:new a.Vector3;this.c2=void 0!==c?c:new a.Vector3;this.direction=(new a.Vector3).subVectors(this.c2,this.c1).normalize();this.radius=void 0!==d?d:0};a.Cylinder.prototype={constructor:a.Cylinder,copy:function(b){return this.c1.copy(b.c1),
this.c2.copy(b.c2),this.direction.copy(b.direction),this.radius=b.radius,this},lengthSq:function(){var b=new a.Vector3;return function(){return b.subVectors(this.c2,this.c1).lengthSq()}}(),applyMatrix4:function(b){return this.direction.add(this.c1).applyMatrix4(b),this.c1.applyMatrix4(b),this.c2.applyMatrix4(b),this.direction.sub(this.c1).normalize(),this.radius*=b.getMaxScaleOnAxis(),this}};a.Triangle=function(b,c,d){this.a=void 0!==b?b:new a.Vector3;this.b=void 0!==c?c:new a.Vector3;this.c=void 0!==
d?d:new a.Vector3};a.Triangle.prototype={constructor:a.Triangle,copy:function(b){return this.a.copy(b.a),this.b.copy(b.b),this.c.copy(b.c),this},applyMatrix4:function(b){return this.a.applyMatrix4(b),this.b.applyMatrix4(b),this.c.applyMatrix4(b),this},getNormal:function(){var b=new a.Vector3;return function(){var a=this.a.clone();return a.sub(this.b),b.subVectors(this.c,this.b),a.cross(b),a.normalize(),a}}()};a.EventDispatcher=function(){var b={};this.addEventListener=function(a,d){void 0===b[a]&&
(b[a]=[]);-1===b[a].indexOf(d)&&b[a].push(d)};this.removeEventListener=function(a,d){d=b[a].indexOf(d);-1!==d&&b[a].splice(d,1)};this.dispatchEvent=function(a){var c=b[a.type];if(void 0!==c){a.target=this;for(var h=0,n=c.length;h<n;h++)c[h].call(this,a)}}};a.Color=function(b){return 1<arguments.length?(this.r=arguments[0]||0,this.g=arguments[1]||0,this.b=arguments[2]||0,this):this.set(b)};a.Color.prototype={constructor:a.Color,r:0,g:0,b:0,set:function(b){if(b instanceof a.Color)return b.clone();"number"==
typeof b?this.setHex(b):"object"==typeof b&&"r"in b&&"g"in b&&"b"in b&&(this.r=b.r,this.g=b.g,this.b=b.b)},setHex:function(b){return b=Math.floor(b),this.r=(b>>16&255)/255,this.g=(b>>8&255)/255,this.b=(255&b)/255,this},getHex:function(){return Math.round(255*this.r)<<16|Math.round(255*this.g)<<8|Math.round(255*this.b)},clone:function(){return new a.Color(this.r,this.g,this.b)},copy:function(b){return this.r=b.r,this.g=b.g,this.b=b.b,this},scaled:function(){var b={};return b.r=Math.round(255*this.r),
b.g=Math.round(255*this.g),b.b=Math.round(255*this.b),b.a=1,b}};a.Object3D=function(){this.id=a.Object3DIDCount++;this.name="";this.parent=void 0;this.children=[];this.position=new a.Vector3;this.rotation=new a.Vector3;this.matrix=new a.Matrix4;this.matrixWorld=new a.Matrix4;this.quaternion=new a.Quaternion;this.eulerOrder="XYZ";this.up=new a.Vector3(0,1,0);this.scale=new a.Vector3(1,1,1);this.rotationAutoUpdate=this.matrixWorldNeedsUpdate=this.matrixAutoUpdate=!0;this.useQuaternion=!1;this.visible=
!0};a.Object3D.prototype={constructor:a.Object3D,lookAt:function(b){this.matrix.lookAt(b,this.position,this.up);this.rotationAutoUpdate&&(!0===this.useQuaternion?this.quaternion.copy(this.matrix.decompose()[1]):this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder))},add:function(b){if(b!==this){b.parent=this;this.children.push(b);for(var c=this;void 0!==c.parent;)c=c.parent;void 0!==c&&c instanceof a.Scene&&c.__addObject(b)}else console.error("Can't add $3Dmol.Object3D to itself")},
remove:function(b){var c=this.children.indexOf(b);if(-1!==c){b.parent=void 0;this.children.splice(c,1);for(c=this;void 0!==c.parent;)c=c.parent;void 0!==c&&c instanceof a.Scene&&c.__removeObject(b)}},vrml:function(b){b||(b=" ");var a=2*Math.atan2(this.quaternion.lengthxyz(),this.quaternion.w),d=0,h=0,n=0;0!=a&&(n=Math.sin(a/2),d=this.quaternion.x/n,h=this.quaternion.y/n,n=this.quaternion.z/n);a=b+"Transform {\n"+b+" center "+this.position.x+" "+this.position.y+" "+this.position.z+"\n"+b+" rotation "+
d+" "+h+" "+n+" "+a+"\n"+b+" children [\n";this.geometry&&(a+=this.geometry.vrml(b,this.material));for(d=0;d<this.children.length;d++)a+=this.children[d].vrml(b+" ")+",\n";return a+=" ]\n",a+"}"},updateMatrix:function(){this.matrix.setPosition(this.position);!1===this.useQuaternion?this.matrix.setRotationFromEuler(this.rotation,this.eulerOrder):this.matrix.setRotationFromQuaternion(this.quaternion);1===this.scale.x&&1===this.scale.y&&1===this.scale.z||this.matrix.scale(this.scale);this.matrixWorldNeedsUpdate=
!0},updateMatrixWorld:function(b){!0===this.matrixAutoUpdate&&this.updateMatrix();!0!==this.matrixWorldNeedsUpdate&&!0!==b||(void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix));this.matrixWorldNeedsUpdate=!1;for(b=0;b<this.children.length;b++)this.children[b].updateMatrixWorld(!0)},clone:function(b){void 0===b&&(b=new a.Object3D);b.name=this.name;b.up.copy(this.up);b.position.copy(this.position);b.rotation.copy(this.rotation);
b.eulerOrder=this.eulerOrder;b.scale.copy(this.scale);b.rotationAutoUpdate=this.rotationAutoUpdate;b.matrix.copy(this.matrix);b.matrixWorld.copy(this.matrixWorld);b.quaternion.copy(this.quaternion);b.matrixAutoUpdate=this.matrixAutoUpdate;b.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate;b.useQuaternion=this.useQuaternion;b.visible=this.visible;for(var c=0;c<this.children.length;c++)b.add(this.children[c].clone());return b},setVisible:function(b){this.visible=b;for(var a=0;a<this.children.length;a++)this.children[a].setVisible(b)}};
a.Object3DIDCount=0;a.Geometry=function(){var b=function(b){this.id=b||0;this.lineArray=this.radiusArray=this.faceArray=this.normalArray=this.colorArray=this.vertexArray=null;this.lineidx=this.faceidx=this.vertices=0};b.prototype.setColors=function(b){var c=this.vertexArray,d=this.colorArray;if(c.length==d.length)for(var h=0;h<c.length;h+=3){var q=b(c[h],c[h+1],c[h+2]);q instanceof a.Color||(q=a.CC.color(q));d[h]=q.r;d[h+1]=q.g;d[h+2]=q.b}else console.log("Cannot re-color geometry group due to mismatched lengths.")};
b.prototype.getNumVertices=function(){return this.vertices};b.prototype.getVertices=function(){return this.vertexArray};b.prototype.getCentroid=function(){for(var b,c,d,p=new a.Vector3,q=0;q<this.vertices;++q)b=3*q,c=this.vertexArray[b],d=this.vertexArray[b+1],b=this.vertexArray[b+2],p.x+=c,p.y+=d,p.z+=b;return p.divideScalar(this.vertices),p};b.prototype.setNormals=function(){var b=this.faceArray,c=this.vertexArray,d=this.normalArray;if(this.vertices&&this.faceidx)for(var p,q,x,A,v,B,e=0;e<b.length/
3;++e)p=3*b[3*e],q=3*b[3*e+1],x=3*b[3*e+2],A=new a.Vector3(c[p],c[p+1],c[p+2]),v=new a.Vector3(c[q],c[q+1],c[q+2]),B=new a.Vector3(c[x],c[x+1],c[x+2]),A.subVectors(A,v),B.subVectors(B,v),B.cross(A),(A=B).normalize(),d[p]+=A.x,d[q]+=A.x,d[x]+=A.x,d[p+1]+=A.y,d[q+1]+=A.y,d[x+1]+=A.y,d[p+2]+=A.z,d[q+2]+=A.z,d[x+2]+=A.z};b.prototype.setLineIndices=function(){if(this.faceidx&&(!this.lineArray||this.lineArray.length!=2*this.faceidx||this.lineidx!=2*this.faceidx)){var b=this.faceArray,a=this.lineArray=new Uint16Array(2*
this.faceidx);this.lineidx=2*this.faceidx;for(var c=0;c<this.faceidx/3;++c){var d=3*c,q=2*d,x=b[d],A=b[d+1];d=b[d+2];a[q]=x;a[q+1]=A;a[q+2]=x;a[q+3]=d;a[q+4]=A;a[q+5]=d}}};b.prototype.vrml=function(b,c){var d=b+"Shape {\n"+b+" appearance Appearance {\n"+b+"  material Material {\n"+b+"   diffuseColor "+c.color.r+" "+c.color.g+" "+c.color.b+"\n";c.transparent&&(d+=b+"   transparency "+(1-c.opacity)+"\n");d=d+(b+"  }\n")+(b+" }\n");var h=b;if(b+=" ",c instanceof a.LineBasicMaterial){d+=b+"geometry IndexedLineSet {\n"+
b+" colorPerVertex TRUE\n"+b+" coord Coordinate {\n"+b+"  point [\n";for(c=0;c<this.vertices;++c){var q=3*c;d+=b+"   "+this.vertexArray[q]+" "+this.vertexArray[q+1]+" "+this.vertexArray[q+2]+",\n"}if(d+=b+"  ]\n",d+=b+" }\n",this.colorArray){d+=b+" color Color {\n"+b+"  color [\n";for(c=0;c<this.vertices;++c)q=3*c,d+=b+"   "+this.colorArray[q]+" "+this.colorArray[q+1]+" "+this.colorArray[q+2]+",\n";d=d+(b+"  ]\n")+(b+" }\n")}d+=b+" coordIndex [\n";for(c=0;c<this.vertices;c+=2)d+=b+"  "+c+", "+(c+
1)+", -1,\n"}else{d=d+(b+"geometry IndexedFaceSet {\n"+b+" colorPerVertex TRUE\n"+b+" normalPerVertex TRUE\n"+b+" solid FALSE\n")+(b+" coord Coordinate {\n"+b+"  point [\n");for(c=0;c<this.vertices;++c)q=3*c,d+=b+"   "+this.vertexArray[q]+" "+this.vertexArray[q+1]+" "+this.vertexArray[q+2]+",\n";d=d+(b+"  ]\n")+(b+" }\n")+(b+" normal Normal {\n"+b+"  vector [\n");for(c=0;c<this.vertices;++c)q=3*c,d+=b+"   "+this.normalArray[q]+" "+this.normalArray[q+1]+" "+this.normalArray[q+2]+",\n";if(d+=b+"  ]\n",
d+=b+" }\n",this.colorArray){d+=b+" color Color {\n"+b+"  color [\n";for(c=0;c<this.vertices;++c)q=3*c,d+=b+"   "+this.colorArray[q]+" "+this.colorArray[q+1]+" "+this.colorArray[q+2]+",\n";d=d+(b+"  ]\n")+(b+" }\n")}d+=b+" coordIndex [\n";for(c=0;c<this.faceidx;c+=3)d+=b+"  "+this.faceArray[c]+", "+this.faceArray[c+1]+", "+this.faceArray[c+2]+", -1,\n"}return d+(b+" ]\n")+(b+"}\n")+(h+"}")};b.prototype.truncateArrayBuffers=function(b,a){b=!0===b;var c=this.colorArray,d=this.normalArray,h=this.faceArray,
n=this.lineArray,A=this.radiusArray;this.vertexArray=this.vertexArray.subarray(0,3*this.vertices);this.colorArray=c.subarray(0,3*this.vertices);b?(this.normalArray=d.subarray(0,3*this.vertices),this.faceArray=h.subarray(0,this.faceidx),0<this.lineidx?this.lineArray=n.subarray(0,this.lineidx):this.lineArray=new Uint16Array(0)):(this.normalArray=new Float32Array(0),this.faceArray=new Uint16Array(0),this.lineArray=new Uint16Array(0));A&&(this.radiusArray=A.subarray(0,this.vertices));a&&(this.normalArray&&
(this.normalArray=new Float32Array(this.normalArray)),this.faceArray&&(this.faceArray=new Uint16Array(this.faceArray)),this.lineArray&&(this.lineArray=new Uint16Array(this.lineArray)),this.vertexArray&&(this.vertexArray=new Float32Array(this.vertexArray)),this.colorArray&&(this.colorArray=new Float32Array(this.colorArray)),this.radiusArray&&(this.radiusArray=new Float32Array(this.radiusArray)));this.__inittedArrays=!0};var c=function(a){var c=new b(a.geometryGroups.length);return a.geometryGroups.push(c),
a.groups=a.geometryGroups.length,c.vertexArray=new Float32Array(196605),c.colorArray=new Float32Array(196605),a.mesh&&(c.normalArray=new Float32Array(196605),c.faceArray=new Uint16Array(393210),c.lineArray=new Uint16Array(393210)),a.radii&&(c.radiusArray=new Float32Array(65535)),c.useOffset=a.offset,c},d=function(b,c,d){a.EventDispatcher.call(this);this.id=a.GeometryIDCount++;this.name="";this.hasTangents=!1;this.dynamic=!0;this.mesh=!0===b;this.radii=c||!1;this.offset=d||!1;this.buffersNeedUpdate=
this.colorsNeedUpdate=this.normalsNeedUpdate=this.elementsNeedUpdate=this.verticesNeedUpdate=!1;this.geometryGroups=[];this.groups=0};return d.prototype={constructor:d,updateGeoGroup:function(b){var a=0<this.groups?this.geometryGroups[this.groups-1]:null;return(!a||a.vertices+(b||0)>a.vertexArray.length/3)&&(a=c(this)),a},vrml:function(b,a){for(var c="",d=this.geometryGroups.length,h=0;h<d;h++)c+=this.geometryGroups[h].vrml(b,a)+",\n";return c},addGeoGroup:function(){return c(this)},setUpNormals:function(b){b=
b||!1;for(var a=0;a<this.groups;a++)this.geometryGroups[a].setNormals(b)},setColors:function(b){for(var a=this.geometryGroups.length,c=0;c<a;c++)this.geometryGroups[c].setColors(b)},setUpWireframe:function(){for(var b=0;b<this.groups;b++)this.geometryGroups[b].setLineIndices()},initTypedArrays:function(){for(var b=0;b<this.groups;b++){var a=this.geometryGroups[b];!0!==a.__inittedArrays&&a.truncateArrayBuffers(this.mesh,!1)}},dispose:function(){this.dispatchEvent({type:"dispose"})}},d}();Object.defineProperty(a.Geometry.prototype,
"vertices",{get:function(){for(var b=0,a=0;a<this.groups;a++)b+=this.geometryGroups[a].vertices;return b}});a.GeometryIDCount=0;a.Raycaster=function(){var b,c=function(b,c,d,h){this.ray=new a.Ray(b,c);0<this.ray.direction.lengthSq()&&this.ray.direction.normalize();this.near=h||0;this.far=d||1/0},d=new a.Sphere,h=new a.Cylinder,n=new a.Triangle,g=new a.Vector3,p=new a.Vector3,q=new a.Vector3,x=new a.Vector3,A=new a.Vector3,v=function(b,a){return b.distance-a.distance};return c.prototype.precision=
1E-4,c.prototype.linePrecision=.2,c.prototype.set=function(b,a){this.ray.set(b,a)},c.prototype.setFromCamera=(b=new a.Matrix4,function(a,c){c.ortho?(this.ray.origin.set(a.x,a.y,(c.near+c.far)/(c.near-c.far)).unproject(c),this.ray.direction.set(0,0,-1).transformDirection(c.matrixWorld)):(this.ray.origin.setFromMatrixPosition(c.matrixWorld),this.ray.direction.set(a.x,a.y,a.z),c.projectionMatrixInverse.getInverse(c.projectionMatrix),b.multiplyMatrices(c.matrixWorld,c.projectionMatrixInverse),this.ray.direction.applyProjection(b),
this.ray.direction.sub(this.ray.origin).normalize())}),c.prototype.intersectObjects=function(b,c){for(var e=[],z=0,l=c.length;z<l;z++)a:{var u=void 0,C=void 0,w=void 0,J=void 0,G=void 0,m=void 0,f=void 0,N=void 0,M,da=void 0;var X=void 0;var B=b,F=c[z],t=e;if(A.getPositionFromMatrix(B.matrixWorld),void 0!==F.intersectionShape){var Z=F.intersectionShape;var P=this.linePrecision;var ta=(P*=B.matrixWorld.getMaxScaleOnAxis())*P;if(!(void 0!==F.boundingSphere&&F.boundingSphere instanceof a.Sphere)||(d.copy(F.boundingSphere),
d.applyMatrix4(B.matrixWorld),this.ray.isIntersectionSphere(d))){var S=0;for(P=Z.triangle.length;S<P;S++)if(Z.triangle[S]instanceof a.Triangle&&!(n.copy(Z.triangle[S]),n.applyMatrix4(B.matrixWorld),X=n.getNormal(),0<=(da=this.ray.direction.dot(X)))&&!(g.subVectors(n.a,this.ray.origin),0>(f=X.dot(g)/da))){p.copy(this.ray.direction).multiplyScalar(f).add(this.ray.origin);p.sub(n.a);q.copy(n.b).sub(n.a);x.copy(n.c).sub(n.a);var R=q.dot(x),W=q.lengthSq(),O=x.lengthSq();0>(w=(W*p.dot(x)-R*p.dot(q))/(W*
O-R*R))||1<w||0>(J=(p.dot(q)-w*R)/W)||1<J||1<J+w||t.push({clickable:F,distance:f})}S=0;for(P=Z.cylinder.length;S<P;S++)Z.cylinder[S]instanceof a.Cylinder&&(h.copy(Z.cylinder[S]),h.applyMatrix4(B.matrixWorld),g.subVectors(h.c1,this.ray.origin),M=g.dot(h.direction),N=g.dot(this.ray.direction),0!==(m=1-(da=Math.min(Math.max(this.ray.direction.dot(h.direction),-1),1))*da))&&(C=(da*N-M)/m,u=(N-da*M)/m,p.copy(h.direction).multiplyScalar(C).add(h.c1),q.copy(this.ray.direction).multiplyScalar(u).add(this.ray.origin),
X=x.subVectors(p,q).lengthSq(),R=h.radius*h.radius,X<=R&&!(0>(J=da*(w=f=0>=(G=(da*M-N)*(da*M-N)-m*(g.lengthSq()-M*M-R))?Math.sqrt(X):(N-da*M-Math.sqrt(G))/m)-M)||J*J>h.lengthSq()||0>w)&&t.push({clickable:F,distance:f}));S=0;for(P=Z.line.length;S<P;S+=2)p.copy(Z.line[S]),p.applyMatrix4(B.matrixWorld),q.copy(Z.line[S+1]),q.applyMatrix4(B.matrixWorld),x.subVectors(q,p),G=x.lengthSq(),x.normalize(),g.subVectors(p,this.ray.origin),w=g.dot(x),N=g.dot(this.ray.direction),0!==(m=1-(da=Math.min(Math.max(this.ray.direction.dot(x),
-1),1))*da)&&(C=(da*N-w)/m,u=(N-da*w)/m,p.add(x.multiplyScalar(C)),q.copy(this.ray.direction).multiplyScalar(u).add(this.ray.origin),x.subVectors(q,p).lengthSq()<ta&&C*C<G&&t.push({clickable:F,distance:u}));S=0;for(P=Z.sphere.length;S<P;S++)if(Z.sphere[S]instanceof a.Sphere&&(d.copy(Z.sphere[S]),d.applyMatrix4(B.matrixWorld),this.ray.isIntersectionSphere(d))){p.subVectors(d.center,this.ray.origin);u=p.dot(this.ray.direction);G=u*u-(p.lengthSq()-d.radius*d.radius);0>u||(f=0>=G?u:u-Math.sqrt(G),t.push({clickable:F,
distance:f}));break a}}}}return e.sort(v),e},c}();a.Projector=function(){var b=new a.Matrix4;this.projectVector=function(a,d){return d.matrixWorldInverse.getInverse(d.matrixWorld),b.multiplyMatrices(d.projectionMatrix,d.matrixWorldInverse),a.applyProjection(b)};this.unprojectVector=function(a,d){return d.projectionMatrixInverse.getInverse(d.projectionMatrix),b.multiplyMatrices(d.matrixWorld,d.projectionMatrixInverse),a.applyProjection(b)}};a.Camera=function(b,c,d,h,n){a.Object3D.call(this);this.fov=
void 0!==b?b:50;this.aspect=void 0!==c?c:1;this.near=void 0!==d?d:.1;this.far=void 0!==h?h:2E3;this.projectionMatrix=new a.Matrix4;this.projectionMatrixInverse=new a.Matrix4;this.matrixWorldInverse=new a.Matrix4;this.right=this.position.z*Math.tan(Math.PI/180*b);this.left=-this.right;this.top=this.right/this.aspect;this.bottom=-this.top;this.ortho=!!n;this.updateProjectionMatrix()};a.Camera.prototype=Object.create(a.Object3D.prototype);a.Camera.prototype.lookAt=function(b){this.matrix.lookAt(this.position,
b,this.up);this.rotationAutoUpdate&&(!1===this.useQuaternion?this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder):this.quaternion.copy(this.matrix.decompose()[1]))};a.Camera.prototype.updateProjectionMatrix=function(){this.ortho?this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far):this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far);this.projectionMatrixInverse.getInverse(this.projectionMatrix)};a.SpritePlugin=
function(){function b(b,a){return b.z!==a.z?a.z-b.z:a.id-b.id}var c,d,h,n,g,p,q,x,A,v;this.init=function(b){c=b.context;d=b;h=b.getPrecision();n=new Float32Array(16);g=new Uint16Array(6);b=0;n[b++]=-1;n[b++]=-1;n[b++]=0;n[b++]=0;n[b++]=1;n[b++]=-1;n[b++]=1;n[b++]=0;n[b++]=1;n[b++]=1;n[b++]=1;n[b++]=1;n[b++]=-1;n[b++]=1;n[b++]=0;n[b++]=1;b=0;g[b++]=0;g[b++]=1;g[b++]=2;g[b++]=0;g[b++]=2;g[b++]=3;p=c.createBuffer();q=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,p);c.bufferData(c.ARRAY_BUFFER,n,c.STATIC_DRAW);
c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,q);c.bufferData(c.ELEMENT_ARRAY_BUFFER,g,c.STATIC_DRAW);b=a.ShaderLib.sprite;var e=h,k=c.createProgram(),z=c.createShader(c.FRAGMENT_SHADER),l=c.createShader(c.VERTEX_SHADER);e="precision "+e+" float;\n";(c.shaderSource(z,e+b.fragmentShader),c.shaderSource(l,e+b.vertexShader),c.compileShader(z),c.compileShader(l),c.getShaderParameter(z,c.COMPILE_STATUS)&&c.getShaderParameter(l,c.COMPILE_STATUS))?(c.attachShader(k,z),c.attachShader(k,l),c.linkProgram(k),c.getProgramParameter(k,
c.LINK_STATUS)||console.error("Could not initialize shader"),b=k):b=(console.error(c.getShaderInfoLog(z)),console.error("could not initialize shader"),null);x=b;A={};v={};A.position=c.getAttribLocation(x,"position");A.uv=c.getAttribLocation(x,"uv");v.uvOffset=c.getUniformLocation(x,"uvOffset");v.uvScale=c.getUniformLocation(x,"uvScale");v.rotation=c.getUniformLocation(x,"rotation");v.scale=c.getUniformLocation(x,"scale");v.alignment=c.getUniformLocation(x,"alignment");v.color=c.getUniformLocation(x,
"color");v.map=c.getUniformLocation(x,"map");v.opacity=c.getUniformLocation(x,"opacity");v.useScreenCoordinates=c.getUniformLocation(x,"useScreenCoordinates");v.screenPosition=c.getUniformLocation(x,"screenPosition");v.modelViewMatrix=c.getUniformLocation(x,"modelViewMatrix");v.projectionMatrix=c.getUniformLocation(x,"projectionMatrix");v.fogType=c.getUniformLocation(x,"fogType");v.fogDensity=c.getUniformLocation(x,"fogDensity");v.fogNear=c.getUniformLocation(x,"fogNear");v.fogFar=c.getUniformLocation(x,
"fogFar");v.fogColor=c.getUniformLocation(x,"fogColor");v.alphaTest=c.getUniformLocation(x,"alphaTest")};this.render=function(a,e,k,h){var l=a.__webglSprites,g=l.length;if(g){var z=A,w=v,n=.5*k,G=.5*h;c.useProgram(x);c.enableVertexAttribArray(z.position);c.enableVertexAttribArray(z.uv);c.disable(c.CULL_FACE);c.enable(c.BLEND);c.bindBuffer(c.ARRAY_BUFFER,p);c.vertexAttribPointer(z.position,2,c.FLOAT,!1,16,0);c.vertexAttribPointer(z.uv,2,c.FLOAT,!1,16,8);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,q);c.uniformMatrix4fv(w.projectionMatrix,
!1,e.projectionMatrix.elements);c.activeTexture(c.TEXTURE0);c.uniform1i(w.map,0);var m=z=0,f=a.fog;f?(c.uniform3f(w.fogColor,f.color.r,f.color.g,f.color.b),c.uniform1f(w.fogNear,f.near),c.uniform1f(w.fogFar,f.far),c.uniform1i(w.fogType,1),z=1,m=1):(c.uniform1i(w.fogType,0),z=0,m=0);var N,M,da=[];for(f=0;f<g;f++){var X=(N=l[f]).material;N.visible&&0!==X.opacity&&(X.useScreenCoordinates?N.z=-N.position.z:(N._modelViewMatrix.multiplyMatrices(e.matrixWorldInverse,N.matrixWorld),N.z=-N._modelViewMatrix.elements[14]))}l.sort(b);
for(f=0;f<g;f++)if(X=(N=l[f]).material,N.visible&&0!==X.opacity&&X.map&&X.map.image&&X.map.image.width)c.uniform1f(w.alphaTest,X.alphaTest),e=X.map.image.height,da[0]=X.map.image.width*d.devicePixelRatio/k,da[1]=e*d.devicePixelRatio/h,!0===X.useScreenCoordinates?(c.uniform1i(w.useScreenCoordinates,1),c.uniform3f(w.screenPosition,(N.position.x*d.devicePixelRatio-n)/n,(G-N.position.y*d.devicePixelRatio)/G,Math.max(0,Math.min(1,N.position.z)))):(c.uniform1i(w.useScreenCoordinates,0),c.uniformMatrix4fv(w.modelViewMatrix,
!1,N._modelViewMatrix.elements)),z!==(M=a.fog&&X.fog?m:0)&&(c.uniform1i(w.fogType,M),z=M),e=1/(X.scaleByViewport?h:1),da[0]=da[0]*e*N.scale.x,da[1]=da[1]*e*N.scale.y,c.uniform2f(w.uvScale,X.uvScale.x,X.uvScale.y),c.uniform2f(w.uvOffset,X.uvOffset.x,X.uvOffset.y),c.uniform2f(w.alignment,X.alignment.x,X.alignment.y),c.uniform1f(w.opacity,X.opacity),c.uniform3f(w.color,X.color.r,X.color.g,X.color.b),c.uniform1f(w.rotation,N.rotation),c.uniform2fv(w.scale,da),d.setDepthTest(X.depthTest),d.setDepthWrite(X.depthWrite),
d.setTexture(X.map,0),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0);c.enable(c.CULL_FACE)}}};a.Light=function(b,c){a.Object3D.call(this);this.color=new a.Color(b);this.position=new a.Vector3(0,1,0);this.target=new a.Object3D;this.intensity=void 0!==c?c:1;this.onlyShadow=this.castShadow=!1};a.Light.prototype=Object.create(a.Object3D.prototype);a.Material=function(){a.EventDispatcher.call(this);this.id=a.MaterialIdCount++;this.name="";this.side=a.FrontSide;this.opacity=1;this.transparent=!1;this.stencilTest=
this.depthWrite=this.depthTest=!0;this.polygonOffset=!1;this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.needsUpdate=this.visible=!0};a.Material.prototype.setValues=function(b){if(void 0!==b)for(var c in b){var d=b[c];if(void 0!==d){if(c in this){var h=this[c];h instanceof a.Color&&d instanceof a.Color?h.copy(d):h instanceof a.Color?h.set(d):h instanceof a.Vector3&&d instanceof a.Vector3?h.copy(d):this[c]=d}}else console.warn("$3Dmol.Material: '"+c+"' parameter is undefined.")}};
a.Material.prototype.clone=function(b){return void 0===b&&(b=new a.Material),b.name=this.name,b.side=this.side,b.opacity=this.opacity,b.transparent=this.transparent,b.depthTest=this.depthTest,b.depthWrite=this.depthWrite,b.stencilTest=this.stencilTest,b.polygonOffset=this.polygonOffset,b.polygonOffsetFactor=this.polygonOffsetFactor,b.polygonOffsetUnits=this.polygonOffsetUnits,b.alphaTest=this.alphaTest,b.overdraw=this.overdraw,b.visible=this.visible,b};a.Material.prototype.dispose=function(){this.dispatchEvent({type:"dispose"})};
a.MaterialIdCount=0;a.LineBasicMaterial=function(b){a.Material.call(this);this.color=new a.Color(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.vertexColors=!1;this.fog=!0;this.shaderID="basic";this.setValues(b)};a.LineBasicMaterial.prototype=Object.create(a.Material.prototype);a.LineBasicMaterial.prototype.clone=function(){var b=new a.LineBasicMaterial;return a.Material.prototype.clone.call(this,b),b.color.copy(this.color),b};a.MeshLambertMaterial=function(b){a.Material.call(this);
this.color=new a.Color(16777215);this.ambient=new a.Color(1048575);this.emissive=new a.Color(0);this.wrapAround=!1;this.wrapRGB=new a.Vector3(1,1,1);this.envMap=this.specularMap=this.lightMap=this.map=null;this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.shading=a.SmoothShading;this.shaderID="lambert";this.vertexColors=a.NoColors;this.skinning=!1;this.setValues(b)};a.MeshLambertMaterial.prototype=
Object.create(a.Material.prototype);a.MeshLambertMaterial.prototype.clone=function(b){return void 0===b&&(b=new a.MeshLambertMaterial),a.Material.prototype.clone.call(this,b),b.color.copy(this.color),b.ambient.copy(this.ambient),b.emissive.copy(this.emissive),b.wrapAround=this.wrapAround,b.wrapRGB.copy(this.wrapRGB),b.map=this.map,b.lightMap=this.lightMap,b.specularMap=this.specularMap,b.envMap=this.envMap,b.combine=this.combine,b.reflectivity=this.reflectivity,b.refractionRatio=this.refractionRatio,
b.fog=this.fog,b.shading=this.shading,b.shaderID=this.shaderID,b.vertexColors=this.vertexColors,b.skinning=this.skinning,b.morphTargets=this.morphTargets,b.morphNormals=this.morphNormals,b};a.MeshDoubleLambertMaterial=function(b){a.MeshLambertMaterial.call(this,b);this.shaderID="lambertdouble";this.side=a.DoubleSide};a.MeshDoubleLambertMaterial.prototype=Object.create(a.MeshLambertMaterial.prototype);a.MeshDoubleLambertMaterial.prototype.clone=function(){var b=new a.MeshDoubleLambertMaterial;return a.MeshLambertMaterial.prototype.clone.call(this,
b),b};a.MeshOutlineMaterial=function(b){a.Material.call(this);b=b||{};this.fog=!0;this.shaderID="outline";this.wireframe=!1;this.outlineColor=b.color||new a.Color(0,0,0);this.outlineWidth=b.width||.1;this.outlinePushback=b.pushback||1};a.MeshOutlineMaterial.prototype=Object.create(a.Material.prototype);a.MeshOutlineMaterial.prototype.clone=function(b){return void 0===b&&(b=new a.MeshOutlineMaterial),a.Material.prototype.clone.call(this,b),b.fog=this.fog,b.shaderID=this.shaderID,b.wireframe=this.wireframe,
b};a.ImposterMaterial=function(b){a.Material.call(this);this.color=new a.Color(16777215);this.ambient=new a.Color(1048575);this.emissive=new a.Color(0);this.imposter=!0;this.wrapAround=!1;this.wrapRGB=new a.Vector3(1,1,1);this.envMap=this.specularMap=this.lightMap=this.map=null;this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.shading=a.SmoothShading;this.shaderID=null;this.vertexColors=a.NoColors;
this.skinning=!1;this.setValues(b)};a.ImposterMaterial.prototype=Object.create(a.Material.prototype);a.ImposterMaterial.prototype.clone=function(){var b=new a.ImposterMaterial;return a.Material.prototype.clone.call(this,b),b.color.copy(this.color),b.ambient.copy(this.ambient),b.emissive.copy(this.emissive),b.wrapAround=this.wrapAround,b.wrapRGB.copy(this.wrapRGB),b.map=this.map,b.lightMap=this.lightMap,b.specularMap=this.specularMap,b.envMap=this.envMap,b.combine=this.combine,b.reflectivity=this.reflectivity,
b.refractionRatio=this.refractionRatio,b.fog=this.fog,b.shading=this.shading,b.shaderID=this.shaderID,b.vertexColors=this.vertexColors,b.skinning=this.skinning,b.morphTargets=this.morphTargets,b.morphNormals=this.morphNormals,b};a.SphereImposterMaterial=function(b){a.ImposterMaterial.call(this);this.shaderID="sphereimposter";this.setValues(b)};a.SphereImposterMaterial.prototype=Object.create(a.ImposterMaterial.prototype);a.SphereImposterMaterial.prototype.clone=function(){var b=new a.SphereImposterMaterial;
return a.ImposterMaterial.prototype.clone.call(this,b),b};a.SphereImposterOutlineMaterial=function(b){a.ImposterMaterial.call(this);b=b||{};this.shaderID="sphereimposteroutline";this.outlineColor=b.color||new a.Color(0,0,0);this.outlineWidth=b.width||.1;this.outlinePushback=b.pushback||1;this.setValues(b)};a.SphereImposterOutlineMaterial.prototype=Object.create(a.ImposterMaterial.prototype);a.SphereImposterOutlineMaterial.prototype.clone=function(){var b=new a.SphereImposterOutlineMaterial;return a.ImposterMaterial.prototype.clone.call(this,
b),b.outlineColor=this.outlineColor,b.outlineWidth=this.outlineWidth,b.outlinePushback=this.outlinePushback,b};a.StickImposterMaterial=function(b){a.ImposterMaterial.call(this);this.shaderID="stickimposter";this.setValues(b)};a.StickImposterMaterial.prototype=Object.create(a.ImposterMaterial.prototype);a.StickImposterMaterial.prototype.clone=function(){var b=new a.StickImposterMaterial;return a.ImposterMaterial.prototype.clone.call(this,b),b};a.StickImposterOutlineMaterial=function(b){a.ImposterMaterial.call(this);
b=b||{};this.shaderID="stickimposteroutline";this.outlineColor=b.color||new a.Color(0,0,0);this.outlineWidth=b.width||.1;this.outlinePushback=b.pushback||1;this.setValues(b)};a.StickImposterOutlineMaterial.prototype=Object.create(a.ImposterMaterial.prototype);a.StickImposterOutlineMaterial.prototype.clone=function(){var b=new a.StickImposterOutlineMaterial;return a.ImposterMaterial.prototype.clone.call(this,b),b.outlineColor=this.outlineColor,b.outlineWidth=this.outlineWidth,b.outlinePushback=this.outlinePushback,
b};a.InstancedMaterial=function(b){a.Material.call(this);this.color=new a.Color(16777215);this.ambient=new a.Color(1048575);this.emissive=new a.Color(0);this.wrapAround=!1;this.wrapRGB=new a.Vector3(1,1,1);this.envMap=this.specularMap=this.lightMap=this.map=null;this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.shading=a.SmoothShading;this.shaderID="instanced";this.vertexColors=a.NoColors;
this.skinning=!1;this.sphere=null;this.setValues(b)};a.InstancedMaterial.prototype=Object.create(a.Material.prototype);a.InstancedMaterial.prototype.clone=function(){var b=new a.InstancedMaterial;return a.Material.prototype.clone.call(this,b),b.color.copy(this.color),b.ambient.copy(this.ambient),b.emissive.copy(this.emissive),b.wrapAround=this.wrapAround,b.wrapRGB.copy(this.wrapRGB),b.map=this.map,b.lightMap=this.lightMap,b.specularMap=this.specularMap,b.envMap=this.envMap,b.combine=this.combine,
b.reflectivity=this.reflectivity,b.refractionRatio=this.refractionRatio,b.fog=this.fog,b.shading=this.shading,b.shaderID=this.shaderID,b.vertexColors=this.vertexColors,b.skinning=this.skinning,b.morphTargets=this.morphTargets,b.morphNormals=this.morphNormals,b.sphere=this.sphere,b};a.VolumetricMaterial=function(b){a.Material.call(this);this.transparent=!1;this.volumetric=!0;this.color=new a.Color(16777215);this.map=this.transferfn=null;this.volumetric=!0;this.extent=[];this.maxdepth=100;this.unit=
0;this.texmatrix=null;this.transfermin=-1;this.transfermax=1;this.subsamples=5;this.shaderID="volumetric";this.side=a.FrontSide;this.setValues(b)};a.VolumetricMaterial.prototype=Object.create(a.Material.prototype);a.VolumetricMaterial.prototype.clone=function(){var b=Object.assign(new a.VolumetricMaterial,this);return a.Material.prototype.clone.call(this,b),b};a.SpriteMaterial=function(b){a.Material.call(this);this.color=new a.Color(16777215);this.map=new a.Texture;this.useScreenCoordinates=!0;this.depthTest=
!this.useScreenCoordinates;this.sizeAttenuation=!this.useScreenCoordinates;this.scaleByViewPort=!this.sizeAttenuation;this.alignment=a.SpriteAlignment.center.clone();this.fog=!1;this.uvOffset=new a.Vector2(0,0);this.uvScale=new a.Vector2(1,1);this.setValues(b);void 0===(b=b||{}).depthTest&&(this.depthTest=!this.useScreenCoordinates);void 0===b.sizeAttenuation&&(this.sizeAttenuation=!this.useScreenCoordinates);void 0===b.scaleByViewPort&&(this.scaleByViewPort=!this.sizeAttenuation)};a.SpriteMaterial.prototype=
Object.create(a.Material.prototype);a.SpriteMaterial.prototype.clone=function(){var b=new a.SpriteMaterial;return a.Material.prototype.clone.call(this,b),b.color.copy(this.color),b.map=this.map,b.useScreenCoordinates=this.useScreenCoordinates,b.sizeAttenuation=this.sizeAttenuation,b.scaleByViewport=this.scaleByViewPort,b.alignment.copy(this.alignment),b.uvOffset.copy(this.uvOffset),b};a.SpriteAlignment={};a.SpriteAlignment.topLeft=new a.Vector2(1,-1);a.SpriteAlignment.topCenter=new a.Vector2(0,-1);
a.SpriteAlignment.topRight=new a.Vector2(-1,-1);a.SpriteAlignment.centerLeft=new a.Vector2(1,0);a.SpriteAlignment.center=new a.Vector2(0,0);a.SpriteAlignment.centerRight=new a.Vector2(-1,0);a.SpriteAlignment.bottomLeft=new a.Vector2(1,1);a.SpriteAlignment.bottomCenter=new a.Vector2(0,1);a.SpriteAlignment.bottomRight=new a.Vector2(-1,1);a.Texture=function(b,c){a.EventDispatcher.call(this);this.id=a.TextureIdCount++;this.name="";this.image=b;this.mapping=new a.UVMapping;this.wrapT=this.wrapS=a.ClampToEdgeWrapping;
this.anisotropy=1;c?(this.format=a.RFormat,this.type=a.FloatType,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.magFilter=a.NearestFilter,this.minFilter=a.NearestFilter):(this.format=a.RGBAFormat,this.type=a.UnsignedByteType,this.offset=new a.Vector2(0,0),this.repeat=new a.Vector2(1,1),this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.magFilter=a.LinearFilter,this.minFilter=a.LinearMipMapLinearFilter);this.needsUpdate=!1;this.onUpdate=null};a.Texture.prototype=
{constructor:a.Texture,clone:function(b){return void 0===b&&(b=new a.Texture),b.image=this.image,b.mapping=this.mapping,b.wrapS=this.wrapS,b.wrapT=this.wrapT,b.magFilter=this.magFilter,b.minFilter=this.minFilter,b.anisotropy=this.anisotropy,b.format=this.format,b.type=this.type,b.offset.copy(this.offset),b.repeat.copy(this.repeat),b.premultiplyAlpha=this.premultiplyAlpha,b.flipY=this.flipY,b.unpackAlignment=this.unpackAlignment,b},dispose:function(){this.dispatchEvent({type:"dispose"})}};a.TextureIdCount=
0;a.FrontSide=0;a.BackSide=1;a.DoubleSide=2;a.NoShading=0;a.FlatShading=1;a.SmoothShading=2;a.NoColors=0;a.FaceColors=1;a.VertexColors=2;a.MultiplyOperation=0;a.MixOperation=1;a.AddOperation=2;a.UVMapping=function(){};a.ClampToEdgeWrapping=1001;a.LinearFilter=1006;a.NearestFilter=1007;a.LinearMipMapLinearFilter=1008;a.UnsignedByteType=1009;a.FloatType=1010;a.RGBAFormat=1021;a.RFormat=1022;a.R32Format=1023;a.Line=function(b,c,d){a.Object3D.call(this);this.geometry=b;this.material=void 0!==c?c:new a.LineBasicMaterial({color:16777215*
Math.random()});this.type=void 0!==d?d:a.LineStrip};a.LineStrip=0;a.LinePieces=1;a.Line.prototype=Object.create(a.Object3D.prototype);a.Line.prototype.clone=function(b){return void 0===b&&(b=new a.Line(this.geometry,this.material,this.type)),a.Object3D.prototype.clone.call(this,b),b};a.Mesh=function(b,c){a.Object3D.call(this);this.geometry=b;this.material=void 0!==c?c:new a.MeshBasicMaterial({color:16777215*Math.random(),wireframe:!0})};a.Mesh.prototype=Object.create(a.Object3D.prototype);a.Mesh.prototype.clone=
function(b){return void 0===b&&(b=new a.Mesh(this.geometry,this.material)),a.Object3D.prototype.clone.call(this,b),b};a.Sprite=function(b){a.Object3D.call(this);this.material=void 0!==b?b:new a.SpriteMaterial;this.rotation3d=this.rotation;this.rotation=0};a.Sprite.prototype=Object.create(a.Object3D.prototype);a.Sprite.prototype.updateMatrix=function(){this.matrix.setPosition(this.position);this.rotation3d.set(0,0,this.rotation);this.matrix.setRotationFromEuler(this.rotation3d);1===this.scale.x&&1===
this.scale.y||this.matrix.scale(this.scale);this.matrixWorldNeedsUpdate=!0};a.Sprite.prototype.clone=function(b){return void 0===b&&(b=new a.Sprite(this.material)),a.Object3D.prototype.clone.call(this,b),b};a.Renderer=function(b){function c(b){ca[b]||(f.enableVertexAttribArray(b),ca[b]=!0)}function d(b,a){var c;return 1==X||a.startsWith("#version")||(a=a.replace(/gl_FragDepthEXT/g,"gl_FragDepth"),a="#version 300 es\n"+(a=(a=(a=(a=(a="fragment"==b?a.replace(/varying/g,"in"):a.replace(/varying/g,"out")).replace(/attribute/g,
"in")).replace(/texture2D/g,"texture")).replace(/\/\/DEFINEFRAGCOLOR/g,"out vec4 glFragColor;")).replace(/gl_FragColor/g,"glFragColor"))),"fragment"===b?c=f.createShader(f.FRAGMENT_SHADER):"vertex"===b&&(c=f.createShader(f.VERTEX_SHADER)),f.shaderSource(c,a),f.compileShader(c),f.getShaderParameter(c,f.COMPILE_STATUS)?c:(console.error(f.getShaderInfoLog(c)),console.error("could not initialize shader"),null)}function h(b,a,c,e){var k;var m=[];for(l in m.push(b),m.push(a),e)m.push(l),m.push(e[l]);m=
m.join();var l=0;for(k=M.length;l<k;l++){var h=M[l];if(h.code===m)return h.usedTimes++,h.program}if(1==X&&e.volumetric)throw Error("Volumetric rendering requires webgl2 which is not supported by your hardware.");l=f.createProgram();h="precision "+v+" float;";k=[e.volumetric?"#version 300 es":"",h].join("\n");b=d("fragment",[e.volumetric?"#version 300 es":"",e.fragdepth&&1==X?"#extension GL_EXT_frag_depth: enable":"",e.wireframe?"#define WIREFRAME 1":"",h].join("\n")+b);a=d("vertex",k+a);for(g in f.attachShader(l,
a),f.attachShader(l,b),f.linkProgram(l),f.getProgramParameter(l,f.LINK_STATUS)||console.error("Could not initialize shader"),l.uniforms={},l.attributes={},a=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix"],c)a.push(g);for(c=0;c<a.length;c++){var g=a[c];l.uniforms[g]=f.getUniformLocation(l,g)}a="position normal color lineDistance offset radius".split(" ");for(c=0;c<a.length;c++)g=a[c],l.attributes[g]=f.getAttribLocation(l,g);return l.id=da++,M.push({program:l,code:m,usedTimes:1}),
N.info.memory.programs=M.length,l}function n(b,c,e,d,k,m){d.needsUpdate&&(d.program&&wb(d),N.initMaterial(d,c,e,k),d.needsUpdate=!1);var l=!1,h=d.program,g=h.uniforms,r=d.uniforms;if(h!=Q&&(f.useProgram(h),Q=h,l=!0),d.id!=F&&(F=d.id,l=!0),b!=Z&&(Z=b,l=!0),f.uniformMatrix4fv(g.projectionMatrix,!1,b.projectionMatrix.elements),f.uniformMatrix4fv(g.modelViewMatrix,!1,k._modelViewMatrix.elements),f.uniformMatrix3fv(g.normalMatrix,!1,k._normalMatrix.elements),l)(r.fogColor.value=e.color,r.fogNear.value=
e.near,r.fogFar.value=e.far,d.shaderID.startsWith("lambert")||"instanced"===d.shaderID||d.shaderID.endsWith("imposter"))?(f.uniformMatrix4fv(g.viewMatrix,!1,b.matrixWorldInverse.elements),V&&(!function(b,c){var e,d,f,k,m=ha,l=m.directional.colors,h=m.directional.positions,g=0,r=0;b=0;for(e=c.length;b<e;b++)(d=c[b],f=d.color,k=d.intensity,d.distance,d instanceof a.Light)&&(0,E.getPositionFromMatrix(d.matrixWorld),aa.getPositionFromMatrix(d.target.matrixWorld),E.sub(aa),E.normalize(),0!==E.x||0!==E.y||
0!==E.z)&&(h[r]=E.x,h[r+1]=E.y,h[r+2]=E.z,l[r]=f.r*k,l[r+1]=f.g*k,l[r+2]=f.b*k,r+=3,g++);m.ambient[0]=0;m.ambient[1]=0;m.ambient[2]=0;m.directional.length=g}(0,c),V=!1),r.directionalLightColor.value=ha.directional.colors,r.directionalLightDirection.value=ha.directional.positions):d.shaderID.endsWith("outline")?(r.outlineColor.value=d.outlineColor,r.outlineWidth.value=d.outlineWidth,r.outlinePushback.value=d.outlinePushback):"sphereimposter"===d.shaderID?(f.uniformMatrix4fv(g.viewMatrix,!1,b.matrixWorldInverse.elements),
r.directionalLightColor.value=ha.directional.colors,r.directionalLightDirection.value=ha.directional.positions):"volumetric"===d.shaderID&&(k._modelViewMatrix.getScale(E),T.getInverse(k._modelViewMatrix),U.getInverse(b.projectionMatrix),D.multiplyMatrices(k.material.texmatrix,T),f.uniformMatrix4fv(g.textmat,!1,D.elements),f.uniformMatrix4fv(g.projinv,!1,U.elements),b=Math.min(Math.min(E.x,E.y),E.z),r.step.value=k.material.unit*b,r.maxdepth.value=k.material.maxdepth*b,r.transfermax.value=k.material.transfermax,
r.transfermin.value=k.material.transfermin,r.subsamples.value=k.material.subsamples,m.setTexture(k.material.transferfn,4,!1),m.setTexture(k.material.map,3,!0),f.activeTexture(f.TEXTURE5),f.bindTexture(f.TEXTURE_2D,ja)),r.opacity.value=d.opacity,function(b,a){var c,e,d,k;for(c in a)b[c]&&(e=a[c].type,d=a[c].value,k=b[c],"f"===e?f.uniform1f(k,d):"i"===e?f.uniform1i(k,d):"fv"===e?f.uniform3fv(k,d):"c"===e?f.uniform3f(k,d.r,d.g,d.b):"f4"===e&&f.uniform4f(k,d[0],d[1],d[2],d[3]))}(g,r);return h}function g(b,
a,c,e,d,k,l){var h,g,r,u,z,q,C;a?(z=b.length-1,q=-1,C=-1):(z=0,q=b.length,C=1);for(a=z;a!==q;a+=C)(h=b[a]).render&&(g=h.object,r=h.buffer,u=h[c])&&(l&&N.setBlending(!0),N.setDepthTest(u.depthTest),N.setDepthWrite(u.depthWrite),z=u.polygonOffset,u.polygonOffsetFactor,u.polygonOffsetUnits,null!==z&&(z?f.enable(f.POLYGON_OFFSET_FILL):f.disable(f.POLYGON_OFFSET_FILL)),z=g._modelViewMatrix.isReflected(),N.setMaterialFaces(u,z),N.renderBuffer(e,d,k,u,r,g),(m||u.outline)&&("sphereimposter"==u.shaderID?N.renderBuffer(e,
d,k,J,r,g):"stickimposter"==u.shaderID?N.renderBuffer(e,d,k,G,r,g):u.wireframe||"basic"===u.shaderID||0===u.opacity||N.renderBuffer(e,d,k,w,r,g)))}function p(b,c){b instanceof a.Mesh||b instanceof a.Line?function(b,a){for(var c=b.length-1;0<=c;--c)b[c].object===a&&b.splice(c,1)}(c.__webglObjects,b):b instanceof a.Sprite&&function(b,a){for(var c=b.length-1;0<=c;--c)b[c]===a&&b.splice(c,1)}(c.__webglSprites,b);b.__webglActive=!1}function q(b,a){b==f.TEXTURE_2D?(f.texParameteri(b,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),
f.texParameteri(b,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texParameteri(b,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texParameteri(b,f.TEXTURE_MIN_FILTER,f.LINEAR)):(f.texParameteri(b,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(b,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texParameteri(b,f.TEXTURE_WRAP_R,f.CLAMP_TO_EDGE),vb&&ra?(f.texParameteri(b,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texParameteri(b,f.TEXTURE_MIN_FILTER,f.LINEAR)):(f.texParameteri(b,f.TEXTURE_MAG_FILTER,f.NEAREST),f.texParameteri(b,f.TEXTURE_MIN_FILTER,
f.NEAREST)))}function x(b){return b===a.UnsignedByteType?f.UNSIGNED_BYTE:b===a.RGBAFormat?f.RGBA:b===a.NearestFilter?f.NEAREST:0}b=b||{};this.row=b.row;this.col=b.col;this.rows=b.rows;this.cols=b.cols;var A=void 0!==b.canvas?b.canvas:document.createElement("canvas"),v=void 0!==b.precision?b.precision:"highp",B=void 0===b.alpha||b.alpha,e=void 0===b.premultipliedAlpha||b.premultipliedAlpha,k=void 0!==b.antialias&&b.antialias,z=void 0===b.stencil||b.stencil,l=void 0!==b.preserveDrawingBuffer&&b.preserveDrawingBuffer,
u=void 0!==b.clearColor?new a.Color(b.clearColor):new a.Color(0),C=void 0!==b.clearAlpha?b.clearAlpha:0,w=new a.MeshOutlineMaterial(b.outline),J=new a.SphereImposterOutlineMaterial(b.outline),G=new a.StickImposterOutlineMaterial(b.outline),m=!!b.outline;this.domElement=A;this.context=null;this.devicePixelRatio=1;A.id=b.id;this.autoUpdateScene=this.autoUpdateObjects=this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.renderPluginsPost=[];this.info=
{memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var f,N=this,M=[],da=0,X=1,Q=null,F=-1,t=null,Z=null,P=0,ta=-1,S=-1,R=-1,W=-1,O=null,I=0,H=0,K=0,ka=0,ca={},ia=new a.Matrix4,aa=new a.Vector3,T=new a.Matrix4,U=new a.Matrix4,D=new a.Matrix4,E=new a.Vector3,V=!0,ha={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},
hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},L=null,pa=null,pb=null,Y=null,Oa=null,ja=null;!function(){try{if(!(f=A.getContext("webgl2",{alpha:B,premultipliedAlpha:e,antialias:k,stencil:z,preserveDrawingBuffer:l}))&&!(f=A.getContext("experimental-webgl",{alpha:B,premultipliedAlpha:e,antialias:k,stencil:z,preserveDrawingBuffer:l}))&&!(f=A.getContext("webgl",{alpha:B,premultipliedAlpha:e,antialias:k,stencil:z,preserveDrawingBuffer:l})))throw"Error creating WebGL context.";var b=f.getParameter(f.VERSION);
X=parseInt(b[6])}catch(na){console.error(na)}}();f.clearColor(0,0,0,1);f.clearDepth(1);f.clearStencil(0);f.enable(f.DEPTH_TEST);f.depthFunc(f.LEQUAL);f.frontFace(f.CCW);f.cullFace(f.BACK);f.enable(f.CULL_FACE);f.enable(f.BLEND);f.blendEquation(f.FUNC_ADD);f.blendFunc(f.SRC_ALPHA,f.ONE_MINUS_SRC_ALPHA);f.clearColor(u.r,u.g,u.b,C);this.context=f;var Ma=f.getExtension("ANGLE_instanced_arrays"),ma=f.getExtension("EXT_frag_depth"),ra=f.getExtension("OES_texture_float_linear"),vb=f.getExtension("EXT_color_buffer_float");
this.supportedExtensions=function(){return{supportsAIA:!!Ma,supportsImposters:!!ma||1!=X}};this.getContext=function(){return f};this.getPrecision=function(){return v};this.setClearColorHex=function(b,a){u.setHex(b);C=a;f.clearColor(u.r,u.g,u.b,C)};this.enableOutline=function(b){w=new a.MeshOutlineMaterial(b);J=new a.SphereImposterOutlineMaterial(b);G=new a.StickImposterOutlineMaterial(b);m=!0};this.disableOutline=function(){m=!1};this.setViewport=function(){if(null!=this.rows&&null!=this.cols&&null!=
this.row&&null!=this.col){var b=A.width/this.cols,a=A.height/this.rows;I=b;H=a;f.enable(f.SCISSOR_TEST);f.scissor(b*this.col,a*this.row,b,a);f.viewport(b*this.col,a*this.row,b,a)}};this.setSize=function(b,a){if(this.devicePixelRatio=void 0!==window.devicePixelRatio?window.devicePixelRatio:1,k&&2>this.devicePixelRatio&&(this.devicePixelRatio*=2),null!=this.rows&&null!=this.cols&&null!=this.row&&null!=this.col){var c=b/this.cols,e=a/this.rows;A.width=b*this.devicePixelRatio;A.height=a*this.devicePixelRatio;
I=c*this.devicePixelRatio;H=e*this.devicePixelRatio;A.style.width=b+"px";A.style.height=a+"px";this.setViewport()}else I=A.width=b*this.devicePixelRatio,H=A.height=a*this.devicePixelRatio,A.style.width=b+"px",A.style.height=a+"px",f.viewport(0,0,f.drawingBufferWidth,f.drawingBufferHeight);this.initFrameBuffer()};this.clear=function(b,a,c){var e=0;(void 0===b||b)&&(e|=f.COLOR_BUFFER_BIT);(void 0===a||a)&&(e|=f.DEPTH_BUFFER_BIT);(void 0===c||c)&&(e|=f.STENCIL_BUFFER_BIT);f.clear(e)};this.clearTarget=
function(b,a,c){this.clear(b,a,c)};this.setMaterialFaces=function(b,c){var e=b.side===a.DoubleSide,d=b.side===a.BackSide;b.imposter||(d=c?!d:d);ta!==e&&(e?f.disable(f.CULL_FACE):f.enable(f.CULL_FACE),ta=e);S!==d&&(d?f.frontFace(f.CW):f.frontFace(f.CCW),S=d);f.cullFace(f.BACK)};this.setDepthTest=function(b){R!==b&&(b?f.enable(f.DEPTH_TEST):f.disable(f.DEPTH_TEST),R=b)};this.setDepthWrite=function(b){W!==b&&(f.depthMask(b),W=b)};this.setBlending=function(b){b?(f.enable(f.BLEND),f.blendEquationSeparate(f.FUNC_ADD,
f.FUNC_ADD),f.blendFuncSeparate(f.SRC_ALPHA,f.ONE_MINUS_SRC_ALPHA,f.ONE,f.ONE_MINUS_SRC_ALPHA)):f.disable(f.BLEND);b};this.addPostPlugin=function(b){b.init(this);this.renderPluginsPost.push(b)};var wb=function(b){var a=b.program;if(void 0!==a){var c,e;b.program=void 0;var d=!1;b=0;for(c=M.length;b<c;b++)if((e=M[b]).program===a){e.usedTimes--;0===e.usedTimes&&(d=!0);break}if(!0===d){d=[];b=0;for(c=M.length;b<c;b++)(e=M[b]).program!==a&&d.push(e);M=d;f.deleteProgram(a);N.info.memory.programs--}}},Ab=
function(b){b=b.target;b.removeEventListener("dispose",Ab);if(b.__webglInit=void 0,void 0!==b.__webglVertexBuffer&&f.deleteBuffer(b.__webglVertexBuffer),void 0!==b.__webglColorBuffer&&f.deleteBuffer(b.__webglColorBuffer),void 0!==b.geometryGroups)for(var a=0,c=b.groups;a<c;a++){var e=b.geometryGroups[a];void 0!==e.__webglVertexBuffer&&f.deleteBuffer(e.__webglVertexBuffer);void 0!==e.__webglColorBuffer&&f.deleteBuffer(e.__webglColorBuffer);void 0!==e.__webglNormalBuffer&&f.deleteBuffer(e.__webglNormalBuffer);
void 0!==e.__webglFaceBuffer&&f.deleteBuffer(e.__webglFaceBuffer);void 0!==e.__webglLineBuffer&&f.deleteBuffer(e.__webglLineBuffer)}N.info.memory.geometries--},qa=function(b){b=b.target;b.removeEventListener("dispose",qa);b.image&&b.image.__webglTextureCube?f.deleteTexture(b.image.__webglTextureCube):b.__webglInit&&(b.__webglInit=!1,f.deleteTexture(b.__webglTexture));N.info.memory.textures--},ea=function(b){b=b.target;b.removeEventListener("dispose",ea);wb(b)};this.initMaterial=function(b){var c;
if(b.addEventListener("dispose",ea),c=b.shaderID)c=a.ShaderLib[c],b.vertexShader=c.vertexShader,b.fragmentShader=c.fragmentShader,b.uniforms=a.ShaderUtils.clone(c.uniforms);b.program=h(b.fragmentShader,b.vertexShader,b.uniforms,{wireframe:b.wireframe,fragdepth:b.imposter,volumetric:b.volumetric})};this.renderBuffer=function(b,e,d,k,m,l){if(k.visible){e=(d=n(b,e,d,k,l,this)).attributes;b=!1;d=16777215*m.id+2*d.id+(k.wireframe?1:0);d!==t&&(t=d,b=!0);if(b){for(var h in ca)ca[h]&&(f.disableVertexAttribArray(h),
ca[h]=!1);!0;0<=e.position&&(f.bindBuffer(f.ARRAY_BUFFER,m.__webglVertexBuffer),c(e.position),f.vertexAttribPointer(e.position,3,f.FLOAT,!1,0,0));0<=e.color&&(f.bindBuffer(f.ARRAY_BUFFER,m.__webglColorBuffer),c(e.color),f.vertexAttribPointer(e.color,3,f.FLOAT,!1,0,0));0<=e.normal&&(f.bindBuffer(f.ARRAY_BUFFER,m.__webglNormalBuffer),c(e.normal),f.vertexAttribPointer(e.normal,3,f.FLOAT,!1,0,0));0<=e.offset&&(f.bindBuffer(f.ARRAY_BUFFER,m.__webglOffsetBuffer),c(e.offset),f.vertexAttribPointer(e.offset,
3,f.FLOAT,!1,0,0));0<=e.radius&&(f.bindBuffer(f.ARRAY_BUFFER,m.__webglRadiusBuffer),c(e.radius),f.vertexAttribPointer(e.radius,1,f.FLOAT,!1,0,0))}if(l instanceof a.Mesh){if("instanced"===k.shaderID){var g=k.sphere.geometryGroups[0];b&&(f.bindBuffer(f.ARRAY_BUFFER,m.__webglVertexBuffer),f.bufferData(f.ARRAY_BUFFER,g.vertexArray,f.STATIC_DRAW),f.bindBuffer(f.ARRAY_BUFFER,m.__webglNormalBuffer),f.bufferData(f.ARRAY_BUFFER,g.normalArray,f.STATIC_DRAW),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,m.__webglFaceBuffer),
f.bufferData(f.ELEMENT_ARRAY_BUFFER,g.faceArray,f.STATIC_DRAW));g=g.faceidx;Ma.vertexAttribDivisorANGLE(e.offset,1);Ma.vertexAttribDivisorANGLE(e.radius,1);Ma.vertexAttribDivisorANGLE(e.color,1);Ma.drawElementsInstancedANGLE(f.TRIANGLES,g,f.UNSIGNED_SHORT,0,m.radiusArray.length);Ma.vertexAttribDivisorANGLE(e.offset,0);Ma.vertexAttribDivisorANGLE(e.radius,0);Ma.vertexAttribDivisorANGLE(e.color,0)}else k.wireframe?(l=m.lineidx,k=k.wireframeLinewidth,k!==O&&(f.lineWidth(k),O=k),b&&f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,
m.__webglLineBuffer),f.drawElements(f.LINES,l,f.UNSIGNED_SHORT,0)):(g=m.faceidx,b&&f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,m.__webglFaceBuffer),f.drawElements(f.TRIANGLES,g,f.UNSIGNED_SHORT,0));N.info.render.calls++;N.info.render.vertices+=g;N.info.render.faces+=g/3}else l instanceof a.Line&&(l=m.vertices,m=k.linewidth,m!==O&&(f.lineWidth(m),O=m),f.drawArrays(f.LINES,0,l),N.info.render.calls++)}};this.render=function(b,c,e){if(0!=c instanceof a.Camera){var d,k,m,l=b.__lights,h=b.fog;F=-1;V=!0;this.autoUpdateScene&&
b.updateMatrixWorld();void 0===c.parent&&c.updateMatrixWorld();c.matrixWorldInverse.getInverse(c.matrixWorld);ia.multiplyMatrices(c.projectionMatrix,c.matrixWorldInverse);this.autoUpdateObjects&&this.initWebGLObjects(b);N.info.render.calls=0;N.info.render.vertices=0;N.info.render.faces=0;N.info.render.points=0;K=I;ka=H;this.setViewport();this.setFrameBuffer();(this.autoClear||e)&&(f.clearColor(u.r,u.g,u.b,C),this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil));e=!1;var z=0;for(d=
(m=b.__webglObjects).length;z<d;z++){var w=(k=m[z]).object;k.render=!1;if(w.visible){w._modelViewMatrix.multiplyMatrices(c.matrixWorldInverse,w.matrixWorld);w._normalMatrix.getInverse(w._modelViewMatrix);w._normalMatrix.transpose();w=k;var q=w.object.material;q.volumetric?(w.opaque=null,w.transparent=null,w.volumetric=q):q.transparent?(w.opaque=null,w.volumetric=null,w.transparent=q,q.wireframe)||(q=q.clone(),q.opacity=0,w.blank=q):(w.opaque=q,w.transparent=null,w.volumetric=null);k.render=!0;k.volumetric&&
(e=!0)}}this.setBlending(!1);g(b.__webglObjects,!0,"opaque",c,l,h,!1);z=this.renderPluginsPost;if(t=-1,Q=null,Z=null,-1,W=-1,R=-1,ta=-1,F=-1,S=-1,z.length)for(d=0,k=z.length;d<k;d++)V=!0,z[d].render(b,c,K,ka),t=-1,Z=Q=null,-1,S=F=ta=R=W=-1;g(b.__webglObjects,!0,"blank",c,l,h,!0);g(b.__webglObjects,!1,"transparent",c,l,h,!0);e&&Y&&(this.reinitFrameBuffer(),g(b.__webglObjects,!1,"volumetric",c,l,h,!0));this.renderFrameBuffertoScreen();this.setDepthTest(!0);this.setDepthWrite(!0)}else console.error("$3Dmol.Renderer.render: camera is not an instance of $3Dmol.Camera.")};
this.reinitFrameBuffer=function(){1==X||(Y=f.createFramebuffer(),f.bindFramebuffer(f.FRAMEBUFFER,Y),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,Oa,0))};this.setFrameBuffer=function(){if(1!=X&&Y){var b=I,a=H;f.enable(f.SCISSOR_TEST);f.scissor(0,0,b,a);f.viewport(0,0,b,a);f.bindTexture(f.TEXTURE_2D,Oa);f.texImage2D(f.TEXTURE_2D,0,f.RGBA,b,a,0,f.RGBA,f.UNSIGNED_BYTE,null);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,
f.LINEAR);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);f.bindTexture(f.TEXTURE_2D,ja);f.texImage2D(f.TEXTURE_2D,0,f.DEPTH_COMPONENT32F,b,a,0,f.DEPTH_COMPONENT,f.FLOAT,null);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);
f.bindFramebuffer(f.FRAMEBUFFER,Y);f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,Oa,0);f.framebufferTexture2D(f.FRAMEBUFFER,f.DEPTH_ATTACHMENT,f.TEXTURE_2D,ja,0)}};this.initFrameBuffer=function(){if(1!=X){var b=I,c=H;f.enable(f.SCISSOR_TEST);f.scissor(0,0,b,c);f.viewport(0,0,b,c);Oa=f.createTexture();ja=f.createTexture();Y=f.createFramebuffer();b=a.ShaderLib.screen;L=h(b.fragmentShader,b.vertexShader,b.uniforms,{});pa=f.getAttribLocation(L,"vertexPosition");pb=f.createBuffer();
f.bindBuffer(f.ARRAY_BUFFER,pb);f.bufferData(f.ARRAY_BUFFER,new Float32Array([1,1,-1,1,-1,-1,-1,-1,1,-1,1,1]),f.STATIC_DRAW)}};this.renderFrameBuffertoScreen=function(){1==X||null===Y||(this.setViewport(),f.bindFramebuffer(f.FRAMEBUFFER,null),f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT),f.frontFace(f.CCW),f.cullFace(f.BACK),f.useProgram(L),Q=L,this.setDepthTest(-1),this.setDepthWrite(-1),f.bindBuffer(f.ARRAY_BUFFER,pb),f.enableVertexAttribArray(pa),f.vertexAttribPointer(pa,2,f.FLOAT,!1,0,0),f.activeTexture(f.TEXTURE0),
f.bindTexture(f.TEXTURE_2D,Oa),f.drawArrays(f.TRIANGLES,0,6))};this.initWebGLObjects=function(b){if(b.__webglObjects||(b.__webglObjects=[],b.__webglObjectsImmediate=[],b.__webglSprites=[],b.__webglFlares=[]),b.__objectsAdded.length){for(;b.__objectsAdded.length;){var c,e,d=b.__objectsAdded[0],k=b;if(!d.__webglInit&&(d.__webglInit=!0,d._modelViewMatrix=new a.Matrix4,d._normalMatrix=new a.Matrix3,void 0!==d.geometry&&void 0===d.geometry.__webglInit&&(d.geometry.__webglInit=!0,d.geometry.addEventListener("dispose",
Ab)),d instanceof a.Mesh||d instanceof a.Line)){var m=d.geometry;d.material;var l=0;for(e=m.geometryGroups.length;l<e;l++)(c=m.geometryGroups[l]).id=P++,c.__webglVertexBuffer||(d instanceof a.Mesh?(c.radiusArray&&(c.__webglRadiusBuffer=f.createBuffer()),c.useOffset&&(c.__webglOffsetBuffer=f.createBuffer()),c.__webglVertexBuffer=f.createBuffer(),c.__webglNormalBuffer=f.createBuffer(),c.__webglColorBuffer=f.createBuffer(),c.__webglFaceBuffer=f.createBuffer(),c.__webglLineBuffer=f.createBuffer(),N.info.memory.geometries++,
m.elementsNeedUpdate=!0,m.normalsNeedUpdate=!0):d instanceof a.Line&&(c.__webglVertexBuffer=f.createBuffer(),c.__webglColorBuffer=f.createBuffer(),N.info.memory.geometries++),m.verticesNeedUpdate=!0,m.colorsNeedUpdate=!0)}if(!d.__webglActive){if(d instanceof a.Mesh||d instanceof a.Line)for(l=0,e=(m=d.geometry).geometryGroups.length;l<e;l++)c=m.geometryGroups[l],k.__webglObjects.push({buffer:c,object:d,opaque:null,transparent:null});else d instanceof a.Sprite&&k.__webglSprites.push(d);d.__webglActive=
!0}b.__objectsAdded.splice(0,1)}t=-1}for(;b.__objectsRemoved.length;)p(b.__objectsRemoved[0],b),b.__objectsRemoved.splice(0,1);m=0;for(e=b.__webglObjects.length;m<e;m++)if(d=b.__webglObjects[m].object,l=d.geometry,d instanceof a.Mesh||d instanceof a.Line){d=0;for(k=l.geometryGroups.length;d<k;d++)if(c=l.geometryGroups[d],l.verticesNeedUpdate||l.elementsNeedUpdate||l.colorsNeedUpdate||l.normalsNeedUpdate){var h=f.STATIC_DRAW,g=c.vertexArray,w=c.colorArray;if(void 0!==c.__webglOffsetBuffer?(f.bindBuffer(f.ARRAY_BUFFER,
c.__webglOffsetBuffer),f.bufferData(f.ARRAY_BUFFER,g,h)):(f.bindBuffer(f.ARRAY_BUFFER,c.__webglVertexBuffer),f.bufferData(f.ARRAY_BUFFER,g,h)),f.bindBuffer(f.ARRAY_BUFFER,c.__webglColorBuffer),f.bufferData(f.ARRAY_BUFFER,w,h),c.normalArray&&void 0!==c.__webglNormalBuffer)g=c.normalArray,f.bindBuffer(f.ARRAY_BUFFER,c.__webglNormalBuffer),f.bufferData(f.ARRAY_BUFFER,g,h);if(c.radiusArray&&void 0!==c.__webglRadiusBuffer&&(f.bindBuffer(f.ARRAY_BUFFER,c.__webglRadiusBuffer),f.bufferData(f.ARRAY_BUFFER,
c.radiusArray,h)),c.faceArray&&void 0!==c.__webglFaceBuffer)g=c.faceArray,f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,c.__webglFaceBuffer),f.bufferData(f.ELEMENT_ARRAY_BUFFER,g,h);c.lineArray&&void 0!==c.__webglLineBuffer&&(g=c.lineArray,f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,c.__webglLineBuffer),f.bufferData(f.ELEMENT_ARRAY_BUFFER,g,h))}l.verticesNeedUpdate=!1;l.elementsNeedUpdate=!1;l.normalsNeedUpdate=!1;l.colorsNeedUpdate=!1;l.buffersNeedUpdate=!1}};this.getYRatio=function(){return void 0!==this.rows&&void 0!==
this.row?this.rows:1};this.getXRatio=function(){return void 0!==this.cols&&void 0!==this.col?this.cols:1};this.getAspect=function(b,a){null!=b&&null!=a||(b=A.width,a=A.height);var c=b/a;null!=this.rows&&null!=this.cols&&null!=this.row&&null!=this.col&&(c=b/this.cols/(a/this.rows));return c};this.setTexture=function(b,a,c){if(b.needsUpdate){b.__webglInit||(b.__webglInit=!0,b.addEventListener("dispose",qa),b.__webglTexture=f.createTexture(),N.info.memory.textures++);f.activeTexture(f.TEXTURE0+a);f.bindTexture(c?
f.TEXTURE_3D:f.TEXTURE_2D,b.__webglTexture);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,b.flipY);f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,b.premultiplyAlpha);f.pixelStorei(f.UNPACK_ALIGNMENT,b.unpackAlignment);f.pixelStorei(f.PACK_ALIGNMENT,b.unpackAlignment);a=x(b.format);var e=x(b.type);if(c)q(f.TEXTURE_3D,b),f.texImage3D(f.TEXTURE_3D,0,f.R32F,b.image.size.z,b.image.size.y,b.image.size.x,0,f.RED,f.FLOAT,b.image.data);else{c=b.image;var d=c.width,k=c.height;void 0===d&&(d=c.length,a==f.RGBA&&(d/=4),
k=1);q(f.TEXTURE_2D,b);1==X?f.texImage2D(f.TEXTURE_2D,0,a,a,e,b.image):f.texImage2D(f.TEXTURE_2D,0,a,d,k,0,a,e,b.image)}b.needsUpdate=!1;b.onUpdate&&b.onUpdate()}else f.activeTexture(f.TEXTURE0+a),c?f.bindTexture(f.TEXTURE_3D,b.__webglTexture):f.bindTexture(f.TEXTURE_2D,b.__webglTexture)};this.supportsVolumetric=function(){return 1!=X};this.addPostPlugin(new a.SpritePlugin)};a.Scene=function(){a.Object3D.call(this);this.overrideMaterial=this.fog=null;this.matrixAutoUpdate=!1;this.__objects=[];this.__lights=
[];this.__objectsAdded=[];this.__objectsRemoved=[]};a.Scene.prototype=Object.create(a.Object3D.prototype);a.Scene.prototype.__addObject=function(b){if(b instanceof a.Light)-1===this.__lights.indexOf(b)&&this.__lights.push(b),b.target&&void 0===b.target.parent&&this.add(b.target);else if(-1===this.__objects.indexOf(b)){this.__objects.push(b);this.__objectsAdded.push(b);var c=this.__objectsRemoved.indexOf(b);-1!==c&&this.__objectsRemoved.splice(c,1)}for(c=0;c<b.children.length;c++)this.__addObject(b.children[c])};
a.Scene.prototype.__removeObject=function(b){var c;b instanceof a.Light?-1!==(c=this.__lights.indexOf(b))&&this.__lights.splice(c,1):-1!==(c=this.__objects.indexOf(b))&&(this.__objects.splice(c,1),this.__objectsRemoved.push(b),-1!==this.__objectsAdded.indexOf(b)&&this.__objectsAdded.splice(c,1));for(c=0;c<b.children.length;c++)this.__removeObject(b.children[c])};a.Fog=function(b,c,d){this.name="";this.color=new a.Color(b);this.near=void 0!==c?c:1;this.far=void 0!==d?d:1E3};a.Fog.prototype.clone=function(){return new a.Fog(this.color.getHex(),
this.near,this.far)};a.ShaderUtils={clone:function(b){var c,d={};for(c in b){d[c]={};d[c].type=b[c].type;var h=b[c].value;h instanceof a.Color?d[c].value=h.clone():"number"==typeof h?d[c].value=h:h instanceof Array?d[c].value=[]:console.error("Error copying shader uniforms from ShaderLib: unknown type for uniform")}return d},stickimposterFragmentShader:"uniform float opacity;\nuniform mat4 projectionMatrix;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nvarying vec3 vLight;\nvarying vec3 vColor;\nvarying vec3 cposition;\nvarying vec3 p1;\nvarying vec3 p2;\nvarying float r;\n//DEFINEFRAGCOLOR\nvoid main() {\n    vec3 color = abs(vColor);\n    vec3 pos = cposition;\n    vec3 p = pos;\n    vec3 v = normalize(pos);\n    vec3 pa = p1;\n    vec3 va = normalize(p2-p1);\n    vec3 tmp1 = v-(dot(v,va)*va);\n    vec3 deltap = p-pa;\n    float A = dot(tmp1,tmp1);\n    if(A == 0.0) discard;\n    vec3 tmp2 = deltap-(dot(deltap,va)*va);\n    float B = 2.0*dot(tmp1, tmp2);\n    float C = dot(tmp2,tmp2)-r*r;\n    float det = (B*B) - (4.0*A*C);\n    if(det < 0.0) discard;\n    float sqrtDet = sqrt(det);\n    float posT = (-B+sqrtDet)/(2.0*A);\n    float negT = (-B-sqrtDet)/(2.0*A);\n    float intersectionT = min(posT,negT);\n    vec3 qi = p+v*intersectionT;\n    float dotp1 = dot(va,qi-p1);\n    float dotp2 = dot(va,qi-p2);\n    vec3 norm;\n    if( dotp1 < 0.0 || dotp2 > 0.0) {\n       vec3 cp;\n       if( dotp1 < 0.0) {        cp = p1;\n       } else {\n          cp = p2;\n       }\n       vec3 diff = p-cp;\n       A = dot(v,v);\n       B = dot(diff,v)*2.0;\n       C = dot(diff,diff)-r*r;\n       det = (B*B) - (4.0*C);\n       if(det < 0.0) discard;\n       sqrtDet = sqrt(det);\n       posT = (-B+sqrtDet)/(2.0);\n       negT = (-B-sqrtDet)/(2.0);\n       float t = min(posT,negT);\n       qi = p+v*t;\n       norm = normalize(qi-cp);\n    } else {\n       norm = normalize(qi-(dotp1*va + p1));\n    }\n    vec4 clipPos = projectionMatrix * vec4(qi, 1.0);\n    float ndcDepth = clipPos.z / clipPos.w;\n    float depth = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;\n    gl_FragDepthEXT = depth;"};
a.ShaderLib={basic:{fragmentShader:"uniform mat4 viewMatrix;\nuniform float opacity;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nvarying vec3 vColor;\n//DEFINEFRAGCOLOR\nvoid main() {\n    gl_FragColor = vec4( vColor, opacity );\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogFactor = smoothstep( fogNear, fogFar, depth );\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}",vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nattribute vec3 position;\nattribute vec3 color;\nvarying vec3 vColor;\nvoid main() {\n    vColor = color;\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    gl_Position = projectionMatrix * mvPosition;\n}",
uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3}}},sphereimposter:{fragmentShader:"uniform mat4 viewMatrix;\nuniform float opacity;\nuniform mat4 projectionMatrix;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nuniform float uDepth;\nuniform vec3 directionalLightColor[ 1 ];\nvarying vec3 vColor;\nvarying vec2 mapping;\nvarying float rval;\nvarying vec3 vLight;\nvarying vec3 center;\n//DEFINEFRAGCOLOR\nvoid main() {\n    float lensqr = dot(mapping,mapping);\n    float rsqr = rval*rval;\n    if(lensqr > rsqr)\n       discard;\n    float z = sqrt(rsqr-lensqr);\n    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z);\n    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);\n    float ndcDepth = clipPos.z / clipPos.w;\n    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;\n    vec3 norm = normalize(vec3(mapping.x,mapping.y,z));\n    float dotProduct = dot( norm, vLight );\n    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n    vec3 vLight = directionalLightColor[ 0 ] * directionalLightWeighting;\n    gl_FragColor = vec4(vLight*vColor, opacity*opacity );\n    float fogFactor = smoothstep( fogNear, fogFar, gl_FragDepthEXT/gl_FragCoord.w );\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}",
vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 directionalLightColor[ 1 ];\nuniform vec3 directionalLightDirection[ 1 ];\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nvarying vec2 mapping;\nvarying vec3 vColor;\nvarying float rval;\nvarying vec3 vLight;\nvarying vec3 center;\nvoid main() {\n    vColor = color;\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    center = mvPosition.xyz;\n    vec4 projPosition = projectionMatrix * mvPosition;\n    vec4 adjust = projectionMatrix* vec4(normal,0.0); adjust.z = 0.0; adjust.w = 0.0;\n    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );\n    vLight = normalize( lDirection.xyz );\n    mapping = normal.xy;\n    rval = abs(normal.x);\n    gl_Position = projPosition+adjust;\n}",
uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},lambert:{fragmentShader:"uniform mat4 viewMatrix;\nuniform float opacity;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nvarying vec3 vLightFront;\nvarying vec3 vColor;\n//DEFINEFRAGCOLOR\nvoid main() {\n    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );\n    #ifndef WIREFRAME\n    gl_FragColor.xyz *= vLightFront;\n    #endif\n    gl_FragColor = gl_FragColor * vec4( vColor, opacity );\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogFactor = smoothstep( fogNear, fogFar, depth );\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}",
vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 directionalLightColor[ 1 ];\nuniform vec3 directionalLightDirection[ 1 ];\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nvarying vec3 vColor;\nvarying vec3 vLightFront;\nvoid main() {\n    vColor = color;\n    vec3 objectNormal = normal;\n    vec3 transformedNormal = normalMatrix * objectNormal;\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    vLightFront = vec3( 0.0 );\n    transformedNormal = normalize( transformedNormal );\n    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );\n    vec3 dirVector = normalize( lDirection.xyz );\n    float dotProduct = dot( transformedNormal, dirVector );\n    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;\n    gl_Position = projectionMatrix * mvPosition;\n}",
uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},instanced:{fragmentShader:"uniform mat4 viewMatrix;\nuniform float opacity;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nvarying vec3 vLightFront;\nvarying vec3 vColor;\n//DEFINEFRAGCOLOR\nvoid main() {\n    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );\n    #ifndef WIREFRAME\n    gl_FragColor.xyz *= vLightFront;\n    #endif\n    gl_FragColor = gl_FragColor * vec4( vColor, opacity );\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogFactor = smoothstep( fogNear, fogFar, depth );\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}",
vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 directionalLightColor[ 1 ];\nuniform vec3 directionalLightDirection[ 1 ];\nattribute vec3 offset;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nattribute float radius;\nvarying vec3 vColor;\nvarying vec3 vLightFront;\nvoid main() {\n    vColor = color;\n    vec3 objectNormal = normal;\n    vec3 transformedNormal = normalMatrix * objectNormal;\n    vec4 mvPosition = modelViewMatrix * vec4( position * radius + offset, 1.0 );\n    vLightFront = vec3( 0.0 );\n    transformedNormal = normalize( transformedNormal );\n    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );\n    vec3 dirVector = normalize( lDirection.xyz );\n    float dotProduct = dot( transformedNormal, dirVector );\n    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;\n    gl_Position = projectionMatrix * mvPosition;\n}",
uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},outline:{fragmentShader:"uniform float opacity;\nuniform vec3 outlineColor;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\n//DEFINEFRAGCOLOR\nvoid main() {\n    gl_FragColor = vec4( outlineColor, 1 );\n}",vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float outlineWidth;\nuniform float outlinePushback;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nvoid main() {\n    vec4 norm = modelViewMatrix*vec4(normalize(normal),0.0);\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    mvPosition.xy += norm.xy*outlineWidth;\n    gl_Position = projectionMatrix * mvPosition;\n    mvPosition.z -= outlinePushback;\n    vec4 pushpos = projectionMatrix*mvPosition;\n    gl_Position.z = gl_Position.w*pushpos.z/pushpos.w;\n}",
uniforms:{opacity:{type:"f",value:1},outlineColor:{type:"c",value:new a.Color(0,0,0)},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1}}},sphereimposteroutline:{fragmentShader:"uniform float opacity;\nuniform vec3 outlineColor;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nuniform mat4 projectionMatrix;\nvarying vec2 mapping;\nvarying float rval;\nvarying vec3 center;\nuniform float outlinePushback;\n//DEFINEFRAGCOLOR\nvoid main() {\n    float lensqr = dot(mapping,mapping);\n    float rsqr = rval*rval;\n    if(lensqr > rsqr)\n       discard;\n    float z = sqrt(rsqr-lensqr);\n    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z-outlinePushback);\n    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);\n    float ndcDepth = clipPos.z / clipPos.w;\n    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;\n    gl_FragColor = vec4(outlineColor, 1 );\n}",
vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float outlineWidth;\nuniform float outlinePushback;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nvarying vec2 mapping;\nvarying float rval;\nvarying vec3 center;\nvoid main() {\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    center = mvPosition.xyz;\n    vec4 projPosition = projectionMatrix * mvPosition;\n    vec2 norm = normal.xy + vec2(sign(normal.x)*outlineWidth,sign(normal.y)*outlineWidth);\n    vec4 adjust = projectionMatrix* vec4(norm,normal.z,0.0); adjust.z = 0.0; adjust.w = 0.0;\n    mapping = norm.xy;\n    rval = abs(norm.x);\n    gl_Position = projPosition+adjust;\n}",
uniforms:{opacity:{type:"f",value:1},outlineColor:{type:"c",value:new a.Color(0,0,0)},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1}}},stickimposter:{fragmentShader:[a.ShaderUtils.stickimposterFragmentShader,"    float dotProduct = dot( norm, vLight );\n    vec3 light = vec3( max( dotProduct, 0.0 ) );\n    gl_FragColor = vec4(light*color, opacity*opacity );\n    float fogFactor = smoothstep( fogNear, fogFar, depth );\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}"].join("\n"),
vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 directionalLightColor[ 1 ];\nuniform vec3 directionalLightDirection[ 1 ];\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nattribute float radius;\nvarying vec3 vColor;\nvarying vec3 vLight;\nvarying vec3 cposition;\nvarying vec3 p1;\nvarying vec3 p2;\nvarying float r;\nvoid main() {\n    vColor = color; vColor.z = abs(vColor.z);\n    r = abs(radius);\n    vec4 to = modelViewMatrix*vec4(normal, 1.0);\n    vec4 pt = modelViewMatrix*vec4(position, 1.0);\n    vec4 mvPosition = pt;\n    p1 = pt.xyz; p2 = to.xyz;\n    vec3 norm = to.xyz-pt.xyz;\n    float mult = 1.1;\n    if(length(p1) > length(p2)) {\n       mvPosition = to;\n    }\n    vec3 n = normalize(mvPosition.xyz);\n    if(color.z >= 0.0) {\n       vec3 pnorm = normalize(p1);\n       float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);\n       mvPosition.xyz = p1+t*pnorm;\n    } else {\n       vec3 pnorm = normalize(p2);\n       float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);\n       mvPosition.xyz = p2+t*pnorm;\n       mult *= -1.0;\n    }\n    vec3 cr = normalize(cross(mvPosition.xyz,norm))*radius;\n    vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*radius;\n    mvPosition.xy +=  mult*(cr + doublecr).xy;\n    cposition = mvPosition.xyz;\n    gl_Position = projectionMatrix * mvPosition;\n    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );\n    vLight = normalize( lDirection.xyz )*directionalLightColor[0];\n}",
uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},stickimposteroutline:{fragmentShader:a.ShaderUtils.stickimposterFragmentShader+"gl_FragColor = vec4(color,1.0);}",vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 directionalLightColor[ 1 ];\nuniform vec3 directionalLightDirection[ 1 ];\nuniform vec3 outlineColor;\nuniform float outlineWidth;\nuniform float outlinePushback;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nattribute float radius;\nvarying vec3 vColor;\nvarying vec3 vLight;\nvarying vec3 cposition;\nvarying vec3 p1;\nvarying vec3 p2;\nvarying float r;\nvoid main() {\n    vColor = outlineColor;\n    float rad = radius+sign(radius)*outlineWidth;\n    r = abs(rad);\n    vec4 to = modelViewMatrix*vec4(normal, 1.0);\n    vec4 pt = modelViewMatrix*vec4(position, 1.0);\n    to.xyz += normalize(to.xyz)*outlinePushback;\n    pt.xyz += normalize(pt.xyz)*outlinePushback;\n    vec4 mvPosition = pt;\n    p1 = pt.xyz; p2 = to.xyz;\n    vec3 norm = to.xyz-pt.xyz;\n    float mult = 1.1;\n    if(length(p1) > length(p2)) {\n       mvPosition = to;\n    }\n    vec3 n = normalize(mvPosition.xyz);\n    if(color.z >= 0.0) {\n       vec3 pnorm = normalize(p1);\n       float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);\n       mvPosition.xyz = p1+t*pnorm;\n    } else {\n       vec3 pnorm = normalize(p2);\n       float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);\n       mvPosition.xyz = p2+t*pnorm;\n       mult *= -1.0;\n    }\n    vec3 cr = normalize(cross(mvPosition.xyz,norm))*rad;\n    vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*rad;\n    mvPosition.xy +=  mult*(cr + doublecr).xy;\n    cposition = mvPosition.xyz;\n    gl_Position = projectionMatrix * mvPosition;\n    vLight = vec3(1.0,1.0,1.0);\n}",
uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},outlineColor:{type:"c",value:new a.Color(0,0,0)},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1}}},lambertdouble:{fragmentShader:"uniform mat4 viewMatrix;\nuniform float opacity;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nvarying vec3 vLightFront;\nvarying vec3 vLightBack;\nvarying vec3 vColor;\n//DEFINEFRAGCOLOR\nvoid main() {\n    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );\n    #ifndef WIREFRAME\n    if ( gl_FrontFacing )\n       gl_FragColor.xyz *= vLightFront;\n    else\n       gl_FragColor.xyz *= vLightBack;\n    #endif\n    gl_FragColor = gl_FragColor * vec4( vColor, opacity );\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogFactor = smoothstep( fogNear, fogFar, depth );\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}",
vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 directionalLightColor[ 1 ];\nuniform vec3 directionalLightDirection[ 1 ];\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nvarying vec3 vColor;\nvarying vec3 vLightFront;\nvarying vec3 vLightBack;\nvoid main() {\n    vColor = color;\n    vec3 objectNormal = normal;\n    vec3 transformedNormal = normalMatrix * objectNormal;\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    vLightFront = vec3( 0.0 );\n    vLightBack = vec3( 0.0 );\n    transformedNormal = normalize( transformedNormal );\n    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );\n    vec3 dirVector = normalize( lDirection.xyz );\n    float dotProduct = dot( transformedNormal, dirVector );\n    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n    vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;\n    vLightBack += directionalLightColor[ 0 ] * directionalLightWeightingBack;\n    gl_Position = projectionMatrix * mvPosition;\n}",
uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},sprite:{fragmentShader:"uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\n//DEFINEFRAGCOLOR\nvoid main() {\n    vec4 texture = texture2D(map, vUV);\n    if (texture.a < alphaTest) discard;\n    gl_FragColor = vec4(color * texture.xyz, texture.a * opacity);\n    if (fogType > 0) {\n        float depth = gl_FragCoord.z / gl_FragCoord.w;\n        float fogFactor = 0.0;\n        if (fogType == 1) {\n            fogFactor = smoothstep(fogNear, fogFar, depth);\n        }\n        else {\n            const float LOG2 = 1.442695;\n            float fogFactor = exp2(- fogDensity * fogDensity * depth * depth * LOG2);\n            fogFactor = 1.0 - clamp(fogFactor, 0.0, 1.0);\n        }\n        gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w), fogFactor);\n    }\n}",
vertexShader:"uniform int useScreenCoordinates;\nuniform vec3 screenPosition;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 alignment;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\n    vUV = uvOffset + uv * uvScale;\n    vec2 alignedPosition = position + alignment;\n    vec2 rotatedPosition;\n    rotatedPosition.x = ( cos(rotation) * alignedPosition.x - sin(rotation) * alignedPosition.y ) * scale.x;\n    rotatedPosition.y = ( sin(rotation) * alignedPosition.x + cos(rotation) * alignedPosition.y ) * scale.y;\n    vec4 finalPosition;\n    if(useScreenCoordinates != 0) {\n        finalPosition = vec4(screenPosition.xy + rotatedPosition, screenPosition.z, 1.0);\n    }\n    else {\n        finalPosition = projectionMatrix * modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0); finalPosition /= finalPosition.w;\n        finalPosition.xy += rotatedPosition; \n    }\n    gl_Position = finalPosition;\n}",
uniforms:{}},volumetric:{fragmentShader:"uniform highp sampler3D data;\nuniform highp sampler2D colormap;\nuniform highp sampler2D depthmap;\nuniform mat4 textmat;\nuniform mat4 projinv;\nuniform mat4 projectionMatrix;\nuniform float step;\nuniform float subsamples;\nuniform float maxdepth;\nuniform float transfermin;\nuniform float transfermax;\nin  vec4 mvPosition;\nout vec4 color;\nvoid main(void) {\n   vec4 pos = mvPosition;\n   bool seengood = false;\n   float i = 0.0;\n   color = vec4(1,1,1,0);\n   float increment = 1.0/subsamples;\n   float maxsteps = (maxdepth*subsamples/step);\n   vec4 maxpos = vec4(pos.x,pos.y,pos.z-maxdepth,1.0);\n   maxpos = projectionMatrix*maxpos;\n   vec4 startp = projectionMatrix*pos;\n   maxpos /= maxpos.w;\n   startp /= startp.w;\n   maxpos = vec4(startp.x,startp.y,maxpos.z,1.0);\n   maxpos = projinv*maxpos;\n   maxpos /= maxpos.w;\n   float incr = step/subsamples;\n   vec2 tpos = startp.xy/2.0+0.5;\n   float depth = texture(depthmap, tpos).r;\n   vec4 direction = maxpos-pos;\n   for( i = 0.0; i <= maxsteps; i++) {\n      vec4 pt = (pos+(i/maxsteps)*direction);\n      vec4 ppt = projectionMatrix*pt;\n      float ptdepth = ppt.z/ppt.w;\n      ptdepth = ((gl_DepthRange.diff * ptdepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;\n      if(ptdepth > depth) break;\n      pt = textmat*pt;\n      if(pt.x >= -0.01 && pt.y >= -0.01 && pt.z >= -0.01 && pt.x <= 1.01 && pt.y <= 1.01 && pt.z <= 1.01) {\n         seengood = true;\n      } else if(seengood) {\n         break;\n      }\n      float val = texture(data, pt.zyx).r;\n      if(isinf(val)) continue;\n      float cval = (val-transfermin)/(transfermax-transfermin);\n      vec4 val_color = texture(colormap, vec2(cval,0.5));\n      color.rgb = color.rgb*color.a + (1.0-color.a)*val_color.a*val_color.rgb;\n      color.a += (1.0 - color.a) * val_color.a; \n      if(color.a > 0.0) color.rgb /= color.a;\n    }\n}",
vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nin vec3 position;\nout vec4 mvPosition;\nvoid main() {\n    mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    gl_Position = projectionMatrix*mvPosition;\n}",uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},data:{type:"i",value:3},colormap:{type:"i",value:4},depthmap:{type:"i",value:5},step:{type:"f",
value:1},maxdepth:{type:"f",value:100},subsamples:{type:"f",value:5},textmat:{type:"mat4",value:[]},projinv:{type:"mat4",value:[]},transfermin:{type:"f",value:-.2},transfermax:{type:"f",value:.2}}},screen:{fragmentShader:"uniform sampler2D colormap;\nvarying highp vec2 vTexCoords;\nuniform vec2 dimensions;\n//DEFINEFRAGCOLOR\nvoid main (void) {\n   gl_FragColor = texture2D(colormap, vTexCoords);\n}",vertexShader:"attribute vec2 vertexPosition;\nvarying highp vec2 vTexCoords;\nconst vec2 scale = vec2(0.5, 0.5);\nvoid main() {\n   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range\n   gl_Position = vec4(vertexPosition, 0.0, 1.0);\n}",
uniforms:{}},screenaa:{fragmentShader:"uniform sampler2D colormap;\nvarying highp vec2 vTexCoords;\nuniform vec2 dimensions;\n// Basic FXAA implementation based on the code on geeks3d.com \n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#define FXAA_SPAN_MAX     8.0\nvec4 applyFXAA(vec2 fragCoord, sampler2D tex)\n{\n    vec4 color;\n    vec2 inverseVP = vec2(1.0 / dimensions.x, 1.0 / dimensions.y);\n    vec3 rgbNW = texture2D(tex, fragCoord + vec2(-1.0, -1.0) * inverseVP).xyz;\n    vec3 rgbNE = texture2D(tex, fragCoord + vec2(1.0, -1.0) * inverseVP).xyz;\n    vec3 rgbSW = texture2D(tex, fragCoord + vec2(-1.0, 1.0) * inverseVP).xyz;\n    vec3 rgbSE = texture2D(tex, fragCoord + vec2(1.0, 1.0) * inverseVP).xyz;\n    vec3 rgbM  = texture2D(tex, fragCoord  * inverseVP).xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                        (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n            max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n            dir * rcpDirMin)) * inverseVP;\n    vec3 rgbA = 0.5 * (\n        texture2D(tex, fragCoord + dir * (1.0 / 3.0 - 0.5)).xyz +\n        texture2D(tex, fragCoord  + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n        texture2D(tex, fragCoord  + dir * -0.5).xyz +\n        texture2D(tex, fragCoord  + dir * 0.5).xyz);\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, 1.0);\n    else\n        color = vec4(rgbB, 1.0);\n    return color;\n}\n//DEFINEFRAGCOLOR\nvoid main (void) {\n   gl_FragColor = applyFXAA(vTexCoords, colormap);\n}",
vertexShader:"attribute vec2 vertexPosition;\nvarying highp vec2 vTexCoords;\nconst vec2 scale = vec2(0.5, 0.5);\nvoid main() {\n   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range\n   gl_Position = vec4(vertexPosition, 0.0, 1.0);\n}",uniforms:{}}};"undefined"==typeof console&&(console={log:function(){}});a.ProteinSurface=function(){var b,c,d=0,h=0,n=0,g=2,p=0,q=0,x=0,A=0,v=null,B=null,e=null,k=0,z=0,l=0,u=0,C=0,w=0,J={H:1.2,Li:1.82,Na:2.27,K:2.75,C:1.7,N:1.55,
O:1.52,F:1.47,P:1.8,S:1.8,CL:1.75,BR:1.85,SE:1.9,ZN:1.39,CU:1.4,NI:1.63,X:2},G={},m={},f=[new Int32Array([1,0,0]),new Int32Array([-1,0,0]),new Int32Array([0,1,0]),new Int32Array([0,-1,0]),new Int32Array([0,0,1]),new Int32Array([0,0,-1]),new Int32Array([1,1,0]),new Int32Array([1,-1,0]),new Int32Array([-1,1,0]),new Int32Array([-1,-1,0]),new Int32Array([1,0,1]),new Int32Array([1,0,-1]),new Int32Array([-1,0,1]),new Int32Array([-1,0,-1]),new Int32Array([0,1,1]),new Int32Array([0,1,-1]),new Int32Array([0,
-1,1]),new Int32Array([0,-1,-1]),new Int32Array([1,1,1]),new Int32Array([1,1,-1]),new Int32Array([1,-1,1]),new Int32Array([-1,1,1]),new Int32Array([1,-1,-1]),new Int32Array([-1,-1,1]),new Int32Array([-1,1,-1]),new Int32Array([-1,-1,-1])];this.getFacesAndVertices=function(a){for(var f={},k=0,m=a.length;k<m;k++)f[a[k]]=!0;a=c;k=0;for(m=a.length;k<m;k++)a[k].x=a[k].x/g-d,a[k].y=a[k].y/g-h,a[k].z=a[k].z/g-n;k=[];m=0;for(var l=b.length;m<l;m+=3){var w=b[m],u=b[m+1],z=b[m+2],q=a[u].atomid,C=a[z].atomid,
p=a[w].atomid;q<p&&(p=q);C<p&&(p=C);f[p]&&w!==u&&u!==z&&w!==z&&(k.push(w),k.push(u),k.push(z))}return v=null,B=null,e=null,{vertices:a,faces:k}};this.initparm=function(b,a,c){1E6<c&&(g=1);c=1/g*5.5;k=b[0][0];u=b[1][0];z=b[0][1];C=b[1][1];l=b[0][2];w=b[1][2];a?(k-=1.4+c,z-=1.4+c,l-=1.4+c,u+=1.4+c,C+=1.4+c,w+=1.4+c):(k-=c,z-=c,l-=c,u+=c,C+=c,w+=c);k=Math.floor(k*g)/g;z=Math.floor(z*g)/g;l=Math.floor(l*g)/g;u=Math.ceil(u*g)/g;C=Math.ceil(C*g)/g;w=Math.ceil(w*g)/g;d=-k;h=-z;n=-l;x=Math.ceil(g*(u-k))+
1;q=Math.ceil(g*(C-z))+1;p=Math.ceil(g*(w-l))+1;this.boundingatom(a);A=1.4*g;v=new Uint8Array(x*q*p);B=new Float64Array(x*q*p);e=new Int32Array(x*q*p)};this.boundingatom=function(b){var a,c,e=[],d;for(d in J)if(J.hasOwnProperty(d)){var f=J[d];e[d]=b?(f+1.4)*g+.5:f*g+.5;f=e[d]*e[d];m[d]=Math.floor(e[d])+1;G[d]=new Int32Array(m[d]*m[d]);for(var k=0,l=0;l<m[d];l++)for(var h=0;h<m[d];h++)(a=l*l+h*h)>f?G[d][k]=-1:(c=Math.sqrt(f-a),G[d][k]=Math.floor(c)),k++}};this.fillvoxels=function(b,a){for(var c=0,
d=v.length;c<d;c++)v[c]=0,B[c]=-1,e[c]=-1;for(var f in a)c=b[a[f]],void 0!==c&&this.fillAtom(c,b);b=0;for(a=v.length;b<a;b++)1&v[b]&&(v[b]|=2)};this.fillAtom=function(b,a){var c,f,k,l,w,u,z,C,N,M,O,I,H;var K=Math.floor(.5+g*(b.x+d));var da=Math.floor(.5+g*(b.y+h));var A=Math.floor(.5+g*(b.z+n));var B=b.elem&&void 0!==J[b.elem]?b.elem:"X",t=0,T=q*p;var U=0;for(H=m[B];U<H;U++)for(w=0;w<H;w++){if(-1!=G[B][t])for(M=-1;2>M;M++)for(O=-1;2>O;O++)for(I=-1;2>I;I++)if(0!==M&&0!==O&&0!==I){var D=M*U;var E=I*
w;for(u=0;u<=G[B][t];u++)if(C=da+(l=u*O),N=A+E,!(0>(z=K+D)||0>C||0>N||z>=x||C>=q||N>=p)){var V=z*T+C*p+N;if(1&v[V]){var ha=a[e[V]];ha.serial!=b.serial&&D*D+l*l+E*E<(c=K+D-Math.floor(.5+g*(ha.x+d)))*c+(f=da+l-Math.floor(.5+g*(ha.y+h)))*f+(k=A+E-Math.floor(.5+g*(ha.z+n)))*k&&(e[V]=b.serial)}else v[V]|=1,e[V]=b.serial}}t++}};this.fillvoxelswaals=function(b,a){for(var c=0,e=v.length;c<e;c++)v[c]&=-3;for(var d in a)c=b[a[d]],void 0!==c&&this.fillAtomWaals(c,b)};this.fillAtomWaals=function(b,a){var c,f,
k,l,w,u,z,C,N,M,O,I,H,K=0;var da=Math.floor(.5+g*(b.x+d));var A=Math.floor(.5+g*(b.y+h));var B=Math.floor(.5+g*(b.z+n));var t=b.elem&&void 0!==J[b.elem]?b.elem:"X",T=q*p;var U=0;for(H=m[t];U<H;U++)for(C=0;C<H;C++){if(-1!=G[t][K])for(M=-1;2>M;M++)for(O=-1;2>O;O++)for(I=-1;2>I;I++)if(0!==M&&0!==O&&0!==I){var D=M*U;var E=I*C;for(N=0;N<=G[t][K];N++)if(u=A+(l=N*O),z=B+E,!(0>(w=da+D)||0>u||0>z||w>=x||u>=q||z>=p)){var V=w*T+u*p+z;if(2&v[V]){var ha=a[e[V]];ha.serial!=b.serial&&D*D+l*l+E*E<(c=da+D-Math.floor(.5+
g*(ha.x+d)))*c+(f=A+l-Math.floor(.5+g*(ha.y+h)))*f+(k=B+E-Math.floor(.5+g*(ha.z+n)))*k&&(e[V]=b.serial)}else v[V]|=2,e[V]=b.serial}}K++}};this.buildboundary=function(){for(var b=q*p,a=0;a<x;a++)for(var c=0;c<p;c++)for(var e=0;e<q;e++){var d=a*b+e*p+c;if(1&v[d])for(var k=0;26>k;){var m=a+f[k][0],l=c+f[k][2],h=e+f[k][1];if(-1<m&&m<x&&-1<h&&h<q&&-1<l&&l<p&&!(1&v[m*b+h*p+l])){v[d]|=4;break}k++}}};var N=function(b,a,c){var e=new Int32Array(b*a*c*3);this.set=function(b,d,f,k){b=3*((b*a+d)*c+f);e[b]=k.ix;
e[b+1]=k.iy;e[b+2]=k.iz};this.get=function(b,d,f){b=3*((b*a+d)*c+f);return{ix:e[b],iy:e[b+1],iz:e[b+2]}}};this.fastdistancemap=function(){var b,a,c,e,d=new N(x,q,p),f=q*p,k=A*A,m=[];for(b=0;b<x;b++)for(a=0;a<q;a++)for(c=0;c<p;c++)if(v[e=b*f+a*p+c]&=-3,1&v[e]&&4&v[e]){var l={ix:b,iy:a,iz:c};d.set(b,a,c,l);m.push(l);B[e]=0;v[e]|=2;v[e]&=-5}do for(c=this.fastoneshell(m,d),m=[],b=0,a=c.length;b<a;b++)e=f*c[b].ix+p*c[b].iy+c[b].iz,v[e]&=-5,B[e]<=1.0404*k&&m.push({ix:c[b].ix,iy:c[b].iy,iz:c[b].iz});while(0!==
m.length);b=g-.5;0>b&&(b=0);k-=.5/(.1+b);for(b=0;b<x;b++)for(a=0;a<q;a++)for(c=0;c<p;c++)v[e=b*f+a*p+c]&=-5,1&v[e]&&(2&v[e]&&!(2&v[e]&&B[e]>=k)||(v[e]|=4))};this.fastoneshell=function(b,a){var c,e,d,k,m,l,h,g=[];if(0===b.length)return g;var w=q*p;var u=0;for(m=b.length;u<m;u++){var z=b[u].ix;var C=b[u].iy;var n=b[u].iz;var J=a.get(z,C,n);for(k=0;6>k;k++){var N=z+f[k][0];var G=C+f[k][1];var M=n+f[k][2];N<x&&-1<N&&G<q&&-1<G&&M<p&&-1<M&&(h=N*w+p*G+M,1&v[h]&&!(2&v[h])?(a.set(N,G,n+f[k][2],J),l=(c=N-J.ix)*
c+(e=G-J.iy)*e+(d=M-J.iz)*d,B[h]=l,v[h]|=2,v[h]|=4,g.push({ix:N,iy:G,iz:M})):1&v[h]&&2&v[h]&&(l=(c=N-J.ix)*c+(e=G-J.iy)*e+(d=M-J.iz)*d)<B[h]&&(a.set(N,G,M,J),B[h]=l,4&v[h]||(v[h]|=4,g.push({ix:N,iy:G,iz:M}))))}}u=0;for(m=b.length;u<m;u++)for(z=b[u].ix,C=b[u].iy,n=b[u].iz,J=a.get(z,C,n),k=6;18>k;k++)N=z+f[k][0],G=C+f[k][1],M=n+f[k][2],N<x&&-1<N&&G<q&&-1<G&&M<p&&-1<M&&(h=N*w+p*G+M,1&v[h]&&!(2&v[h])?(a.set(N,G,n+f[k][2],J),l=(c=N-J.ix)*c+(e=G-J.iy)*e+(d=M-J.iz)*d,B[h]=l,v[h]|=2,v[h]|=4,g.push({ix:N,
iy:G,iz:M})):1&v[h]&&2&v[h]&&(l=(c=N-J.ix)*c+(e=G-J.iy)*e+(d=M-J.iz)*d)<B[h]&&(a.set(N,G,M,J),B[h]=l,4&v[h]||(v[h]|=4,g.push({ix:N,iy:G,iz:M}))));u=0;for(m=b.length;u<m;u++)for(z=b[u].ix,C=b[u].iy,n=b[u].iz,J=a.get(z,C,n),k=18;26>k;k++)N=z+f[k][0],G=C+f[k][1],M=n+f[k][2],N<x&&-1<N&&G<q&&-1<G&&M<p&&-1<M&&(h=N*w+p*G+M,1&v[h]&&!(2&v[h])?(a.set(N,G,n+f[k][2],J),l=(c=N-J.ix)*c+(e=G-J.iy)*e+(d=M-J.iz)*d,B[h]=l,v[h]|=2,v[h]|=4,g.push({ix:N,iy:G,iz:M})):1&v[h]&&2&v[h]&&(l=(c=N-J.ix)*c+(e=G-J.iy)*e+(d=M-J.iz)*
d)<B[h]&&(a.set(N,G,M,J),B[h]=l,4&v[h]||(v[h]|=4,g.push({ix:N,iy:G,iz:M}))));return g};this.marchingcubeinit=function(b){for(var a=0,c=v.length;a<c;a++)1==b?v[a]&=-5:4==b?(v[a]&=-3,4&v[a]&&(v[a]|=2),v[a]&=-5):2==b?4&v[a]&&2&v[a]?v[a]&=-5:4&v[a]&&!(2&v[a])&&(v[a]|=2):3==b&&(v[a]&=-5)};this.marchingcube=function(d){this.marchingcubeinit(d);c=[];b=[];a.MarchingCube.march(v,c,b,{smooth:1,nX:x,nY:q,nZ:p});d=q*p;for(var f=0,k=c.length;f<k;f++)c[f].atomid=e[c[f].x*d+p*c[f].y+c[f].z];a.MarchingCube.laplacianSmooth(1,
c,b)}};a.autoload=function(b,c){var d,h,n;if(void 0!==D(".viewer_3Dmoljs")[0]&&(a.autoinit=!0),a.autoinit){b=null!=b?b:null;a.viewers={};var g=0;D(".viewer_3Dmoljs").each(function(){var p=D(this),q=[],x=[],A="";"static"==p.css("position")&&p.css("position","relative");n=null;p.data("pdb")?(q.push("https://files.rcsb.org/view/"+p.data("pdb")+".pdb"),x.push("pdb")):p.data("cid")?(x.push("sdf"),q.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+p.data("cid")+"/SDF?record_type=3d")):(p.data("href")||
p.data("url"))&&(A=p.data("href"),q.push(A),n=A.substr(A.lastIndexOf(".")+1),x.push(n));var v=p.data();for(d in v)"pdb"===d.substring(0,3)&&"pdb"!==d?(q.push("https://files.rcsb.org/view/"+v[d]+".pdb"),x.push("pdb")):"href"===d.substring(0,4)&&"href"!==d?(A=v[d],q.push(A),x.push(A.substr(A.lastIndexOf(".")+1))):"cid"===d.substring(0,3)&&"cid"!==d&&(q.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+v[d]+"/SDF?record_type=3d"),x.push("sdf"));var B={};p.data("options")&&(B=a.specStringToObject(p.data("options")));
v=a.CC.color(p.data("backgroundcolor"));var e={line:{}};p.data("style")&&(e=a.specStringToObject(p.data("style")));var k={};p.data("select")&&(k=a.specStringToObject(p.data("select")));var z=[],l=[],u=[],C={},w=p.data(),J=/style(.+)/,G=/surface(.*)/,m=/labelres(.*)/,f=[];for(h in w)Object.prototype.hasOwnProperty.call(w,h)&&f.push(h);f.sort();for(d=0;d<f.length;d++){h=f[d];var N=J.exec(h),M,da,X;N&&(M="select"+N[1],da=a.specStringToObject(w[M]),X=a.specStringToObject(w[h]),z.push([da,X]));(N=G.exec(h))&&
(M="select"+N[1],da=a.specStringToObject(w[M]),X=a.specStringToObject(w[h]),l.push([da,X]));(N=m.exec(h))&&(M="select"+N[1],da=a.specStringToObject(w[M]),X=a.specStringToObject(w[h]),u.push([da,X]));"zoomto"==h&&(C=a.specStringToObject(w[h]))}var t=function(b){b.setStyle(k,e);for(d=0;d<z.length;d++){var c=z[d][0]||{};var f=z[d][1]||{line:{}};b.setStyle(c,f)}for(d=0;d<l.length;d++)c=l[d][0]||{},f=l[d][1]||{},b.addSurface(a.SurfaceType.VDW,f,c,c);for(d=0;d<u.length;d++)c=u[d][0]||{},f=u[d][1]||{},b.addResLabels(c,
f);b.zoomTo(C);b.render()},F=b;try{if(null==F){var Ba=p.data("config")||{};Ba.defaultcolors=Ba.defaultcolors||a.rasmolElementColors;F=a.viewers[this.id||g++]=a.createViewer(p,Ba)}F.setBackgroundColor(v)}catch(P){console.log(P),window.location="http://get.webgl.org"}if(0!=q.length){d=0;var Z=function(b){A=q[d];var a=p.data("type")||p.data("datatype")||x[d];if(F.addModel(b,a,B),d+=1,d<q.length)D.get(q[d],Z,"text");else{if(t(F),p.data("callback"))b=eval(p.data("callback")),"function"==typeof b&&b(F);
c&&c(F)}};D.get(q[0],Z,"text")}else{p.data("element")&&(M=D("#"+p.data("element")).val()||"",(n=p.data("type")||p.data("datatype"))||(console.log("Warning: No type specified for embedded viewer with moldata from "+p.data("element")+"\n assuming type 'pdb'"),n="pdb"),F.addModel(M,n,B));if(t(F),p.data("callback"))M=eval(p.data("callback")),"function"==typeof M&&M(F);c&&c(F)}})}};D(document).ready(function(){a.autoload()});var ra=a.htmlColors={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,
azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,
darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,
ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,
mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,
peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,
wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};a.CC={cache:{0:new a.Color(0)},color:function d(c){if(!c)return this.cache[0];if(void 0!==this.cache[c])return this.cache[c];if(c&&c.constructor===Array)return c.map(d,this);if("number"==typeof(c=this.getHex(c))){var h=new a.Color(c);return this.cache[c]=h,h}return c},getHex:function(a){return isNaN(parseInt(a))?"string"==typeof a?(4==(a=a.trim()).length&&"#"==a[0]&&(a="#"+a[1]+a[1]+a[2]+a[2]+a[3]+a[3]),7==a.length&&
"#"==a[0]?parseInt(a.substring(1),16):ra[a.toLowerCase()]||0):a:parseInt(a)}};a.CC=a.CC;a.CC.color=a.CC.color;a.ssColors=a.ssColors||{};a.ssColors.pyMol={h:16711680,s:16776960,c:65280};a.ssColors.Jmol={h:16711808,s:16762880,c:16777215};a.elementColors=a.elementColors||{};a.elementColors.defaultColor=16716947;a.elementColors.Jmol={H:16777215,He:14286847,HE:14286847,Li:13402367,LI:13402367,Be:12779264,BE:12779264,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,Ne:11789301,NE:11789301,Na:11230450,
NA:11230450,Mg:9109248,MG:9109248,Al:12560038,AL:12560038,Si:1578E4,SI:1578E4,P:16744448,S:16777008,Cl:2093087,CL:2093087,Ar:8442339,AR:8442339,K:9388244,Ca:4062976,CA:4062976,Sc:15132390,SC:15132390,Ti:12567239,TI:12567239,V:10921643,Cr:9083335,CR:9083335,Mn:10255047,MN:10255047,Fe:14706227,FE:14706227,Co:15765664,CO:15765664,Ni:5296208,NI:5296208,Cu:13140019,CU:13140019,Zn:8224944,ZN:8224944,Ga:12750735,GA:12750735,Ge:6721423,GE:6721423,As:12419299,AS:12419299,Se:16752896,SE:16752896,Br:10889513,
BR:10889513,Kr:6076625,KR:6076625,Rb:7351984,RB:7351984,Sr:65280,SR:65280,Y:9764863,Zr:9756896,ZR:9756896,Nb:7586505,NB:7586505,Mo:5551541,MO:5551541,Tc:3907230,TC:3907230,Ru:2396047,RU:2396047,Rh:687500,RH:687500,Pd:27013,PD:27013,Ag:12632256,AG:12632256,Cd:16767375,CD:16767375,In:10909043,IN:10909043,Sn:6717568,SN:6717568,Sb:10380213,SB:10380213,Te:13924864,TE:13924864,I:9699476,Xe:4366E3,XE:4366E3,Cs:5707663,CS:5707663,Ba:51456,BA:51456,La:7394559,LA:7394559,Ce:16777159,CE:16777159,Pr:14286791,
PR:14286791,Nd:13107143,ND:13107143,Pm:10747847,PM:10747847,Sm:9437127,SM:9437127,Eu:6422471,EU:6422471,Gd:4587463,GD:4587463,Tb:3211207,TB:3211207,Dy:2097095,DY:2097095,Ho:65436,HO:65436,Er:58997,ER:58997,Tm:54354,TM:54354,Yb:48952,YB:48952,Lu:43812,LU:43812,Hf:5096191,HF:5096191,Ta:5089023,TA:5089023,W:2200790,Re:2522539,RE:2522539,Os:2516630,OS:2516630,Ir:1528967,IR:1528967,Pt:13684960,PT:13684960,Au:16765219,AU:16765219,Hg:12105936,HG:12105936,Tl:10900557,TL:10900557,Pb:5724513,PB:5724513,Bi:10375093,
BI:10375093,Po:11230208,PO:11230208,At:7688005,AT:7688005,Rn:4358806,RN:4358806,Fr:4325478,FR:4325478,Ra:32E3,RA:32E3,Ac:7384058,AC:7384058,Th:47871,TH:47871,Pa:41471,PA:41471,U:36863,Np:33023,NP:33023,Pu:27647,PU:27647,Am:5528818,AM:5528818,Cm:7888099,CM:7888099,Bk:9064419,BK:9064419,Cf:10565332,CF:10565332,Es:11739092,ES:11739092,Fm:11739066,FM:11739066,Md:11734438,MD:11734438,No:12389767,NO:12389767,Lr:13041766,LR:13041766,Rf:13369433,RF:13369433,Db:13697103,DB:13697103,Sg:14221381,SG:14221381,
Bh:14680120,BH:14680120,Hs:15073326,HS:15073326,Mt:15400998,MT:15400998};a.elementColors.rasmol={H:16777215,He:16761035,HE:16761035,Li:11674146,LI:11674146,B:65280,C:13158600,N:9408511,O:15728640,F:14329120,Na:255,NA:255,Mg:2263842,MG:2263842,Al:8421520,AL:8421520,Si:14329120,SI:14329120,P:16753920,S:16762930,Cl:65280,CL:65280,Ca:8421520,CA:8421520,Ti:8421520,TI:8421520,Cr:8421520,CR:8421520,Mn:8421520,MN:8421520,Fe:16753920,FE:16753920,Ni:10824234,NI:10824234,Cu:10824234,CU:10824234,Zn:10824234,
ZN:10824234,Br:10824234,BR:10824234,Ag:8421520,AG:8421520,I:10494192,Ba:16753920,BA:16753920,Au:14329120,AU:14329120};a.elementColors.defaultColors=a.elementColors.rasmol;a.elementColors.greenCarbon=D.extend({},a.elementColors.defaultColors);a.elementColors.greenCarbon.C=65280;a.elementColors.cyanCarbon=D.extend({},a.elementColors.defaultColors);a.elementColors.cyanCarbon.C=65535;a.elementColors.magentaCarbon=D.extend({},a.elementColors.defaultColors);a.elementColors.magentaCarbon.C=16711935;a.elementColors.yellowCarbon=
D.extend({},a.elementColors.defaultColors);a.elementColors.yellowCarbon.C=16776960;a.elementColors.whiteCarbon=D.extend({},a.elementColors.defaultColors);a.elementColors.whiteCarbon.C=16777215;a.elementColors.orangeCarbon=D.extend({},a.elementColors.defaultColors);a.elementColors.orangeCarbon.C=16753920;a.elementColors.purpleCarbon=D.extend({},a.elementColors.defaultColors);a.elementColors.purpleCarbon.C=8388736;a.elementColors.blueCarbon=D.extend({},a.elementColors.defaultColors);a.elementColors.blueCarbon.C=
255;a.residues={};a.residues.amino={ALA:13158600,ARG:1334015,ASN:56540,ASP:15075850,CYS:15132160,GLN:56540,GLU:15075850,GLY:15461355,HIS:8553170,ILE:1016335,LEU:1016335,LYS:1334015,MET:15132160,PHE:3289770,PRO:14456450,SER:16422400,THR:16422400,TRP:11819700,TYR:3289770,VAL:1016335,ASX:16738740,GLX:16738740};a.residues.shapely={ALA:9240460,ARG:124,ASN:16743536,ASP:10485826,CYS:16777072,GLN:16731212,GLU:6684672,GLY:16777215,HIS:7368959,ILE:19456,LEU:4546117,LYS:4671416,MET:12099650,PHE:5459026,PRO:5395026,
SER:16740418,THR:12078080,TRP:5195264,TYR:9203788,VAL:16747775,ASX:16711935,GLX:16711935};a.residues.nucleic={A:10526975,G:16740464,I:8454143,C:16747595,T:10551200,U:16744576};a.chains={};a.chains.atom={A:12636415,B:11599792,C:16761032,D:16777088,E:16761087,F:11596016,G:16765040,H:15761536,I:16113331,J:49151,K:13458524,L:6737322,M:10145074,N:15631086,O:52945,P:65407,Q:3978097,R:139,S:12433259,T:25600,U:8388608,V:8421376,W:8388736,X:32896,Y:12092939,Z:11674146};a.chains.hetatm={A:9478351,B:8441752,
C:13602992,D:13619056,E:13603023,F:8437952,G:13607008,H:12603504,I:12955267,J:42959,K:11881548,L:5682578,M:9090346,N:12481214,O:46753,P:53103,Q:3447649,R:187,S:10854235,T:37888,U:11534336,V:11579392,W:11534512,X:45232,Y:15250963,Z:12726834};a.builtinColorSchemes={ssPyMol:{prop:"ss",map:a.ssColors.pyMol},ssJmol:{prop:"ss",map:a.ssColors.Jmol},Jmol:{prop:"elem",map:a.elementColors.Jmol},greenCarbon:{prop:"elem",map:a.elementColors.greenCarbon},default:{prop:"elem",map:a.elementColors.defaultColors},
amino:{prop:"resn",map:a.residues.amino},shapely:{prop:"resn",map:a.residues.shapely},nucleic:{prop:"resn",map:a.residues.nucleic},chain:{prop:"chain",map:a.chains.atom},chainHetatm:{prop:"chain",map:a.chains.hetatm}};a.getColorFromStyle=function(c,d){var h=d.colorscheme;if(void 0!==a.builtinColorSchemes[h])h=a.builtinColorSchemes[h];else if("string"==typeof h&&h.endsWith("Carbon")){var n=h.substring(0,h.lastIndexOf("Carbon")).toLowerCase();if(void 0!==ra[n]){var g=D.extend({},a.elementColors.defaultColors);
g.C=ra[n];a.builtinColorSchemes[h]={prop:"elem",map:g};h=a.builtinColorSchemes[h]}}var p;n=c.color;if(void 0!==d.color&&"spectrum"!=d.color&&(n=d.color),void 0!==h)if(void 0!==a.elementColors[h])void 0!==(h=a.elementColors[h])[c[h.prop]]&&(n=h.map[c[h.prop]]);else if(void 0!==h[c[h.prop]])n=h.map[c[h.prop]];else if(void 0!==h.prop&&void 0!==h.gradient){var q=h.prop;d=h.gradient;void 0!==a.Gradient.builtinGradients[d]&&(d=new a.Gradient.builtinGradients[d](h.min,h.max,h.mid));h=d.range()||[-1,1];null!=
(p=a.getAtomProperty(c,q))&&(n=d.valueToHex(p,h))}else void 0!==h.prop&&void 0!==h.map?(q=h.prop,p=a.getAtomProperty(c,q),void 0!==h.map[p]&&(n=h.map[p])):void 0!==d.colorscheme[c.elem]?n=d.colorscheme[c.elem]:console.log("Could not interpret colorscheme "+h);else void 0!==d.colorfunc&&(n=d.colorfunc(c));return a.CC.color(n)};a=a||{};a.subdivide_spline=function(c,d){var h,n,g,p,q,x=[],A;(A=[]).push(c[0]);var v=1;for(h=c.length-1;v<h;v++)if(g=c[v],p=c[v+1],g.smoothen){var B=new a.Vector3((g.x+p.x)/
2,(g.y+p.y)/2,(g.z+p.z)/2);B.atom=g.atom;A.push(B)}else A.push(g);A.push(c[c.length-1]);v=-1;for(c=A.length;v<=c-3;v++)if(n=A[-1===v?0:v],g=A[v+1],p=A[v+2],q=A[v===c-3?c-1:v+3],h=(new a.Vector3).subVectors(p,n).multiplyScalar(.5),B=(new a.Vector3).subVectors(q,g).multiplyScalar(.5),!p.skip)for(var e=0;e<d;e++){var k=1/d*e;k=new a.Vector3(g.x+k*h.x+k*k*(-3*g.x+3*p.x-2*h.x-B.x)+k*k*k*(2*g.x-2*p.x+h.x+B.x),g.y+k*h.y+k*k*(-3*g.y+3*p.y-2*h.y-B.y)+k*k*k*(2*g.y-2*p.y+h.y+B.y),g.z+k*h.z+k*k*(-3*g.z+3*p.z-
2*h.z-B.z)+k*k*k*(2*g.z-2*p.z+h.z+B.z));k.atom=e<d/2?g.atom:p.atom;x.push(k)}return x.push(A[A.length-1]),x};a.drawCartoon=function(){var c=function(c,e,d,h){for(var k,g,z,w,q=0,p=e.length;q<p;q++){w=Math.round(q*(h.length-1)/p);z=a.CC.color(h[w]);w=c.updateGeoGroup(2);var m=w.vertexArray,f=w.colorArray,n=w.faceArray;m[g=3*(k=w.vertices)]=e[q].x;m[g+1]=e[q].y;m[g+2]=e[q].z;m[g+3]=d[q].x;m[g+4]=d[q].y;m[g+5]=d[q].z;for(m=0;6>m;++m)f[g+3*m]=z.r,f[g+1+3*m]=z.g,f[g+2+3*m]=z.b;0<q&&(k=[k,k+1,k-1,k-2],
g=w.faceidx,n[g]=k[0],n[g+1]=k[1],n[g+2]=k[3],n[g+3]=k[1],n[g+4]=k[2],n[g+5]=k[3],w.faceidx+=6);w.vertices+=2}},d=function(c,e,d,h,l){0!==e.length&&(e=new a.Geometry,d=new a.LineBasicMaterial({linewidth:d}),d.vertexColors=!0,d=new a.Line(e,d),d.type=a.LineStrip,c.add(d))},h=function(d,e,k,h,l,g,q){q&&"default"!==q||(q="rectangle");"edged"===q?function(e,d,k,m,f,l){if(!(2>d.length)){var h,g;if(h=d[0],g=d[d.length-1],h=a.subdivide_spline(h,m),g=a.subdivide_spline(g,m),!f)return c(e,h,g,k);var z,w,u,
q,C,p,n,N,J,x,O,I,H,G;m=[];var v=[[0,2,-6,-8],[-4,-2,6,4],[7,-1,-5,3],[-3,5,1,-7]];d=0;for(x=h.length;d<x;d++){if(N=Math.round(d*(k.length-1)/x),n=a.CC.color(k[N]),m.push(z=h[d]),m.push(z),m.push(w=g[d]),m.push(w),d<x-1){var A=h[d+1].clone().sub(h[d]);A=g[d].clone().sub(h[d]).cross(A).normalize().multiplyScalar(f)}m.push(u=h[d].clone().add(A));m.push(u);m.push(q=g[d].clone().add(A));m.push(q);void 0!==z.atom&&(J=z.atom);var B=(G=e.updateGeoGroup(8)).vertexArray;var t=G.colorArray;var T=G.faceArray;
B[C=3*(l=G.vertices)]=z.x;B[C+1]=z.y;B[C+2]=z.z;B[C+3]=z.x;B[C+4]=z.y;B[C+5]=z.z;B[C+6]=w.x;B[C+7]=w.y;B[C+8]=w.z;B[C+9]=w.x;B[C+10]=w.y;B[C+11]=w.z;B[C+12]=u.x;B[C+13]=u.y;B[C+14]=u.z;B[C+15]=u.x;B[C+16]=u.y;B[C+17]=u.z;B[C+18]=q.x;B[C+19]=q.y;B[C+20]=q.z;B[C+21]=q.x;B[C+22]=q.y;B[C+23]=q.z;for(B=0;8>B;++B)t[C+3*B]=n.r,t[C+1+3*B]=n.g,t[C+2+3*B]=n.b;if(0<d)for(C=void 0!==ha&&void 0!==J&&ha.serial!==J.serial,B=0;4>B;B++){var U=[l+v[B][0],l+v[B][1],l+v[B][2],l+v[B][3]];if(T[p=G.faceidx]=U[0],T[p+1]=
U[1],T[p+2]=U[3],T[p+3]=U[1],T[p+4]=U[2],T[p+5]=U[3],G.faceidx+=6,J.clickable||ha.clickable||J.hoverable||ha.hoverable){t=m[U[3]].clone();u=m[U[0]].clone();q=m[U[2]].clone();var D=m[U[1]].clone();if(t.atom=m[U[3]].atom||null,q.atom=m[U[2]].atom||null,u.atom=m[U[0]].atom||null,D.atom=m[U[1]].atom||null,C){U=t.clone().add(u).multiplyScalar(.5);var E=q.clone().add(D).multiplyScalar(.5),V=t.clone().add(D).multiplyScalar(.5);0==B%2?((ha.clickable||ha.hoverable)&&(O=new a.Triangle(U,V,t),I=new a.Triangle(E,
q,V),H=new a.Triangle(V,q,t),ha.intersectionShape.triangle.push(O),ha.intersectionShape.triangle.push(I),ha.intersectionShape.triangle.push(H)),(J.clickable||J.hoverable)&&(O=new a.Triangle(u,D,V),I=new a.Triangle(D,E,V),H=new a.Triangle(u,V,U),J.intersectionShape.triangle.push(O),J.intersectionShape.triangle.push(I),J.intersectionShape.triangle.push(H))):((J.clickable||J.hoverable)&&(O=new a.Triangle(U,V,t),I=new a.Triangle(E,q,V),H=new a.Triangle(V,q,t),J.intersectionShape.triangle.push(O),J.intersectionShape.triangle.push(I),
J.intersectionShape.triangle.push(H)),(ha.clickable||ha.hoverable)&&(O=new a.Triangle(u,D,V),I=new a.Triangle(D,E,V),H=new a.Triangle(u,V,U),ha.intersectionShape.triangle.push(O),ha.intersectionShape.triangle.push(I),ha.intersectionShape.triangle.push(H)))}else(J.clickable||J.hoverable)&&(O=new a.Triangle(u,D,t),I=new a.Triangle(D,q,t),J.intersectionShape.triangle.push(O),J.intersectionShape.triangle.push(I))}}G.vertices+=8;var ha=J}k=m.length-8;B=(G=e.updateGeoGroup(8)).vertexArray;t=G.colorArray;
T=G.faceArray;C=3*(l=G.vertices);p=G.faceidx;for(d=0;4>d;d++)m.push(m[2*d]),m.push(m[k+2*d]),e=m[2*d],f=m[k+2*d],B[C+6*d]=e.x,B[C+1+6*d]=e.y,B[C+2+6*d]=e.z,B[C+3+6*d]=f.x,B[C+4+6*d]=f.y,B[C+5+6*d]=f.z,t[C+6*d]=n.r,t[C+1+6*d]=n.g,t[C+2+6*d]=n.b,t[C+3+6*d]=n.r,t[C+4+6*d]=n.g,t[C+5+6*d]=n.b;O=[l,l+2,l+6,l+4];I=[l+1,l+5,l+7,l+3];T[p]=O[0];T[p+1]=O[1];T[p+2]=O[3];T[p+3]=O[1];T[p+4]=O[2];T[p+5]=O[3];T[p+6]=I[0];T[p+7]=I[1];T[p+8]=I[3];T[p+9]=I[1];T[p+10]=I[2];T[p+11]=I[3];G.faceidx+=12;G.vertices+=8}}(d,
e,k,h,l):"rectangle"!==q&&"oval"!==q&&"parabola"!==q||function(e,d,k,m,f,l,h){var g,u;if(!(2>(u=d.length)||2>d[0].length)){for(l=0;l<u;l++)d[l]=a.subdivide_spline(d[l],m);if(m=d[0].length,!f)return c(e,d[0],d[u-1],k);var z,q=[],w=[],C=[];for(g=0;g<u;g++)q.push(.25+1.5*Math.sqrt((u-1)*g-Math.pow(g,2))/(u-1)),w.push(.5),C.push(2*(Math.pow(g/u,2)-g/u)+.6);var p,n=[];for(g=0;g<2*u-1;g++)n[g]=[g,g+1,g+1-2*u,g-2*u];n[2*u-1]=[g,g+1-2*u,g+1-4*u,g-2*u];e=e.updateGeoGroup(2*u*m);for(l=0;l<m;l++){g=Math.round(l*
(k.length-1)/m);var J=a.CC.color(k[g]);var x=O;var G=I;var O=[];var I=[];var H=[];void 0!==d[0][l].atom&&(p=d[0][l].atom,"oval"===h?z=q:"rectangle"===h?z=w:"parabola"===h&&(z=C));z||(z=w);for(g=0;g<u;g++){var N=l<m-1?d[g][l+1].clone().sub(d[g][l]):d[g][l-1].clone().sub(d[g][l]).negate();var v=g<u-1?d[g+1][l].clone().sub(d[g][l]):d[g-1][l].clone().sub(d[g][l]).negate();H[g]=v.cross(N).normalize().multiplyScalar(f*z[g])}for(g=0;g<u;g++)O[g]=d[g][l].clone().add(H[g].clone().negate());for(g=0;g<u;g++)I[g]=
d[g][l].clone().add(H[g]);var B=e.vertexArray;var M=e.colorArray;N=e.faceArray;v=3*(H=e.vertices);for(g=0;g<u;g++)B[v+3*g+0]=O[g].x,B[v+3*g+1]=O[g].y,B[v+3*g+2]=O[g].z;for(g=0;g<u;g++)B[v+3*g+0+3*u]=I[u-1-g].x,B[v+3*g+1+3*u]=I[u-1-g].y,B[v+3*g+2+3*u]=I[u-1-g].z;for(g=0;g<2*u;++g)M[v+3*g+0]=J.r,M[v+3*g+1]=J.g,M[v+3*g+2]=J.b;if(0<l){for(g=0;g<2*u;g++)v=[H+n[g][0],H+n[g][1],H+n[g][2],H+n[g][3]],N[J=e.faceidx]=v[0],N[J+1]=v[1],N[J+2]=v[3],N[J+3]=v[1],N[J+4]=v[2],N[J+5]=v[3],e.faceidx+=6;if(p.clickable||
p.hoverable)for(g in J=[],J.push(new a.Triangle(x[0],O[0],O[u-1])),J.push(new a.Triangle(x[0],O[u-1],x[u-1])),J.push(new a.Triangle(x[u-1],O[u-1],I[u-1])),J.push(new a.Triangle(x[u-1],I[u-1],G[u-1])),J.push(new a.Triangle(I[0],G[0],G[u-1])),J.push(new a.Triangle(I[u-1],I[0],G[u-1])),J.push(new a.Triangle(O[0],x[0],G[0])),J.push(new a.Triangle(I[0],O[0],G[0])),J)p.intersectionShape.triangle.push(J[g])}e.vertices+=2*u;p}N=e.faceArray;H=e.vertices;for(l=0;l<u-1;l++)v=[l,l+1,2*u-2-l,2*u-1-l],N[J=e.faceidx]=
v[0],N[J+1]=v[1],N[J+2]=v[3],N[J+3]=v[1],N[J+4]=v[2],N[J+5]=v[3],e.faceidx+=6;for(l=0;l<u-1;l++)v=[H-1-l,H-2-l,H-2*u+l+1,H-2*u+l],N[J=e.faceidx]=v[0],N[J+1]=v[1],N[J+2]=v[3],N[J+3]=v[1],N[J+4]=v[2],N[J+5]=v[3],e.faceidx+=6}}(d,e,k,h,l,0,q)},n=function(a,c){if(a&&c&&a.chain===c.chain){if(a.reschain===c.reschain&&(a.resi===c.resi||a.resi===c.resi-1))return!0;if(a.resi<c.resi){var e=a.x-c.x,d=a.y-c.y;a=a.z-c.z;if(16>e*e+d*d+a*a)return!0}}return!1},g=function(c,e,d,h,l){null!=e&&0!=e.vertices&&(l&&(e.initTypedArrays(),
e.setUpNormals()),l=new a.MeshDoubleLambertMaterial,l.vertexColors=a.FaceColors,"number"==typeof d&&0<=d&&1>d&&(l.transparent=!0,l.opacity=d),l.outline=h,e=new a.Mesh(e,l),c.add(e))},p=function(c,e,d,h,l,g,q,w,p){var k,m,f;if(h&&l&&q){var u=l.sub(h);u.normalize();var z=w[p];for(p+=1;p<w.length&&(z=w[p]).atom!=q.atom;p++);if((z=z?new a.Vector3(z.x,z.y,z.z):new a.Vector3(0,0,0)).sub(h),"arrow start"===q.ss)p=z.clone().multiplyScalar(.3).cross(l),h.add(p),p=z.clone().cross(u).normalize(),u.rotateAboutVector(p,
.43);q.style.cartoon.ribbon?k=q.style.cartoon.thickness||.4:q.style.cartoon.width?k=q.style.cartoon.width:"c"===q.ss?k="P"===q.atom?.8:.5:"arrow start"===q.ss?(k=1.3,m=!0):k="arrow end"===q.ss?.5:"h"===q.ss&&q.style.cartoon.tubes||"tube start"===q.ss?.5:1.3;null!=g&&0>u.dot(g)&&u.negate();u.multiplyScalar(k);for(p=0;p<e;p++)g=2*p/(e-1)-1,(g=new a.Vector3(h.x+g*u.x,h.y+g*u.y,h.z+g*u.z)).atom=q,d&&"s"===q.ss&&(g.smoothen=!0),c[p].push(g);if(m)for(u.multiplyScalar(2),p=0;p<e;p++)g=2*p/(e-1)-1,(g=new a.Vector3(h.x+
g*u.x,h.y+g*u.y,h.z+g*u.z)).atom=q,g.smoothen=!1,g.skip=!0,c[p].push(g);return f=q.style.cartoon.style||"default",c.style?c.style!=f&&(console.log("Warning: a cartoon chain's strand-style is ambiguous"),c.style="default"):c.style=f,"arrow start"!==q.ss&&"arrow end"!==q.ss||(q.ss="s"),m}},q={C:!0,CA:!0,O:!0,P:!0,OP2:!0,O2P:!0,"O5'":!0,"O3'":!0,"C5'":!0,"C2'":!0,"O5*":!0,"O3*":!0,"C5*":!0,"C2*":!0,N1:!0,N3:!0},x={DA:!0,DG:!0,A:!0,G:!0},A={DT:!0,DC:!0,U:!0,C:!0,T:!0},v={DA:!0,DG:!0,A:!0,G:!0,DT:!0,DC:!0,
U:!0,C:!0,T:!0};return function(c,e,k,z){!function(c,e,k,z,J,G,m){var f,l,u,w,C,B,t,Ba,Z,P,E,S,R;G=G||5;m=m||5;var W=new a.Geometry(!0),O=new a.Geometry(!0),I=[],H=[],K=1,ka=!1,ca={};for(ia in a.Gradient.builtinGradients)a.Gradient.builtinGradients.hasOwnProperty(ia)&&(ca[ia]=new a.Gradient.builtinGradients[ia](k[1],k[0]));var ia=function(c,e){return k&&"spectrum"===e.color?e.colorscheme in ca?ca[e.colorscheme].valueToHex(c.resi):ca.sinebow.valueToHex(c.resi):a.getColorFromStyle(c,e).getHex()};for(C=
0;C<G;C++)H[C]=[];var aa=!1,T=!1,U=[];for(C in e){if("C"===(l=e[C]).elem&&"CA"===l.atom){var la=n(V,l);la&&"s"===l.ss?aa=!0:aa&&(V&&L&&V.style.cartoon.arrows&&L.style.cartoon.arrows&&(V.ss="arrow end",L.ss="arrow start"),aa=!1);la&&("h"===V.ss||"tube start"==V.ss)&&V.style.cartoon.tubes?!T&&"tube start"!=V.ss&&l.style.cartoon.tubes&&(l.ss="tube start",T=!0):T&&("tube start"===V.ss?V.ss="tube end":L&&L.style.cartoon.tubes&&(L.ss="tube end"),T=!1);var L=V;var V=l}l&&l.atom in q&&U.push(l)}T&&V.style.cartoon.tubes&&
(V.ss="tube end",T=!1);e=function(e){for(var f=0;!w&&f<G;f++)d(c,H[f],1,0,m);z&&0<H[0].length&&h(O,H,I,m,w,0,H.style);var k=[],l=null;if(e){for(f=0;f<G;f++)k[f]=H[f][H[f].length-1];l=I[I.length-1]}H=[];for(f=0;f<G;f++)H[f]=[];if(I=[],e){for(f=0;f<G;f++)H[f].push(k[f]);I.push(l)}g(c,O,K,ka,!0);g(c,W,K,ka,!1);O=new a.Geometry(!0);W=new a.Geometry(!0)};V=void 0;for(L=0;L<U.length;L++)if(C=(l=U[L]).resn.trim(),aa=C in v,K=1,f=l.style.cartoon,V&&V.style.cartoon&&(K=V.style.cartoon.opacity),V&&V.style.cartoon&&
V.style.cartoon.outline&&(ka=V.style.cartoon.outline),!V||!V.style.cartoon||l.style.cartoon&&V.style.cartoon.opacity==l.style.cartoon.opacity||e(V.chain==l.chain),H.length&&H[0].length>3E4/G/m/2&&e(!0),"trace"===f.style){if(!l.hetflag&&("C"===l.elem&&"CA"===l.atom||aa&&"P"===l.atom)){if(u=ia(l,f),w=D.isNumeric(f.thickness)?f.thickness:.4,n(V,l))if(u==ha){var ha=a.CC.color(u);a.GLDraw.drawCylinder(W,V,l,w,ha,2,2)}else C=(new a.Vector3).addVectors(V,l).multiplyScalar(.5),ha=a.CC.color(ha),aa=a.CC.color(u),
a.GLDraw.drawCylinder(W,V,C,w,ha,2,0),a.GLDraw.drawCylinder(W,C,l,w,aa,0,2);!0!==l.clickable&&!l.hoverable||void 0===l.intersectionShape||(V=new a.Vector3(l.x,l.y,l.z),l.intersectionShape.sphere.push(new a.Sphere(V,w)));V=l;ha=u}}else{if(l&&"C"===l.elem&&"CA"===l.atom||aa&&("P"===l.atom||0==l.atom.indexOf("O5"))){if(Y)if("tube end"===l.ss){var Y=!1;C=new a.Vector3(l.x,l.y,l.z);a.GLDraw.drawCylinder(W,R,C,2,a.CC.color(ha),1,1);l.ss="h"}else{if(V.chain==l.chain&&"tube end"!==V.ss)continue;Y=!1;V.ss=
"h";C=new a.Vector3(V.x,V.y,V.z);a.GLDraw.drawCylinder(W,R,C,2,a.CC.color(ha),1,1)}if(V&&(!n(V,l)||"tube start"===V.ss)){"tube start"===V.ss&&(Y=!0,R=new a.Vector3(V.x,V.y,V.z),V.ss="h");S&&(E=Z?(new a.Vector3).addVectors(V,Z).multiplyScalar(.5):new a.Vector3(V.x,V.y,V.z),a.GLDraw.drawCylinder(W,E,S,.4,a.CC.color(S.color),0,2),p(H,G,!J,Z,P,Ba,V,U,L),I.push(u),E=null,S=null);for(C=0;!w&&C<G;C++)d(c,H[C],1,0,m);z&&0<H[0].length&&h(O,H,I,m,w,0,H.style);H=[];for(C=0;C<G;C++)H[C]=[];I=[]}if(void 0===V||
V.rescode!=l.rescode||V.resi!=l.resi)S&&(u=(E=(new a.Vector3).addVectors(V,l).multiplyScalar(.5)).clone().sub(S).multiplyScalar(.02),E.add(u),a.GLDraw.drawCylinder(W,E,S,.4,a.CC.color(S.color),0,2),S=E=null),u=ia(l,f),I.push(u),w=D.isNumeric(f.thickness)?f.thickness:.4,V=l,(B=new a.Vector3(V.x,V.y,V.z)).resi=V.resi,ha=u;!0!==l.clickable&&!0!==l.hoverable||void 0!==l.intersectionShape&&void 0!==l.intersectionShape.triangle||(l.intersectionShape={sphere:null,cylinder:[],line:[],triangle:[]})}else V&&
"C"===V.elem&&"CA"===V.atom&&"O"===l.atom||aa&&"P"===V.atom&&("OP2"===l.atom||"O2P"===l.atom)||aa&&0==V.atom.indexOf("O5")&&0==l.atom.indexOf("C5")?((t=new a.Vector3(l.x,l.y,l.z)).resi=l.resi,"OP2"!==l.atom&&"O2P"!==l.atom||(P=new a.Vector3(l.x,l.y,l.z))):aa&&0==l.atom.indexOf("O3")?Z=new a.Vector3(l.x,l.y,l.z):("N1"===l.atom&&C in x||"N3"===l.atom&&C in A)&&((S=new a.Vector3(l.x,l.y,l.z)).color=a.getColorFromStyle(l,f).getHex());t&&B&&t.resi===B.resi&&(p(H,G,!J,B,t,Ba,V,U,L),Ba=t,B=null,t=null,I.push(u))}S&&
(E=Z?(new a.Vector3).addVectors(V,Z).multiplyScalar(.5):new a.Vector3(V.x,V.y,V.z),a.GLDraw.drawCylinder(W,E,S,.4,a.CC.color(S.color),0,2),p(H,G,!J,Z,P,Ba,V,U,L),I.push(u));e()}(c,e,k,!0,!1,z=z||5,z)}}();a=a||{};a.CAP={NONE:0,FLAT:1,ROUND:2};a.GLDraw=function(){var c,d={},h=(c=new a.Vector3,function(a){c.set(a[0],a[1],a[2]);var d,h,g,q,e;a=c.x;var k=c.y,z=c.z,l=Math.sqrt(a*a+k*k);1E-4>l?(h=0,g=1):(h=-a/l,g=k/l);k=-h*a+g*k;1E-4>(d=Math.sqrt(k*k+z*z))?(q=0,e=1):(q=z/d,e=k/d);d=new Float32Array(9);return d[0]=
g,d[1]=h,d[2]=0,d[3]=-h*e,d[4]=g*e,d[5]=q,d[6]=h*q,d[7]=-g*q,d[8]=e,d}),n=function(){var c,d=[],h=Math.pow(2,4),g,p=Math.pow(2,2),e=h/p;d[0]=new a.Vector3(-1,0,0);d[e]=new a.Vector3(0,0,1);d[2*e]=new a.Vector3(1,0,0);d[3*e]=new a.Vector3(0,0,-1);for(g=3;4>=g;g++){e=h/(p=Math.pow(2,g-1));for(c=0;c<p-1;c++)d[e/2+c*e]=d[c*e].clone().add(d[(c+1)*e]).normalize();d[e/2+(c=p-1)*e]=d[c*e].clone().add(d[0]).normalize()}return d}(),g={cache:{},getVerticesForRadius:function(c,d,h){if(void 0!==this.cache[c]&&
void 0!==this.cache[c][d+h])return this.cache[c][d+h];for(var g,q=n.length,e=[],k=[],z=0;z<q;z++)e.push(n[z].clone().multiplyScalar(c)),e.push(n[z].clone().multiplyScalar(c)),g=n[z].clone().normalize(),k.push(g),k.push(g);z=[];var l,u,C=2*Math.PI,w=Math.PI;for(u=0;10>=u;u++){var p=0===u||10===u;var G=5===u;var m=[],f=[];for(l=0;l<=q;l++)if(G){var x=l<q?2*l:0;f.push(x+1);m.push(x)}else{x=l/q;var M=u/10;if(p&&0!==l)p&&m.push(e.length-1);else if(l<q){var A=new a.Vector3;A.x=-c*Math.cos(x*C)*Math.sin(M*
w);A.y=1==d?0:c*Math.cos(M*w);A.z=c*Math.sin(x*C)*Math.sin(M*w);1E-5>Math.abs(A.x)&&(A.x=0);1E-5>Math.abs(A.y)&&(A.y=0);1E-5>Math.abs(A.z)&&(A.z=0);d==a.CAP.FLAT?(g=new a.Vector3(0,Math.cos(M*w),0)).normalize():(g=new a.Vector3(A.x,A.y,A.z)).normalize();e.push(A);k.push(g);m.push(e.length-1)}else m.push(e.length-q)}G&&z.push(f);z.push(m)}g={vertices:e,normals:k,verticesRows:z,w:q,h:10};return c in this.cache||(this.cache[c]={}),this.cache[c][d+h]=g,g}};d.drawCylinder=function(a,c,d,p,n,e,k){if(c&&
d){0;var z=k||e;n=n||{r:0,g:0,b:0};var l=[d.x,d.y,d.z];l[0]-=c.x;l[1]-=c.y;l[2]-=c.z;var u;l=h(l);var q=g.getVerticesForRadius(p,k,"to");var w=q.w,J=q.h,G=z?J*w+2:2*w;a=a.updateGeoGroup(G);var m=q.vertices,f=q.normals,v=q.verticesRows,x=v[J/2],A=v[J/2+1],B=a.vertices,t=a.vertexArray,F=a.normalArray,D=a.colorArray,Z=a.faceArray;for(u=0;u<w;++u){var P=2*u;var E=l[0]*m[P].x+l[3]*m[P].y+l[6]*m[P].z;q=l[1]*m[P].x+l[4]*m[P].y+l[7]*m[P].z;var S=l[5]*m[P].y+l[8]*m[P].z;var R=3*(B+P);P=a.faceidx;t[R]=E+c.x;
t[R+1]=q+c.y;t[R+2]=S+c.z;t[R+3]=E+d.x;t[R+4]=q+d.y;t[R+5]=S+d.z;F[R]=E;F[R+3]=E;F[R+1]=q;F[R+4]=q;F[R+2]=S;F[R+5]=S;D[R]=n.r;D[R+3]=n.r;D[R+1]=n.g;D[R+4]=n.g;D[R+2]=n.b;D[R+5]=n.b;Z[P]=A[u]+B;Z[P+1]=A[u+1]+B;Z[P+2]=x[u]+B;Z[P+3]=x[u]+B;Z[P+4]=A[u+1]+B;Z[P+5]=x[u+1]+B;a.faceidx+=6}if(z)for(z=e?J+1:J/2+1,q=k?0:J/2;q<z;q++)if(q!==J/2)for(u=q<=J/2?d:c,E=g.getVerticesForRadius(p,k,"to"),P=g.getVerticesForRadius(p,e,"from"),u===d?(m=E.vertices,f=E.normals,v=E.verticesRows):u==c&&(m=P.vertices,f=P.normals,
v=P.verticesRows),E=0;E<w;E++){P=a.faceidx;var W=3*((S=v[q][E+1])+B);var O=3*((x=v[q][E])+B);var I=3*((A=v[q+1][E])+B);var H=3*((R=v[q+1][E+1])+B);var K=l[0]*m[S].x+l[3]*m[S].y+l[6]*m[S].z;var ka=l[0]*m[x].x+l[3]*m[x].y+l[6]*m[x].z;var ca=l[0]*m[A].x+l[3]*m[A].y+l[6]*m[A].z;var ia=l[0]*m[R].x+l[3]*m[R].y+l[6]*m[R].z;var aa=l[1]*m[S].x+l[4]*m[S].y+l[7]*m[S].z;var T=l[1]*m[x].x+l[4]*m[x].y+l[7]*m[x].z;var U=l[1]*m[A].x+l[4]*m[A].y+l[7]*m[A].z;var la=l[1]*m[R].x+l[4]*m[R].y+l[7]*m[R].z;var L=l[5]*m[S].y+
l[8]*m[S].z;var V=l[5]*m[x].y+l[8]*m[x].z;var ha=l[5]*m[A].y+l[8]*m[A].z;var Y=l[5]*m[R].y+l[8]*m[R].z;t[W]=K+u.x;t[O]=ka+u.x;t[I]=ca+u.x;t[H]=ia+u.x;t[W+1]=aa+u.y;t[O+1]=T+u.y;t[I+1]=U+u.y;t[H+1]=la+u.y;t[W+2]=L+u.z;t[O+2]=V+u.z;t[I+2]=ha+u.z;t[H+2]=Y+u.z;D[W]=n.r;D[O]=n.r;D[I]=n.r;D[H]=n.r;D[W+1]=n.g;D[O+1]=n.g;D[I+1]=n.g;D[H+1]=n.g;D[W+2]=n.b;D[O+2]=n.b;D[I+2]=n.b;D[H+2]=n.b;K=l[0]*f[S].x+l[3]*f[S].y+l[6]*f[S].z;ka=l[0]*f[x].x+l[3]*f[x].y+l[6]*f[x].z;ca=l[0]*f[A].x+l[3]*f[A].y+l[6]*f[A].z;ia=l[0]*
f[R].x+l[3]*f[R].y+l[6]*f[R].z;aa=l[1]*f[S].x+l[4]*f[S].y+l[7]*f[S].z;T=l[1]*f[x].x+l[4]*f[x].y+l[7]*f[x].z;U=l[1]*f[A].x+l[4]*f[A].y+l[7]*f[A].z;la=l[1]*f[R].x+l[4]*f[R].y+l[7]*f[R].z;L=l[5]*f[S].y+l[8]*f[S].z;V=l[5]*f[x].y+l[8]*f[x].z;ha=l[5]*f[A].y+l[8]*f[A].z;Y=l[5]*f[R].y+l[8]*f[R].z;0===q?(F[W]=K,F[I]=ca,F[H]=ia,F[W+1]=aa,F[I+1]=U,F[H+1]=la,F[W+2]=L,F[I+2]=ha,F[H+2]=Y,Z[P]=S+B,Z[P+1]=A+B,Z[P+2]=R+B,a.faceidx+=3):q===z-1?(F[W]=K,F[O]=ka,F[I]=ca,F[W+1]=aa,F[O+1]=T,F[I+1]=U,F[W+2]=L,F[O+2]=V,F[I+
2]=ha,Z[P]=S+B,Z[P+1]=x+B,Z[P+2]=A+B,a.faceidx+=3):(F[W]=K,F[O]=ka,F[H]=ia,F[W+1]=aa,F[O+1]=T,F[H+1]=la,F[W+2]=L,F[O+2]=V,F[H+2]=Y,F[O]=ka,F[I]=ca,F[H]=ia,F[O+1]=T,F[I+1]=U,F[H+1]=la,F[O+2]=V,F[I+2]=ha,F[H+2]=Y,Z[P]=S+B,Z[P+1]=x+B,Z[P+2]=R+B,Z[P+3]=x+B,Z[P+4]=A+B,Z[P+5]=R+B,a.faceidx+=6)}a.vertices+=G}};d.drawCone=function(c,d,g,p,B){if(d&&g){B=B||{r:0,g:0,b:0};var e=[g.x,g.y,g.z];e.x-=d.x;e.y-=d.y;e.z-=d.z;var k=h(e),z=n.length;c=c.updateGeoGroup(z+2);var l=c.vertices,u=c.vertexArray,q=c.normalArray,
w=c.colorArray,J=c.faceArray;var G=3*l;e=(new a.Vector3(e[0],e[1],e[2])).normalize();u[G]=d.x;u[G+1]=d.y;u[G+2]=d.z;q[G]=-e.x;q[G+1]=-e.y;q[G+2]=-e.z;w[G]=B.r;w[G+1]=B.g;w[G+2]=B.b;u[G+3]=g.x;u[G+4]=g.y;u[G+5]=g.z;q[G+3]=e.x;q[G+4]=e.y;q[G+5]=e.z;w[G+3]=B.r;w[G+4]=B.g;w[G+5]=B.b;G+=6;for(g=0;g<z;++g){var m=n[g].clone();m.multiplyScalar(p);e=k[0]*m.x+k[3]*m.y+k[6]*m.z;var f=k[1]*m.x+k[4]*m.y+k[7]*m.z;m=k[5]*m.y+k[8]*m.z;u[G]=e+d.x;u[G+1]=f+d.y;u[G+2]=m+d.z;q[G]=e;q[G+1]=f;q[G+2]=m;w[G]=B.r;w[G+1]=
B.g;w[G+2]=B.b;G+=3}c.vertices+=z+2;d=c.faceidx;for(g=0;g<z;g++)p=l+2+g,B=l+2+(g+1)%z,J[d]=p,J[d+1]=B,J[d+2]=l,J[d+=3]=p,J[d+1]=B,J[d+2]=l+1,d+=3;c.faceidx+=6*z}};var p={cache:{},getVerticesForRadius:function(c){if(void 0!==this.cache[c])return this.cache[c];var d={vertices:[],verticesRows:[],normals:[]},h=16,g=10;1>c&&(h=10,g=8);var q,e,k=2*Math.PI,z=Math.PI;for(e=0;e<=g;e++){var l=[];for(q=0;q<=h;q++){var u=q/h,p=e/g,w={};w.x=-c*Math.cos(u*k)*Math.sin(p*z);w.y=c*Math.cos(p*z);w.z=c*Math.sin(u*k)*
Math.sin(p*z);u=new a.Vector3(w.x,w.y,w.z);u.normalize();d.vertices.push(w);d.normals.push(u);l.push(d.vertices.length-1)}d.verticesRows.push(l)}return this.cache[c]=d,d}};return d.drawSphere=function(a,c,d,h){var g=p.getVerticesForRadius(d),e=g.vertices,k=g.normals;a=a.updateGeoGroup(e.length);for(var z=a.vertices,l=a.vertexArray,u=a.colorArray,q=a.faceArray,w=a.lineArray,n=a.normalArray,G=0,m=e.length;G<m;++G){var f=3*(z+G),v=e[G];l[f]=v.x+c.x;l[f+1]=v.y+c.y;l[f+2]=v.z+c.z;u[f]=h.r;u[f+1]=h.g;u[f+
2]=h.b}a.vertices+=e.length;g=g.verticesRows;l=g.length-1;for(h=0;h<l;h++)for(u=g[h].length-1,c=0;c<u;c++){G=a.faceidx;m=a.lineidx;f=g[h][c+1]+z;v=3*f;var x=g[h][c]+z,A=3*x,t=g[h+1][c]+z,Q=3*t,F=g[h+1][c+1]+z,D=3*F,E=k[f-z],P=k[x-z],L=k[t-z],S=k[F-z];Math.abs(e[f-z].y)===d?(n[v]=E.x,n[Q]=L.x,n[D]=S.x,n[v+1]=E.y,n[Q+1]=L.y,n[D+1]=S.y,n[v+2]=E.z,n[Q+2]=L.z,n[D+2]=S.z,q[G]=f,q[G+1]=t,q[G+2]=F,w[m]=f,w[m+1]=t,w[m+2]=f,w[m+3]=F,w[m+4]=t,w[m+5]=F,a.faceidx+=3,a.lineidx+=6):Math.abs(e[t-z].y)===d?(n[v]=
E.x,n[A]=P.x,n[Q]=L.x,n[v+1]=E.y,n[A+1]=P.y,n[Q+1]=L.y,n[v+2]=E.z,n[A+2]=P.z,n[Q+2]=L.z,q[G]=f,q[G+1]=x,q[G+2]=t,w[m]=f,w[m+1]=x,w[m+2]=f,w[m+3]=t,w[m+4]=x,w[m+5]=t,a.faceidx+=3,a.lineidx+=6):(n[v]=E.x,n[A]=P.x,n[D]=S.x,n[v+1]=E.y,n[A+1]=P.y,n[D+1]=S.y,n[v+2]=E.z,n[A+2]=P.z,n[D+2]=S.z,n[A]=P.x,n[Q]=L.x,n[D]=S.x,n[A+1]=P.y,n[Q+1]=L.y,n[D+1]=S.y,n[A+2]=P.z,n[Q+2]=L.z,n[D+2]=S.z,q[G]=f,q[G+1]=x,q[G+2]=F,q[G+3]=x,q[G+4]=t,q[G+5]=F,w[m]=f,w[m+1]=x,w[m+2]=f,w[m+3]=F,w[m+4]=x,w[m+5]=t,w[m+6]=t,w[m+7]=F,
a.faceidx+=6,a.lineidx+=8)}},d}();a=a||{};a.GLModel=function(){function c(g,p){var q=[],n=[],A=null,v=null,B=!1,e=null,k=null,z=null,l={},u=null,C=new a.Matrix4,w=!0,J=a.elementColors.defaultColor,G=(p=p||{}).defaultcolors?p.defaultcolors:a.elementColors.defaultColors,m=p.defaultSphereRadius?p.defaultSphereRadius:1.5,f=p.cartoonQuality?p.cartoonQuality:5,t=function(a,c){var d=m;void 0!==c.radius?d=c.radius:h[a.elem]?d=h[a.elem]:1<a.elem.length&&(a=a.elem,a[1]=a[1].toLowerCase(),h[a]&&(d=h[a]));return void 0!==
c.scale&&(d*=c.scale),d},M=function(c,d,e){var f,k,l,m,h,g=new a.Vector3(c.x,c.y,c.z),u=(new a.Vector3(d.x,d.y,d.z)).clone(),z=null;u.sub(g);var n=function(c,d){for(var e=null,f=-1,n=0,w=c.bonds.length;n<w;n++)if(c.bonds[n]!=d.index){k=c.bonds[n];l=q[k];m=new a.Vector3(l.x,l.y,l.z);(h=m.clone()).sub(g);(z=h.clone()).cross(u);var p=z.lengthSq();if(p>f&&(e=z,.1<(f=p)))break}return e};1===c.bonds.length?1===d.bonds.length?(z=u.clone(),1E-4<Math.abs(z.x)?z.y+=1:z.x+=1):(f=(e+1)%d.bonds.length,k=d.bonds[f],
l=q[k],m=new a.Vector3(l.x,l.y,l.z),(h=m.clone()).sub(g),(z=h.clone()).cross(u)):.01>(z=n(c,d)).lengthSq()&&(c=n(d,c),null!=c&&(z=c));return.01>z.lengthSq()&&(z=u.clone(),1E-4<Math.abs(z.x)?z.y+=1:z.x+=1),z.cross(u),z.normalize(),z},da=function(a,c,d,e,f,k){a[d]=e.x;a[d+1]=e.y;a[d+2]=e.z;c[d]=k.r;c[d+1]=k.g;c[d+2]=k.b;a[d+3]=f.x;a[d+4]=f.y;a[d+5]=f.z;c[d+3]=k.r;c[d+4]=k.g;c[d+5]=k.b},X=function(c,d){if(c.style.sphere){var e=c.style.sphere;if(!e.hidden){var f=a.getColorFromStyle(c,e);e=t(c,e);if((!0===
c.clickable||c.hoverable)&&void 0!==c.intersectionShape){var k=new a.Vector3(c.x,c.y,c.z);c.intersectionShape.sphere.push(new a.Sphere(k,e))}a.GLDraw.drawSphere(d,c,e,f)}}},Q=function(c,d){if(c.style.sphere){var e=c.style.sphere;if(!e.hidden){var f=t(c,e);e=a.getColorFromStyle(c,e);d=d.updateGeoGroup(1);var k=d.vertices,l=3*k,m=d.vertexArray,h=d.colorArray,g=d.radiusArray;(m[l]=c.x,m[l+1]=c.y,m[l+2]=c.z,h[l]=e.r,h[l+1]=e.g,h[l+2]=e.b,g[k]=f,!0!==c.clickable&&!c.hoverable||void 0===c.intersectionShape)||
(e=new a.Vector3(c.x,c.y,c.z),c.intersectionShape.sphere.push(new a.Sphere(e,f)));d.vertices+=1}}},F=function(a,c,d,e){var f;a=a.updateGeoGroup(4);var k=a.vertices,l=3*k,m=a.vertexArray,h=a.colorArray;for(f=0;4>f;f++)m[l+3*f]=c.x,m[l+3*f+1]=c.y,m[l+3*f+2]=c.z;c=a.normalArray;for(f=0;4>f;f++)h[l+3*f]=e.r,h[l+3*f+1]=e.g,h[l+3*f+2]=e.b;c[l+0]=-d;c[l+1]=d;c[l+2]=0;c[l+3]=-d;c[l+4]=-d;c[l+5]=0;c[l+6]=d;c[l+7]=-d;c[l+8]=0;c[l+9]=d;c[l+10]=d;c[l+11]=0;a.vertices+=4;d=a.faceArray;e=a.faceidx;d[e+0]=k;d[e+
1]=k+1;d[e+2]=k+2;d[e+3]=k+2;d[e+4]=k+3;d[e+5]=k;a.faceidx+=6},E=function(c,d){if(c.style.sphere){var e=c.style.sphere;if(!e.hidden){var f=t(c,e);e=a.getColorFromStyle(c,e);if((!0===c.clickable||c.hoverable)&&void 0!==c.intersectionShape){var k=new a.Vector3(c.x,c.y,c.z);c.intersectionShape.sphere.push(new a.Sphere(k,f))}F(d,c,f,e)}}},Z=function(a,c,d,e,f){var k;a=a.updateGeoGroup(4);var l=a.vertices,m=a.vertexArray,h=a.colorArray,g=a.radiusArray,u=a.normalArray,z=f.r,n=f.g;f=f.b;for(var w=3*l,p=
0;4>p;p++)m[w]=c.x,u[w]=d.x,h[w]=z,m[++w]=c.y,u[w]=d.y,h[w]=n,m[++w]=c.z,u[w]=d.z,h[w]=2>p?f:(k=void 0,0==(k=-f)&&(k=-1E-4),k),w++;a.vertices+=4;g[l]=-e;g[l+1]=e;g[l+2]=-e;g[l+3]=e;c=a.faceArray;d=a.faceidx;c[d+0]=l;c[d+1]=l+1;c[d+2]=l+2;c[d+3]=l+2;c[d+4]=l+3;c[d+5]=l;a.faceidx+=6},P=function(c,d){d=d||{};var e,k,m,h=new a.Object3D,g=[],u={},z={},n=X,p=null,q=null;d.supportsImposters?(n=E,(p=new a.Geometry(!0)).imposter=!0,(q=new a.Geometry(!0,!0)).imposter=!0,q.sphereGeometry=new a.Geometry(!0),
q.sphereGeometry.imposter=!0,q.drawnCaps={}):d.supportsAIA?(n=Q,(p=new a.Geometry(!1,!0,!0)).instanced=!0,q=new a.Geometry(!0)):(p=new a.Geometry(!0),q=new a.Geometry(!0));var C={},G=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];var J=0;for(k=c.length;J<k;J++){var v=c[J];if(v&&v.style){for(e in(v.clickable||v.hoverable)&&void 0===v.intersectionShape&&(v.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),m={line:void 0,cross:void 0,stick:void 0,sphere:void 0})v.style[e]?v.style[e].opacity?
m[e]=parseFloat(v.style[e].opacity):m[e]=1:m[e]=void 0,C[e]?null!=m[e]&&C[e]!=m[e]&&(console.log("Warning: "+e+" opacity is ambiguous"),C[e]=1):C[e]=m[e];n(v,p);var x=v;if(x.style.clicksphere){var I=x.style.clicksphere;if(!I.hidden){var A=t(x,I);if((!0===x.clickable||x.hoverable)&&void 0!==x.intersectionShape){var B=new a.Vector3(x.x,x.y,x.z);x.intersectionShape.sphere.push(new a.Sphere(B,A))}}}var O=v,N=z;if(O.style.cross){var D=O.style.cross;if(!D.hidden){var P=D.linewidth||1;N[P]||(N[P]=new a.Geometry);
var Ba=N[P].updateGeoGroup(6),R=t(O,D),S=[[R,0,0],[-R,0,0],[0,R,0],[0,-R,0],[0,0,R],[0,0,-R]],W=O.clickable||O.hoverable;W&&void 0===O.intersectionShape&&(O.intersectionShape={sphere:[],cylinder:[],line:[]});for(var L=a.getColorFromStyle(O,D),Y=Ba.vertexArray,ta=Ba.colorArray,r=0;6>r;r++){var ja=3*Ba.vertices;if(Ba.vertices++,Y[ja]=O.x+S[r][0],Y[ja+1]=O.y+S[r][1],Y[ja+2]=O.z+S[r][2],ta[ja]=L.r,ta[ja+1]=L.g,ta[ja+2]=L.b,W){var ma=new a.Vector3(S[r][0],S[r][1],S[r][2]);ma.multiplyScalar(.1);ma.set(ma.x+
O.x,ma.y+O.y,ma.z+O.z);O.intersectionShape.line.push(ma)}}}}var ra=void 0,cb=void 0,La=void 0,db=void 0,ya=v,Yb=c,Ob=u;if(ya.style.line){var Wa=ya.style.line;if(!Wa.hidden){var Jb=Wa.linewidth||1;Ob[Jb]||(Ob[Jb]=new a.Geometry);for(var Ia=Ob[Jb].updateGeoGroup(6*ya.bonds.length),ua=Ia.vertexArray,wa=Ia.colorArray,$a=0;$a<ya.bonds.length;$a++){var Ga=Yb[ya.bonds[$a]];if(Ga.style.line&&!(ya.index>=Ga.index)){var fa=new a.Vector3(ya.x,ya.y,ya.z),Aa=new a.Vector3(Ga.x,Ga.y,Ga.z),Db=fa.clone().add(Aa).multiplyScalar(.5),
Mb=!1,ba=ya.clickable||ya.hoverable,ub=Ga.clickable||Ga.hoverable;(ba||ub)&&(ba&&(void 0===ya.intersectionShape&&(ya.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),ya.intersectionShape.line.push(fa),ya.intersectionShape.line.push(Db)),ub&&(void 0===Ga.intersectionShape&&(Ga.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),Ga.intersectionShape.line.push(Db),Ga.intersectionShape.line.push(Aa)));var xa=a.getColorFromStyle(ya,ya.style.line),Ja=a.getColorFromStyle(Ga,Ga.style.line);
if(ya.bondStyles&&ya.bondStyles[$a]){var Qa=ya.bondStyles[$a];if(!Qa.iswire)continue;Qa.singleBond&&(Mb=!0);void 0!==Qa.color1&&(xa=a.CC.color(Qa.color1));void 0!==Qa.color2&&(Ja=a.CC.color(Qa.color2))}var mb,jb,Ea=3*Ia.vertices;if(1<ya.bondOrder[$a]&&4>ya.bondOrder[$a]&&!Mb){var eb=M(ya,Ga,$a),Pa=Aa.clone();Pa.sub(fa);2==ya.bondOrder[$a]?(eb.multiplyScalar(.1),(db=fa.clone()).add(eb),(La=fa.clone()).sub(eb),(cb=db.clone()).add(Pa),(ra=La.clone()).add(Pa),xa==Ja?(Ia.vertices+=4,da(ua,wa,Ea,db,cb,
xa),da(ua,wa,Ea+6,La,ra,xa)):(Ia.vertices+=8,Pa.multiplyScalar(.5),(mb=db.clone()).add(Pa),(jb=La.clone()).add(Pa),da(ua,wa,Ea,db,mb,xa),da(ua,wa,Ea+6,mb,cb,Ja),da(ua,wa,Ea+12,La,jb,xa),da(ua,wa,Ea+18,jb,ra,Ja))):3==ya.bondOrder[$a]&&(eb.multiplyScalar(.1),(db=fa.clone()).add(eb),(La=fa.clone()).sub(eb),(cb=db.clone()).add(Pa),(ra=La.clone()).add(Pa),xa==Ja?(Ia.vertices+=6,da(ua,wa,Ea,fa,Aa,xa),da(ua,wa,Ea+6,db,cb,xa),da(ua,wa,Ea+12,La,ra,xa)):(Ia.vertices+=12,Pa.multiplyScalar(.5),(mb=db.clone()).add(Pa),
(jb=La.clone()).add(Pa),da(ua,wa,Ea,fa,Db,xa),da(ua,wa,Ea+6,Db,Aa,Ja),da(ua,wa,Ea+12,db,mb,xa),da(ua,wa,Ea+18,mb,cb,Ja),da(ua,wa,Ea+24,La,jb,xa),da(ua,wa,Ea+30,jb,ra,Ja)))}else xa==Ja?(Ia.vertices+=2,da(ua,wa,Ea,fa,Aa,xa)):(Ia.vertices+=4,da(ua,wa,Ea,fa,Db,xa),da(ua,wa,Ea+6,Db,Aa,Ja))}}}}var yb=void 0,Ua=void 0,za=void 0,ab=void 0,Tb=void 0,Ub=void 0,ec=void 0,Pb=void 0,Vb=void 0,kb=void 0,Ib=void 0,Ha=void 0,fb=void 0,qb=void 0,oa=v,dc=c,Ca=q;if(oa.style.stick){var Nb=oa.style.stick;if(!Nb.hidden){var Qb=
Nb.radius||.25,Ra=Qb,fc=Nb.singleBonds||!1,Kb=0,ob=0,Fa=a.getColorFromStyle(oa,Nb);!oa.capDrawn&&4>oa.bonds.length&&(Kb=2);var Ka=a.GLDraw.drawCylinder;Ca.imposter&&(Ka=Z);for(Ha=0;Ha<oa.bonds.length;Ha++){var Da=dc[oa.bonds[Ha]];if(oa.index<Da.index){var Eb=Da.style;if(Eb.stick&&!Eb.stick.hidden){var rb=a.getColorFromStyle(Da,Eb.stick);if(Ra=Qb,Ib=fc,oa.bondStyles&&oa.bondStyles[Ha]){if((kb=oa.bondStyles[Ha]).iswire)continue;kb.radius&&(Ra=kb.radius);kb.singleBond&&(Ib=!0);void 0!==kb.color1&&(Fa=
a.CC.color(kb.color1));void 0!==kb.color2&&(rb=a.CC.color(kb.color2))}var Sa=new a.Vector3(oa.x,oa.y,oa.z),gb=new a.Vector3(Da.x,Da.y,Da.z);if(1===oa.bondOrder[Ha]||Ib||3<oa.bondOrder[Ha]){if(!Da.capDrawn&&4>Da.bonds.length&&(ob=2),Fa!=rb?(Ka(Ca,Sa,za=(new a.Vector3).addVectors(Sa,gb).multiplyScalar(.5),Ra,Fa,Kb,0),Ka(Ca,za,gb,Ra,rb,0,ob)):Ka(Ca,Sa,gb,Ra,Fa,Kb,ob),qb=oa.clickable||oa.hoverable,fb=Da.clickable||Da.hoverable,qb||fb){if(za||(za=(new a.Vector3).addVectors(Sa,gb).multiplyScalar(.5)),qb){var nc=
new a.Cylinder(Sa,za,Ra),gc=new a.Sphere(Sa,Ra);oa.intersectionShape.cylinder.push(nc);oa.intersectionShape.sphere.push(gc)}if(fb){var hc=new a.Cylinder(gb,za,Ra),Rb=new a.Sphere(gb,Ra);Da.intersectionShape.cylinder.push(hc);Da.intersectionShape.sphere.push(Rb)}}}else if(1<oa.bondOrder[Ha]){var sb=0,nb=0;Ra!=Qb&&(sb=2,nb=2);var va,Va,Xa,hb,ib,Lb=gb.clone(),xb=null;Lb.sub(Sa);xb=M(oa,Da,Ha);2==oa.bondOrder[Ha]?(va=Ra/2.5,xb.multiplyScalar(1.5*va),(Va=Sa.clone()).add(xb),(Xa=Sa.clone()).sub(xb),(hb=
Va.clone()).add(Lb),(ib=Xa.clone()).add(Lb),Fa!=rb?(za=(new a.Vector3).addVectors(Va,hb).multiplyScalar(.5),Ua=(new a.Vector3).addVectors(Xa,ib).multiplyScalar(.5),Ka(Ca,Va,za,va,Fa,sb,0),Ka(Ca,za,hb,va,rb,0,nb),Ka(Ca,Xa,Ua,va,Fa,sb,0),Ka(Ca,Ua,ib,va,rb,0,nb)):(Ka(Ca,Va,hb,va,Fa,sb,nb),Ka(Ca,Xa,ib,va,Fa,sb,nb)),qb=oa.clickable||oa.hoverable,fb=Da.clickable||Da.hoverable,(qb||fb)&&(za||(za=(new a.Vector3).addVectors(Va,hb).multiplyScalar(.5)),Ua||(Ua=(new a.Vector3).addVectors(Xa,ib).multiplyScalar(.5)),
qb&&(Vb=new a.Cylinder(Va,za,va),Pb=new a.Cylinder(Xa,Ua,va),oa.intersectionShape.cylinder.push(Vb),oa.intersectionShape.cylinder.push(Pb)),fb&&(Ub=new a.Cylinder(hb,za,va),Tb=new a.Cylinder(ib,Ua,va),Da.intersectionShape.cylinder.push(Ub),Da.intersectionShape.cylinder.push(Tb)))):3==oa.bondOrder[Ha]&&(va=Ra/4,xb.cross(Lb),xb.normalize(),xb.multiplyScalar(3*va),(Va=Sa.clone()).add(xb),(Xa=Sa.clone()).sub(xb),(hb=Va.clone()).add(Lb),(ib=Xa.clone()).add(Lb),Fa!=rb?(za=(new a.Vector3).addVectors(Va,
hb).multiplyScalar(.5),Ua=(new a.Vector3).addVectors(Xa,ib).multiplyScalar(.5),yb=(new a.Vector3).addVectors(Sa,gb).multiplyScalar(.5),Ka(Ca,Va,za,va,Fa,sb,0),Ka(Ca,za,hb,va,rb,0,nb),Ka(Ca,Sa,yb,va,Fa,Kb,0),Ka(Ca,yb,gb,va,rb,0,ob),Ka(Ca,Xa,Ua,va,Fa,sb,0),Ka(Ca,Ua,ib,va,rb,0,nb)):(Ka(Ca,Va,hb,va,Fa,sb,nb),Ka(Ca,Sa,gb,va,Fa,Kb,ob),Ka(Ca,Xa,ib,va,Fa,sb,nb)),qb=oa.clickable||oa.hoverable,fb=Da.clickable||Da.hoverable,(qb||fb)&&(za||(za=(new a.Vector3).addVectors(Va,hb).multiplyScalar(.5)),Ua||(Ua=(new a.Vector3).addVectors(Xa,
ib).multiplyScalar(.5)),yb||(yb=(new a.Vector3).addVectors(Sa,gb).multiplyScalar(.5)),qb&&(Vb=new a.Cylinder(Va.clone(),za.clone(),va),Pb=new a.Cylinder(Xa.clone(),Ua.clone(),va),ec=new a.Cylinder(Sa.clone(),yb.clone(),va),oa.intersectionShape.cylinder.push(Vb),oa.intersectionShape.cylinder.push(Pb),oa.intersectionShape.cylinder.push(ec)),fb&&(Ub=new a.Cylinder(hb.clone(),za.clone(),va),Tb=new a.Cylinder(ib.clone(),Ua.clone(),va),ab=new a.Cylinder(gb.clone(),yb.clone(),va),Da.intersectionShape.cylinder.push(Ub),
Da.intersectionShape.cylinder.push(Tb),Da.intersectionShape.cylinder.push(ab))))}}}}var Zb=!1,$b=0,ic=!1;for(Ha=0;Ha<oa.bonds.length;Ha++)Ib=fc,oa.bondStyles&&oa.bondStyles[Ha]&&((kb=oa.bondStyles[Ha]).singleBond&&(Ib=!0),kb.radius&&kb.radius!=Qb&&(ic=!0)),(Ib||1==oa.bondOrder[Ha])&&$b++;ic?0<$b&&(Zb=!0):0==$b&&0<oa.bonds.length&&(Zb=!0);Zb&&(Ra=Qb,Ca.imposter?F(Ca.sphereGeometry,oa,Ra,Fa):a.GLDraw.drawSphere(Ca,oa,Ra,Fa))}}void 0===v.style.cartoon||v.style.cartoon.hidden||("spectrum"!==v.style.cartoon.color||
"number"!=typeof v.resi||v.hetflag||(v.resi<G[0]&&(G[0]=v.resi),v.resi>G[1]&&(G[1]=v.resi)),g.push(v))}}if(0<g.length&&a.drawCartoon(h,g,G,f),p&&0<p.vertices){p.initTypedArrays();var Fb=null,zb=null;p.imposter?Fb=new a.SphereImposterMaterial({ambient:0,vertexColors:!0,reflectivity:0}):p.instanced?(zb=new a.Geometry(!0),a.GLDraw.drawSphere(zb,{x:0,y:0,z:0},1,new a.Color(.5,.5,.5)),zb.initTypedArrays(),Fb=new a.InstancedMaterial({sphereMaterial:new a.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),
sphere:zb})):Fb=new a.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0});1>C.sphere&&0<=C.sphere&&(Fb.transparent=!0,Fb.opacity=C.sphere);zb=new a.Mesh(p,Fb);h.add(zb)}if(0<q.vertices){var Gb=null,Hb=null,tb=q.sphereGeometry;tb&&void 0!==tb.vertices&&0!=tb.vertices||(tb=null);q.initTypedArrays();tb&&tb.initTypedArrays();var Cb={ambient:0,vertexColors:!0,reflectivity:0};q.imposter?(Gb=new a.StickImposterMaterial(Cb),Hb=new a.SphereImposterMaterial(Cb)):(Gb=new a.MeshLambertMaterial(Cb),
Hb=new a.MeshLambertMaterial(Cb),Gb.wireframe&&(q.setUpWireframe(),tb&&tb.setUpWireframe()));1>C.stick&&0<=C.stick&&(Gb.transparent=!0,Gb.opacity=C.stick,Hb.transparent=!0,Hb.opacity=C.stick);var jc=new a.Mesh(q,Gb);if(h.add(jc),tb){var kc=new a.Mesh(tb,Hb);h.add(kc)}}for(J in u)if(u.hasOwnProperty(J)){var Sb=J;var ac=new a.LineBasicMaterial({linewidth:Sb,vertexColors:!0});1>C.line&&0<=C.line&&(ac.transparent=!0,ac.opacity=C.line);u[J].initTypedArrays();var oc=new a.Line(u[J],ac,a.LinePieces);h.add(oc)}for(J in z)if(z.hasOwnProperty(J)){Sb=
J;var bc=new a.LineBasicMaterial({linewidth:Sb,vertexColors:!0});1>C.cross&&0<=C.cross&&(bc.transparent=!0,bc.opacity=C.cross);z[J].initTypedArrays();var y=new a.Line(z[J],bc,a.LinePieces);h.add(y)}if(w&&l.symmetries&&0<l.symmetries.length){var sa,lc=new a.Object3D;for(sa=0;sa<l.symmetries.length;sa++){var cc=new a.Object3D;(cc=h.clone()).matrix.copy(l.symmetries[sa]);cc.matrixAutoUpdate=!1;lc.add(cc)}return lc}return h};this.getInternalState=function(){return{atoms:q,frames:n}};this.setInternalState=
function(a){q=a.atoms;n=a.frames;e=null};this.getCrystData=function(){return l.cryst?l.cryst:null};this.setCrystData=function(a,c,d,e,f,k){l.cryst={a:a||1,b:c||1,c:d||1,alpha:e||90,beta:f||90,gamma:k||90}};this.getSymmetries=function(){return void 0===l.symmetries&&(l.symmetries=[C]),l.symmetries};this.setSymmetries=function(a){l.symmetries=void 0===a?[C]:a};this.getID=function(){return g};this.getNumFrames=function(){return null!=n.numFrames?n.numFrames:n.length};var L=function(a,c,d,e){a=c-a;return a<
-d?c+e:a>d?c-e:c};this.setFrame=function(c,d){var f=this.getNumFrames(),k=this;return new Promise(function(m,h){(0==f&&m(),(0>c||c>=f)&&(c=f-1),null!=n.url)?a.getbin(n.url+"/traj/frame/"+c+"/"+n.path,null,"POST").then(function(a){a=new Float32Array(a,44);for(var c=0,d=0;d<q.length;d++)q[d].x=a[c++],q[d].y=a[c++],q[d].z=a[c++];if(A&&v&&A&&v){a=A[0];c=A[1];d=A[2];for(var e=.9*a,f=.9*c,k=.9*d,l=0;l<v.length;l++)for(var h=v[l],g=1;g<h.length;g++){var u=q[h[g][0]],z=q[h[g][1]];u.x=L(z.x,u.x,e,a);u.y=L(z.y,
u.y,f,c);u.z=L(z.z,u.z,k,d)}}m()}).catch(h):(q=n[c],m());e=null;u&&c<u.length&&(l=u[c],k.unitCellObjects&&d&&(d.removeUnitCell(k),d.addUnitCell(k)))})};this.addFrame=function(a){n.push(a)};this.vibrate=function(c,d,e,f,k){d=d||1;var l=0,m=c=c||10;e&&(l=-c,m=c);l<m&&(n=[]);for(e=l;e<m;e++){l=[];var h=n.length;if(0!=e||k){for(var g=0;g<q.length;g++){var u=a.getAtomProperty(q[g],"dx"),z=a.getAtomProperty(q[g],"dy"),w=a.getAtomProperty(q[g],"dz"),p=new a.Vector3(u,z,w),C=new a.Vector3(q[g].x,q[g].y,q[g].z);
p.multiplyScalar(e*d/c);C.add(p);p={};for(var v in q[g])p[v]=q[g][v];if(p.x=C.x,p.y=C.y,p.z=C.z,l.push(p),f&&k){var G=D.extend({},k);u=new a.Vector3(u,z,w);(u.multiplyScalar(d),u.add(C),G.start=C,G.end=u,G.frame=h,G.color)||((C=p.style.sphere)||(C=p.style.stick),C||(C=p.style.line),G.color=a.getColorFromStyle(p,C));f.addArrow(G)}}n.push(l)}else n.push(q)}};this.setAtomDefaults=function(a){for(var c=0;c<a.length;c++){var e=a[c];e&&(e.style=e.style||D.extend(!0,{},d),e.color=e.color||G[e.elem]||J,e.model=
g,(e.clickable||e.hoverable)&&(e.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}))}};this.addMolData=function(c,d,e){e=e||{};c=a.GLModel.parseMolData(c,d,e);w=!e.duplicateAssemblyAtoms;d=c.modelData;if(d&&(Array.isArray(d)?(l=d[0],e.frames&&(u=d)):l=d),A=c.box?c.box:null,0==n.length){for(d=0;d<c.length;d++)0!=c[d].length&&n.push(c[d]);n[0]&&(q=n[0])}else if(e.frames)for(d=0;d<c.length;d++)n.push(c[d]);else for(d=0;d<c.length;d++)this.addAtoms(c[d]);for(c=0;c<n.length;c++)this.setAtomDefaults(n[c],
g);e.vibrate&&e.vibrate.frames&&e.vibrate.amplitude&&this.vibrate(e.vibrate.frames,e.vibrate.amplitude);e.style&&this.setStyle({},e.style)};this.setDontDuplicateAtoms=function(a){w=a};this.setModelData=function(a){l=a};var S=function(a,c){if(a==c)return!0;if("string"==typeof c&&"number"==typeof a&&(c=c.match(/(-?\d+)\s*-\s*(-?\d+)/))){var d=parseInt(c[1]),e=parseInt(c[2]);if(c&&a>=d&&a<=e)return!0}return!1},R=function(a,c){if("object"!=typeof a||a.__cache_created)return a;var d={},e;for(e in a){var f=
a[e];if(Array.isArray(f)){d[e]=[];for(var k=0;k<f.length;k++)d[e].push(R(f[k],c))}else d[e]="object"==typeof f&&"properties"!=e?R(f,c):f;if("and"==e||"or"==e){f=[];var l=$jscomp.makeIterator(d[e]);for(k=l.next();!k.done;k=l.next()){k=k.value;var m=new Set,h=$jscomp.makeIterator(c.selectedAtoms(k));for(k=h.next();!k.done;k=h.next())m.add(k.value.index);f.push(m)}if("and"==e){k=new Set(f[0]);f=$jscomp.makeIterator(f.splice(1));for(m=f.next();!m.done;m=f.next()){m=m.value;l=new Set;m=$jscomp.makeIterator(m);
for(h=m.next();!h.done;h=m.next())h=h.value,k.has(h)&&l.add(h);k=l}d[e].__cached_results=k}else if("or"==e){l=new Set;f=$jscomp.makeIterator(f);for(m=f.next();!m.done;m=f.next())for(m=$jscomp.makeIterator(m.value),k=m.next();!k.done;k=m.next())l.add(k.value);d[e].__cached_results=l}}}return d.__cache_created=!0,d};this.atomIsSelected=function(a,c){if(void 0===c)return!0;var d=!!c.invert,e=!0,f;for(f in c)if("and"==f||"or"==f||"not"==f)if("not"==f){if(this.atomIsSelected(a,c[f])){e=!1;break}}else{if(void 0===
c[f].__cached_results&&(c=R(c,this)),!(e=c[f].__cached_results.has(a.index)))break}else if("predicate"===f){if(!c.predicate(a)){e=!1;break}}else if("properties"==f&&a[f])for(var k in c.properties){if(!k.startsWith("__cache")){if(void 0===a.properties[k]){e=!1;break}if(a.properties[k]!=c.properties[k]){e=!1;break}}}else if(c.hasOwnProperty(f)&&"props"!=f&&"invert"!=f&&"model"!=f&&"byres"!=f&&"expand"!=f&&"within"!=f&&"and"!=f&&"or"!=f&&"not"!=f&&!f.startsWith("__cache")){if(void 0===a[f]){e=!1;break}var l=
!1;if("bonds"===f){if(c[f]!=a.bonds.length){e=!1;break}}else if(D.isArray(c[f])){for(var m=c[f],h=a[f],g=0;g<m.length;g++)if(S(h,m[g])){l=!0;break}if(!l){e=!1;break}}else if(!S(a[f],c[f])){e=!1;break}}return d?!e:e};var W=function(a,c){var d=c.x-a.x,e=c.y-a.y;a=c.z-a.z;return d*d+e*e+a*a};this.selectedAtoms=function(c,d){var e=[];c=R(c||{},this);d||(d=q);for(var f=d.length,k=0;k<f;k++){var l=d[k];l&&this.atomIsSelected(l,c)&&e.push(l)}if(c.hasOwnProperty("expand")){d=parseFloat(c.expand);if(0>=d)f=
e;else{f=a.getExtent(e);k=[[],[],[]];for(l=0;3>l;l++)k[0][l]=f[0][l]-d,k[1][l]=f[1][l]+d,k[2][l]=f[2][l];l=[];for(var m=0;m<q.length;m++){var h=q[m].x,g=q[m].y,u=q[m].z;h>=k[0][0]&&h<=k[1][0]&&g>=k[0][1]&&g<=k[1][1]&&u>=k[0][2]&&u<=k[1][2]&&(h>=f[0][0]&&h<=f[1][0]&&g>=f[0][1]&&g<=f[1][1]&&u>=f[0][2]&&u<=f[1][2]||l.push(q[m]))}f=l}k=e.length;d*=d;for(l=0;l<f.length;l++)for(m=0;m<k;m++)h=W(f[l],e[m]),h<d&&0<h&&e.push(f[l])}if(c.hasOwnProperty("within")&&c.within.hasOwnProperty("sel")&&c.within.hasOwnProperty("distance")){f=
this.selectedAtoms(c.within.sel,q);d={};k=parseFloat(c.within.distance);k*=k;for(l=0;l<f.length;l++)for(m=0;m<e.length;m++)h=W(f[l],e[m]),h<k&&0<h&&(d[m]=1);f=[];if(c.within.invert)for(var z=0;z<e.length;z++)d[z]||f.push(e[z]);else for(z in d)f.push(e[z]);e=f}if(c.hasOwnProperty("byres"))for(c={},z=[],d=[],f=0;f<e.length;f++)if(k=e[f],l=k.chain,m=k.resi,void 0===c[l]&&(c[l]={}),k.hasOwnProperty("resi")&&void 0===c[l][m])for(c[l][m]=!0,d.push(k);0<d.length;)if(l=(k=d.pop()).chain,m=k.resi,void 0===
z[k.index])for(z[k.index]=!0,h=0;h<k.bonds.length;h++)g=q[k.bonds[h]],void 0===z[g.index]&&g.hasOwnProperty("resi")&&g.chain==l&&g.resi==m&&(d.push(g),e.push(g));return e};this.addAtoms=function(a){e=null;var c,f=q.length,k=[];for(c=0;c<a.length;c++)void 0===a[c].index&&(a[c].index=c),void 0===a[c].serial&&(a[c].serial=c),k[a[c].index]=f+c;for(c=0;c<a.length;c++){f=a[c];var l=k[f.index],m=D.extend(!1,{},f);m.index=l;m.bonds=[];m.bondOrder=[];m.model=g;m.style=m.style||D.extend(!0,{},d);void 0===m.color&&
(m.color=G[m.elem]||J);l=f.bonds?f.bonds.length:0;for(var h=0;h<l;h++){var u=k[f.bonds[h]];void 0!==u&&(m.bonds.push(u),m.bondOrder.push(f.bondOrder?f.bondOrder[h]:1))}q.push(m)}};this.removeAtoms=function(a){e=null;var c,d=[];for(c=0;c<a.length;c++)d[a[c].index]=!0;a=[];for(c=0;c<q.length;c++){var f=q[c];d[f.index]||a.push(f)}q=[];this.addAtoms(a)};this.setStyle=function(a,d,f){for(var k in void 0===d&&void 0===f&&(d=a,a={}),a)c.validAtomSelectionSpecs.hasOwnProperty(k)||console.log("Unknown selector "+
k);for(k in d)c.validAtomStyleSpecs.hasOwnProperty(k)||console.log("Unknown style "+k);var l=!1,m=this;k=function(c){for(var e=m.selectedAtoms(a,c),k=0;k<c.length;k++)c[k]&&(c[k].capDrawn=!1);for(c=0;c<e.length;c++){l=!0;(e[c].clickable||e[c].hoverable)&&(e[c].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]});f||(e[c].style={});for(var h in d)d.hasOwnProperty(h)&&(e[c].style[h]=e[c].style[h]||{},Object.assign(e[c].style[h],d[h]))}};k(q);for(var h=0;h<n.length;h++)n[h]!==q&&k(n[h]);l&&
(e=null)};this.setClickable=function(a,d,f){for(var k in a)c.validAtomSelectionSpecs.hasOwnProperty(k)||console.log("Unknown selector "+k);if(d=!!d,f&&"function"!=typeof f)console.log("Callback is not a function");else{k=this.selectedAtoms(a,q);var l=k.length;for(a=0;a<l;a++)k[a].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},k[a].clickable=d,f&&(k[a].callback=f);0<l&&(e=null)}};this.setHoverable=function(a,d,f,k){for(var l in a)c.validAtomSelectionSpecs.hasOwnProperty(l)||console.log("Unknown selector "+
l);if(d=!!d,f&&"function"!=typeof f)console.log("Hover_callback is not a function");else if(k&&"function"!=typeof k)console.log("Unhover_callback is not a function");else{l=this.selectedAtoms(a,q);var m=l.length;for(a=0;a<m;a++)l[a].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},l[a].hoverable=d,f&&(l[a].hover_callback=f),k&&(l[a].unhover_callback=k);0<m&&(e=null)}};this.setColorByElement=function(a,c){var d;(d=null===e)||(d=z,d=!(c&&d?JSON.stringify(c)==JSON.stringify(d):c==d));if(d){z=
c;var f=this.selectedAtoms(a,f);0<f.length&&(e=null);for(a=0;a<f.length;a++)d=f[a],void 0!==c[d.elem]&&(d.color=c[d.elem])}};this.setColorByProperty=function(c,d,f,k){var l=this.selectedAtoms(c,l);z=null;0<l.length&&(e=null);void 0!==a.Gradient.builtinGradients[f]&&(f=new a.Gradient.builtinGradients[f]);k||(k=f.range());k||(k=a.getPropertyRange(l,d));for(c=0;c<l.length;c++){var m=l[c];null!=a.getAtomProperty(m,d)&&(m.color=f.valueToHex(parseFloat(m.properties[d]),k))}};this.setColorByFunction=function(a,
c){var d=this.selectedAtoms(a,d);if("function"==typeof c)for(z=null,0<d.length&&(e=null),a=0;a<d.length;a++){var f=d[a];f.color=c(f)}};this.toCDObject=function(a){var c={a:[],b:[]};a&&(c.s=[]);for(var d=0;d<q.length;d++){var e={},f=q[d];if(e.x=f.x,e.y=f.y,e.z=f.z,"C"!=f.elem&&(e.l=f.elem),a){for(var k=0;k<c.s.length&&JSON.stringify(f.style)!==JSON.stringify(c.s[k]);)k++;k===c.s.length&&c.s.push(f.style);0!==k&&(e.s=k)}c.a.push(e);for(e=0;e<f.bonds.length;e++){k=d;var l=f.bonds[e];k>=l||(k={b:k,e:l},
l=f.bondOrder[e],1!=l&&(k.o=l),c.b.push(k))}}return c};this.globj=function(a,c){(null===e||c.regen)&&(e=P(q,c),k&&(a.remove(k),k=null),k=e.clone(),B&&(k.setVisible(!1),e.setVisible(!1)),a.add(k))};this.exportVRML=function(){return P(q,{supportsImposters:!1,supportsAIA:!1}).vrml()};this.removegl=function(a){k&&(void 0!==k.geometry&&k.geometry.dispose(),void 0!==k.material&&k.material.dispose(),a.remove(k),k=null);e=null};this.hide=function(){B=!0;k&&k.setVisible(!1);e&&e.setVisible(!1)};this.show=
function(){B=!1;k&&k.setVisible(!0);e&&e.setVisible(!0)};this.addPropertyLabels=function(a,c,d,e){var f=this.selectedAtoms(c,f);c=D.extend(!0,{},e);for(e=0;e<f.length;e++){var k=f[e],l=null;void 0!==k[a]?l=String(k[a]):(k.properties[a],l=String(k.properties[a]));null!=l&&(c.position=k,d.addLabel(l,c))}};this.addResLabels=function(c,d,e,f){var k=[],l=function(f,l){var m=f.selectedAtoms(c,m);f={};for(var h=0;h<m.length;h++){var g=m[h],u=g.chain,z=g.resn+""+g.resi;f[u]||(f[u]={});f[u][z]||(f[u][z]=[]);
f[u][z].push(g)}m=D.extend(!0,{},e);for(var n in f)if(f.hasOwnProperty(n)){h=f[n];for(var w in h)if(h.hasOwnProperty(w)){g=h[w];u=new a.Vector3(0,0,0);for(z=0;z<g.length;z++){var p=g[z];u.x+=p.x;u.y+=p.y;u.z+=p.z}u.divideScalar(g.length);m.position=u;m.frame=l;g=d.addLabel(w,m,void 0,!0);k.push(g)}}};if(f){f=this.getNumFrames();for(var m=q,h=0;h<f;h++)n[h]&&(q=n[h],l(this,h));q=m}else l(this);return k};this.setCoordinatesFromURL=function(a,c){n=[];var d=this;return A&&function(){v=[];var a=new Int8Array(q.length);
a.fill(0);for(var c=function(d,e,f){f.push([d,e]);e=q[d];a[d]=1;for(var k=0;k<e.bonds.length;k++){var l=e.bonds[k];q[l]&&!a[l]&&c(l,d,f)}},d=0;d<q.length;d++)if(q[d]&&!a[d]){var e=[];c(d,-1,e);v.push(e)}}(),new Promise(function(e,f){a.startsWith("http://")||(a="http://"+a);D.get(a+"/traj/numframes/"+c,function(k){isNaN(parseInt(k))||(n.push(q),n.numFrames=k,n.url=a,n.path=c,d.setFrame(0).then(function(){e()}).catch(f))})})};this.setCoordinates=function(a,d){if(!a)return[];if(/\.gz$/.test(d=d||"")){d=
d.replace(/\.gz$/,"");try{a=pako.inflate(a,{to:"string"})}catch(aa){console.log(aa)}}if({mdcrd:"",inpcrd:"",pdb:"",netcdf:""}.hasOwnProperty(d)){n=[];var e=q.length;a=c.parseCrd(a,d);for(d=0;d<a.length;){for(var f=[],k=0;k<e;k++){var l={},m;for(m in q[k])l[m]=q[k][m];f[k]=l;f[k].x=a[d++];f[k].y=a[d++];f[k].z=a[d++]}n.push(f)}return q=n[0],n}return[]};this.addAtomSpecs=function(a){for(var d=0;d<a.length;d++)c.validAtomSelectionSpecs.hasOwnProperty(a[d])||c.validAtomSelectionSpecs.push(a[d])}}var d=
{line:{}},h={H:1.2,He:1.4,Li:1.82,Be:1.53,B:1.92,C:1.7,N:1.55,O:1.52,F:1.47,Ne:1.54,Na:2.27,Mg:1.73,Al:1.84,Si:2.1,P:1.8,S:1.8,Cl:1.75,Ar:1.88,K:2.75,Ca:2.31,Ni:1.63,Cu:1.4,Zn:1.39,Ga:1.87,Ge:2.11,As:1.85,Se:1.9,Br:1.85,Kr:2.02,Rb:3.03,Sr:2.49,Pd:1.63,Ag:1.72,Cd:1.58,In:1.93,Sn:2.17,Sb:2.06,Te:2.06,I:1.98,Xe:2.16,Cs:3.43,Ba:2.68,Pt:1.75,Au:1.66,Hg:1.55,Tl:1.96,Pb:2.02,Bi:2.07,Po:1.97,At:2.02,Rn:2.2,Fr:3.48,Ra:2.83,U:1.86};c.validElements="H Li LI Na NA K C N O F P S CL Cl BR Br SE Se ZN Zn CU Cu NI Ni".split(" ");
c.validAtomSpecs={resn:{type:"string",valid:!0},x:{type:"number",valid:!1,step:.1},y:{type:"number",valid:!1,step:.1},z:{type:"number",valid:!1,step:.1},color:{type:"color",gui:!0},surfaceColor:{type:"color",gui:!0},elem:{type:"element",gui:!0},hetflag:{type:"boolean",valid:!1},chain:{type:"string",gui:!0},resi:{type:"number",gui:!0},icode:{type:"number",valid:!1,step:.1},rescode:{type:"number",valid:!1,step:.1},serial:{type:"number",valid:!1,step:.1},atom:{type:"string",valid:!1},bonds:{type:"array",
valid:!1},ss:{type:"string",valid:!1},singleBonds:{type:"boolean",valid:!1},bondOrder:{type:"array",valid:!1},properties:{type:"properties",valid:!1},b:{type:"number",valid:!1,step:.1},pdbline:{type:"string",valid:!1},clickable:{type:"boolean",valid:!1},callback:{type:"function",valid:!1},invert:{type:"boolean",valid:!1},reflectivity:{type:"number",gui:!0,step:.1},altLoc:{type:"invalid",valid:!1},sym:{type:"number",gui:!1}};c.validAtomSelectionSpecs=function(a,c){for(var d in c)c.hasOwnProperty(d)&&
(a[d]=c[d]);return a}(c.validAtomSpecs,{model:{type:"string",valid:!1},bonds:{type:"string",valid:!1},predicate:{type:"string",valid:!1},invert:{type:"string",valid:!1},byres:{type:"string",valid:!1},expand:{type:"string",valid:!1},within:{type:"string",valid:!1},and:{type:"string",valid:!1},or:{type:"string",valid:!1},not:{type:"string",valid:!1}});var n={hidden:{type:"boolean",gui:!0},singleBonds:{type:"boolean",gui:!0},colorscheme:{type:"colorscheme",gui:!0},color:{type:"color",gui:!0},radius:{type:"number",
gui:!0,step:.1,default:1.5,min:0},scale:{type:"number",gui:!0,step:.1,default:1,min:.1}};c.validAtomStyleSpecs={line:{validItems:{hidden:{type:"boolean",gui:!0},linewidth:{type:"number",gui:!0,step:.1,default:1},colorscheme:{type:"colorscheme",gui:!0},color:{type:"color",gui:!0}},gui:!0},cross:{validItems:{hidden:{type:"boolean",gui:!0},linewidth:{type:"number",gui:!1,step:.1,default:1,min:0},colorscheme:{type:"colorscheme",gui:!0},color:{type:"color",gui:!0},radius:{type:"number",gui:!0,step:.1,
default:1,min:.1},scale:{type:"number",gui:!0,step:.1,default:1,min:0}},gui:!0},stick:{validItems:{hidden:{type:"boolean",gui:!0},colorscheme:{type:"colorscheme",gui:!0},color:{type:"color",gui:!0},radius:{type:"number",gui:!0,step:.1,default:.25,min:.1},singleBonds:{type:"boolean",gui:!0}},gui:!0},sphere:{validItems:n,gui:!0},cartoon:{validItems:{style:{validItems:["trace","oval","rectangle","parabola","edged"],gui:!0},color:{type:"color",gui:!0},arrows:{type:"boolean",gui:!0},ribbon:{type:"boolean",
gui:!0},hidden:{type:"boolean",gui:!0},tubes:{type:"boolean",gui:!0},thickness:{type:"number",gui:!0,step:.1,default:1,min:0},width:{type:"number",gui:!0,step:.1,default:1,min:0},opacity:{type:"number",gui:!0,step:.1,default:1,min:0,max:1}},gui:!0},colorfunc:{validItems:null,valid:!1},clicksphere:{validItems:n}};c.validSurfaceSpecs={opacity:{type:"number",gui:!0,step:.1,default:1,min:0,max:1},colorscheme:{type:"colorscheme",gui:!0},color:{type:"color",gui:!0},voldata:{type:"number",gui:!1},volscheme:{type:"number",
gui:!1},map:{type:"number",gui:!1}};c.validLabelResSpecs={font:{type:"string",gui:!0},fontSize:{type:"number",gui:!0,step:1,default:12,min:1},fontColor:{type:"color",gui:!0},fontOpacity:{type:"number",gui:!0,step:.1,default:1,min:0,max:1},borderThickness:{type:"number",gui:!0,step:.1,default:1,min:0},borderColor:{type:"color",gui:!0},borderOpacity:{type:"number",gui:!0,step:.1,default:1,min:0,max:1},backgroundColor:{type:"color",gui:!0},backgroundOpacity:{type:"number",gui:!0,step:.1,default:1,min:0,
max:1},position:{type:"array",valid:!1},inFront:{type:"boolean",gui:!0},showBackground:{type:"boolean",gui:!0},fixed:{type:"boolean",gui:!0},alignment:{validItems:"topLeft topCenter topRight centerLeft center centerRight bottomLeft bottomCenter bottomRight".split(" "),gui:!0},scale:{type:"boolean",gui:!1}};return c.parseCrd=function(a,c){var d=[],h=0;if("pdb"==c)for(c=a.indexOf("\nATOM");-1!=c;){for(;"\nATOM"==a.slice(c,c+5)||"\nHETATM"==a.slice(c,c+7);)d[h++]=parseFloat(a.slice(c+31,c+39)),d[h++]=
parseFloat(a.slice(c+39,c+47)),d[h++]=parseFloat(a.slice(c+47,c+55)),c=a.indexOf("\n",c+54),"\nTER"==a.slice(c,c+4)&&(c=a.indexOf("\n",c+5));c=a.indexOf("\nATOM",c)}else"netcdf"==c?(a=new netcdfjs(a),d=[].concat.apply([],a.getDataVariable("coordinates"))):(d=a.indexOf("\n"),"inpcrd"==c&&(d=a.indexOf("\n",d+1)),d=a.slice(d+1).match(/\S+/g).map(parseFloat));return d},c.parseMolData=function(c,d,h){if(!c)return[];if(/\.gz$/.test(d=d||"")){d=d.replace(/\.gz$/,"");try{c=pako.inflate(c,{to:"string"})}catch(x){console.log(x)}}return void 0===
a.Parsers[d]&&(d=d.split(".").pop(),void 0===a.Parsers[d]&&(console.log("Unknown format: "+d),d=c instanceof Uint8Array?"mmtf":c.match(/^@<TRIPOS>MOLECULE/gm)?"mol2":c.match(/^data_/gm)&&c.match(/^loop_/gm)?"cif":c.match(/^HETATM/gm)||c.match(/^ATOM/gm)?"pdb":c.match(/ITEM: TIMESTEP/gm)?"lammpstrj":c.match(/^.*\n.*\n.\s*(\d+)\s+(\d+)/gm)?"sdf":c.match(/^%VERSION\s+VERSION_STAMP/gm)?"prmtop":"xyz",console.log("Best guess: "+d))),(0,a.Parsers[d])(c,h)},c}();a.GLShape=function(){function c(c){c=c||{};
a.ShapeIDCount++;this.boundingSphere=new a.Sphere;this.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]};g(this,c);var q=[],p=null,A=null,v=new a.Geometry(!0),t=new a.Geometry(!0);this.updateStyle=function(a){for(var d in a)c[d]=a[d];g(this,c)};this.addCustom=function(a){a.vertexArr=a.vertexArr||[];a.faceArr=a.faceArr||[];a.normalArr=a.normalArr||[];n(this,v,a)};this.addSphere=function(c){c.center=c.center||{x:0,y:0,z:0};c.radius=c.radius?a.Math.clamp(c.radius,0,1/0):1.5;c.color=a.CC.color(c.color);
this.intersectionShape.sphere.push(new a.Sphere(c.center,c.radius));a.GLDraw.drawSphere(v,c.center,c.radius,c.color);q.push({centroid:new a.Vector3(c.center.x,c.center.y,c.center.z)});c=v.updateGeoGroup(0);h(this.boundingSphere,q,c.vertexArray,c.vertices)};this.addBox=function(c){var d=c.dimensions||{w:1,h:1,d:1},e=d.w;"number"==typeof d.w&&(e={x:d.w,y:0,z:0});var l=d.h;"number"==typeof d.h&&(l={x:0,y:d.h,z:0});var g=d.d;"number"==typeof d.d&&(g={x:0,y:0,z:d.d});d=c.corner;null==d&&(d=void 0!==c.center?
{x:c.center.x-.5*(e.x+l.x+g.x),y:c.center.y-.5*(e.y+l.y+g.y),z:c.center.z-.5*(e.z+l.z+g.z)}:{x:0,y:0,z:0});e=[{x:d.x,y:d.y,z:d.z},{x:d.x+e.x,y:d.y+e.y,z:d.z+e.z},{x:d.x+l.x,y:d.y+l.y,z:d.z+l.z},{x:d.x+e.x+l.x,y:d.y+e.y+l.y,z:d.z+e.z+l.z},{x:d.x+g.x,y:d.y+g.y,z:d.z+g.z},{x:d.x+e.x+g.x,y:d.y+e.y+g.y,z:d.z+e.z+g.z},{x:d.x+l.x+g.x,y:d.y+l.y+g.y,z:d.z+l.z+g.z},{x:d.x+e.x+l.x+g.x,y:d.y+e.y+l.y+g.y,z:d.z+e.z+l.z+g.z}];l=[];g=[];l.splice(l.length,0,e[0],e[1],e[2],e[3]);g.splice(g.length,0,0,2,1,1,2,3);d=
4;l.splice(l.length,0,e[2],e[3],e[6],e[7]);g.splice(g.length,0,d+0,d+2,d+1,d+1,d+2,d+3);d+=4;l.splice(l.length,0,e[4],e[5],e[0],e[1]);g.splice(g.length,0,d+0,d+2,d+1,d+1,d+2,d+3);d+=4;l.splice(l.length,0,e[6],e[7],e[4],e[5]);g.splice(g.length,0,d+0,d+2,d+1,d+1,d+2,d+3);d+=4;l.splice(l.length,0,e[3],e[1],e[7],e[5]);g.splice(g.length,0,d+0,d+2,d+1,d+1,d+2,d+3);d+=4;l.splice(l.length,0,e[2],e[6],e[0],e[4]);g.splice(g.length,0,d+0,d+2,d+1,d+1,d+2,d+3);c=D.extend({},c);c.vertexArr=l;c.faceArr=g;c.normalArr=
[];n(this,v,c);c=new a.Vector3;q.push({centroid:c.addVectors(e[0],e[7]).multiplyScalar(.5)});c=v.updateGeoGroup(0);h(this.boundingSphere,q,c.vertexArray,c.vertices)};this.addCylinder=function(c){c.start=c.start||{};c.end=c.end||{};var d=new a.Vector3(c.start.x||0,c.start.y||0,c.start.z||0),e=new a.Vector3(c.end.x,c.end.y||0,c.end.z||0);void 0===e.x&&(e.x=3);var l=c.radius||.1,g=a.CC.color(c.color);this.intersectionShape.cylinder.push(new a.Cylinder(d,e,l));a.GLDraw.drawCylinder(v,d,e,l,g,c.fromCap,
c.toCap);c=new a.Vector3;q.push({centroid:c.addVectors(d,e).multiplyScalar(.5)});d=v.updateGeoGroup(0);h(this.boundingSphere,q,d.vertexArray,d.vertices)};this.addDashedCylinder=function(c){c.start=c.start||{};c.end=c.end||{};c.dashLength=c.dashLength||.25;c.gapLength=c.gapLength||.25;var d=new a.Vector3(c.start.x||0,c.start.y||0,c.start.z||0),e=new a.Vector3(c.end.x,c.end.y||0,c.end.z||0);void 0===e.x&&(e.x=3);var l=c.radius||.1,g=a.CC.color(c.color),n=Math.sqrt(Math.pow(d.x-e.x,2)+Math.pow(d.y-e.y,
2)+Math.pow(d.z-e.z,2)),w=n/(c.gapLength+c.dashLength),p=new a.Vector3(c.start.x||0,c.start.y||0,c.start.z||0);new a.Vector3(c.end.x,c.end.y||0,c.end.z||0);for(var G=new a.Vector3((e.x-d.x)/(n/c.gapLength),(e.y-d.y)/(n/c.gapLength),(e.z-d.z)/(n/c.gapLength)),m=new a.Vector3((e.x-d.x)/(n/c.dashLength),(e.y-d.y)/(n/c.dashLength),(e.z-d.z)/(n/c.dashLength)),f=0;f<w;f++)n=new a.Vector3(p.x+m.x,p.y+m.y,p.z+m.z),this.intersectionShape.cylinder.push(new a.Cylinder(p,n,l)),a.GLDraw.drawCylinder(v,p,n,l,g,
c.fromCap,c.toCap),p=new a.Vector3(n.x+G.x,n.y+G.y,n.z+G.z);c=new a.Vector3;q.push({centroid:c.addVectors(d,e).multiplyScalar(.5)});d=v.updateGeoGroup(0);h(this.boundingSphere,q,d.vertexArray,d.vertices)};this.addCurve=function(c){c.points=c.points||[];c.smooth=c.smooth||10;void 0===c.fromCap&&(c.fromCap=2);void 0===c.toCap&&(c.toCap=2);var d=a.subdivide_spline(c.points,c.smooth);if(3>d.length)console.log("Too few points in addCurve");else{var e=c.radius||.1,l=a.CC.color(c.color),h=0,g=d.length-1,
n=d[0].distanceTo(d[1]);n=Math.ceil(2*e/n);if(c.toArrow){var p={start:d[g-=n],end:d[d.length-1],radius:e,color:l,mid:1E-4};this.addArrow(p)}c.fromArrow&&(c={start:d[h+=n],end:d[0],radius:e,color:l,mid:1E-4},this.addArrow(c));c=Math.ceil(d.length/2);for(e={radius:e,color:l,fromCap:2,toCap:2};h<g;h++)e.start=d[h],e.end=d[h+1],e.fromCap=2,e.toCap=2,h<c?(e.fromCap=2,e.toCap=0):h>c?(e.fromCap=0,e.toCap=2):(e.fromCap=2,e.toCap=2),this.addCylinder(e)}};this.addLine=function(c){c.start=c.start||{};c.end=
c.end||{};var d=new a.Vector3(c.start.x||0,c.start.y||0,c.start.z||0);c=new a.Vector3(c.end.x,c.end.y||0,c.end.z||0);void 0===c.x&&(c.x=3);var e=v.updateGeoGroup(2),l=e.vertices,g=3*l,n=e.vertexArray;n[g]=d.x;n[g+1]=d.y;n[g+2]=d.z;n[g+3]=c.x;n[g+4]=c.y;n[g+5]=c.z;e.vertices+=2;g=e.lineArray;n=e.lineidx;g[n]=l;g[n+1]=l+1;e.lineidx+=2;e=new a.Vector3;q.push({centroid:e.addVectors(d,c).multiplyScalar(.5)});e=v.updateGeoGroup(0);h(this.boundingSphere,q,e.vertexArray,e.vertices)};this.addArrow=function(c){if(c.start=
c.start||{},c.end=c.end||{},c.start=new a.Vector3(c.start.x||0,c.start.y||0,c.start.z||0),c.dir instanceof a.Vector3&&"number"==typeof c.length){var d=c.dir.clone().multiplyScalar(c.length).add(c.start);c.end=d}else c.end=new a.Vector3(c.end.x,c.end.y||0,c.end.z||0),void 0===c.end.x&&(c.end.x=3);c.radius=c.radius||.1;c.radiusRatio=c.radiusRatio||1.618034;c.mid=0<c.mid&&1>c.mid?c.mid:.618034;var e=c.start,l=c.end,g=c.radius,n=c.radiusRatio,w=c.mid,p=c.midpos;if(e&&l){d=v.updateGeoGroup(51);var G=l.clone().sub(e);
p&&(w=G.length(),w=0<p?p/w:(w+p)/w);G.multiplyScalar(w);var m=e.clone().add(G);p=G.clone().negate();this.intersectionShape.cylinder.push(new a.Cylinder(e.clone(),m.clone(),g));this.intersectionShape.sphere.push(new a.Sphere(e.clone(),g));w=[];w[0]=G.clone();1E-4<Math.abs(w[0].x)?w[0].y+=1:w[0].x+=1;w[0].cross(G);w[0].normalize();w[0]=w[0];w[4]=w[0].clone();w[4].crossVectors(w[0],G);w[4].normalize();w[8]=w[0].clone().negate();w[12]=w[4].clone().negate();w[2]=w[0].clone().add(w[4]).normalize();w[6]=
w[4].clone().add(w[8]).normalize();w[10]=w[8].clone().add(w[12]).normalize();w[14]=w[12].clone().add(w[0]).normalize();w[1]=w[0].clone().add(w[2]).normalize();w[3]=w[2].clone().add(w[4]).normalize();w[5]=w[4].clone().add(w[6]).normalize();w[7]=w[6].clone().add(w[8]).normalize();w[9]=w[8].clone().add(w[10]).normalize();w[11]=w[10].clone().add(w[12]).normalize();w[13]=w[12].clone().add(w[14]).normalize();w[15]=w[14].clone().add(w[0]).normalize();var f,x,A,t=d.vertices;var B=d.vertexArray;var Q=d.faceArray,
F=d.normalArray,D=d.lineArray;var E=0;for(f=w.length;E<f;++E){var P=3*(t+3*E);var L=w[E].clone().multiplyScalar(g).add(e);var S=w[E].clone().multiplyScalar(g).add(m);var R=w[E].clone().multiplyScalar(g*n).add(m);if(B[P]=L.x,B[P+1]=L.y,B[P+2]=L.z,B[P+3]=S.x,B[P+4]=S.y,B[P+5]=S.z,B[P+6]=R.x,B[P+7]=R.y,B[P+8]=R.z,0<E)P=new a.Vector3(B[P-3],B[P-2],B[P-1]),L=l.clone(),S=m.clone(),R=new a.Vector3(R.x,R.y,R.z),this.intersectionShape.triangle.push(new a.Triangle(R,L,P)),this.intersectionShape.triangle.push(new a.Triangle(P.clone(),
S,R.clone()))}d.vertices+=48;B[P=3*d.vertices]=e.x;B[P+1]=e.y;B[P+2]=e.z;B[P+3]=m.x;B[P+4]=m.y;B[P+5]=m.z;B[P+6]=l.x;B[P+7]=l.y;B[P+8]=l.z;d.vertices+=3;var W=d.vertices-3,O=d.vertices-2,I=d.vertices-1,H=3*W,K=3*O,Y=3*I;E=0;for(f=w.length-1;E<f;++E){var ca=t+3*E;e=d.faceidx;l=d.lineidx;P=3*(g=ca);L=3*(n=ca+1);S=3*(m=ca+2);var ia=3*(B=ca+4);var aa=3*(R=ca+5);var T=3*(ca+=3);[w[E],w[E],w[E+1],w[E+1]];var U=x=w[E];var la=A=w[E+1];F[P]=U.x;F[L]=x.x;F[T]=A.x;F[P+1]=U.y;F[L+1]=x.y;F[T+1]=A.y;F[P+2]=U.z;
F[L+2]=x.z;F[T+2]=A.z;F[L]=x.x;F[ia]=la.x;F[T]=A.x;F[L+1]=x.y;F[ia+1]=la.y;F[T+1]=A.y;F[L+2]=x.z;F[ia+2]=la.z;F[T+2]=A.z;F[S]=x.x;F[aa]=la.x;F[S+1]=x.y;F[aa+1]=la.y;F[S+2]=x.z;F[aa+2]=la.z;Q[e]=g;Q[e+1]=n;Q[e+2]=ca;Q[e+3]=n;Q[e+4]=B;Q[e+5]=ca;Q[e+6]=g;Q[e+7]=ca;Q[e+8]=W;Q[e+9]=m;Q[e+10]=O;Q[e+11]=R;Q[e+12]=m;Q[e+13]=I;Q[e+14]=R;D[l]=g;D[l+1]=n;D[l+2]=g;D[l+3]=ca;D[l+4]=B;D[l+5]=ca;D[l+6]=g;D[l+7]=ca;D[l+8]=m;D[l+9]=n;D[l+10]=m;D[l+11]=R;D[l+12]=B;D[l+13]=R;D[l+14]=m;D[l+15]=I;D[l+16]=m;D[l+17]=R;
D[l+18]=I;D[l+19]=R;d.faceidx+=15;d.lineidx+=20}E=[t+45,t+46,t+1,t,t+47,t+2];[w[15],w[15],w[0],w[0]];e=d.faceidx;l=d.lineidx;P=3*(g=E[0]);L=3*(n=E[1]);S=3*(m=E[4]);ia=3*(B=E[2]);aa=3*(R=E[5]);T=3*(ca=E[3]);U=x=w[15];la=A=w[0];F[P]=U.x;F[L]=x.x;F[T]=A.x;F[P+1]=U.y;F[L+1]=x.y;F[T+1]=A.y;F[P+2]=U.z;F[L+2]=x.z;F[T+2]=A.z;F[L]=x.x;F[ia]=la.x;F[T]=A.x;F[L+1]=x.y;F[ia+1]=la.y;F[T+1]=A.y;F[L+2]=x.z;F[ia+2]=la.z;F[T+2]=A.z;F[S]=x.x;F[aa]=la.x;F[S+1]=x.y;F[aa+1]=la.y;F[S+2]=x.z;F[aa+2]=la.z;G.normalize();p.normalize();
F[H]=p.x;F[K]=F[Y]=G.x;F[H+1]=p.y;F[K+1]=F[Y+1]=G.y;F[H+2]=p.z;F[K+2]=F[Y+2]=G.z;Q[e]=g;Q[e+1]=n;Q[e+2]=ca;Q[e+3]=n;Q[e+4]=B;Q[e+5]=ca;Q[e+6]=g;Q[e+7]=ca;Q[e+8]=W;Q[e+9]=m;Q[e+10]=O;Q[e+11]=R;Q[e+12]=m;Q[e+13]=I;Q[e+14]=R;D[l]=g;D[l+1]=n;D[l+2]=g;D[l+3]=ca;D[l+4]=B;D[l+5]=ca;D[l+6]=g;D[l+7]=ca;D[l+8]=m;D[l+9]=n;D[l+10]=m;D[l+11]=R;D[l+12]=B;D[l+13]=R;D[l+14]=m;D[l+15]=I;D[l+16]=m;D[l+17]=R;D[l+18]=I;D[l+19]=R;d.faceidx+=15;d.lineidx+=20}d=new a.Vector3;q.push({centroid:d.addVectors(c.start,c.end).multiplyScalar(.5)});
c=v.updateGeoGroup(0);h(this.boundingSphere,q,c.vertexArray,c.vertices)};this.addIsosurface=function(c,d,h){var e,k=void 0!==d.isoval&&"number"==typeof d.isoval?d.isoval:0,g=!!d.voxel,w=void 0===d.smoothness?1:d.smoothness,p=c.size.x,q=c.size.y,m=c.size.z,f=new Int16Array(p*q*m),z=c.data;var x=0;for(e=f.length;x<e;++x)f[x]=-1;f=new Uint8Array(p*q*m);x=0;for(e=z.length;x<e;++x)0<(0<=k?z[x]-k:k-z[x])&&(f[x]|=2);x=[];e=[];a.MarchingCube.march(f,x,e,{fulltable:!0,voxel:g,unitCube:c.unit,origin:c.origin,
matrix:c.matrix,nX:p,nY:q,nZ:m});!g&&0<w&&a.MarchingCube.laplacianSmooth(w,x,e);g=[];w=[];p=[];if(d.selectedRegion&&void 0===d.coords&&(d.coords=d.selectedRegion),void 0!==d.coords){q=d.coords[0].x;m=d.coords[0].y;f=d.coords[0].z;k=d.coords[0].x;z=d.coords[0].y;for(var B=d.coords[0].z,A=0;A<d.coords.length;A++)d.coords[A].x>q?q=d.coords[A].x:d.coords[A].x<k&&(k=d.coords[A].x),d.coords[A].y>m?m=d.coords[A].y:d.coords[A].y<z&&(z=d.coords[A].y),d.coords[A].z>f?f=d.coords[A].z:d.coords[A].z<B&&(B=d.coords[A].z);
A=2;void 0!==d.radius&&(A=d.radius);void 0!==d.selectedOffset&&(A=d.selectedOffset);void 0!==d.seldist&&(A=d.seldist);k-=A;q+=A;z-=A;m+=A;B-=A;f+=A;for(var t=0;t<x.length;t++){var F;if(F=x[t].x>k&&x[t].x<q&&x[t].y>z&&x[t].y<m&&x[t].z>B&&x[t].z<f)a:{for(var D=F=void 0,E=d.coords,P=0;P<E.length;P++)if(D=E[P],F=x[t],Math.sqrt(Math.pow(D.x-F.x,2)+Math.pow(D.y-F.y,2)+Math.pow(D.z-F.z,2))<=A){F=!0;break a}F=!1}F?(g.push(w.length),w.push(x[t])):g.push(-1)}for(x=0;x+2<e.length;x+=3)-1!==g[e[x]]&&-1!==g[e[x+
1]]&&-1!==g[e[x+2]]&&(p.push(e[x]-(e[x]-g[e[x]])),p.push(e[x+1]-(e[x+1]-g[e[x+1]])),p.push(e[x+2]-(e[x+2]-g[e[x+2]])));x=w;e=p}n(this,v,{vertexArr:x,faceArr:e,normalArr:[],clickable:d.clickable,hoverable:d.hoverable});this.updateStyle(d);e=new a.Vector3(c.origin.x,c.origin.y,c.origin.z);g=new a.Vector3(c.size.x*c.unit.x,c.size.y*c.unit.y,c.size.z*c.unit.z);c=new a.Vector3(0,0,0);d=e.clone();e=e.clone().add(g);for(g=0;g<x.length;g++)c.add(x[g]),d.max(x[g]),e.min(x[g]);c.divideScalar(x.length);x=c.distanceTo(e);
d=c.distanceTo(d);this.boundingSphere.center=c;this.boundingSphere.radius=Math.max(x,d);"function"==typeof h&&h()};this.addVolumetricData=function(c,d,h){c=new a.VolumeData(c,d);this.addIsosurface(c,h)};this.finalize=function(){return d(v),v.initTypedArrays(),v};this.globj=function(c){if(A&&(c.remove(A),A=null),!this.hidden){d(v);v.initTypedArrays();this.wireframe&&v.setUpWireframe();if(void 0!==this.color){var e=this.color,h,l,g,n;for(n in e=e||a.CC.color(e),v.colorsNeedUpdate=!0,e.constructor!==
Array&&(h=e.r,l=e.g,g=e.b),v.geometryGroups){var w=v.geometryGroups[n],q=w.colorArray,x=0;for(w=w.vertices;x<w;++x)e.constructor===Array&&(g=e[x],h=g.r,l=g.g,g=g.b),q[3*x]=h,q[3*x+1]=l,q[3*x+2]=g}}p=new a.Object3D;e=this.side==a.DoubleSide?new a.MeshDoubleLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:1>this.opacity,opacity:this.opacity,wireframeLinewidth:this.linewidth}):new a.MeshLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:1>this.opacity,opacity:this.opacity,
wireframeLinewidth:this.linewidth});e=new a.Mesh(v,e);p.add(e);e=new a.LineBasicMaterial({linewidth:this.linewidth,color:this.color});e=new a.Line(t,e,a.LinePieces);p.add(e);A=p.clone();c.add(A)}};this.removegl=function(a){A&&(void 0!==A.geometry&&A.geometry.dispose(),void 0!==A.material&&A.material.dispose(),a.remove(A),A=null);p=null}}var d=function(a){a=a.updateGeoGroup(0);0<a.vertices&&a.truncateArrayBuffers(!0,!0)},h=function(a,c,d,h){var g;if(a.center.set(0,0,0),0<c.length){var n=0;for(g=c.length;n<
g;++n)a.center.add(c[n].centroid);a.center.divideScalar(c.length)}c=a.radius*a.radius;d.length/3<h&&(h=d.length/3);n=0;for(g=h;n<g;n++)h=a.center.distanceToSquared({x:d[3*n],y:d[3*n+1],z:d[3*n+2]}),c=Math.max(c,h);a.radius=Math.sqrt(c)},n=function(c,d,g){var n=g.faceArr;0!==g.vertexArr.length&&0!==n.length||console.warn("Error adding custom shape component: No vertices and/or face indices supplied!");n=g.color;void 0===n&&(n=c.color);n=a.CC.color(n);for(var p=a.splitMesh(g),q=0,e=p.length;q<e;q++){var k=
void 0,z=void 0,l,u=void 0,C=void 0;var w=c;var x=d,G=p[q],m=p[q].colorArr?p[q].colorArr:n,f=g.clickable,t=x.addGeoGroup(),M=G.vertexArr,D=G.normalArr;G=G.faceArr;t.vertices=M.length;t.faceidx=G.length;var X=t.vertexArray,Q=t.colorArray;m.constructor!==Array&&(z=m.r,k=m.g,C=m.b);var F=0;for(l=t.vertices;F<l;++F){var E=3*F;var L=M[F];X[E]=L.x;X[E+1]=L.y;X[E+2]=L.z;m.constructor===Array&&(z=(u=m[F]).r,k=u.g,C=u.b);Q[E]=z;Q[E+1]=k;Q[E+2]=C}if(f)for(F=0,l=t.faceidx/3;F<l;++F)k=G[E=3*F],C=G[E+1],u=G[E+
2],E=new a.Vector3,z=new a.Vector3,m=new a.Vector3,w.intersectionShape.triangle.push(new a.Triangle(E.copy(M[k]),z.copy(M[C]),m.copy(M[u])));if(f){l=new a.Vector3(0,0,0);for(u=F=0;u<x.geometryGroups.length;u++)l.add(x.geometryGroups[u].getCentroid()),F++;l.divideScalar(F);h(w.boundingSphere,{centroid:l},X,t.vertices)}if(t.faceArray=new Uint16Array(G),t.truncateArrayBuffers(!0,!0),D.length<t.vertices)t.setNormals();else for(x=t.normalArray=new Float32Array(3*t.vertices),F=0,l=t.vertices;F<l;++F)E=
3*F,w=D[F],x[E]=w.x,x[E+1]=w.y,x[E+2]=w.z;t.setLineIndices();t.lineidx=t.lineArray.length}},g=function(c,d){void 0!==d.color?(c.color=d.color||new a.Color,d.color instanceof a.Color||(c.color=a.CC.color(d.color))):c.color=a.CC.color(0);c.wireframe=!!d.wireframe;c.opacity=d.alpha?a.Math.clamp(d.alpha,0,1):1;void 0!==d.opacity&&(c.opacity=a.Math.clamp(d.opacity,0,1));c.side=void 0!==d.side?d.side:a.DoubleSide;c.linewidth=void 0===d.linewidth?1:d.linewidth;c.clickable=!!d.clickable;c.callback="function"==
typeof d.callback?d.callback:null;c.hoverable=!!d.hoverable;c.hover_callback="function"==typeof d.hover_callback?d.hover_callback:null;c.unhover_callback="function"==typeof d.unhover_callback?d.unhover_callback:null;c.hidden=d.hidden;c.frame=d.frame};return Object.defineProperty(c.prototype,"position",{get:function(){return this.boundingSphere.center}}),Object.defineProperty(c.prototype,"x",{get:function(){return this.boundingSphere.center.x}}),Object.defineProperty(c.prototype,"y",{get:function(){return this.boundingSphere.center.y}}),
Object.defineProperty(c.prototype,"z",{get:function(){return this.boundingSphere.center.z}}),c}();a.ShapeIDCount=0;a.splitMesh=function(a){if(64E3>a.vertexArr.length)return[a];var c=[{vertexArr:[],normalArr:[],faceArr:[]}];a.colorArr&&(c.colorArr=[]);for(var h=[],n=[],g=0,p=a.faceArr,q=0,x=p.length;q<x;q+=3){for(var t=c[g],v=0;3>v;v++){var B=p[q+v];h[B]!==g&&(h[B]=g,n[B]=t.vertexArr.length,t.vertexArr.push(a.vertexArr[B]),a.normalArr&&a.normalArr[B]&&t.normalArr.push(a.normalArr[B]),a.colorArr&&a.colorArr[B]&&
t.colorArr.push(a.colorArr[B]));t.faceArr.push(n[B])}64E3<=t.vertexArr.length&&(c.push({vertexArr:[],normalArr:[],faceArr:[]}),a.colorArr&&(c.colorArr=[]),g++)}return c};a.GLViewer=function(){return function(c,d){function h(a){var c=[];if(void 0===a||void 0===a.model)for(a=0;a<l.length;a++)l[a]&&c.push(l[a]);else for(c=a.model,D.isArray(c)||(c=[c]),a=0;a<c.length;a++)if("number"==typeof c[a]){var d=c[a];0>d&&(d+=l.length);c[a]=l[d]}return c}function n(a){var c=[];void 0===a&&(a={});for(var d=h(a),
e=0;e<d.length;e++)c=c.concat(d[e].selectedAtoms(a));return c}function g(a,c,d,e,f,l,m){for(var k=h(c),g=0;g<k.length;g++)k[g][a](c,d,e,f,l,m)}function p(c){var d=new a.MeshLambertMaterial,e;for(e in d.vertexColors=a.VertexColors,c)"color"===e||"map"===e||c.hasOwnProperty(e)&&(d[e]=c[e]);return void 0!==c.opacity&&(1===c.opacity?d.transparent=!1:d.transparent=!0),d}var q=(d=d||{}).callback,x=d.defaultcolors;x||(x=a.elementColors.defaultColors);var t=d.nomouse,v=0;d.backgroundColor=d.backgroundColor||
"#ffffff";v=a.CC.color(d.backgroundColor).getHex();var B=0;B=parseFloat(d.camerax);var e=this,k=D(c),z=null,l=[],u={},C=[],w=[],J=[],G=[],m=[],f=null,N=500,M=0;null!=d.hoverDuration&&(N=d.hoverDuration);void 0===d.antialias&&(d.antialias=!0);void 0===d.cartoonQuality&&(d.cartoonQuality=5);var E=function(){var a=k[0],c=a.getBoundingClientRect();if(0==c.width&&0==c.height&&"none"===a.style.display){var d=a.style.position,e=a.style.visibility;a.style.display="block";a.style.visibility="hidden";a.style.position=
"absolute";c=a.getBoundingClientRect();a.style.display="none";a.style.visibility=e;a.style.position=d}return c},X=E().width,Q=E().height,F=null,L=null,Z=[],P=new a.Renderer({antialias:d.antialias,preserveDrawingBuffer:!0,premultipliedAlpha:!1,id:d.id,row:d.row,col:d.col,rows:d.rows,cols:d.cols,canvas:d.canvas,containerWidth:X,containerHeight:Q});P.domElement.style.width="100%";P.domElement.style.height="100%";P.domElement.style.padding="0";P.domElement.style.position="absolute";P.domElement.style.top=
"0px";P.domElement.style.left="0px";P.domElement.style.zIndex="0";var Y=d.row,S=d.col,R=d.cols,W=d.rows,O=d.viewers,I=d.control_all,H=P.getAspect(X,Q),K=new a.Camera(20,H,1,800,d.orthographic);K.position=new a.Vector3(B,0,150);var ka=new a.Vector3;K.lookAt(ka);var ca=new a.Raycaster(new a.Vector3(0,0,0),new a.Vector3(0,0,0)),ia=new a.Projector,aa=null,T=null,U=null,la=-50,ja=50,V=new a.Quaternion(0,0,0,1),ha=new a.Quaternion(0,0,0,1),ma=0,pa=new Set,ra=!1,Na=0,Oa=0,bb=0,Ma=0,Ya=0,Wb=0,vb=0,wb=function(){0>
--ma&&(ma=0)},Ab=function(){var a=0,c;for(c in u)if(u.hasOwnProperty(c)){var d=parseInt(c);isNaN(d)||(c=d);c>a&&(a=c)}return a+1},qa=function(){var a=K.position.z-T.position.z;1>a&&(a=1);K.near=a+la;1>K.near&&(K.near=1);K.far=a+ja;K.near+1>K.far&&(K.far=K.near+1);K.fov=20;K.right=a*Math.tan(Math.PI/180*20);K.left=-K.right;K.top=K.right/H;K.bottom=-K.top;K.updateProjectionMatrix();aa.fog.near=K.near+.4*(K.far-K.near);aa.fog.far=K.far;d.disableFog&&(aa.fog.near=aa.fog.far)},ea=function(a){if(P.setViewport(),
aa&&(qa(),P.render(aa,K),F&&F(e.getView()),!a&&0<Z.length)){a=e.getView();for(var c=0;c<Z.length;c++)Z[c].setView(a,!0)}};!function(){(aa=new a.Scene).fog=new a.Fog(v,100,200);U=new a.Object3D;(T=new a.Object3D).useQuaternion=!0;T.quaternion=new a.Quaternion(0,0,0,1);T.add(U);aa.add(T);var c=new a.Light(16777215);c.position=(new a.Vector3(.2,.2,1)).normalize();c.intensity=1;aa.add(c)}();P.setClearColorHex(v,1);aa.fog.color=a.CC.color(v);var Za=function(a,c){f!=a&&(f&&f.unhover_callback(f,e,c,k),f=
a,a&&void 0!==a.hover_callback&&"function"==typeof a.hover_callback&&a.hover_callback(a,e,c,k))},na=function(a){var c=a.originalEvent.targetTouches[0].pageX-a.originalEvent.targetTouches[1].pageX;a=a.originalEvent.targetTouches[0].pageY-a.originalEvent.targetTouches[1].pageY;return Math.sqrt(c*c+a*a)},Ta=function(a){var c=a.pageX;return null==c&&(c=a.originalEvent.pageX),a.originalEvent.targetTouches&&a.originalEvent.targetTouches[0]?c=a.originalEvent.targetTouches[0].pageX:a.originalEvent.changedTouches&&
a.originalEvent.changedTouches[0]&&(c=a.originalEvent.changedTouches[0].pageX),c},r=function(a){var c=a.pageY;return null==c&&(c=a.originalEvent.pageY),a.originalEvent.targetTouches&&a.originalEvent.targetTouches[0]?c=a.originalEvent.targetTouches[0].pageY:a.originalEvent.changedTouches&&a.originalEvent.changedTouches[0]&&(c=a.originalEvent.changedTouches[0].pageY),c},lb=function(c,d){c/=X;d/=Q;var e=T.quaternion,f=new a.Vector3(0,0,T.position.z);return ia.projectVector(f,K),f.x+=2*c,f.y-=2*d,ia.unprojectVector(f,
K),f.z=0,f.applyQuaternion(e),f},Bb=function(){var a=z.get(0),c=a.getBoundingClientRect(),d=a.ownerDocument;a=d.documentElement;d=d.defaultView;return{top:c.top+d.pageYOffset-a.clientTop,left:c.left+d.pageXOffset-a.clientLeft}},Xb=function(a,c){if(null!=O&&!I){var d=X/R,e=Q/W,f=Bb();a=Math.floor((a-f.left)/d);if(W-Math.floor((c-f.top)/e)-1!=Y||a!=S)return!1}return!0};D("body").bind("mouseup touchend",function(a){if(ra&&aa){var c=Ta(a),d=r(a);if(c==Na&&d==Oa){var f=Bb();0!=G.length&&(ca.setFromCamera({x:(c-
f.left)/X*2-1,y:-(d-f.top)/Q*2+1,z:-1},K),(c=ca.intersectObjects(U,G)).length&&(c=c[0].clickable,void 0!==c.callback&&"function"==typeof c.callback&&c.callback(c,e,a,k)));!0}}ra=!1});var cb,La=function(a){if(d.lowerZoomLimit&&0<d.lowerZoomLimit){var c=150-d.lowerZoomLimit;a>c&&(a=c)}d.upperZoomLimit&&0<d.upperZoomLimit&&(c=150-d.upperZoomLimit,a<c&&(a=c));return 150<a&&(a=149.85),a};this.setViewChangeCallback=function(a){"function"!=typeof a&&null!=a||(F=a)};this.setStateChangeCallback=function(a){"function"!=
typeof a&&null!=a||(L=a)};this.getInternalState=function(){for(var a={models:[],surfaces:[],shapes:[],labels:[]},c=0;c<l.length;c++)l[c]&&(a.models[c]=l[c].getInternalState());return a};this.setInternalState=function(c){this.clear();c=c.models;for(var d=0;d<c.length;d++)c[d]&&(l[d]=new a.GLModel(d),l[d].setInternalState(c[d]));this.render()};this.setZoomLimits=function(a,c){void 0!==a&&(d.lowerZoomLimit=a);c&&(d.upperZoomLimit=c);T.position.z=La(T.position.z);ea()};var db,ya=this._handleMouseDown=
function(a){if(a.preventDefault(),aa){var c=Ta(a),d=r(a);void 0!==c&&(ra=!0,null,cb=a.which,Na=c,Oa=d,bb=0,a.originalEvent.targetTouches&&2==a.originalEvent.targetTouches.length&&(bb=na(a)),V=T.quaternion.clone(),Ya=T.position.z,Ma=U.position.clone(),Wb=la,vb=ja)}},Yb=this._handleMouseScroll=function(a){if(a.preventDefault(),aa){var c=Ta(a),d=r(a);void 0!==c&&Xb(c,d)&&(c=.85*(150-T.position.z),d=1,a.originalEvent.ctrlKey&&(d=-1),a.originalEvent.detail?T.position.z+=d*c*a.originalEvent.detail/10:a.originalEvent.wheelDelta&&
(T.position.z-=d*c*a.originalEvent.wheelDelta/400),T.position.z=La(T.position.z),ea())}};this.pngURI=function(){return this.getCanvas().toDataURL("image/png")};this.getCanvas=function(){return z.get(0)};this.getRenderer=function(){return P};this.setHoverDuration=function(a){N=a};var Ob=this._handleMouseMove=function(a){clearTimeout(db);var c=Bb(),d=(Ta(a)-c.left)/X*2-1,e=-(r(a)-c.top)/Q*2+1;if(null!==f&&function(a,c){ca.setFromCamera({x:a,y:c,z:-1},K);var d;0!=(d=ca.intersectObjects(U,m)).length&&
void 0!==d[0]||Za(null);void 0!==d[0]&&d[0].clickable!==f&&Za(null)}(d,e),0<m.length&&(db=setTimeout(function(){if(0!=m.length){ca.setFromCamera({x:d,y:e,z:-1},K);var a;(a=ca.intersectObjects(U,m)).length?(a=a[0].clickable,Za(a),f=a):Za(null)}!0},N)),a.preventDefault(),aa&&ra){var l=0,k=Ta(a),h=r(a);if(void 0!==k&&Xb(k,h)){var g=(k-Na)/X;c=(h-Oa)/Q;0!=bb&&a.originalEvent.targetTouches&&2==a.originalEvent.targetTouches.length?(l=2,c=2*(na(a)-bb)/(X+Q)):a.originalEvent.targetTouches&&3==a.originalEvent.targetTouches.length&&
(l=1);var n=P.getXRatio(),u=P.getYRatio();g*=n;c*=u;var w=Math.sqrt(g*g+c*c);3==l||3==cb&&a.ctrlKey?(la=Wb+100*g,ja=vb-100*c):2==l||3==cb||a.shiftKey?(80>(a=.85*(150-T.position.z))&&(a=80),T.position.z=Ya+c*a,T.position.z=La(T.position.z)):1==l||2==cb||a.ctrlKey?(c=lb(n*(k-Na),u*(h-Oa)),U.position.addVectors(Ma,c)):0!==l&&1!=cb||0===w||(a=Math.sin(w*Math.PI)/w,ha.x=Math.cos(w*Math.PI),ha.y=0,ha.z=a*g,ha.w=-a*c,T.quaternion.set(1,0,0,0),T.quaternion.multiply(ha),T.quaternion.multiply(V));ea()}}},Wa=
function(a){k=a;X=E().width;Q=E().height;H=P.getAspect(X,Q);P.setSize(X,Q);k.append(P.domElement);z=D(P.domElement);t||(z.bind("mousedown touchstart",ya),z.bind("DOMMouseScroll mousewheel",Yb),z.bind("mousemove touchmove",Ob),z.bind("contextmenu",function(a){a.preventDefault()}))};Wa(k);this.setContainer=function(a){return"string"===D.type(a)&&(a=D("#"+a)),a||(a=k),Wa(a),this};this.setBackgroundColor=function(c,d){void 0===d?d=1:(0>d||1<d)&&(d=1);c=a.CC.color(c);return aa.fog.color=c,v=c.getHex(),
P.setClearColorHex(c.getHex(),d),ea(),this};this.setProjection=function(a){K.ortho="orthographic"===a;qa()};this.setViewStyle=function(c){if("outline"===c.style){var d={};c.color&&(d.color=a.CC.color(c.color));c.width&&(d.width=c.width);P.enableOutline(d)}else P.disableOutline();return this};d.style&&this.setViewStyle(d);this.setWidth=function(a){return X=a||X,P.setSize(X,Q),this};this.setHeight=function(a){return Q=a||Q,P.setSize(X,Q),this};this.resize=function(){return X=E().width,Q=E().height,
H=P.getAspect(X,Q),P.setSize(X,Q),K.aspect=H,K.updateProjectionMatrix(),ea(),this};D(window).resize(this.resize);(new window.ResizeObserver(this.resize)).observe(k[0]);this.getModel=function(c){return void 0===c?0==l.length?null:l[l.length-1]:c instanceof a.GLModel?c:c in l?l[c]:0==l.length?null:l[l.length-1]};var Jb,Ia=function(c,d,e){if(1==e)return d;if(0==e)return c;var f=c.x*d.x+c.y*d.y+c.z*d.z+c.w*d.w;if(.9995<f)return c=new a.Quaternion(c.x+e*(d.x-c.x),c.y+e*(d.y-c.y),c.z+e*(d.z-c.z),c.w+e*
(d.w-c.w)),c.normalize(),c;0>f&&(d=d.clone().multiplyScalar(-1),f=-f);1<f?f=1:-1>f&&(f=-1);e*=Math.acos(f);d=d.clone();d.sub(c.clone().multiplyScalar(f));d.normalize();f=Math.cos(e);e=Math.sin(e);c=new a.Quaternion(c.x*f+d.x*e,c.y*f+d.y*e,c.z*f+d.z*e,c.w*f+d.w*e);return c.normalize(),c};this.spin=function(a){if(clearInterval(Jb),void 0===a&&(a="y"),"boolean"==typeof a){if(!a)return;a="y"}Array.isArray(a)&&(a={x:a[0],y:a[1],z:a[2]});var c=this;Jb=setInterval(function(){c.rotate(1,a)},25)};var ua=function(a,
c,d,e,f,l){var k=Math.ceil(a/20);1>k&&(k=1);ma++;var m=U.position.clone(),h=T.position.z;a=T.quaternion.clone();var g=ka.clone();if(c){c=(k=Array(k)).length;for(var n=0;n<c;n++){var u=(n+1)/c,w={mpos:m,rz:h,rot:a};d&&(w.mpos=d.clone().sub(m).multiplyScalar(u).add(m));void 0!==e&&null!=e&&(w.rz=h+u*(e-h));f&&(w.rot=Ia(a,f,u));l&&(w.cam=l.clone().sub(g).multiplyScalar(u).add(g));k[n]=w}var p=0,q=function(){var a=k[p];p+=1;a.mpos&&(U.position=a.mpos);a.rz&&(T.position.z=a.rz);a.rot&&(T.quaternion=a.rot);
a.cam&&K.lookAt(a.cam);p<k.length?setTimeout(q,20):wb();ea()};setTimeout(q,20)}else{var z,r,C;c=1/k;if(d&&(z=d.clone().sub(m).multiplyScalar(c)),void 0!==e&&null!=e&&(r=c*(e-h)),f){d=Ia(a,f,c);var ba=a.clone().inverse().multiply(d)}l&&(C=l.clone().sub(g).multiplyScalar(c));var x=0,v=function(){x+=1;z&&U.position.add(z);r&&(T.position.z+=r);ba&&T.quaternion.multiply(ba);C&&(ka.add(C),K.lookAt(ka));x<k?setTimeout(v,20):wb();ea()};setTimeout(v,20)}};this.rotate=function(c,d,e,f){if(e=void 0!==e?e:0,
void 0===d&&(d="y"),"x"==d?d={x:1,y:0,z:0}:"y"==d?d={x:0,y:1,z:0}:"z"==d&&(d={x:0,y:0,z:1}),"vx"==d?d={vx:1,vy:0,vz:0}:"vy"==d?d={vx:0,vy:1,vz:0}:"vz"==d&&(d={vx:0,vy:0,vz:1}),void 0!==d.vx)d=new a.Vector3(d.vx,d.vy,d.vz),d.applyQuaternion(T.quaternion),d={x:d.x,y:d.y,z:d.z};var l=Math.PI*c/180,k,m,h;c=Math.sin(l/2);l=Math.cos(l/2);d=(k=d.x*c,m=d.y*c,h=d.z*c,(new a.Quaternion(k,m,h,l)).normalize());e?(k=(new a.Quaternion).copy(T.quaternion).multiply(d),ua(e,f,U.position,T.position.z,k,ka)):(T.quaternion.multiply(d),
ea());return this};this.surfacesFinished=function(){for(var a in u)if(!u[a][0].done)return!1;return!0};this.getView=function(){if(!U)return[0,0,0,0,0,0,0,1];var a=U.position,c=T.quaternion;return[a.x,a.y,a.z,T.position.z,c.x,c.y,c.z,c.w]};this.setView=function(a,c){return void 0!==a&&(a instanceof Array||8!==a.length)&&U&&T?(U.position.x=a[0],U.position.y=a[1],U.position.z=a[2],T.position.z=a[3],T.quaternion.x=a[4],T.quaternion.y=a[5],T.quaternion.z=a[6],T.quaternion.w=a[7],void 0!==a[8]&&(T.position.x=
a[8],T.position.y=a[9]),ea(c),this):this};this.render=function(c,d){P.setViewport();G.splice(0,G.length);m.splice(0,m.length);for(var e=0,f=l.length;e<f;e++){var k=l[e];if(k){var h=k.selectedAtoms({clickable:!0});k=k.selectedAtoms({hoverable:!0});Array.prototype.push.apply(m,k);Array.prototype.push.apply(G,h)}}e=0;for(f=C.length;e<f;e++)(h=C[e])&&h.clickable&&G.push(h),h&&h.hoverable&&m.push(h);h=this.getView();L&&L(this.getInternalState());d||(d=P.supportedExtensions());for(e=0;e<l.length;e++)l[e]&&
l[e].globj(U,d);for(e=0;e<C.length;e++)C[e]&&(void 0===C[e].frame||0>M||0>C[e].frame||C[e].frame==M?C[e].globj(U,d):C[e].removegl(U));for(e=0;e<w.length;e++)w[e]&&void 0!==w[e].frame&&0<=w[e].frame&&(U.remove(w[e].sprite),(0>M||w[e].frame==M)&&U.add(w[e].sprite));for(e in u)if(u.hasOwnProperty(e))for(k=u[e],f=0;f<k.length;f++)if(k.hasOwnProperty(f)){var g=k[f].geo;if(!k[f].finished||d.regen){g.verticesNeedUpdate=!0;g.elementsNeedUpdate=!0;g.normalsNeedUpdate=!0;g.colorsNeedUpdate=!0;g.buffersNeedUpdate=
!0;g.boundingSphere=null;k[f].done&&(k[f].finished=!0);k[f].lastGL&&U.remove(k[f].lastGL);var n=null;if(n=k[f].mat instanceof a.LineBasicMaterial?new a.Line(g,k[f].mat):new a.Mesh(g,k[f].mat),k[f].mat.transparent&&0==k[f].mat.opacity?n.visible=!1:n.visible=!0,1<k[f].symmetries.length||1==k[f].symmetries.length&&!k[f].symmetries[f].isIdentity()){var p=new a.Object3D;for(g=0;g<k[f].symmetries.length;g++){var q=n.clone();q.matrix=k[f].symmetries[g];q.matrixAutoUpdate=!1;p.add(q)}k[f].lastGL=p;U.add(p)}else k[f].lastGL=
n,U.add(n)}}return this.setView(h),"function"==typeof c&&c(this),this};this.selectedAtoms=function(a){return n(a)};this.getUniqueValues=function(a,c){void 0===c&&(c={});c=n(c);var d={},e;for(e in c)c[e].hasOwnProperty(a)&&(d[c[e][a]]=!0);return Object.keys(d)};this.pdbData=function(a){a=n(a);for(var c="",d=0,e=a.length;d<e;++d)c+=a[d].pdbline+"\n";return c};this.zoom=function(a,c,d){c=void 0!==c?c:0;a=150-(150-T.position.z)/(a||2);return 0<c?ua(c,d,U.position,La(a),T.quaternion,ka):(T.position.z=
La(a),ea()),this};this.translate=function(c,d,e,f){e=void 0!==e?e:0;c/=X;d/=Q;var l=new a.Vector3(0,0,-150);ia.projectVector(l,K);l.x-=c;l.y-=d;ia.unprojectVector(l,K);l.z=0;c=ka.clone().add(l);return 0<e?ua(e,f,U.position,T.position.z,T.quaternion,c):(ka=c,K.lookAt(ka),ea()),this};this.translateScene=function(a,c,d,e){d=void 0!==d?d:0;a=lb(a,c);a=U.position.clone().add(a);return 0<d?ua(d,e,U.position,T.position.z,T.quaternion,ka):(U.position=a,ea()),this};this.fitSlab=function(c){c=n(c||{});var d=
a.getExtent(c);c=d[1][0]-d[0][0];var e=d[1][1]-d[0][1];d=d[1][2]-d[0][2];c=Math.sqrt(c*c+e*e+d*d);return 5>c&&(c=5),la=-c/1.9,ja=c/2,this};this.center=function(c,d,e){var f,l;d=void 0!==d?d:0;var k=n(c=c||{}),m=a.getExtent(k);D.isEmptyObject(c)?(D.each(C,function(c,d){d&&d.boundingSphere&&d.boundingSphere.center&&(c=d.boundingSphere.center,d=d.boundingSphere.radius,0<d?(k.push(new a.Vector3(c.x+d,c.y,c.z)),k.push(new a.Vector3(c.x-d,c.y,c.z)),k.push(new a.Vector3(c.x,c.y+d,c.z)),k.push(new a.Vector3(c.x,
c.y-d,c.z)),k.push(new a.Vector3(c.x,c.y,c.z+d)),k.push(new a.Vector3(c.x,c.y,c.z-d))):k.push(c))}),m=a.getExtent(k),f=k,l=m):(f=n({}),l=a.getExtent(f));c=new a.Vector3(m[2][0],m[2][1],m[2][2]);f=l[1][0]-l[0][0];var h=l[1][1]-l[0][1];l=l[1][2]-l[0][2];l=Math.sqrt(f*f+h*h+l*l);5>l&&(l=5);la=-l/1.9;ja=l/2;f=m[1][0]-m[0][0];h=m[1][1]-m[0][1];l=m[1][2]-m[0][2];5>(l=Math.sqrt(f*f+h*h+l*l))&&(l=5);m=25;for(l=0;l<k.length;l++)k[l]&&(f=c.distanceToSquared(k[l]),f>m&&(m=f));l=2*Math.sqrt(m);c=c.clone().multiplyScalar(-1);
return 0<d?ua(d,e,c,T.position.z,T.quaternion,ka):(U.position=c,ea()),this};this.zoomTo=function(c,e,f){var l,k;e=void 0!==e?e:0;var m=n(c=c||{}),h=a.getExtent(m);D.isEmptyObject(c)?(D.each(C,function(c,d){d&&d.boundingSphere&&d.boundingSphere.center&&(c=d.boundingSphere.center,d=d.boundingSphere.radius,0<d?(m.push(new a.Vector3(c.x+d,c.y,c.z)),m.push(new a.Vector3(c.x-d,c.y,c.z)),m.push(new a.Vector3(c.x,c.y+d,c.z)),m.push(new a.Vector3(c.x,c.y-d,c.z)),m.push(new a.Vector3(c.x,c.y,c.z+d)),m.push(new a.Vector3(c.x,
c.y,c.z-d))):m.push(c))}),h=a.getExtent(m),l=m,k=h):(l=n({}),k=a.getExtent(l));l=new a.Vector3(h[2][0],h[2][1],h[2][2]);var g=k[1][0]-k[0][0],u=k[1][1]-k[0][1];k=k[1][2]-k[0][2];g=Math.sqrt(g*g+u*u+k*k);5>g&&(g=5);la=-g/1.9;ja=g/2;0===Object.keys(c).length&&(la=-999999,ja=999999);c=d.minimumZoomToDistance||5;g=h[1][0]-h[0][0];u=h[1][1]-h[0][1];k=h[1][2]-h[0][2];(g=Math.sqrt(g*g+u*u+k*k))<c&&(g=c);h=c*c;for(c=0;c<m.length;c++)m[c]&&(g=l.distanceToSquared(m[c]),g>h&&(h=g));g=2*Math.sqrt(h);l=l.clone().multiplyScalar(-1);
h=-(.5*g/Math.tan(Math.PI/180*K.fov/2)-150);return h=La(h),0<e?ua(e,f,l,h,T.quaternion,ka):(U.position=l,T.position.z=h,ea()),this};this.setSlab=function(a,c){la=a;ja=c};this.getSlab=function(){return{near:la,far:ja}};this.addLabel=function(c,d,e,f){if(d=d||{},e)e=a.getExtent(n(e)),d.position={x:e[2][0],y:e[2][1],z:e[2][2]};c=new a.Label(c,d);return c.setContext(),U.add(c.sprite),d.fixed&&J.push(w.length),w.push(c),f||ea(),c};this.addResLabels=function(a,c,d){var e=w.length;return g("addResLabels",
a,this,c,d),ea(),w.slice(e)};this.addPropertyLabels=function(a,c,d){return g("addPropertyLabels",a,c,this,d),ea(),this};this.removeLabel=function(a){for(var c=0;c<w.length;c++)if(w[c]==a){w.splice(c,1);a.dispose();U.remove(a.sprite);break}return ea(),this};this.removeAllLabels=function(){for(var a=0;a<w.length;a++)w[a]&&w[a].sprite&&U.remove(w[a].sprite);return w.splice(0,w.length),ea(),this};this.setLabelStyle=function(a,c){return U.remove(a.sprite),a.dispose(),a.stylespec=c,a.setContext(),U.add(a.sprite),
ea(),a};this.setLabelText=function(a,c){return U.remove(a.sprite),a.dispose(),a.text=c,a.setContext(),U.add(a.sprite),ea(),a};this.addShape=function(c){c=c||{};c=new a.GLShape(c);return c.shapePosition=C.length,C.push(c),c};this.removeShape=function(a){if(!a)return this;a.removegl(U);for(delete C[a.shapePosition];0<C.length&&void 0===C[C.length-1];)C.pop();return this};this.removeAllShapes=function(){for(var a=0;a<C.length;a++){var c=C[a];c&&c.removegl(U)}return C.splice(0,C.length),this};var wa=
function(c){if(c.hasOwnProperty("x")&&c.hasOwnProperty("y")&&c.hasOwnProperty("z"))return c;c=n(c);if(0==c.length)return{x:0,y:0,z:0};c=a.getExtent(c);return{x:c[0][0]+(c[1][0]-c[0][0])/2,y:c[0][1]+(c[1][1]-c[0][1])/2,z:c[0][2]+(c[1][2]-c[0][2])/2}};this.addSphere=function(c){(c=c||{}).center=wa(c.center);var d=new a.GLShape(c);return d.shapePosition=C.length,d.addSphere(c),C.push(d),d.finalize(),d};this.addBox=function(c){null!=(c=c||{}).corner&&(c.corner=wa(c.corner));null!=c.center&&(c.center=
wa(c.center));var d=new a.GLShape(c);return d.shapePosition=C.length,d.addBox(c),C.push(d),d.finalize(),d};this.addArrow=function(c){(c=c||{}).start=wa(c.start);c.end=wa(c.end);var d=new a.GLShape(c);return d.shapePosition=C.length,d.addArrow(c),C.push(d),d.finalize(),d};this.addCylinder=function(c){(c=c||{}).start=wa(c.start);c.end=wa(c.end);var d=new a.GLShape(c);return d.shapePosition=C.length,c.dashed?d.addDashedCylinder(c):d.addCylinder(c),C.push(d),d.finalize(),d};this.addCurve=function(c){c=
c||{};var d=new a.GLShape(c);return d.shapePosition=C.length,d.addCurve(c),C.push(d),d.finalize(),d};this.addLine=function(c){(c=c||{}).start=wa(c.start);c.end=wa(c.end);c.wireframe=!0;var d=new a.GLShape(c);d.shapePosition=C.length;if(c.dashed){c.dashLength=c.dashLength||.5;c.gapLength=c.gapLength||.5;c.start=c.start||{};c.end=c.end||{};var e,f=new a.Vector3(c.start.x||0,c.start.y||0,c.start.z||0),l=new a.Vector3(c.end.x,c.end.y||0,c.end.z||0);var k=new a.Vector3;new a.Vector3;new a.Vector3;var m=
f.clone(),h=0;k.subVectors(l,f);var g=k.length();k.normalize();var n=k.clone();var u=k.clone();n.multiplyScalar(c.dashLength);u.multiplyScalar(c.gapLength);k=n.length();for(e=u.length();h<g;){if(h+k>g){c.start=f;c.end=l;d.addLine(c);break}m.addVectors(f,n);c.start=f;c.end=m;d.addLine(c);f=m.clone();h+=k;m.addVectors(f,u);f=m.clone();h+=e}d=(d.finalize(),d)}else d.addLine(c);return C.push(d),d.finalize(),d};this.addUnitCell=function(c,d){c=this.getModel(c);(d=d||{alabel:"a",blabel:"b",clabel:"c"}).box=
d.box||{};d.astyle=d.astyle||{color:"red",radius:.1,midpos:-1};d.bstyle=d.bstyle||{color:"green",radius:.1,midpos:-1};d.cstyle=d.cstyle||{color:"blue",radius:.1,midpos:-1};d.alabelstyle=d.alabelstyle||{fontColor:"red",showBackground:!1,alignment:"center",inFront:!1};d.blabelstyle=d.blabelstyle||{fontColor:"green",showBackground:!1,alignment:"center",inFront:!1};d.clabelstyle=d.clabelstyle||{fontColor:"blue",showBackground:!1,alignment:"center",inFront:!1};c.unitCellObjects&&this.removeUnitCell(c);
c.unitCellObjects={shapes:[],labels:[]};var e=c.getCrystData();if(e){if(e.matrix)var f=e.matrix;else{var l=e.a;f=e.b;var k=e.c;var m=e.alpha;var h=e.beta,g=e.gamma;m=m*Math.PI/180;h=h*Math.PI/180;g=g*Math.PI/180;e=Math.cos(h);m=(Math.cos(m)-Math.cos(h)*Math.cos(g))/Math.sin(g);f=new a.Matrix4(l,f*Math.cos(g),k*e,0,0,f*Math.sin(g),k*m,0,0,0,k*Math.sqrt(Math.max(0,1-e*e-m*m)),0,0,0,0,1)}l=[new a.Vector3(0,0,0),new a.Vector3(1,0,0),new a.Vector3(0,1,0),new a.Vector3(0,0,1),new a.Vector3(1,1,0),new a.Vector3(0,
1,1),new a.Vector3(1,0,1),new a.Vector3(1,1,1)];for(k=0;k<l.length;k++)l[k]=l[k].applyMatrix4(f);d.box&&!d.box.hidden&&(d.box.wireframe=!0,f=new a.GLShape(d.box),f.shapePosition=C.length,f.addLine({start:l[0],end:l[1]}),f.addLine({start:l[0],end:l[2]}),f.addLine({start:l[1],end:l[4]}),f.addLine({start:l[2],end:l[4]}),f.addLine({start:l[0],end:l[3]}),f.addLine({start:l[3],end:l[5]}),f.addLine({start:l[2],end:l[5]}),f.addLine({start:l[1],end:l[6]}),f.addLine({start:l[4],end:l[7]}),f.addLine({start:l[6],
end:l[7]}),f.addLine({start:l[3],end:l[6]}),f.addLine({start:l[5],end:l[7]}),C.push(f),c.unitCellObjects.shapes.push(f),f.finalize());d.astyle.hidden||(d.astyle.start=l[0],d.astyle.end=l[1],f=this.addArrow(d.astyle),c.unitCellObjects.shapes.push(f));d.bstyle.hidden||(d.bstyle.start=l[0],d.bstyle.end=l[2],f=this.addArrow(d.bstyle),c.unitCellObjects.shapes.push(f));d.cstyle.hidden||(d.cstyle.start=l[0],d.cstyle.end=l[3],f=this.addArrow(d.cstyle),c.unitCellObjects.shapes.push(f));d.alabel&&(d.alabelstyle.position=
l[1],f=this.addLabel(d.alabel,d.alabelstyle),c.unitCellObjects.labels.push(f));d.blabel&&(d.blabelstyle.position=l[2],f=this.addLabel(d.blabel,d.blabelstyle),c.unitCellObjects.labels.push(f));d.clabel&&(d.clabelstyle.position=l[3],d=this.addLabel(d.clabel,d.clabelstyle),c.unitCellObjects.labels.push(d))}};this.removeUnitCell=function(a){if((a=this.getModel(a)).unitCellObjects){var c=this;a.unitCellObjects.shapes.forEach(function(a){c.removeShape(a)});a.unitCellObjects.labels.forEach(function(a){c.removeLabel(a)})}delete a.unitCellObjects};
this.replicateUnitCell=function(c,d,e,f){c=c||3;d=d||c;e=e||d;var l=(f=this.getModel(f)).getCrystData();if(l){var k=f.selectedAtoms({});l=a.conversionMatrix3(l.a,l.b,l.c,l.alpha,l.beta,l.gamma);for(var m=function(a){return 0==a%2?-a/2:Math.ceil(a/2)},h=0;h<c;h++)for(var g=0;g<d;g++)for(var n=0;n<e;n++)if(0!=h||0!=g||0!=n){var u=new a.Vector3(m(h),m(g),m(n));u.applyMatrix3(l);for(var w=[],p=0;p<k.length;p++){var q={},z;for(z in k[p])q[z]=k[p][z];q.x+=u.x;q.y+=u.y;q.z+=u.z;w.push(q)}f.addAtoms(w)}}};
this.addCustom=function(c){c=c||{};var d=new a.GLShape(c);return d.shapePosition=C.length,d.addCustom(c),C.push(d),d.finalize(),d};this.addVolumetricData=function(c,d,e){e=e||{};c=new a.VolumeData(c,d);return e.transferfn?this.addVolumetricRender(c,e):this.addIsosurface(c,e)};this.addIsosurface=function(c,d,e){d=d||{};var f=new a.GLShape(d);return f.shapePosition=C.length,f.addIsosurface(c,d,e),C.push(f),f};this.addVolumetricRender=function(c,d){d=d||{};c=new a.GLVolumetricRender(c,d);return c.shapePosition=
C.length,C.push(c),c};this.hasVolumetricRender=function(){return P.supportsVolumetric()};this.enableFog=function(c){c?aa.fog=new a.Fog(v,100,200):(d.disableFog=!0,ea())};this.setFrame=function(a){M=a;var c=this;return new Promise(function(d){var e=l.map(function(d){return d.setFrame(a,c)});Promise.all(e).then(function(){d()})})};this.getFrame=function(){return M};this.getNumFrames=function(){for(var a=0,c=0;c<l.length;c++)l[c].getNumFrames()>a&&(a=l[c].getNumFrames());for(c=0;c<C.length;c++)C[c].frame&&
C[c].frame>=a&&(a=C[c].frame+1);for(c=0;c<w.length;c++)w[c].frame&&w[c].frame>=a&&(a=w[c].frame+1);return a};this.animate=function(a){ma++;var c=100,d="forward",e=0;(a=a||{}).interval&&(c=a.interval);a.loop&&(d=a.loop);a.reps&&(e=a.reps);var f=this.getNumFrames(),l=this,k=0,m=1;a.step&&(e/=m=a.step);var h,g,n=0,u=f*e,w=new Date,p=function(a){w=new Date;"forward"==a?l.setFrame(k).then(function(){k=(k+m)%f;h()}):"backward"==a?l.setFrame(f-1-k).then(function(){k=(k+m)%f;h()}):l.setFrame(k).then(function(){m*=
0==(k+=m)%(f-1)?-1:1;h()})};return h=function(){if(l.render(),++n!=u&&l.isAnimated()){var a=c-(new Date-w);a=0<a?a:0;pa.delete(g);g=setTimeout(p,a,d);pa.add(g)}else clearTimeout(g),pa.delete(g),wb()},g=setTimeout(p,0,d),pa.add(g),this};this.stopAnimate=function(){return ma=0,pa.forEach(function(a){clearTimeout(a)}),pa=new Set,this};this.isAnimated=function(){return 0<ma};this.addModel=function(c,e,f){f&&!f.defaultcolors?(f.defaultcolors=x,f.cartoonQuality=d.cartoonQuality):void 0===f&&(f={defaultcolors:x,
cartoonQuality:d.cartoonQuality});var k=new a.GLModel(l.length,f);return k.addMolData(c,e,f),l.push(k),k};this.addModels=function(c,d,e){(e=e||{}).multimodel=!0;e.frames=!0;c=a.GLModel.parseMolData(c,d,e);for(d=0;d<c.length;d++){var f=new a.GLModel(l.length,x);f.setAtomDefaults(c[d]);f.addFrame(c[d]);f.setFrame(0);c.modelData&&f.setModelData(c.modelData[d]);f.setDontDuplicateAtoms(!e.duplicateAssemblyAtoms);l.push(f)}return l};this.addModelsAsFrames=function(c,d,e){(e=e||{}).multimodel=!0;e.frames=
!0;var f=new a.GLModel(l.length,x);return f.addMolData(c,d,e),l.push(f),f};this.addAsOneMolecule=function(c,d,e){(e=e||{}).multimodel=!0;e.onemol=!0;var f=new a.GLModel(l.length,x);return f.addMolData(c,d,e),l.push(f),f};this.removeModel=function(a){if(a=this.getModel(a)){a.removegl(U);for(delete l[a.getID()];0<l.length&&void 0===l[l.length-1];)l.pop();return this}};this.removeAllModels=function(){for(var a=0;a<l.length;a++){var c=l[a];c&&c.removegl(U)}return l.splice(0,l.length),this};this.exportJSON=
function(a,c){var d={};return d.m=void 0===c?l.map(function(c){return c.toCDObject(a)}):[l[c].toCDObject()],JSON.stringify(d)};this.exportVRML=function(){var c=U;g("removegl",U);U=new a.Object3D;this.render(null,{supportsImposters:!1,supportsAIA:!1,regen:!0});var d="#VRML V2.0 utf8\n"+U.vrml()+"\n";return g("removegl",U),U=c,d};this.createModelFrom=function(c,d){for(var e=new a.GLModel(l.length,x),f=0;f<l.length;f++)if(l[f]){var k=l[f].selectedAtoms(c);e.addAtoms(k);d&&l[f].removeAtoms(k)}return l.push(e),
e};this.setStyle=function(a,c){return void 0===c&&(c=a,a={}),g("setStyle",a,c,!1),this};this.addStyle=function(a,c){return void 0===c&&(c=a,a={}),g("setStyle",a,c,!0),this};this.setClickable=function(a,c,d){return g("setClickable",a,c,d),this};this.setHoverable=function(a,c,d,e){return g("setHoverable",a,c,d,e),this};this.vibrate=function(a,c,d,e){return g("vibrate",a,c,d,this,e),this};this.setColorByProperty=function(a,c,d,e){return g("setColorByProperty",a,c,d,e),this};this.setColorByElement=function(a,
c){return g("setColorByElement",a,c),this};var $a=function(a,c){for(var d=[],e=0;e<a.length;e++){var f=a[e];void 0!==f&&(f.x<c[0][0]||f.x>c[1][0]||f.y<c[0][1]||f.y>c[1][1]||f.z<c[0][2]||f.z>c[1][2]||d.push(f))}return d},Ga=function(a){return(a[1][0]-a[0][0])*(a[1][1]-a[0][1])*(a[1][2]-a[0][2])},fa=function(c,d,e){for(var f=new a.Geometry(!0),l=f.updateGeoGroup(0),k=[],m=0,h=c.length;m<h;m++){var g=c[m];g&&(void 0!==g.surfaceColor?k[m]=g.surfaceColor:g.color&&(k[m]=a.CC.color(g.color)))}m=l.vertexArray;
c=d.vertices;h=0;for(g=c.length;h<g;h++){var n=3*l.vertices;m[n]=c[h].x;m[n+1]=c[h].y;m[n+2]=c[h].z;l.vertices++}m=l.colorArray;if(e.voldata&&e.volscheme){k=e.volscheme;h=e.voldata;g=k.range()||[-1,1];n=0;for(var u=c.length;n<u;n++){var w=h.getVal(c[n].x,c[n].y,c[n].z);w=a.CC.color(k.valueToHex(w,g));var p=3*n;m[p]=w.r;m[p+1]=w.g;m[p+2]=w.b}}else if(0<k.length)for(h=0,g=c.length;h<g;h++)n=c[h].atomid,u=3*h,m[u]=k[n].r,m[u+1]=k[n].g,m[u+2]=k[n].b;d=d.faces;l.faceidx=d.length;f.initTypedArrays();var q;
c=l.vertexArray;k=l.normalArray;m=0;for(h=d.length;m<h;m+=3)g=3*d[m],n=3*d[m+1],u=3*d[m+2],w=new a.Vector3(c[g],c[g+1],c[g+2]),p=new a.Vector3(c[n],c[n+1],c[n+2]),(q=new a.Vector3(c[u],c[u+1],c[u+2])).subVectors(q,p),w.subVectors(w,p),q.cross(w),(w=q).normalize(),k[g]+=w.x,k[n]+=w.x,k[u]+=w.x,k[g+1]+=w.y,k[n+1]+=w.y,k[u+1]+=w.y,k[g+2]+=w.z,k[n+2]+=w.z,k[u+2]+=w.z;l.faceArray=new Uint16Array(d);e=new a.Mesh(f,e);return e.doubleSided=!0,e};this.addMesh=function(a){a={geo:a.geometry,mat:a.material,done:!0,
finished:!1};var c=Ab();return u[c]=a,c};var Aa=function(a){var c=[];return D.each(a,function(a,d){c[a]=D.extend({},d)}),c},Db={VDW:a.SurfaceType.VDW,MS:a.SurfaceType.MS,SAS:a.SurfaceType.SAS,SES:a.SurfaceType.SES},Mb=function(c){if(c instanceof a.Gradient)return c;if(void 0!==c.gradient&&a.Gradient.builtinGradients[c.gradient]){var d=void 0===c.min?-1:c.min,e=void 0===c.max?1:c.max;return void 0===c.mid?new a.Gradient.builtinGradients[c.gradient](d,e):new a.Gradient.builtinGradients[c.gradient](d,
e,c.mid)}return c};this.addSurface=function(c,d,f,k,m,h){var g=Ab(),w=null;"string"==typeof c?void 0!==Db[c]?c=Db[c]:console.log("Surface type : "+c+" is not recognized"):void 0===c&&(c=a.SurfaceType.VDW);var q=null,z=null;f=Aa(n(f));q=k?Aa(n(k)):f;!d||!d.volformat||d.voldata instanceof a.VolumeData||(d.voldata=new a.VolumeData(d.voldata,d.volformat));d&&d.volscheme&&(d.volscheme=Mb(d.volscheme));var r=!1;for(k=0;k<l.length;k++)if(l[k]){var C=l[k].getSymmetries();if(1<C.length||1==C.length&&!C[0].isIdentity()){r=
!0;break}}C=function(f,k,l){var h;z=m?Aa(n(m)):l;var u=a.getExtent(l,!0);if(d.map&&d.map.prop){var p=d.map.prop,q=d.map.scheme||d.map.gradient||new a.Gradient.RWB,r=q.range();r||(r=a.getPropertyRange(l,p));d.colorscheme={prop:p,gradient:q}}p=0;for(q=k.length;p<q;p++)(h=k[p]).surfaceColor=a.getColorFromStyle(h,d);var C=Ga(u),x=function(a,c,d){for(var e=[],f={},k=0,l=c.length;k<l;k++)f[c[k].index]=k;k=function(a){for(var c=[],d=0,e=a.length;d<e;d++)a[d].index in f&&c.push(f[a[d].index]);return c};var m=
function(a){var c=[];return c[0]=[a[0][0],a[0][1],a[0][2]],c[1]=[a[1][0],a[1][1],a[1][2]],c},h=function(a){if(64E3>Ga(a))return[a];var c=a[1][0]-a[0][0];var d=a[1][1]-a[0][1];var e=a[1][2]-a[0][2];d=c>d&&c>e?0:d>c&&d>e?1:2;e=m(a);c=m(a);a=(a[1][d]-a[0][d])/2+a[0][d];e[1][d]=a;c[0][d]=a;a=h(e);c=h(c);return a.concat(c)};a=h(a);l=0;for(var g=a.length;l<g;l++){var n=m(a[l]);n[0][0]-=6;n[0][1]-=6;n[0][2]-=6;n[1][0]+=6;n[1][1]+=6;n[1][2]+=6;n=$a(c,n);var u=$a(d,a[l]);e.push({extent:a[l],atoms:k(n),toshow:k(u)})}return e}(u,
k,l);if(z&&z.length&&0<z.length){var v=a.getExtent(z,!0);x.sort(function(a,c){var d=function(a,c){var d=a.extent;a=d[1][0]-d[0][0]-c[2][0];var e=d[1][1]-d[0][1]-c[2][1];c=d[1][2]-d[0][2]-c[2][2];return a*a+e*e+c*c};return d(a,v)-d(c,v)})}var G=[];l=0;for(u=k.length;l<u;l++)h=k[l],G[l]={x:h.x,y:h.y,z:h.z,serial:l,elem:h.elem};if(a.syncSurface){h=function(d){return new Promise(function(l){var m=c,h=x[d].extent,g=x[d].atoms;var n=x[d].toshow;var u=new a.ProteinSurface;n=(u.initparm(h,1!==m,C),u.fillvoxels(G,
g),u.buildboundary(),m!=a.SurfaceType.SES&&m!=a.SurfaceType.MS||(u.fastdistancemap(),u.boundingatom(!1),u.fillvoxelswaals(G,g)),u.marchingcube(m),u.getFacesAndVertices(n));m=a.splitMesh({vertexArr:n.vertices,faceArr:n.faces});h=0;for(g=m.length;h<g;h++)n={vertices:m[h].vertexArr,faces:m[h].faceArr},n=fa(k,n,w),a.mergeGeos(f.geo,n);e.render();l()})};l=[];for(u=0;u<x.length;u++)l.push(h(u));return Promise.all(l).then(function(){return f.done=!0,Promise.resolve(g)})}var t=[];0>c&&(c=0);for(h=0;4>h;h++)l=
new Worker(a.SurfaceWorker),t.push(l),l.postMessage({type:-1,atoms:G,volume:C});return new Promise(function(d,l){for(var m=0,h=function(c){c=a.splitMesh({vertexArr:c.data.vertices,faceArr:c.data.faces});for(var l=0,h=c.length;l<h;l++){var n=fa(k,{vertices:c[l].vertexArr,faces:c[l].faceArr},w);a.mergeGeos(f.geo,n)}e.render();++m==x.length&&(f.done=!0,d(g))},n=function(a){console.log(a.message+" ("+a.filename+":"+a.lineno+")");l(a)},u=0;u<x.length;u++){var p=t[u%t.length];p.onmessage=h;p.onerror=n;
p.postMessage({type:c,expandedExtent:x[u].extent,extendedAtoms:x[u].atoms,atomsToShow:x[u].toshow})}})};w=p(d=d||{});var x=[];k=null;if(r){r={};var v={};for(k=0;k<l.length;k++)r[k]=[],v[k]=[];for(k=0;k<q.length;k++)r[q[k].model].push(q[k]);for(k=0;k<f.length;k++)v[f[k].model].push(f[k]);q=[];for(k=0;k<l.length;k++)0<v[k].length&&(x.push({geo:new a.Geometry(!0),mat:w,done:!1,finished:!1,symmetries:l[k].getSymmetries()}),q.push(C(x[k],r[k],v[k])));k=Promise.all(q)}else x.push({geo:new a.Geometry(!0),
mat:w,done:!1,finished:!1,symmetries:[new a.Matrix4]}),k=C(x[x.length-1],q,f);return u[g]=x,k.surfid=g,h&&"function"==typeof h?(k.then(function(a){h(a)}),g):k};this.setSurfaceMaterialStyle=function(c,d){if(!d.volformat||d.voldata instanceof a.VolumeData||(d.voldata=new a.VolumeData(d.voldata,d.volformat)),d.volscheme&&(d.volscheme=Mb(d.volscheme)),u[c]){var e={};c=u[c];for(var f=0;f<c.length;e={$jscomp$loop$prop$e$219$342:e.$jscomp$loop$prop$e$219$342,$jscomp$loop$prop$t$221$343:e.$jscomp$loop$prop$t$221$343,
$jscomp$loop$prop$n$222$344:e.$jscomp$loop$prop$n$222$344,$jscomp$loop$prop$e$220$345:e.$jscomp$loop$prop$e$220$345,$jscomp$loop$prop$a$223$346:e.$jscomp$loop$prop$a$223$346},f++){var l=c[f].mat=p(d);(c[f].mat.side=a.FrontSide,d.color)?(c[f].mat.color=d.color,c[f].geo.colorsNeedUpdate=!0,e.$jscomp$loop$prop$e$219$342=a.CC.color(d.color),c[f].geo.setColors(function(a){return function(){return a.$jscomp$loop$prop$e$219$342}}(e))):l.voldata&&l.volscheme&&(e.$jscomp$loop$prop$e$220$345=l.volscheme,e.$jscomp$loop$prop$t$221$343=
l.voldata,e.$jscomp$loop$prop$n$222$344=a.CC,e.$jscomp$loop$prop$a$223$346=e.$jscomp$loop$prop$e$220$345.range()||[-1,1],c[f].geo.setColors(function(a){return function(c,d,e){c=a.$jscomp$loop$prop$t$221$343.getVal(c,d,e);return a.$jscomp$loop$prop$n$222$344.color(a.$jscomp$loop$prop$e$220$345.valueToHex(c,a.$jscomp$loop$prop$a$223$346))}}(e)));c[f].finished=!1}}return this};this.removeSurface=function(a){for(var c=u[a],d=0;d<c.length;d++)c[d]&&c[d].lastGL&&(void 0!==c[d].geo&&c[d].geo.dispose(),void 0!==
c[d].mat&&c[d].mat.dispose(),U.remove(c[d].lastGL));return delete u[a],ea(),this};this.removeAllSurfaces=function(){for(var a in u)if(u.hasOwnProperty(a)){for(var c=u[a],d=0;d<c.length;d++)c[d]&&c[d].lastGL&&(void 0!==c[d].geo&&c[d].geo.dispose(),void 0!==c[d].mat&&c[d].mat.dispose(),U.remove(c[d].lastGL));delete u[a]}return ea(),this};this.jmolMoveTo=function(){var a=U.position,c=T.quaternion;return"center { "+-a.x+" "+-a.y+" "+-a.z+" }; moveto .5 quaternion { "+(c.x+" "+c.y+" "+c.z+" "+c.w+" };")};
this.clear=function(){return this.removeAllSurfaces(),this.removeAllModels(),this.removeAllLabels(),this.removeAllShapes(),ea(),this};this.mapAtomProperties=function(a,c){c=n(c||{});if("function"==typeof a)for(var d=0,e=c.length;d<e;d++)a(c[d]);else{e=0;for(var f=c.length;e<f;e++)for(var l=c[e],k=0,m=a.length;k<m;k++){var g=a[k];if(g.props)for(d in g.props){var u;if(u=g.props.hasOwnProperty(d))a:{u=l;var w=g;void 0===w&&(w={});for(var p=h(w),q=0;q<p.length;q++)if(p[q].atomIsSelected(u,w)){u=!0;break a}u=
!1}u&&(l.properties||(l.properties={}),l.properties[d]=g.props[d])}}}return this};this.linkViewer=function(a){return Z.push(a),this};try{"function"==typeof q&&q(this)}catch(ba){console.log("error with glviewer callback: "+ba)}this.getPerceivedDistance=function(){return 150-T.position.z};this.setPerceivedDistance=function(a){T.position.z=150-a};this.setAutoEyeSeparation=function(c){var d=this.getPerceivedDistance();return c||0<K.position.x?K.position.x=d*Math.tan(Math.PI/180*5):K.position.x=-d*Math.tan(Math.PI/
180*5),K.lookAt(new a.Vector3(0,0,T.position.z)),K.position.x};this.setDefaultCartoonQuality=function(a){d.cartoonQuality=a}}}();a.glmolViewer=a.GLViewer;a=a||{};a.Gradient=function(){};a.Gradient.valueToHex=function(){};a.Gradient.range=function(){};a.Gradient.normalizeValue=function(a,d,h){return d>=a?(h<a&&(h=a),h>d&&(h=d),{lo:a,hi:d,val:h}):(h>a&&(h=a),h<d&&(h=d),{lo:d,hi:a,val:a-h+d})};a.Gradient.RWB=function(c,d,h){void 0===d&&D.isArray(c)&&2<=c.length&&(d=c[1],c=c[0]);this.valueToHex=function(n,
g){var p,q;if(n*=1,g?(p=g[0],q=g[1]):(p=c,q=d),void 0===n)return 16777215;var x=a.Gradient.normalizeValue(p,q,n);p=x.lo;var t,v=((q=x.hi)+p)/2;return(n=x.val)<=(v=g&&void 0!==g[2]?g[2]:void 0!==h?h:(p+q)/2)?16711680+256*(t=Math.floor(255*Math.sqrt((n-p)/(v-p))))+t:65536*(t=Math.floor(255*Math.sqrt(1-(n-v)/(q-v))))+256*t+255};this.range=function(){return void 0!==c&&void 0!==d?[c,d]:null}};a.Gradient.ROYGB=function(c,d){void 0===d&&D.isArray(c)&&2<=c.length&&(d=c[1],c=c[0]);this.valueToHex=function(h,
n){var g,p;if(h*=1,n?(g=n[0],p=n[1]):(g=c,p=d),void 0===h)return 16777215;n=a.Gradient.normalizeValue(g,p,h);var q=((g=n.lo)+(p=n.hi))/2,x=(g+q)/2,t=(q+p)/2;return(h=n.val)<x?16711680+256*Math.floor(255*Math.sqrt((h-g)/(x-g))):h<q?65536*Math.floor(255*Math.sqrt(1-(h-x)/(q-x)))+65280:h<t?65280+1*Math.floor(255*Math.sqrt((h-q)/(t-q))):256*Math.floor(255*Math.sqrt(1-(h-t)/(p-t)))+255};this.range=function(){return void 0!==c&&void 0!==d?[c,d]:null}};a.Gradient.Sinebow=function(c,d){var h=1;void 0===d&&
D.isArray(c)&&2<=c.length&&(d=c[1],c=c[0]);d<c&&(h=-1,c*=-1,d*=-1);this.valueToHex=function(n,g){var p,q;if(n*=h,g?(p=g[0],q=g[1]):(p=c,q=d),void 0===n)return 16777215;n=a.Gradient.normalizeValue(p,q,n);p=n.lo;q=n.hi;n=(n.val-p)/(q-p)*5/6+.5;p=Math.sin(Math.PI*n);q=Math.sin(Math.PI*(n+1/3));n=Math.sin(Math.PI*(n+2/3));return n*=255*n,65536*Math.floor(255*p*p)+256*Math.floor(n)+1*Math.floor(255*q*q)};this.range=function(){return void 0!==c&&void 0!==d?[c,d]:null}};a.Gradient.builtinGradients={rwb:a.Gradient.RWB,
roygb:a.Gradient.ROYGB,sinebow:a.Gradient.Sinebow};a.LabelCount=0;a.Label=function(c,d){this.id=a.LabelCount++;this.stylespec=d||{};this.canvas=document.createElement("canvas");this.canvas.width=134;this.canvas.height=35;this.context=this.canvas.getContext("2d");this.sprite=new a.Sprite;this.text=c;this.frame=this.stylespec.frame};a.Label.prototype={constructor:a.Label,getStyle:function(){return this.stylespec},setContext:function(){var c=function(c,h,n){return void 0!==c&&(c instanceof a.Color?n=
c.scaled():void 0!==(n=a.CC.color(c)).scaled&&(n=n.scaled())),void 0!==h&&(n.a=parseFloat(h)),n};return function(){var d=this.stylespec,h=void 0!==d.useScreen&&d.useScreen,n=d.showBackground;"0"!==n&&"false"!==n||(n=!1);void 0===n&&(n=!0);var g=d.font?d.font:"sans-serif",p=parseInt(d.fontSize)?parseInt(d.fontSize):18,q=c(d.fontColor,d.fontOpacity,{r:255,g:255,b:255,a:1}),x=d.padding?d.padding:4,t=d.borderThickness?d.borderThickness:0,v=c(d.backgroundColor,d.backgroundOpacity,{r:0,g:0,b:0,a:1}),B=
c(d.borderColor,d.borderOpacity,v),e=d.position?d.position:{x:-10,y:1,z:1},k=void 0===d.inFront||d.inFront;"false"!==k&&"0"!==k||(k=!1);var z=d.alignment||a.SpriteAlignment.topLeft;"string"==typeof z&&z in a.SpriteAlignment&&(z=a.SpriteAlignment[z]);var l="";d.bold&&(l="bold ");this.context.font=l+p+"px  "+g;var u=this.context.measureText(this.text).width;n||(t=0);var C=u+2.5*t+2*x,w=1.25*p+2*t+2*x;if(d.backgroundImage){var J=d.backgroundImage;l=d.backgroundWidth?d.backgroundWidth:J.width;J=d.backgroundHeight?
d.backgroundHeight:J.height;l>C&&(C=l);J>w&&(w=J)}this.canvas.width=C;this.canvas.height=w;this.context.clearRect(0,0,this.canvas.width,this.canvas.height);l="";d.bold&&(l="bold ");this.context.font=l+p+"px  "+g;this.context.fillStyle="rgba("+v.r+","+v.g+","+v.b+","+v.a+")";this.context.strokeStyle="rgba("+B.r+","+B.g+","+B.b+","+B.a+")";this.context.lineWidth=t;n&&(n=this.context,v=g=t,C-=2*t,w-=2*t,B=0<t,n.beginPath(),n.moveTo(g+6,v),n.lineTo(g+C-6,v),n.quadraticCurveTo(g+C,v,g+C,v+6),n.lineTo(g+
C,v+w-6),n.quadraticCurveTo(g+C,v+w,g+C-6,v+w),n.lineTo(g+6,v+w),n.quadraticCurveTo(g,v+w,g,v+w-6),n.lineTo(g,v+6),n.quadraticCurveTo(g,v,g+6,v),n.closePath(),n.fill(),B&&n.stroke());d.backgroundImage&&(w=d.backgroundImage,this.context.drawImage(w,0,0,d.backgroundWidth?d.backgroundWidth:w.width,d.backgroundHeight?d.backgroundHeight:w.height));this.context.fillStyle="rgba("+q.r+","+q.g+","+q.b+","+q.a+")";this.context.fillText(this.text,t+x,p+t+x,u);d=new a.Texture(this.canvas);d.needsUpdate=!0;this.sprite.material=
new a.SpriteMaterial({map:d,useScreenCoordinates:h,alignment:z,depthTest:!k});this.sprite.scale.set(1,1,1);this.sprite.position.set(e.x,e.y,e.z)}}(),dispose:function(){void 0!==this.sprite.material.map&&this.sprite.material.map.dispose();void 0!==this.sprite.material&&this.sprite.material.dispose()}};a=a||{};a.MarchingCubeInitializer=function(){var c,d,h,n,g={};return g.march=function(g,q,x,t){var p=!!t.fulltable,B=t.hasOwnProperty("origin")&&t.origin.hasOwnProperty("x")?t.origin:{x:0,y:0,z:0},e=
!!t.voxel,k=t.matrix,z=t.nX||0,l=t.nY||0,u=t.nZ||0,C=t.scale||1,w=null;w=t.unitCube?t.unitCube:{x:C,y:C,z:C};var J=new Int32Array(z*l*u);t=0;for(C=J.length;t<C;++t)J[t]=-1;C=function(c,d,f,m,h,g){var n={x:0,y:0,z:0},p=h;!(m&1<<h)&&m&1<<g&&(p=g);1&p&&f++;2&p&&d++;4&p&&c++;k?n={x:(n=(n=new a.Vector3(c,d,f)).applyMatrix4(k)).x,y:n.y,z:n.z}:(n.x=B.x+w.x*c,n.y=B.y+w.y*d,n.z=B.z+w.z*f);c=(l*c+d)*u+f;return e?(q.push(n),q.length-1):(0>J[c]&&(J[c]=q.length,q.push(n)),J[c])};var G=new Int32Array(12),m=p?d:
c;p=p?n:h;for(t=0;t<z-1;++t)for(var f=0;f<l-1;++f)for(var A=0;A<u-1;++A){for(var M=0,D=0;8>D;++D)M|=!!(2&g[(l*(t+((4&D)>>2))+f+((2&D)>>1))*u+A+(1&D)])<<D;if(0!==M&&255!==M){var E=m[M];if(0!==E)for(D=p[M],1&E&&(G[0]=C(t,f,A,M,0,1)),2&E&&(G[1]=C(t,f,A,M,1,3)),4&E&&(G[2]=C(t,f,A,M,3,2)),8&E&&(G[3]=C(t,f,A,M,2,0)),16&E&&(G[4]=C(t,f,A,M,4,5)),32&E&&(G[5]=C(t,f,A,M,5,7)),64&E&&(G[6]=C(t,f,A,M,7,6)),128&E&&(G[7]=C(t,f,A,M,6,4)),256&E&&(G[8]=C(t,f,A,M,0,4)),512&E&&(G[9]=C(t,f,A,M,1,5)),1024&E&&(G[10]=C(t,
f,A,M,3,7)),2048&E&&(G[11]=C(t,f,A,M,2,6)),M=0;M<D.length;M+=3){E=G[D[M]];var Q=G[D[M+1]],F=G[D[M+2]];e&&3<=M&&(q.push(q[E]),E=q.length-1,q.push(q[Q]),Q=q.length-1,q.push(q[F]),F=q.length-1);x.push(E);x.push(Q);x.push(F)}}}},g.laplacianSmooth=function(a,c,d){var h,g,n=Array(c.length);var e=0;for(h=c.length;e<h;e++)n[e]={x:0,y:0,z:0};var k=Array(20);for(e=0;20>e;e++)k[e]=Array(c.length);e=0;for(h=c.length;e<h;e++)k[0][e]=0;e=0;for(h=d.length/3;e<h;e++){var p=3*e,l=3*e+1,u=3*e+2;var q=!0;var w=0;for(g=
k[0][d[p]];w<g;w++)if(d[l]==k[w+1][d[p]]){q=!1;break}q&&(k[0][d[p]]++,k[k[0][d[p]]][d[p]]=d[l]);q=!0;w=0;for(g=k[0][d[p]];w<g;w++)if(d[u]==k[w+1][d[p]]){q=!1;break}q&&(k[0][d[p]]++,k[k[0][d[p]]][d[p]]=d[u]);q=!0;w=0;for(g=k[0][d[l]];w<g;w++)if(d[p]==k[w+1][d[l]]){q=!1;break}q&&(k[0][d[l]]++,k[k[0][d[l]]][d[l]]=d[p]);q=!0;w=0;for(g=k[0][d[l]];w<g;w++)if(d[u]==k[w+1][d[l]]){q=!1;break}q&&(k[0][d[l]]++,k[k[0][d[l]]][d[l]]=d[u]);q=!0;for(w=0;w<k[0][d[u]];w++)if(d[p]==k[w+1][d[u]]){q=!1;break}q&&(k[0][d[u]]++,
k[k[0][d[u]]][d[u]]=d[p]);q=!0;w=0;for(g=k[0][d[u]];w<g;w++)if(d[l]==k[w+1][d[u]]){q=!1;break}q&&(k[0][d[u]]++,k[k[0][d[u]]][d[u]]=d[l])}for(d=0;d<a;d++){e=0;for(h=c.length;e<h;e++)if(3>k[0][e])n[e].x=c[e].x,n[e].y=c[e].y,n[e].z=c[e].z;else if(3==k[0][e]||4==k[0][e]){n[e].x=0;n[e].y=0;w=n[e].z=0;for(g=k[0][e];w<g;w++)n[e].x+=c[k[w+1][e]].x,n[e].y+=c[k[w+1][e]].y,n[e].z+=c[k[w+1][e]].z;n[e].x+=.5*c[e].x;n[e].y+=.5*c[e].y;n[e].z+=.5*c[e].z;n[e].x/=.5+k[0][e];n[e].y/=.5+k[0][e];n[e].z/=.5+k[0][e]}else{n[e].x=
0;n[e].y=0;w=n[e].z=0;for(g=k[0][e];w<g;w++)n[e].x+=c[k[w+1][e]].x,n[e].y+=c[k[w+1][e]].y,n[e].z+=c[k[w+1][e]].z;n[e].x+=1*c[e].x;n[e].y+=1*c[e].y;n[e].z+=1*c[e].z;n[e].x/=1+k[0][e];n[e].y/=1+k[0][e];n[e].z/=1+k[0][e]}e=0;for(h=c.length;e<h;e++)c[e].x=n[e].x,c[e].y=n[e].y,c[e].z=n[e].z}},g.edgeTable=[0,0,0,0,0,0,0,2816,0,0,0,1792,0,3328,3584,3840,0,0,0,138,0,21,0,134,0,0,0,652,0,2067,3865,3600,0,0,0,42,0,0,0,294,0,0,21,28,0,3875,1049,3360,0,168,162,170,0,645,2475,2210,0,687,293,172,4010,3747,3497,
3232,0,0,0,0,0,69,0,900,0,0,0,1792,138,131,1608,1920,0,81,0,2074,84,85,84,86,0,81,0,3676,330,1105,1881,1616,0,0,0,42,0,69,0,502,0,0,21,3580,138,2035,1273,1520,2816,104,2337,106,840,581,367,102,2816,3695,3429,3180,1898,1635,1385,1120,0,0,0,0,0,0,0,3910,0,0,69,588,42,2083,41,2880,0,0,0,1722,0,2293,4095,3830,0,255,757,764,2538,2291,3065,2800,0,0,81,338,0,3925,1119,3414,84,855,85,340,2130,2899,89,2384,1792,712,194,1162,4036,3781,3535,3270,708,719,197,204,3018,2755,2505,2240,0,0,0,0,168,420,168,1958,162,
162,676,2988,170,163,680,928,3328,3096,3328,3642,52,53,1855,1590,2340,2111,2869,2620,298,51,825,560,3584,3584,3090,3482,1668,1941,1183,1430,146,2975,2069,2460,154,915,153,400,3840,3592,3329,3082,1796,1541,1295,1030,2818,2575,2309,2060,778,515,265,0],c=new Uint32Array(g.edgeTable),h=g.triTable=[[],[],[],[],[],[],[],[11,9,8],[],[],[],[8,10,9],[],[10,8,11],[9,11,10],[8,10,9,8,11,10],[],[],[],[1,7,3],[],[4,2,0],[],[2,1,7],[],[],[],[2,7,3,2,9,7],[],[1,4,11,1,0,4],[3,8,0,11,9,4,11,10,9],[4,11,9,11,10,9],
[],[],[],[5,3,1],[],[],[],[2,5,8,2,1,5],[],[],[2,4,0],[3,2,4],[],[0,9,1,8,10,5,8,11,10],[3,4,0,3,10,4],[5,8,10,8,11,10],[],[3,5,7],[7,1,5],[1,7,3,1,5,7],[],[9,2,0,9,7,2],[0,3,8,1,7,11,1,5,7],[11,1,7,1,5,7],[],[9,1,0,5,3,2,5,7,3],[8,2,5,8,0,2],[2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[],[],[],[],[],[0,6,2],[],[7,2,9,7,9,8],[],[],[],[8,10,9],[7,1,3],[7,1,0],[6,9,3,6,10,9],[7,10,8,10,9,8],[],[6,0,4],[],[11,1,4,11,3,1],[2,4,6],[2,0,4,2,
4,6],[2,4,6],[1,4,2,4,6,2],[],[6,0,4],[],[2,11,3,6,9,4,6,10,9],[8,6,1,8,1,3],[10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[],[],[],[5,3,1],[],[0,6,2],[],[7,4,8,5,2,1,5,6,2],[],[],[2,4,0],[7,4,8,2,11,3,10,5,6],[7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[9,11,8],[3,5,6],[0,5,11,0,11,8],[6,3,5,3,1,5],[3,9,6,3,8,9],[9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,
10,5,6],[10,5,6],[],[],[],[],[],[],[],[1,10,2,9,11,6,9,8,11],[],[],[6,0,2],[3,6,9,3,2,6],[3,5,1],[0,5,1,0,11,5],[0,3,5],[6,9,11,9,8,11],[],[],[],[4,5,9,7,1,10,7,3,1],[],[11,6,7,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[],[],[0,6,4],[8,6,4,8,1,6],[],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[4,2,6],[1,
0,9,2,4,8,2,6,4],[2,4,0,2,6,4],[8,2,4,2,6,4],[11,4,1,11,6,4],[0,9,1,4,11,6,4,8,11],[3,6,0,6,4,0],[8,6,4,8,11,6],[10,8,9],[6,3,9,6,7,3],[6,7,1],[10,7,1,7,3,1],[7,11,6,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2],[1,0,9,3,6,7,3,2,6],[7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[],[],[],[],[5,3,7],[8,5,2,8,7,5],[5,3,7],[1,10,2,5,8,7,5,9,8],[1,7,5],[1,7,5],[9,2,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[0,7,1,7,
5,1],[9,3,5,3,7,5],[9,7,5,9,8,7],[8,10,11],[3,4,10,3,10,11],[8,10,11],[5,9,4,1,11,3,1,10,11],[2,4,5],[5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[2,8,5,2,11,8],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[11,9,10],[11,9,10],[1,11,4,1,10,11],[8,7,4,11,1,10,11,3,1],[2,7,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[1,7,4],[3,2,11,4,8,7,9,1,0],[11,4,2,4,0,2],[2,11,3,7,4,8],[4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,
7,4],[8,7,4],[8,9,10,8,10,11],[3,9,11,9,10,11],[0,10,8,10,11,8],[10,3,1,10,11,3],[2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]],d=[0,265,515,778,2060,2309,2575,2822,1030,1295,1541,1804,3082,3331,3593,3840,400,153,915,666,2460,2197,2975,2710,1430,1183,1941,1692,3482,3219,3993,3728,560,825,51,314,2620,2869,2111,2358,1590,1855,1077,1340,3642,3891,3129,3376,928,681,419,170,2988,2725,2479,2214,1958,1711,1445,
1196,4010,3747,3497,3232,2240,2505,2755,3018,204,453,719,966,3270,3535,3781,4044,1226,1475,1737,1984,2384,2137,2899,2650,348,85,863,598,3414,3167,3925,3676,1370,1107,1881,1616,2800,3065,2291,2554,764,1013,255,502,3830,4095,3317,3580,1786,2035,1273,1520,2912,2665,2403,2154,876,613,367,102,3942,3695,3429,3180,1898,1635,1385,1120,1120,1385,1635,1898,3180,3429,3695,3942,102,367,613,876,2154,2403,2665,2912,1520,1273,2035,1786,3580,3317,4095,3830,502,255,1013,764,2554,2291,3065,2800,1616,1881,1107,1370,
3676,3925,3167,3414,598,863,85,348,2650,2899,2137,2384,1984,1737,1475,1226,4044,3781,3535,3270,966,719,453,204,3018,2755,2505,2240,3232,3497,3747,4010,1196,1445,1711,1958,2214,2479,2725,2988,170,419,681,928,3376,3129,3891,3642,1340,1077,1855,1590,2358,2111,2869,2620,314,51,825,560,3728,3993,3219,3482,1692,1941,1183,1430,2710,2975,2197,2460,666,915,153,400,3840,3593,3331,3082,1804,1541,1295,1030,2822,2575,2309,2060,778,515,265,0],n=[[],[8,3,0],[9,0,1],[8,3,1,8,1,9],[11,2,3],[11,2,0,11,0,8],[11,2,3,
0,1,9],[2,1,11,1,9,11,11,9,8],[10,1,2],[8,3,0,1,2,10],[9,0,2,9,2,10],[3,2,8,2,10,8,8,10,9],[10,1,3,10,3,11],[1,0,10,0,8,10,10,8,11],[0,3,9,3,11,9,9,11,10],[8,10,9,8,11,10],[8,4,7],[3,0,4,3,4,7],[1,9,0,8,4,7],[9,4,1,4,7,1,1,7,3],[2,3,11,7,8,4],[7,11,4,11,2,4,4,2,0],[3,11,2,4,7,8,9,0,1],[2,7,11,2,1,7,1,4,7,1,9,4],[10,1,2,8,4,7],[2,10,1,0,4,7,0,7,3],[4,7,8,0,2,10,0,10,9],[2,7,3,2,9,7,7,9,4,2,10,9],[8,4,7,11,10,1,11,1,3],[11,4,7,1,4,11,1,11,10,1,0,4],[3,8,0,7,11,4,11,9,4,11,10,9],[7,11,4,4,11,9,11,10,
9],[9,5,4],[3,0,8,4,9,5],[5,4,0,5,0,1],[4,8,5,8,3,5,5,3,1],[11,2,3,9,5,4],[9,5,4,8,11,2,8,2,0],[3,11,2,1,5,4,1,4,0],[8,5,4,2,5,8,2,8,11,2,1,5],[2,10,1,9,5,4],[0,8,3,5,4,9,10,1,2],[10,5,2,5,4,2,2,4,0],[3,4,8,3,2,4,2,5,4,2,10,5],[5,4,9,1,3,11,1,11,10],[0,9,1,4,8,5,8,10,5,8,11,10],[3,4,0,3,10,4,4,10,5,3,11,10],[4,8,5,5,8,10,8,11,10],[9,5,7,9,7,8],[0,9,3,9,5,3,3,5,7],[8,0,7,0,1,7,7,1,5],[1,7,3,1,5,7],[11,2,3,8,9,5,8,5,7],[9,2,0,9,7,2,2,7,11,9,5,7],[0,3,8,2,1,11,1,7,11,1,5,7],[2,1,11,11,1,7,1,5,7],[1,
2,10,5,7,8,5,8,9],[9,1,0,10,5,2,5,3,2,5,7,3],[5,2,10,8,2,5,8,5,7,8,0,2],[10,5,2,2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[11,7,6],[0,8,3,11,7,6],[9,0,1,11,7,6],[7,6,11,3,1,9,3,9,8],[2,3,7,2,7,6],[8,7,0,7,6,0,0,6,2],[1,9,0,3,7,6,3,6,2],[7,6,2,7,2,9,2,1,9,7,9,8],[1,2,10,6,11,7],[2,10,1,7,6,11,8,3,0],[11,7,6,10,9,0,10,0,2],[7,6,11,3,2,8,8,2,10,8,10,9],[6,10,7,10,1,7,7,1,3],[6,10,1,6,1,7,7,1,0,7,0,8],[9,0,3,6,9,3,6,10,9,6,3,7],[6,10,7,7,
10,8,10,9,8],[8,4,6,8,6,11],[11,3,6,3,0,6,6,0,4],[0,1,9,4,6,11,4,11,8],[1,9,4,11,1,4,11,3,1,11,4,6],[3,8,2,8,4,2,2,4,6],[2,0,4,2,4,6],[1,9,0,3,8,2,2,8,4,2,4,6],[9,4,1,1,4,2,4,6,2],[10,1,2,11,8,4,11,4,6],[10,1,2,11,3,6,6,3,0,6,0,4],[0,2,10,0,10,9,4,11,8,4,6,11],[2,11,3,6,9,4,6,10,9],[8,4,6,8,6,1,6,10,1,8,1,3],[1,0,10,10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[9,5,4,7,6,11],[4,9,5,3,0,8,11,7,6],[6,11,7,4,0,1,4,1,5],[6,11,7,4,8,5,5,8,3,5,3,1],[4,9,5,6,2,3,6,3,7],[9,5,4,8,7,0,0,7,6,0,6,2],[4,
0,1,4,1,5,6,3,7,6,2,3],[7,4,8,5,2,1,5,6,2],[6,11,7,1,2,10,9,5,4],[11,7,6,8,3,0,1,2,10,9,5,4],[11,7,6,10,5,2,2,5,4,2,4,0],[7,4,8,2,11,3,10,5,6],[4,9,5,6,10,7,7,10,1,7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[5,6,9,6,11,9,9,11,8],[0,9,5,0,5,3,3,5,6,3,6,11],[0,1,5,0,5,11,5,6,11,0,11,8],[11,3,6,6,3,5,3,1,5],[9,5,6,3,9,6,3,8,9,3,6,2],[5,6,9,9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[1,2,10,5,6,9,9,6,11,9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,
6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[10,6,5],[8,3,0,10,6,5],[0,1,9,5,10,6],[10,6,5,9,8,3,9,3,1],[3,11,2,10,6,5],[6,5,10,2,0,8,2,8,11],[1,9,0,6,5,10,11,2,3],[1,10,2,5,9,6,9,11,6,9,8,11],[1,2,6,1,6,5],[0,8,3,2,6,5,2,5,1],[5,9,6,9,0,6,6,0,2],[9,6,5,3,6,9,3,9,8,3,2,6],[11,6,3,6,5,3,3,5,1],[0,5,1,0,11,5,5,11,6,0,8,11],[0,5,9,0,3,5,3,6,5,3,11,6],[5,9,6,6,9,11,9,8,11],[10,6,5,4,7,8],[5,10,6,7,3,0,7,0,4],[5,10,6,0,1,9,8,4,7],[4,5,9,6,7,10,7,1,10,7,3,1],[7,8,4,2,3,11,10,6,5],[11,6,7,10,2,
5,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[7,8,4,5,1,2,5,2,6],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,8,0,7,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,4,5,8,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[10,6,4,10,4,9],[8,3,0,9,10,6,9,6,4],[1,10,0,10,6,0,0,6,4],[8,6,4,8,1,6,6,1,10,8,3,1],[2,3,11,6,4,9,6,9,10],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,11,6,3,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[9,1,4,1,2,4,4,2,6],[1,0,9,3,2,8,2,4,8,2,6,4],[2,4,0,2,6,4],[3,2,8,8,2,
4,2,6,4],[1,4,9,11,4,1,11,1,3,11,6,4],[0,9,1,4,11,6,4,8,11],[11,6,3,3,6,0,6,4,0],[8,6,4,8,11,6],[6,7,10,7,8,10,10,8,9],[9,3,0,6,3,9,6,9,10,6,7,3],[6,1,10,6,7,1,7,0,1,7,8,0],[6,7,10,10,7,1,7,3,1],[7,11,6,3,8,2,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2,2,9,1,7,8,9],[1,0,9,3,6,7,3,2,6],[8,0,7,7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[11,7,5,11,5,10],[3,0,8,7,5,10,7,10,11],[9,0,1,10,11,7,10,7,5],[3,1,9,3,9,8,
7,10,11,7,5,10],[10,2,5,2,3,5,5,3,7],[5,10,2,8,5,2,8,7,5,8,2,0],[9,0,1,10,2,5,5,2,3,5,3,7],[1,10,2,5,8,7,5,9,8],[2,11,1,11,7,1,1,7,5],[0,8,3,2,11,1,1,11,7,1,7,5],[9,0,2,9,2,7,2,11,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[8,7,0,0,7,1,7,5,1],[0,3,9,9,3,5,3,7,5],[9,7,5,9,8,7],[4,5,8,5,10,8,8,10,11],[3,0,4,3,4,10,4,5,10,3,10,11],[0,1,9,4,5,8,8,5,10,8,10,11],[5,9,4,1,11,3,1,10,11],[3,8,4,3,4,2,2,4,5,2,5,10],[10,2,5,5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[8,4,5,2,8,5,2,11,8,2,5,1],[3,2,11,
1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[4,5,8,8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[7,4,11,4,9,11,11,9,10],[3,0,8,7,4,11,11,4,9,11,9,10],[11,7,4,1,11,4,1,10,11,1,4,0],[8,7,4,11,1,10,11,3,1],[2,3,7,2,7,9,7,4,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[2,11,7,2,7,1,1,7,4,1,4,9],[3,2,11,4,8,7,9,1,0],[7,4,11,11,4,2,4,0,2],[2,11,3,7,4,8],[9,1,4,4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[0,9,3,3,9,11,9,10,11],[1,10,0,0,10,8,10,11,8],
[10,3,1,10,11,3],[3,8,2,2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[2,11,1,1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]],g};a.MarchingCube=a.MarchingCubeInitializer();a.Parsers=function(){var c={},d={H:.37,He:.32,Li:1.34,Be:.9,B:.82,C:.77,N:.75,O:.73,F:.71,Ne:.69,Na:1.54,Mg:1.3,Al:1.18,Si:1.11,P:1.06,S:1.02,Cl:.99,Ar:.97,K:1.96,Ca:1.74,Sc:1.44,Ti:1.56,V:1.25,Mn:1.39,Fe:1.25,Co:1.26,Ni:1.21,Cu:1.38,Zn:1.31,Ga:1.26,Ge:1.22,Se:1.16,Br:1.14,Kr:1.1,
Rb:2.11,Sr:1.92,Y:1.62,Zr:1.48,Nb:1.37,Mo:1.45,Tc:1.56,Ru:1.26,Rh:1.35,Pd:1.31,Ag:1.53,Cd:1.48,In:1.44,Sn:1.41,Sb:1.38,Te:1.35,I:1.33,Xe:1.3,Cs:2.25,Ba:1.98,Lu:1.6,Hf:1.5,Ta:1.38,W:1.46,Re:1.59,Os:1.44,Ir:1.37,Pt:1.28,Au:1.44,Hg:1.49,Tl:1.48,Pb:1.47,Bi:1.46,Rn:1.45},h=function(a,c){var e=(d[a.elem]||1.6)+(d[c.elem]||1.6);e+=.25;e*=e;var l=a.x-c.x;if((l*=l)>e)return!1;var k=a.y-c.y;if((k*=k)>e)return!1;var h=a.z-c.z;if((h*=h)>e)return!1;l=l+k+h;return!isNaN(l)&&!(.5>l)&&!(l>e)&&(a.altLoc==c.altLoc||
" "==a.altLoc||" "==c.altLoc)},n=function(a){for(var c=0,d=a.length;c<d;c++)a[c].index||(a[c].index=c);c={};for(d=0;d<a.length;d++){var e=a[d],g=Math.floor(e.x/4.95),n=Math.floor(e.y/4.95),w=Math.floor(e.z/4.95);c[g]||(c[g]={});c[g][n]||(c[g][n]={});c[g][n][w]||(c[g][n][w]=[]);c[g][n][w].push(e)}a=[{x:0,y:0,z:1},{x:0,y:1,z:-1},{x:0,y:1,z:0},{x:0,y:1,z:1},{x:1,y:-1,z:-1},{x:1,y:-1,z:0},{x:1,y:-1,z:1},{x:1,y:0,z:-1},{x:1,y:0,z:0},{x:1,y:0,z:1},{x:1,y:1,z:-1},{x:1,y:1,z:0},{x:1,y:1,z:1}];for(var p in c){p=
parseInt(p);for(var q in c[p]){q=parseInt(q);for(var m in c[p][q]){m=parseInt(m);d=c[p][q][m];for(e=0;e<d.length;e++)for(g=d[e],n=e+1;n<d.length;n++)w=d[n],h(g,w)&&-1==g.bonds.indexOf(w.index)&&(g.bonds.push(w.index),g.bondOrder.push(1),w.bonds.push(g.index),w.bondOrder.push(1));for(e=0;e<a.length;e++)if(n=a[e],c[p+n.x]&&c[p+n.x][q+n.y]&&c[p+n.x][q+n.y][m+n.z])for(g=d,n=c[p+n.x][q+n.y][m+n.z],w=0;w<g.length;w++)for(var f=g[w],t=0;t<n.length;t++){var v=n[t];if(h(f,v)){var x=f.bonds.indexOf(v.index),
A=v.bonds.indexOf(f.index);-1==x&&-1==A?(f.bonds.push(v.index),f.bondOrder.push(1),v.bonds.push(f.index),v.bondOrder.push(1)):-1==x?(f.bonds.push(v.index),f.bondOrder.push(v.bondOrder[A])):-1==A&&(v.bonds.push(f.index),v.bondOrder.push(f.bondOrder[x]))}}}}}},g=new Set("ABU ACD ALA ALB ALI ARG AR0 ASN ASP ASX BAS CYS CYH CYX CSS CSH GLN GLU GLX GLY HIS HIE HID HIP HYP ILE ILU LEU LYS MET PCA PGA PHE PR0 PRO PRZ SAR THR TYR VAL A 1MA C 5MC OMC G 1MG 2MG M2G 7MG OMG YG I T U +U H2U 5MU PSU ACE F0R H2O HOH WAT".split(" ")),
p=function(a){var c,d=[],e=[];var u=0;for(c=a.length;u<c;u++){var p=a[u];p.index=u;p.hetflag||!g.has(p.resn)?e.push(p):d.push(p)}n(e);d.sort(function(a,c){return a.chain!=c.chain?a.chain<c.chain?-1:1:a.resi-c.resi});var w;e=a=-1;u=0;for(c=d.length;u<c;u++){p=d[u];p.resi!==a&&(a=p.resi,w||e++,w=!1);p.reschain=e;for(var q=u+1;q<d.length;q++){var t=d[q];if(t.chain!=p.chain)break;if(1<t.resi-p.resi)break;h(p,t)&&(-1===p.bonds.indexOf(t.index)&&(p.bonds.push(t.index),p.bondOrder.push(1),t.bonds.push(p.index),
t.bondOrder.push(1)),p.resi!==t.resi&&(w=!0))}}},q=function(a){!function(a){var c,d=[];var e=0;for(c=a.length;e<c;e++){a[e].index=e;var l=a[e];l.hetflag||"N"!==l.atom&&"O"!==l.atom||(d.push(l),l.hbondOther=null,l.hbondDistanceSq=Number.POSITIVE_INFINITY)}d.sort(function(a,c){return a.z-c.z});e=0;for(c=d.length;e<c;e++)for(l=d[e],a=e+1;a<c;a++){var k=d[a],m=k.z-l.z;if(3.2<m)break;if(k.atom!=l.atom){var h=Math.abs(k.y-l.y);if(!(3.2<h)){var g=Math.abs(k.x-l.x);3.2<g||(m=g*g+h*h+m*m,10.24<m||k.chain==
l.chain&&4>Math.abs(k.resi-l.resi)||(m<l.hbondDistanceSq&&(l.hbondOther=k,l.hbondDistanceSq=m),m<k.hbondDistanceSq&&(k.hbondOther=l,k.hbondDistanceSq=m)))}}}}(a);var c,d,e,h={};var g=0;for(c=a.length;g<c;g++)if(void 0===h[(e=a[g]).chain]&&(h[e.chain]=[]),isFinite(e.hbondDistanceSq)){var n=e.hbondOther;void 0===h[n.chain]&&(h[n.chain]=[]);4===Math.abs(n.resi-e.resi)&&(h[e.chain][e.resi]="h")}for(d in h)for(g=1;g<h[d].length-1;g++){c=h[d][g-1];var p=h[d][g+1];n=h[d][g];"h"==c&&c==p&&n!=c&&(h[d][g]=
c)}g=0;for(c=a.length;g<c;g++)e=a[g],isFinite(e.hbondDistanceSq)&&"h"!=h[e.chain][e.resi]&&"h"!=e.ss&&(h[e.chain][e.resi]="maybesheet");n=0;for(d=a.length;n<d;n++)if(e=a[n],isFinite(e.hbondDistanceSq)&&"maybesheet"==h[e.chain][e.resi])g=e.hbondOther,c=h[g.chain][g.resi],"maybesheet"!=c&&"s"!=c||(h[e.chain][e.resi]="s",h[g.chain][g.resi]="s");for(var q in h){for(d=1;d<h[q].length-1;d++)g=h[q][d-1],c=h[q][d+1],n=h[q][d],"s"==g&&g==c&&n!=g&&(h[q][d]=g);for(n=0;n<h[q].length;n++)d=h[q][n],"h"!=d&&"s"!=
d||h[q][n-1]!=d&&h[q][n+1]!=d&&delete h[q][n]}g=0;for(c=a.length;g<c;g++)n=h[(e=a[g]).chain][e.resi],delete e.hbondOther,delete e.hbondDistanceSq,void 0!==n&&"maybesheet"!=n&&(e.ss=n,h[e.chain][e.resi-1]!=n&&(e.ssbegin=!0),h[e.chain][e.resi+1]!=n&&(e.ssend=!0))},t=function(c,d,h,l){var e=!h.duplicateAssemblyAtoms;var k=d.length,g=k,n=-1;if(h.normalizeAssembly&&l){var p=a.conversionMatrix3(l.a,l.b,l.c,l.alpha,l.beta,l.gamma),m=new a.Matrix3;m.getInverse3(p);for(h=0;h<c.length;h++){var f=new a.Vector3(0,
0,0);for(l=0;l<k;l++){var q=new a.Vector3(d[l].x,d[l].y,d[l].z);q.applyMatrix4(c[h]);q.applyMatrix3(m);f.add(q)}f.divideScalar(k);f=[f.x,f.y,f.z];l=[0,0,0];for(q=0;3>q;q++){for(;-.001>f[q];)f[q]+=1,l[q]+=1;for(;1.001<f[q];)--f[q],--l[q]}(l=new a.Vector3(l[0],l[1],l[2])).applyMatrix3(p);c[h].isNearlyIdentity()&&.001<l.lengthSq()&&(n=h);c[h].translate(l)}}if(e){if(1<c.length)for(h=0;h<d.length;h++){k=[];for(e=0;e<c.length;e++)c[e].isNearlyIdentity()||(n=new a.Vector3,n.set(d[h].x,d[h].y,d[h].z),n.applyMatrix4(c[e]),
k.push(n));d[h].symmetries=k}}else{for(l=0;l<k;l++)d[l].sym=-1;for(h=0;h<c.length;h++)if(c[h].isNearlyIdentity()||n==h)for(l=0;l<k;l++)d[l].sym=h;else{p=new a.Vector3;for(l=0;l<k;l++){m=[];for(e=0;e<d[l].bonds.length;e++)m.push(d[l].bonds[e]+g);p.set(d[l].x,d[l].y,d[l].z);p.applyMatrix4(c[h]);e={};for(var z in d[l])e[z]=d[l][z];e.x=p.x;e.y=p.y;e.z=p.z;e.bonds=m;e.sym=h;e.index=d.length;d.push(e)}g=d.length}if(0<=n)for(h=new a.Vector3,l=0;l<k;l++)h.set(d[l].x,d[l].y,d[l].z),h.applyMatrix4(c[n]),d[l].x=
h.x,d[l].y=h.y,d[l].z=h.z;c.length=0}};c.vasp=c.VASP=function(c){var d=[[]],e,l=c.replace(/^\s+/,"").split(/[\n\r]/);if(3>l.length)return d;if(!l[1].match(/\d+/))return console.log("Warning: second line of the vasp structure file must be a number"),d;if(e=parseFloat(l[1]),0>e)return console.log("Warning: Vasp implementation for negative lattice lengths is not yet available"),d;c=new Float32Array(l[2].replace(/^\s+/,"").split(/\s+/));var h=new Float32Array(l[3].replace(/^\s+/,"").split(/\s+/));var g=
new Float32Array(l[4].replace(/^\s+/,"").split(/\s+/));var n=new a.Matrix4(c[0],c[1],c[2],0,h[0],h[1],h[2],0,g[0],g[1],g[2],0,0,0,0,1);n.multiplyScalar(e);d.modelData=[{symmetries:[],cryst:{matrix:n}}];n=l[5].replace(/\s+/,"").replace(/\s+$/,"").split(/\s+/);var p=new Int16Array(l[6].replace(/^\s+/,"").split(/\s+/)),q=l[7].replace(/\s+/,"");if(q.match(/C/))q="cartesian";else{if(!q.match(/D/))return console.log("Warning: Unknown vasp mode in POSCAR file: mode must be either C(artesian) or D(irect)"),
d;q="direct"}if(n.length!=p.length)return console.log("Warning: declaration of atomary species wrong:"),console.log(n),console.log(p),d;l.splice(0,8);for(var m=0,f=0,t=n.length;f<t;f++){for(var v=n[f],x=0,A=p[f];x<A;x++){var B=new Float32Array(l[m+x].replace(/^\s+/,"").split(/\s+/)),F={};F.elem=v;"cartesian"==q?(F.x=e*B[0],F.y=e*B[1],F.z=e*B[2]):(F.x=e*(B[0]*c[0]+B[1]*h[0]+B[2]*g[0]),F.y=e*(B[0]*c[1]+B[1]*h[1]+B[2]*g[1]),F.z=e*(B[0]*c[2]+B[1]*h[2]+B[2]*g[2]));F.bonds=[];d[0].push(F)}m+=p[f]}return d};
c.cube=c.CUBE=function(a){var c=[[]];a=a.replace(/^\s+/,"").split(/\n\r|\r+/);if(6>a.length)return c;var d=a[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),e=Math.abs(parseFloat(d[0]));d=a[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");d=0<parseFloat(d[0])?.529177:1;a=a.splice(6,e);e=c[c.length-1].length;for(var h=e+a.length,g=e;g<h;++g){var p={};p.serial=g;var q=a[g-e].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");6==q[0]?p.elem="C":1==q[0]?p.elem="H":8==q[0]?p.elem="O":17==q[0]&&
(p.elem="Cl");p.x=parseFloat(q[2])*d;p.y=parseFloat(q[3])*d;p.z=parseFloat(q[4])*d;p.hetflag=!0;p.bonds=[];p.bondOrder=[];p.properties={};c[c.length-1].push(p)}for(a=0;a<c.length;a++)n(c[a]);return c};c.xyz=c.XYZ=function(a,c){var d=[[]];for(a=a.split(/\r?\n|\r/);0<a.length&&!(3>a.length);){var e=parseInt(a[0]);if(isNaN(e)||0>=e)break;if(a.length<e+2)break;var k=2,h=d[d.length-1].length;for(e=h+e;h<e;h++){var g=a[k++].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),p={};p.serial=h;var q=g[0];p.atom=
p.elem=q[0].toUpperCase()+q.substr(1,1).toLowerCase();p.x=parseFloat(g[1]);p.y=parseFloat(g[2]);p.z=parseFloat(g[3]);p.hetflag=!0;p.bonds=[];p.bondOrder=[];p.properties={};d[d.length-1][h]=p;7<=g.length&&(p.dx=parseFloat(g[4]),p.dy=parseFloat(g[5]),p.dz=parseFloat(g[6]))}if(!c.multimodel)break;d.push([]);a.splice(0,k)}for(a=0;a<d.length;a++)n(d[a]);if(c.onemol)for(c=d,(d=[]).push(c[0]),a=1;a<c.length;a++)for(k=d[0].length,e=0;e<c[a].length;e++){h=c[a][e];for(g=0;g<h.bonds.length;g++)h.bonds[g]+=k;
h.index=d[0].length;h.serial=d[0].length;d[0].push(h)}return d};c.sdf=c.SDF=function(a,c){var d="V2000";a=a.split(/\r?\n|\r/);return 3<a.length&&38<a[3].length&&(d=a[3].substr(34,5)),"V2000"===d?function(a,c){var d=[[]],e=!1;for(void 0!==c.keepH&&(e=!c.keepH);0<a.length&&!(4>a.length);){var l=parseInt(a[3].substr(0,3));if(isNaN(l)||0>=l)break;var k=parseInt(a[3].substr(3,3)),h=4;if(a.length<4+l+k)break;var f,g=[],n=d[d.length-1].length,p=n+l;for(l=n;l<p;l++,h++){var q={},u=(f=a[h]).substr(31,3).replace(/ /g,
"");q.atom=q.elem=u[0].toUpperCase()+u.substr(1).toLowerCase();"H"===q.elem&&e||(q.serial=l,g[l]=d[d.length-1].length,q.x=parseFloat(f.substr(0,10)),q.y=parseFloat(f.substr(10,10)),q.z=parseFloat(f.substr(20,10)),q.hetflag=!0,q.bonds=[],q.bondOrder=[],q.properties={},q.index=d[d.length-1].length,d[d.length-1].push(q))}for(l=0;l<k;l++,h++)f=a[h],p=g[parseInt(f.substr(0,3))-1+n],q=g[parseInt(f.substr(3,3))-1+n],f=parseInt(f.substr(6,3)),void 0!==p&&void 0!==q&&(d[d.length-1][p].bonds.push(q),d[d.length-
1][p].bondOrder.push(f),d[d.length-1][q].bonds.push(p),d[d.length-1][q].bondOrder.push(f));if(!c.multimodel)break;for(c.onemol||d.push([]);"$$$$"!==a[h];)h++;a.splice(0,++h)}return d}(a,c):"V3000"===d?function(a,c){var d=[[]],e=!1;for(void 0!==c.keepH&&(e=!c.keepH);0<a.length&&!(8>a.length)&&a[4].startsWith("M  V30 BEGIN CTAB")&&a[5].startsWith("M  V30 COUNTS")&&!(14>a[5].length);){var l=a[5].substr(13).match(/\S+/g);if(2>l.length)break;var k=parseInt(l[0]);if(isNaN(k)||0>=k)break;l=parseInt(l[1]);
var h=7;if(a.length<8+k+l)break;var f=[],g=d[d.length-1].length,n=g+k;for(k=g;k<n;k++,h++){var p=a[h].substr(6).match(/\S+/g);if(4<p.length){var q={},u=p[1].replace(/ /g,"");q.atom=q.elem=u[0].toUpperCase()+u.substr(1).toLowerCase();"H"===q.elem&&e||(q.serial=k,f[k]=d[d.length-1].length,q.x=parseFloat(p[2]),q.y=parseFloat(p[3]),q.z=parseFloat(p[4]),q.hetflag=!0,q.bonds=[],q.bondOrder=[],q.properties={},q.index=d[d.length-1].length,d[d.length-1].push(q))}}if("M  V30 END ATOM"!==a[h])break;if(h++,0===
l||"M  V30 BEGIN BOND"!==a[h])break;h++;for(k=0;k<l;k++,h++)q=a[h].substr(6).match(/\S+/g),3<q.length&&(n=f[parseInt(q[2])-1+g],p=f[parseInt(q[3])-1+g],q=parseInt(q[1]),void 0!==n&&void 0!==p&&(d[d.length-1][n].bonds.push(p),d[d.length-1][n].bondOrder.push(q),d[d.length-1][p].bonds.push(n),d[d.length-1][p].bondOrder.push(q)));if(!c.multimodel)break;for(c.onemol||d.push([]);"$$$$"!==a[h];)h++;a.splice(0,++h)}return d}(a,c):[[]]};c.cdjson=c.json=function(a,c){var d=[[]];"string"==typeof a&&(a=JSON.parse(a));
var e=a.m,k=e[0].a;a=e[0].b;e=e[0].s;var h=void 0!==c&&void 0!==c.parseStyle?c.parseStyle:void 0!==e;c=d[d.length-1].length;for(var g=0;g<k.length;g++){var n=k[g],p={};p.id=n.i;p.x=n.x;p.y=n.y;p.z=n.z||0;p.bonds=[];p.bondOrder=[];var m=n.l||"C";p.elem=m[0].toUpperCase()+m.substr(1).toLowerCase();p.serial=d[d.length-1].length;h&&(p.style=e[n.s||0]);d[d.length-1].push(p)}for(k=0;k<a.length;k++)g=a[k],e=g.b+c,h=g.e+c,g=g.o||1,n=d[d.length-1][e],p=d[d.length-1][h],n.bonds.push(h),n.bondOrder.push(g),
p.bonds.push(e),p.bondOrder.push(g);return d};c.mcif=c.cif=function(c,d){function e(a,c){for(var d=[],e=0,f=0;f<a.length;){for(;a.substr(f,c.length)!==c&&f<a.length;){if("'"===a[f])for(f++;f<a.length&&"'"!==a[f];)f++;else if('"'===a[f])for(f++;f<a.length&&'"'!==a[f];)f++;f++}d.push(a.substr(e,f-e));e=f+=c.length}return d}var l=[],k=!d.doAssembly,h=l.modelData=[],g=c.split(/\r?\n|\r/);c=[];for(var p=!1,v=0;v<g.length;v++){var m=g[v].split("#")[0];if(p?";"===m[0]&&(p=!1):";"===m[0]&&(p=!0),p||""!==
m){if(!p&&"_"===(m=m.trim())[0]){var f=m.split(/\s/)[0].indexOf(".");-1<f&&(m[f]="_",m=m.substr(0,f)+"_"+m.substr(f+1))}c.push(m)}}var x,A,B,D;for(g=0;g<c.length;){for(;!c[g].startsWith("data_")||"data_global"===c[g];)g++;g++;for(p={};g<c.length&&!c[g].startsWith("data_");)if(void 0===c[g][0])g++;else if("_"===c[g][0]){m=c[g].split(/\s/)[0].toLowerCase();v=p[m]=p[m]||[];m=c[g].substr(c[g].indexOf(m)+m.length);if(""===m)if(";"===c[++g][0]){m=c[g].substr(1);for(g++;";"!==c[g];)m=m+"\n"+c[g],g++;v.push(m)}else v.push(c[g]);
else v.push(m.trim());g++}else if("loop_"===c[g].substr(0,5)){g++;for(v=[];""===c[g]||"_"===c[g][0];)""!==c[g]&&(m=c[g].split(/\s/)[0].toLowerCase(),m=p[m]=p[m]||[],v.push(m)),g++;for(m=0;g<c.length&&"_"!==c[g][0]&&!c[g].startsWith("loop_")&&!c[g].startsWith("data_");){f=e(c[g]," ");for(var E=0;E<f.length;E++)""!==f[E]&&(v[m].push(f[E]),m=(m+1)%v.length);g++}}else g++;h.push({symmetries:[]});l.push([]);v=void 0!==p._atom_site_id?p._atom_site_id.length:p._atom_site_label.length;if(void 0!==p._cell_length_a){m=
parseFloat(p._cell_length_a);f=parseFloat(p._cell_length_b);E=parseFloat(p._cell_length_c);var F=parseFloat(p._cell_angle_alpha)||90,L=parseFloat(p._cell_angle_beta)||90,Z=parseFloat(p._cell_angle_gamma)||90;var P=a.conversionMatrix3(m,f,E,F,L,Z);h[h.length-1].cryst={a:m,b:f,c:E,alpha:F,beta:L,gamma:Z}}for(m=0;m<v;m++)if(void 0===p._atom_site_group_pdb||"TER"!==p._atom_site_group_pdb[m])f={},void 0!==p._atom_site_cartn_x?(f.x=parseFloat(p._atom_site_cartn_x[m]),f.y=parseFloat(p._atom_site_cartn_y[m]),
f.z=parseFloat(p._atom_site_cartn_z[m])):(E=(x=P,A=parseFloat(p._atom_site_fract_x[m]),B=parseFloat(p._atom_site_fract_y[m]),D=parseFloat(p._atom_site_fract_z[m]),(new a.Vector3(A,B,D)).applyMatrix3(x)),f.x=E.x,f.y=E.y,f.z=E.z),f.chain=p._atom_site_auth_asym_id?p._atom_site_auth_asym_id[m]:void 0,f.resi=p._atom_site_auth_seq_id?parseInt(p._atom_site_auth_seq_id[m]):void 0,f.resn=p._atom_site_auth_comp_id?p._atom_site_auth_comp_id[m].trim():void 0,f.atom=p._atom_site_auth_atom_id?p._atom_site_auth_atom_id[m].replace(/"/gm,
""):void 0,f.hetflag=!p._atom_site_group_pdb||"HETA"===p._atom_site_group_pdb[m]||"HETATM"===p._atom_site_group_pdb[m],E="X",p._atom_site_type_symbol?E=p._atom_site_type_symbol[m].replace(/\(?\+?\d+.*/,""):p._atom_site_label&&(E=p._atom_site_label[m].split("_")[0].replace(/\(?\d+.*/,"")),f.elem=E[0].toUpperCase()+E.substr(1,1).toLowerCase(),f.bonds=[],f.ss="c",f.serial=m,f.bondOrder=[],f.properties={},l[l.length-1].push(f);if(void 0!==p._pdbx_struct_oper_list_id&&!k)for(v=0;v<p._pdbx_struct_oper_list_id.length;v++){m=
parseFloat(p["_pdbx_struct_oper_list_matrix[1][1]"][v]);f=parseFloat(p["_pdbx_struct_oper_list_matrix[1][2]"][v]);E=parseFloat(p["_pdbx_struct_oper_list_matrix[1][3]"][v]);F=parseFloat(p["_pdbx_struct_oper_list_vector[1]"][v]);L=parseFloat(p["_pdbx_struct_oper_list_matrix[2][1]"][v]);Z=parseFloat(p["_pdbx_struct_oper_list_matrix[2][2]"][v]);var Y=parseFloat(p["_pdbx_struct_oper_list_matrix[2][3]"][v]),S=parseFloat(p["_pdbx_struct_oper_list_vector[2]"][v]),R=parseFloat(p["_pdbx_struct_oper_list_matrix[3][1]"][v]),
W=parseFloat(p["_pdbx_struct_oper_list_matrix[3][2]"][v]),O=parseFloat(p["_pdbx_struct_oper_list_matrix[3][3]"][v]),I=parseFloat(p["_pdbx_struct_oper_list_vector[3]"][v]);m=new a.Matrix4(m,f,E,F,L,Z,Y,S,R,W,O,I);h[h.length-1].symmetries.push(m)}v=function(a){var c,d=a.match("-");a=a.replace(/[-xyz]/g,"").split("/");return c=void 0===a[1]?1:parseInt(a[1]),(""===a[0]?1:parseInt(a[0]))/c*(d?-1:1)};if(void 0!==p._symmetry_equiv_pos_as_xyz&&!k)for(m=0;m<p._symmetry_equiv_pos_as_xyz.length;m++){E=p._symmetry_equiv_pos_as_xyz[m].replace(/["' ]/g,
"").split(",").map(function(a){return a.replace(/-/g,"+-")});f=new a.Matrix4(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1);for(F=0;3>F;F++)for(L=E[F].split("+"),Z=0;Z<L.length;Z++)Y=L[Z],""!==Y&&(S=v(Y),Y.match("x")?f.elements[F+0]=S:Y.match("y")?f.elements[F+4]=S:Y.match("z")?f.elements[F+8]=S:f.elements[F+12]=S);E=P.getMatrix4();F=(new a.Matrix4).getInverse(E,!0);f=(new a.Matrix4).multiplyMatrices(f,F);f=(new a.Matrix4).multiplyMatrices(E,f);h[h.length-1].symmetries.push(f)}}for(k=0;k<l.length;k++)n(l[k]),q(l[k]),
t(h[k].symmetries,l[k],d,h[k].cryst),d.duplicateAssemblyAtoms&&!d.dontConnectDuplicatedAtoms&&n(l[k]);return l};c.mol2=c.MOL2=function(a,c){var d=[[]],e=!1;void 0!==c.keepH&&(e=!c.keepH);var h=a.search(/@<TRIPOS>MOLECULE/),k=a.search(/@<TRIPOS>ATOM/);if(-1==h||-1==k)return d;for(a=a.substr(h,a.length).split(/\r?\n|\r/);0<a.length;){h=[];var g=a[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),n=parseInt(g[0]);k=0;1<g.length&&(k=parseInt(g[1]));var p,m=4;for(p=3;p<a.length;p++)if("@<TRIPOS>ATOM"==
a[p]){m=p+1;break}p=d[d.length-1].length;for(n=p+n;p<n;p++){var f={},q=(g=a[m++].replace(/^\s+/,"").replace(/\s+/g," ").split(" "))[5].split(".")[0];if(f.atom=f.elem=q[0].toUpperCase()+q.substr(1).toLowerCase(),"H"!=f.elem||!e){q=d[d.length-1].length;var t=parseInt(g[0]);f.serial=t;f.x=parseFloat(g[2]);f.y=parseFloat(g[3]);f.z=parseFloat(g[4]);f.atom=g[5];g=parseFloat(g[8]);f.index=q;f.bonds=[];f.bondOrder=[];f.properties={charge:g,partialCharge:g};h[t]=q;d[d.length-1].push(f)}}for(p=!1;m<a.length;)if("@<TRIPOS>BOND"==
a[m++]){p=!0;break}if(p&&k)for(p=0;p<k;p++)g=a[m++].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),n=parseInt(g[1]),f=d[d.length-1][h[n]],q=parseInt(g[2]),t=d[d.length-1][h[q]],g=parseInt(g[3]),isNaN(g)&&(g=1),void 0!==f&&void 0!==t&&(f.bonds.push(h[q]),f.bondOrder.push(g),t.bonds.push(h[n]),t.bondOrder.push(g));if(!c.multimodel)break;c.onemol||d.push([]);a.splice(0,m);a.join("\n")}return d};var A=function(a,c){a=a.replace(/ /g,"");return 0<a.length&&"H"==a[0]&&"Hg"!=a&&"He"!=a&&"Hf"!=a&&"Hs"!=
a&&"Ho"!=a&&(a="H"),1<a.length&&(a=a[0].toUpperCase()+a.substr(1).toLowerCase(),void 0===d[a]?a=a[0]:c&&("Ca"==a?a="C":"Cd"==a&&(a="C"))),a},v=function(c,h,g){for(var e,k,n=[],w=!h.keepH,v=!!h.noSecondaryStructure,z=!h.noComputeSecondaryStructure,m=!h.doAssembly,f=h.altLoc?h.altLoc:"A",x={symmetries:[]},B=[],D=[],E={},Q=0;Q<c.length;Q++){var F,L,Z=(k=c[Q].replace(/^\s*/,"")).substr(0,6);if(0==Z.indexOf("END")){if(B=c.slice(Q+1),"END"==Z)for(var P in g)g.hasOwnProperty(P)&&delete g[P];break}if("ATOM  "==
Z||"HETATM"==Z){var Y,S,R,W,O,I,H,K,ka;if(" "==(K=k.substr(16,1))||K==f||"*"==f)(H=parseInt(k.substr(6,5)),e=k.substr(12,4).replace(/ /g,""),F=k.substr(17,3).replace(/ /g,""),L=k.substr(21,1),Y=parseInt(k.substr(22,4)),S=k.substr(26,1),R=parseFloat(k.substr(30,8)),W=parseFloat(k.substr(38,8)),O=parseFloat(k.substr(46,8)),ka=parseFloat(k.substr(60,8)),"H"==(I=""===(I=k.substr(76,2).replace(/ /g,""))||void 0===d[I]?A(k.substr(12,2),"A"==k[0]):I[0].toUpperCase()+I.substr(1).toLowerCase())&&w)||(Z="H"==
Z[0],D[H]=n.length,n.push({resn:F,x:R,y:W,z:O,elem:I,hetflag:Z,altLoc:K,chain:L,resi:Y,icode:S,rescode:Y+(" "!=S?"^"+S:""),serial:H,atom:e,bonds:[],ss:"c",bondOrder:[],properties:{},b:ka,pdbline:k}))}else if("SHEET "==Z){!0;F=k.substr(21,1);L=parseInt(k.substr(22,4));k.substr(32,1);k=parseInt(k.substr(33,4));F in g||(g[F]={});g[F][L]="s1";for(L+=1;L<k;L++)g[F][L]="s";g[F][k]="s2"}else if("CONECT"==Z)for(F=D[parseInt(k.substr(6,5))],L=n[F],Y=[11,16,21,26],S=0;4>S;S++){if(R=D[parseInt(k.substr(Y[S],
5))],W=n[R],void 0!==L&&void 0!==W)if(E[[F,R]])for(E[[F,R]]+=1,W=0;W<L.bonds.length;W++)L.bonds[W]==R&&(O=E[[F,R]],L.bondOrder[W]=4<=O?1:O);else E[[F,R]]=1,0!=L.bonds.length&&L.bonds[L.bonds.length-1]==R||(L.bonds.push(R),L.bondOrder.push(1))}else if("HELIX "==Z){!0;F=k.substr(19,1);L=parseInt(k.substr(21,4));k.substr(31,1);k=parseInt(k.substr(33,4));F in g||(g[F]={});g[F][L]="h1";for(L+=1;L<k;L++)g[F][L]="h";g[F][k]="h2"}else if(m||"REMARK"!=Z||"BIOMT"!=k.substr(13,5))"CRYST1"==Z?(W=R=S=Y=L=F=void 0,
F=parseFloat(k.substr(7,8)),L=parseFloat(k.substr(16,8)),Y=parseFloat(k.substr(25,8)),S=parseFloat(k.substr(34,6)),R=parseFloat(k.substr(41,6)),W=parseFloat(k.substr(48,6)),x.cryst={a:F,b:L,c:Y,alpha:S,beta:R,gamma:W}):"ANISOU"==Z&&(F=n[D[parseInt(k.substr(6,5))]])&&(k=k.substr(30).trim().split(/\s+/),k={u11:parseInt(k[0]),u22:parseInt(k[1]),u33:parseInt(k[2]),u12:parseInt(k[3]),u13:parseInt(k[4]),u23:parseInt(k[5])},F.uMat=k);else{L=new a.Matrix4;for(F=1;3>=F;F++)if(k=c[Q].replace(/^\s*/,""),parseInt(k.substr(18,
1))==F)L.elements[F-1]=parseFloat(k.substr(23,10)),L.elements[F-1+4]=parseFloat(k.substr(33,10)),L.elements[F-1+8]=parseFloat(k.substr(43,10)),L.elements[F-1+12]=parseFloat(k.substr(53)),Q++;else for(;"BIOMT"==k.substr(13,5);)k=c[++Q].replace(/^\s*/,"");L.elements[3]=0;L.elements[7]=0;L.elements[11]=0;L.elements[15]=1;x.symmetries.push(L);Q--}}(new Date).getTime();if(function(a,c){for(var d=0,e=a.length;d<e;d++)for(var f=a[d],k=0;k<f.bonds.length;k++){var h=a[f.bonds[k]],l=c[f.serial];h&&l&&0>h.bonds.indexOf(l)&&
(h.bonds.push(l),h.bondOrder.push(f.bondOrder[k]))}}(n,D),p(n),m||t(x.symmetries,n,h,x.cryst),z&&!v&&((new Date).getTime(),q(n)),(new Date).getTime(),!function(a){for(var c in a)return!1;return!0}(g))for(c=0;c<n.length;c++)void 0!==(e=n[c])&&e.chain in g&&e.resi in g[e.chain]&&(h=g[e.chain][e.resi],e.ss=h[0],1<h.length&&("1"==h[1]?e.ssbegin=!0:"2"==h[1]&&(e.ssend=!0)));return[n,x,B]};c.pdb=c.PDB=c.pdbqt=c.PDBQT=function(a,c){var d=[],e={};d.modelData=[];for(var k=a.split(/\r?\n|\r/);0<k.length;){k=
v(k,c,e);a=k[0];var h=k[1];if(k=k[2],0!=a.length){if(c.multimodel&&c.onemol&&0<d.length){h=d[0].length;for(var g=0;g<a.length;g++){var n=a[g];n.index=g;for(var p=0;p<n.bonds.length;p++)n.bonds[p]+=h;d[0].push(n)}}else d.modelData.push(h),d.push(a);if(!c.multimodel)break}}return d};c.pqr=c.PQR=function(a,c){var d=[[]],e=!c.noSecondaryStructure;d.modelData=[{symmetries:[]}];for(var k=[],h=a.split(/\r?\n|\r/),g=0;g<h.length;g++){var n=(a=h[g].replace(/^\s*/,"")).substr(0,6);if(0==n.indexOf("END")){if(c.multimodel){c.onemol||
d.push([]);continue}break}if("ATOM  "==n||"HETATM"==n){n=parseInt(a.substr(6,5));var t=a.substr(12,4).replace(/ /g,""),m=a.substr(17,3).trim(),f=a.substr(21,1),v=parseInt(a.substr(22,4));var x=a.substr(30).trim().split(/\s+/);var A=parseFloat(x[0]),B=parseFloat(x[1]),D=parseFloat(x[2]),F=parseFloat(x[3]),E=parseFloat(x[4]),L=t[0];1<t.length&&t[1].toUpperCase()!=t[1]&&(L=t.substr(0,2));x="H"==a[0];k[n]=d[d.length-1].length;d[d.length-1].push({resn:m,x:A,y:B,z:D,elem:L,hetflag:x,chain:f,resi:v,serial:n,
atom:t,bonds:[],ss:"c",bondOrder:[],properties:{charge:F,partialCharge:F,radius:E},pdbline:a})}else if("CONECT"==n)for(n=parseInt(a.substr(6,5)),n=d[d.length-1][k[n]],t=0;4>t;t++)m=parseInt(a.substr([11,16,21,26][t],5)),f=d[d.length-1][k[m]],void 0!==n&&void 0!==f&&(n.bonds.push(k[m]),n.bondOrder.push(1))}for(c=0;c<d.length;c++)p(d[c]),e&&q(d[c]);return d};var B=function(a){return 0==a||2==a||4==a?"h":3==a?"s":"c"};return c.mmtf=c.MMTF=function(c,d){var e=!d.keepH,k=d.altLoc?d.altLoc:"A",h=!!d.noSecondaryStructure,
g=!d.noComputeSecondaryStructure,n=!d.doAssembly,p=d.assemblyIndex?d.assemblyIndex:0;"string"==typeof c&&(c=a.base64ToArray(c));var v,m=MMTF.decode(c);c=[[]];var f=c.modelData=[],x=0,A=0,D=0,E=m.secStructList,L=m.insCodeList,F=m.sequenceIndexList,Y=m.bFactorList,Z=m.altLocList,P=m.occupancyList,ja=m.bondAtomList,S=m.bondOrderList,R=m.numModels;if(0==R)return c;d.multimodel||(R=1);var W=[];if(!n&&m.bioAssemblyList&&0<m.bioAssemblyList.length){var O=m.bioAssemblyList[p].transformList;var I=0;for(p=
O.length;I<p;I++){var H=new a.Matrix4(O[I].matrix);H.transpose();W.push(H)}}O=null;m.unitCell&&(p=m.unitCell,O={a:p[0],b:p[1],c:p[2],alpha:p[3],beta:p[4],gamma:p[5]});for(p=H=0;p<R;p++){var K=m.chainsPerModel[p],ka=c[c.length-1],ca=[];f.push({symmetries:W,cryst:O});for(I=0;I<K;++I){var ia=m.groupsPerChain[x],aa=String.fromCharCode.apply(null,m.chainIdList.subarray(4*x,4*x+4)).replace(/\0/g,"");m.chainNameList&&(aa=String.fromCharCode.apply(null,m.chainNameList.subarray(4*x,4*x+4)).replace(/\0/g,""));
var T=A,U="";for(v=0;v<ia;++v){var la=m.groupList[m.groupTypeList[A]];var ma=la.atomNameList.length;var V=0,ha=!1,ra=!1;if(E){V=E[A];var pa=B(V);0!=A&&pa==U||(ha=!0);U=pa;var pb=A+1;(pb>=E.length||B(E[pb]!=pa))&&(ra=!0)}m.insCodeList&&String.fromCharCode(L[A]);F&&F[A];var Na=m.groupIdList[A],Oa=la.groupName;pb=D;for(pa=0;pa<ma;++pa){var bb=la.elementList[pa];if(!e||"H"!=bb){var Ma="";Y&&(Ma=Y[D]);var Ya="";Z&&Z[D]&&(Ya=String.fromCharCode(Z[D]));var Wb="";if(P&&(Wb=P[D]),""==Ya||Ya==k||"*"==k){var vb=
m.atomIdList[D],wb=la.atomNameList[pa],Ab=0;la.atomChargeList&&(Ab=la.atomChargeList[pa]);var qa=m.xCoordList[D],ea=m.yCoordList[D],Za=m.zCoordList[D];ca[D]=ka.length;ka.push({resn:Oa,x:qa,y:ea,z:Za,elem:bb,hetflag:0>V,chain:aa,resi:Na,icode:Ya,rescode:Na+(" "!=Ya?"^"+Ya:""),serial:vb,altLoc:Ya,index:D,atom:wb,bonds:[],ss:B(V),ssbegin:ha,ssend:ra,bondOrder:[],properties:{charge:Ab,occupancy:Wb},b:Ma})}}D+=1}V=la.bondAtomList;pa=0;for(ma=la.bondOrderList.length;pa<ma;++pa)ha=la.bondOrderList[pa],ra=
ca[pb+V[2*pa]],Na=ca[pb+V[2*pa+1]],Oa=ka[ra],bb=ka[Na],Oa&&bb&&(Oa.bonds.push(Na),Oa.bondOrder.push(ha),bb.bonds.push(ra),bb.bondOrder.push(ha));A+=1}A=T;for(v=0;v<ia;++v)A+=1;x+=1}if(ja)for(I=H,v=ja.length;I<v;I+=2){ia=ja[I];aa=ja[I+1];K=S?S[I/2]:1;if(ia>=D){H=I;break}ia=ca[ia];aa=ca[aa];T=ka[ia];U=ka[aa];T&&U&&(T.bonds.push(aa),T.bondOrder.push(K),U.bonds.push(ia),U.bondOrder.push(K))}d.multimodel&&(d.onemol||c.push([]));1}if(!n)for(e=0;e<c.length;e++)t(f[e].symmetries,c[e],d,f[e].cryst);return g&&
!h&&q(c),c},c.prmtop=c.PRMTOP=function(a){function c(a){var c=n.indexOf(p.filter(function(c){return c.includes(a)})[0]);if(Number.isInteger(c)&&0<c){for(;!n[c].includes("FORMAT");)c++;return c}return-1}function d(a){var c=n[a].match(/\((\d*)\S*/),d=n[a].match(/[a-zA-Z](\d*)\)\s*/);return null==d&&(d=n[a].match(/[a-zA-Z](\d*)\.\d*\)\s*/)),[c[1],d[1]]}var e,h=[],g=0,n=a.split(/\r?\n|\r/);if(!(0<n.length&&n[0].includes("VERSION")))return[];var p=n.filter(function(a){return a.includes("POINTERS")||a.includes("ATOM_NAME")||
a.includes("CHARGE")||a.includes("RADII")||a.includes("BONDS_INC_HYDROGEN")||a.includes("BONDS_WITHOUT_HYDROGEN")});a=c("POINTERS");if(-1==a)return[];var q=d(a),m=parseInt(n[a+1].slice(0,q[1]));if(isNaN(m)||0>=m||-1==(a=c("ATOM_NAME")))return[];for(var f=(q=d(a))[0],t=0;t<m/q[0];t++){t==parseInt(m/q[0])&&(f=m%q[0]);for(var v=0;v<f;v++){var x={};x.serial=g;x.x=0;x.y=0;x.z=0;x.atom=n[a+1].slice(q[1]*v,q[1]*(v+1));x.elem=n[a+1].slice(q[1]*v,q[1]*v+1);x.properties={charge:"",radii:""};x.bonds=[];x.bondOrder=
[];h.push(x);g++}a++}if(-1!=(a=c("CHARGE")))for(g=0,f=(q=d(a))[0],t=0;t<m/q[0];t++){t==parseInt(m/q[0])&&(f=m%q[0]);for(v=0;v<f;v++)h[g].properties.charge=parseFloat(n[a+1].slice(q[1]*v,q[1]*(v+1))),g++;a++}if(-1!=(a=c("RADII")))for(g=0,f=(q=d(a))[0],t=0;t<m/q[0];t++){t==parseInt(m/q[0])&&(f=m%q[0]);for(v=0;v<f;v++)h[g].properties.radii=parseFloat(n[a+1].slice(q[1]*v,q[1]*(v+1))),g++;a++}if(-1!=(a=c("BONDS_WITHOUT_HYDROGEN")))for(g=0,f=(q=d(a))[0],a+=1;!n[a].match(/^%FLAG/);){n[a+1].match(/^%FLAG/)&&
(f=m%q[0]);for(t=0;t<f;t++)0==g%3?e=parseInt(n[a].slice(q[1]*t,q[1]*(t+1))/3):1==g%3&&h[e].bonds.push(parseInt(n[a].slice(q[1]*t,q[1]*(t+1))/3)),g++;a++}if(-1!=(a=c("BONDS_INC_HYDROGEN")))for(g=0,f=(q=d(a))[0],a+=1;!n[a].match(/^%FLAG/);){n[a+1].match(/^%FLAG/)&&(f=m%q[0]);for(t=0;t<f;t++)0==g%3?e=parseInt(n[a].slice(q[1]*t,q[1]*(t+1))/3):1==g%3&&h[e].bonds.push(parseInt(n[a].slice(q[1]*t,q[1]*(t+1))/3)),g++;a++}return[h]},c.gro=c.GRO=function(a){var c=[];for(a=a.split(/\r?\n|\r/);0<a.length&&!(3>
a.length);){var d=parseInt(a[1]);if(isNaN(d)||0>=d)break;if(a.length<d+3)break;var e=[];c.push(e);var h=2,g=e.length;for(d=g+d;g<d;g++){var n=a[h++],q={};q.serial=g;q.atom=n.slice(10,15).trim();q.elem=A(q.atom,!0);q.x=10*parseFloat(n.slice(20,28));q.y=10*parseFloat(n.slice(28,36));q.z=10*parseFloat(n.slice(36,44));q.resi=parseInt(n.slice(0,5));q.resn=n.slice(5,10).trim();q.bonds=[];q.bondOrder=[];q.properties={};44<n.length&&(q.dx=10*parseFloat(n.slice(44,52)),q.dy=10*parseFloat(n.slice(52,60)),q.dz=
10*parseFloat(n.slice(60,68)));e[g]=q}if(a.length<=h+3&&(e=a[h++].trim().split(/\s+/),3==e.length)){for(d=0;3>d;d++)e[d]=10*parseFloat(e[d]);c.box=e}a.splice(0,++h)}for(a=0;a<c.length;a++)p(c[a]);return c},c.lammpstrj=c.LAMMPSTRJ=function(a,c){var d=[],e={id:"serial",type:"atom",element:"elem",q:"charge",radius:"radius",x:"x",xu:"x",xs:"x",xsu:"x",y:"y",yu:"y",ys:"y",ysu:"y",z:"z",zu:"z",zs:"z",zsu:"z"};a=a.split(/\r?\n|\r/);for(var h=0,k=0,g=0;g<a.length-9;){for(;g<a.length;g++)if(a[g].match(/ITEM: NUMBER OF ATOMS/)&&
(k=parseInt(a[g+1])),a[g].match(/ITEM: ATOMS/)){h=g+1;break}g=a[h-1].replace("ITEM: ATOMS ","").split(" ");d.push([]);for(var p=h;p<h+k;p++){for(var q={},m={},f=a[p].split(" "),t=0;t<f.length;t++){var v=e[g[t]];null!=v&&("serial"==v?q[v]=parseInt(f[t]):"x"==v||"y"==v||"z"===v?q[v]=parseFloat(f[t]):"charge"==v||"radius"==v?m[v]=parseFloat(f[t]):q[v]=f[t]);q.properties=m;q.bonds=[];q.bondOrder=[]}d[d.length-1][p-h]=q}g=h+k-1}if(c.assignbonds)for(c=0;c<d.length;c++)n(d[c]);return d},c}();a=a||{};a.partialCharges=
{"ALA:N":-.15,"ALA:CA":.1,"ALA:CB":0,"ALA:C":.6,"ALA:O":-.55,"ARG:N":-.15,"ARG:CA":.1,"ARG:CB":0,"ARG:CG":0,"ARG:CD":.1,"ARG:NE":-.1,"ARG:CZ":.5,"ARG:NH1":.25,"ARG:NH2":.25,"ARG:C":.6,"ARG:O":-.55,"ASN:N":-.15,"ASN:CA":.1,"ASN:CB":0,"ASN:CG":.55,"ASN:OD1":-.55,"ASN:ND2":0,"ASN:C":.6,"ASN:O":-.55,"ASP:N":-.15,"ASP:CA":.1,"ASP:CB":0,"ASP:CG":.14,"ASP:OD1":-.57,"ASP:OD2":-.57,"ASP:C":.6,"ASP:O":-.55,"CYS:N":-.15,"CYS:CA":.1,"CYS:CB":.19,"CYS:SG":-.19,"CYS:C":.6,"CYS:O":-.55,"GLN:N":-.15,"GLN:CA":.1,
"GLN:CB":0,"GLN:CG":0,"GLN:CD":.55,"GLN:OE1":-.55,"GLN:NE2":0,"GLN:C":.6,"GLN:O":-.55,"GLU:N":-.15,"GLU:CA":.1,"GLU:CB":0,"GLU:CG":0,"GLU:CD":.14,"GLU:OE1":-.57,"GLU:OE2":-.57,"GLU:C":.6,"GLU:O":-.55,"GLY:N":-.15,"GLY:CA":.1,"GLY:C":.6,"GLY:O":-.55,"HIS:N":-.15,"HIS:CA":.1,"HIS:CB":0,"HIS:CG":.1,"HIS:ND1":-.1,"HIS:CD2":.1,"HIS:NE2":-.4,"HIS:CE1":.3,"HIS:C":.6,"HIS:O":-.55,"ILE:N":-.15,"ILE:CA":.1,"ILE:CB":0,"ILE:CG2":0,"ILE:CG1":0,"ILE:CD":0,"ILE:C":.6,"ILE:O":-.55,"LEU:N":-.15,"LEU:CA":.1,"LEU:CB":0,
"LEU:CG":0,"LEU:CD1":0,"LEU:CD2":0,"LEU:C":.6,"LEU:O":-.55,"LYS:N":-.15,"LYS:CA":.1,"LYS:CB":0,"LYS:CG":0,"LYS:CD":0,"LYS:CE":.25,"LYS:NZ":.75,"LYS:C":.6,"LYS:O":-.55,"MET:N":-.15,"MET:CA":.1,"MET:CB":0,"MET:CG":.06,"MET:SD":-.12,"MET:CE":.06,"MET:C":.6,"MET:O":-.55,"PHE:N":-.15,"PHE:CA":.1,"PHE:CB":0,"PHE:CG":0,"PHE:CD1":0,"PHE:CD2":0,"PHE:CE1":0,"PHE:CE2":0,"PHE:CZ":0,"PHE:C":.6,"PHE:O":-.55,"PRO:N":-.25,"PRO:CD":.1,"PRO:CA":.1,"PRO:CB":0,"PRO:CG":0,"PRO:C":.6,"PRO:O":-.55,"SER:N":-.15,"SER:CA":.1,
"SER:CB":.25,"SER:OG":-.25,"SER:C":.6,"SER:O":-.55,"THR:N":-.15,"THR:CA":.1,"THR:CB":.25,"THR:OG1":-.25,"THR:CG2":0,"THR:C":.6,"THR:O":-.55,"TRP:N":-.15,"TRP:CA":.1,"TRP:CB":0,"TRP:CG":-.03,"TRP:CD2":.1,"TRP:CE2":-.04,"TRP:CE3":-.03,"TRP:CD1":.06,"TRP:NE1":-.06,"TRP:CZ2":0,"TRP:CZ3":0,"TRP:CH2":0,"TRP:C":.6,"TRP:O":-.55,"TYR:N":-.15,"TYR:CA":.1,"TYR:CB":0,"TYR:CG":0,"TYR:CD1":0,"TYR:CE1":0,"TYR:CD2":0,"TYR:CE2":0,"TYR:CZ":.25,"TYR:OH":-.25,"TYR:C":.6,"TYR:O":-.55,"VAL:N":-.15,"VAL:CA":.1,"VAL:CB":0,
"VAL:CG1":0,"VAL:CG2":0,"VAL:C":.6,"VAL:O":-.55};a.applyPartialCharges=function(c,d){d&&void 0!==c.partialCharge||!c.resn||!c.atom||(c.properties.partialCharge=a.partialCharges[c.resn+":"+c.atom])};a.VolumeData=function(c,d,h){if(this.unit={x:1,y:1,z:1},this.origin={x:0,y:0,z:0},this.size={x:0,y:0,z:0},this.data=new Float32Array([]),this.matrix=null,d=d.toLowerCase(),/\.gz$/.test(d)){d=d.replace(/\.gz$/,"");try{this[d]&&this[d].isbinary?("string"==typeof c&&(c=a.base64ToArray(c)),c=pako.inflate(c)):
c=(new TextDecoder("utf-8")).decode(pako.inflate(c))}catch(p){console.log(p)}}if(this[d]&&(this[d].isbinary&&"string"==typeof c&&(c=a.base64ToArray(c)),this[d](c)),h){if(h.negate)for(c=0,d=this.data.length;c<d;c++)this.data[c]=-this.data[c];if(h.normalize){h=c=0;for(d=this.data.length;h<d;h++)c+=this.data[h];h=c/this.data.length;console.log("computed mean: "+h);d=c=0;for(var n=this.data.length;d<n;d++){var g=this.data[d]-h;c+=g*g}c/=this.data.length;d=0;for(n=this.data.length;d<n;d++)this.data[d]=
(this.data[d]-h)/c}}};a.VolumeData.prototype.getIndex=function(c,d,h){this.matrix?(this.inversematrix||(this.inversematrix=(new a.Matrix4).getInverse(this.matrix)),h=new a.Vector3(c,d,h),c=(h=h.applyMatrix4(this.inversematrix)).x,d=h.y,h=h.z):(c-=this.origin.x,d-=this.origin.y,h-=this.origin.z,c/=this.unit.x,d/=this.unit.y,h/=this.unit.z);return c=Math.round(c),d=Math.round(d),h=Math.round(h),0>c||c>=this.size.x?-1:0>d||d>=this.size.y?-1:0>h||h>=this.size.z?-1:c*this.size.y*this.size.z+d*this.size.z+
h};a.VolumeData.prototype.getVal=function(a,d,h){a=this.getIndex(a,d,h);return 0>a?0:this.data[a]};a.VolumeData.prototype.getCoordinates=function(a){var c=a/(this.size.y*this.size.z),h=a%(this.size.y*this.size.z);a%=this.size.z;return c*=this.unit.x,h*=this.unit.y,a*=this.unit.z,{x:c+this.origin.x,y:h+this.origin.y,z:a+this.origin.z}};a.VolumeData.prototype.vasp=function(c){var d=c.replace(/^\s+/,"").split(/[\n\r]/),h=a.Parsers.vasp(c)[0].length;if(0==h)return console.log("No good formating of CHG or CHGCAR file, not atomic information provided in the file."),
void(this.data=[]);var n=parseFloat(d[1]);c=d[2].replace(/^\s+/,"").split(/\s+/);var g=(new a.Vector3(parseFloat(c[0]),parseFloat(c[1]),parseFloat(c[2]))).multiplyScalar(1.889725992*n);c=d[3].replace(/^\s+/,"").split(/\s+/);var p=(new a.Vector3(parseFloat(c[0]),parseFloat(c[1]),parseFloat(c[2]))).multiplyScalar(1.889725992*n);c=d[4].replace(/^\s+/,"").split(/\s+/);n=(new a.Vector3(parseFloat(c[0]),parseFloat(c[1]),parseFloat(c[2]))).multiplyScalar(1.889725992*n);c=1/(Math.abs(g.x*(p.y*n.z-n.y*p.z)-
p.x*(g.y*n.z-n.y*g.z)+n.x*(g.y*p.z-p.y*g.z))/Math.pow(1.889725992,3));d.splice(0,8+h+1);var q=d[0].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");h=Math.abs(q[0]);var t=Math.abs(q[1]);q=Math.abs(q[2]);var A=this.origin=new a.Vector3(0,0,0);this.size={x:h,y:t,z:q};this.unit=new a.Vector3(g.x,p.y,n.z);g=g.multiplyScalar(1/(1.889725992*h));p=p.multiplyScalar(1/(1.889725992*t));n=n.multiplyScalar(1/(1.889725992*q));0==g.y&&0==g.z&&0==p.x&&0==p.z&&0==n.x&&0==n.y||(this.matrix=new a.Matrix4(g.x,p.x,
n.x,0,g.y,p.y,n.y,0,g.z,p.z,n.z,0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,(new a.Matrix4).makeTranslation(A.x,A.y,A.z)),this.origin=new a.Vector3(0,0,0),this.unit=new a.Vector3(1,1,1));d.splice(0,1);d=d.join(" ");(d=(d=d.replace(/^\s+/,"")).split(/[\s\r]+/)).splice(h*t*q+1);d=new Float32Array(d);for(g=0;g<d.length;g++)d[g]=d[g]*c*.036749309;this.data=d};a.VolumeData.prototype.dx=function(c){var d,h=c.split(/[\n\r]+/),n=/gridpositions\s+counts\s+(\d+)\s+(\d+)\s+(\d+)/,g=/^origin\s+(\S+)\s+(\S+)\s+(\S+)/,
p=/^delta\s+(\S+)\s+(\S+)\s+(\S+)/,q=/data follows/;for(c=0;c<h.length;c++){var t=h[c];if(d=n.exec(t)){var A=parseInt(d[1]),v=parseInt(d[2]);d=parseInt(d[3]);this.size={x:A,y:v,z:d}}else if(d=p.exec(t)){A=parseFloat(d[1]);if(0==parseFloat(d[2])&&0==parseFloat(d[3])||console.log("Non-orthogonal delta matrix not currently supported in dx format"),t=h[c+=1],null==(d=p.exec(t)))return void console.log("Parse error in dx delta matrix");v=parseFloat(d[2]);if(0==parseFloat(d[1])&&0==parseFloat(d[3])||console.log("Non-orthogonal delta matrix not currently supported in dx format"),
t=h[c+=1],null==(d=p.exec(t)))return void console.log("Parse error in dx delta matrix");t=parseFloat(d[3]);0==parseFloat(d[1])&&0==parseFloat(d[2])||console.log("Non-orthogonal delta matrix not currently supported in dx format");this.unit=new a.Vector3(A,v,t)}else if(d=g.exec(t))A=parseFloat(d[1]),v=parseFloat(d[2]),d=parseFloat(d[3]),this.origin=new a.Vector3(A,v,d);else if(q.exec(t))break}(c+=1,this.size&&this.origin&&this.unit&&this.size)?(c=h.splice(c).join(" "),c=c.split(/[\s\r]+/),this.data=
new Float32Array(c)):console.log("Error parsing dx format")};a.VolumeData.prototype.cube=function(c){c=c.replace(/^\s+/,"").split(/[\n\r]+/);if(!(6>c.length)){var d=c[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),h=parseFloat(d[0]),n=Math.abs(h),g=this.origin=new a.Vector3(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3])),p=0<(d=c[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" "))[0]?.529177:1;g.multiplyScalar(p);var q=Math.abs(d[0]),t=(new a.Vector3(parseFloat(d[1]),parseFloat(d[2]),
parseFloat(d[3]))).multiplyScalar(p);d=c[4].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var A=Math.abs(d[0]),v=(new a.Vector3(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3]))).multiplyScalar(p);d=c[5].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var B=Math.abs(d[0]);d=(new a.Vector3(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3]))).multiplyScalar(p);this.size={x:q,y:A,z:B};this.unit=new a.Vector3(t.x,v.y,d.z);0==t.y&&0==t.z&&0==v.x&&0==v.z&&0==d.x&&0==d.y||(this.matrix=new a.Matrix4(t.x,
v.x,d.x,0,t.y,v.y,d.y,0,t.z,v.z,d.z,0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,(new a.Matrix4).makeTranslation(g.x,g.y,g.z)),this.origin=new a.Vector3(0,0,0),this.unit=new a.Vector3(1,1,1));g=6;0>h&&g++;c=c.splice(n+g).join(" ");c=(c=c.replace(/^\s+/,"")).split(/[\s\r]+/);this.data=new Float32Array(c)}};a.VolumeData.prototype.ccp4=function(c){var d,h;c=new Int8Array(c);var n=new Int32Array(c.buffer,0,56);var g=new Float32Array(c.buffer,0,56);var p=new DataView(c.buffer);if(String.fromCharCode(p.getUint8(208),
p.getUint8(209),p.getUint8(210),p.getUint8(211)),d=[p.getUint8(212),p.getUint8(213)],17===d[0]&&17===d[1])for(d=c.byteLength,h=0;h<d;h+=4)p.setFloat32(h,p.getFloat32(h),!0);p=n[0];d=n[1];h=n[2];var q=n[4];var t=n[5];var A=n[6];var v=n[7];var B=n[8];var e=n[9];var k=g[10];var z=g[11];var l=g[12];var u=g[13];var C=g[14];var w=g[15];var D=n[16];var E=n[17];var m=n[18];n=n[23];var f=g[49];var L=g[50];g=g[51];k=[k,0,0];z=[z*Math.cos(Math.PI/180*w),z*Math.sin(Math.PI/180*w),0];u=[l*Math.cos(Math.PI/180*
C),l*(Math.cos(Math.PI/180*u)-Math.cos(Math.PI/180*w)*Math.cos(Math.PI/180*C))/Math.sin(Math.PI/180*w),0];u[2]=Math.sqrt(l*l*Math.sin(Math.PI/180*C)*Math.sin(Math.PI/180*C)-u[1]*u[1]);l=[0,k,z,u];v=[0,v,B,e];B=[0,D,E,m];this.matrix=new a.Matrix4;this.matrix.set(l[B[1]][0]/v[B[1]],l[B[2]][0]/v[B[2]],l[B[3]][0]/v[B[3]],0,l[B[1]][1]/v[B[1]],l[B[2]][1]/v[B[2]],l[B[3]][1]/v[B[3]],0,l[B[1]][2]/v[B[1]],l[B[2]][2]/v[B[2]],l[B[3]][2]/v[B[3]],0,0,0,0,1);this.matrix=this.matrix.multiplyMatrices(this.matrix,
(new a.Matrix4).makeTranslation(q+f,t+L,A+g));this.origin=new a.Vector3(0,0,0);this.unit=new a.Vector3(1,1,1);this.size={x:p,y:d,z:h};this.dimensionorder=[D,E,m];c=new Float32Array(c.buffer,1024+n);this.data=new Float32Array(p*d*h);for(q=0;q<p;q++)for(t=0;t<d;t++)for(A=0;A<h;A++)this.data[(q*d+t)*h+A]=c[(A*d+t)*p+q]};a.VolumeData.prototype.ccp4.isbinary=!0;a.GLVolumetricRender=function(){function c(a,c){var d=[],h=(a.length-1)/(c-1);d[0]=a[0];for(var n=1;n<c-1;n++){var t=n*h,A=Math.floor(t).toFixed(),
v=Math.ceil(t).toFixed(),B=a[A];d[n]=B+(a[v]-B)*(t-A)}return d[c-1]=a[a.length-1],d}function d(d,n){n=n||{};var g=Object.assign([],n.transferfn),h=null,q=null,t=n.subsamples||5,A=[];g.forEach(function(a){a.value=parseFloat(a.value)});g.sort(function(a,c){return a.value-c.value});var v=g[0].value;0==g.length&&g.push(g[0]);for(var B=g[g.length-1].value,e,k,z,l,u,C,w,D,E=0;E<g.length-1;E++)if(z=a.CC.color(g[E].color),l=a.CC.color(g[E+1].color),w=g[E].opacity,D=g[E+1].opacity,(e=Math.floor(256*(g[E].value-
v)/(B-v)))!=(k=Math.floor(256*(g[E+1].value-v)/(B-v))))for(u=c([255*z.r,255*l.r],k-e),C=c([255*z.g,255*l.g],k-e),z=c([255*z.b,255*l.b],k-e),e=c([255*w,255*D],k-e),k=0;k<u.length;k++)A.push(u[k]),A.push(C[k]),A.push(z[k]),A.push(e[k]);A=new Uint8ClampedArray(A);var m=(new a.Matrix4).identity();g=d.unit.x*d.size.x;u=d.unit.y*d.size.y;C=d.unit.z*d.size.z;m.makeTranslation(-d.origin.x/g,-d.origin.y/u,-d.origin.z/C);m.scale({x:1/g,y:1/u,z:1/C});var f=Math.min(Math.min(d.unit.x,d.unit.y),d.unit.z),L=[[d.origin.x,
d.origin.y,d.origin.z],[d.origin.x+g,d.origin.y+u,d.origin.z+C]],M=Math.sqrt(g*g+u*u+C*C);E=new a.GLShape;d.matrix?console.log("ERROR: Non-orthonombic boxes (or file formats that specify transformation matrices) are not supported with volumetric rendering yet."):E.addBox({corner:d.origin,dimensions:{w:g,h:u,d:C}});var Y=E.finalize();this.boundingSphere=new a.Sphere;this.boundingSphere.center={x:d.origin.x+g/2,y:d.origin.y+u/2,z:d.origin.z+C/2};this.boundingSphere.radius=Math.sqrt(g*g+u*u+C*C)/2;void 0!==
n.coords&&n.seldist;this.globj=function(c){if(q&&(c.remove(q),q=null),!this.hidden){h=new a.Object3D;var e=new a.Texture(d,!0);var g=new a.Texture(A,!1);e.needsUpdate=!0;g.needsUpdate=!0;g.flipY=!1;e=new a.VolumetricMaterial({transferfn:g,transfermin:v,transfermax:B,map:e,extent:L,maxdepth:M,texmatrix:m,unit:f,subsamples:t});e=new a.Mesh(Y,e);h.add(e);q=h.clone();c.add(q)}};this.removegl=function(a){q&&(void 0!==q.geometry&&q.geometry.dispose(),void 0!==q.material&&q.material.dispose(),a.remove(q),
q=null);h=null}}return Object.defineProperty(d.prototype,"position",{get:function(){return this.boundingSphere.center}}),Object.defineProperty(d.prototype,"x",{get:function(){return this.boundingSphere.center.x}}),Object.defineProperty(d.prototype,"y",{get:function(){return this.boundingSphere.center.y}}),Object.defineProperty(d.prototype,"z",{get:function(){return this.boundingSphere.center.z}}),d}();a.workerString=function(){self.onmessage=function(a){a=a.data;var c=a.type;if(0>c)self.atomData=
a.atoms,self.volume=a.volume,self.ps=new ProteinSurface;else{var h=self.ps;h.initparm(a.expandedExtent,1!=c,self.volume);h.fillvoxels(self.atomData,a.extendedAtoms);h.buildboundary();4!==c&&2!==c||(h.fastdistancemap(),h.boundingatom(!1),h.fillvoxelswaals(self.atomData,a.extendedAtoms));h.marchingcube(c);a=h.getFacesAndVertices(a.atomsToShow);self.postMessage(a)}}}.toString().replace(/(^.*?\{|\}$)/g,"");a.workerString+="; var ProteinSurface="+a.ProteinSurface.toString().replace(/[a-zA-Z_$]{1}[0-9a-zA-Z_$]*.MarchingCube./g,
"MarchingCube.");a.workerString+=",MarchingCube=("+a.MarchingCubeInitializer.toString()+")();";a.SurfaceWorker=window.URL?window.URL.createObjectURL(new Blob([a.workerString],{type:"text/javascript"})):{postMessage:function(){}};a.workerString=a.workerString;a.SurfaceWorker=a.SurfaceWorker}).call(this,E("VS3o"),E("EVdn"))}}]);
