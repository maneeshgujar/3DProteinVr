var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(n){var p=0;return function(){return p<n.length?{done:!1,value:n[p++]}:{done:!0}}};$jscomp.arrayIterator=function(n){return{next:$jscomp.arrayIteratorImpl(n)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(n,p,g){n!=Array.prototype&&n!=Object.prototype&&(n[p]=g.value)};$jscomp.getGlobal=function(n){return"undefined"!=typeof window&&window===n?n:"undefined"!=typeof global&&null!=global?global:n};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(n,p){this.$jscomp$symbol$id_=n;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:p})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function n(g){if(this instanceof n)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(g||"")+"_"+p++,g)}var p=0;return n}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var n=$jscomp.global.Symbol.iterator;n||(n=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[n]&&$jscomp.defineProperty(Array.prototype,n,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var n=$jscomp.global.Symbol.asyncIterator;n||(n=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(n){$jscomp.initSymbolIterator();n={next:n};n[$jscomp.global.Symbol.iterator]=function(){return this};return n};
$jscomp.iteratorFromArray=function(n,p){$jscomp.initSymbolIterator();n instanceof String&&(n+="");var g=0,k={next:function(){if(g<n.length){var h=g++;return{value:p(h,n[h]),done:!1}}k.next=function(){return{done:!0,value:void 0}};return k.next()}};k[Symbol.iterator]=function(){return k};return k};
$jscomp.polyfill=function(n,p,g,k){if(p){g=$jscomp.global;n=n.split(".");for(k=0;k<n.length-1;k++){var h=n[k];h in g||(g[h]={});g=g[h]}n=n[n.length-1];k=g[n];p=p(k);p!=k&&null!=p&&$jscomp.defineProperty(g,n,{configurable:!0,writable:!0,value:p})}};$jscomp.polyfill("Array.prototype.keys",function(n){return n?n:function(){return $jscomp.iteratorFromArray(this,function(n){return n})}},"es6","es3");
$jscomp.makeIterator=function(n){var p="undefined"!=typeof Symbol&&Symbol.iterator&&n[Symbol.iterator];return p?p.call(n):$jscomp.arrayIterator(n)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(n){function p(){this.batch_=null}function g(e){return e instanceof h?e:new h(function(f,c){f(e)})}if(n&&!$jscomp.FORCE_POLYFILL_PROMISE)return n;p.prototype.asyncExecute=function(e){if(null==this.batch_){this.batch_=[];var f=this;this.asyncExecuteFunction(function(){f.executeBatch_()})}this.batch_.push(e)};var k=$jscomp.global.setTimeout;p.prototype.asyncExecuteFunction=function(e){k(e,0)};p.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var e=
this.batch_;this.batch_=[];for(var f=0;f<e.length;++f){var c=e[f];e[f]=null;try{c()}catch(a){this.asyncThrow_(a)}}}this.batch_=null};p.prototype.asyncThrow_=function(e){this.asyncExecuteFunction(function(){throw e;})};var h=function(e){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var f=this.createResolveAndReject_();try{e(f.resolve,f.reject)}catch(c){f.reject(c)}};h.prototype.createResolveAndReject_=function(){function e(a){return function(d){c||(c=!0,a.call(f,d))}}var f=this,c=!1;
return{resolve:e(this.resolveTo_),reject:e(this.reject_)}};h.prototype.resolveTo_=function(e){if(e===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof h)this.settleSameAsPromise_(e);else{a:switch(typeof e){case "object":var f=null!=e;break a;case "function":f=!0;break a;default:f=!1}f?this.resolveToNonPromiseObj_(e):this.fulfill_(e)}};h.prototype.resolveToNonPromiseObj_=function(e){var f=void 0;try{f=e.then}catch(c){this.reject_(c);return}"function"==typeof f?
this.settleSameAsThenable_(f,e):this.fulfill_(e)};h.prototype.reject_=function(e){this.settle_(2,e)};h.prototype.fulfill_=function(e){this.settle_(1,e)};h.prototype.settle_=function(e,f){if(0!=this.state_)throw Error("Cannot settle("+e+", "+f+"): Promise already settled in state"+this.state_);this.state_=e;this.result_=f;this.executeOnSettledCallbacks_()};h.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var e=0;e<this.onSettledCallbacks_.length;++e)f.asyncExecute(this.onSettledCallbacks_[e]);
this.onSettledCallbacks_=null}};var f=new p;h.prototype.settleSameAsPromise_=function(e){var f=this.createResolveAndReject_();e.callWhenSettled_(f.resolve,f.reject)};h.prototype.settleSameAsThenable_=function(e,f){var c=this.createResolveAndReject_();try{e.call(f,c.resolve,c.reject)}catch(a){c.reject(a)}};h.prototype.then=function(e,f){function c(m,b){return"function"==typeof m?function(b){try{a(m(b))}catch(x){d(x)}}:b}var a,d,u=new h(function(m,b){a=m;d=b});this.callWhenSettled_(c(e,a),c(f,d));return u};
h.prototype.catch=function(e){return this.then(void 0,e)};h.prototype.callWhenSettled_=function(e,h){function c(){switch(a.state_){case 1:e(a.result_);break;case 2:h(a.result_);break;default:throw Error("Unexpected state: "+a.state_);}}var a=this;null==this.onSettledCallbacks_?f.asyncExecute(c):this.onSettledCallbacks_.push(c)};h.resolve=g;h.reject=function(e){return new h(function(f,c){c(e)})};h.race=function(e){return new h(function(f,c){for(var a=$jscomp.makeIterator(e),d=a.next();!d.done;d=a.next())g(d.value).callWhenSettled_(f,
c)})};h.all=function(e){var f=$jscomp.makeIterator(e),c=f.next();return c.done?g([]):new h(function(a,d){function e(r){return function(c){m[r]=c;b--;0==b&&a(m)}}var m=[],b=0;do m.push(void 0),b++,g(c.value).callWhenSettled_(e(m.length-1),d),c=f.next();while(!c.done)})};return h},"es6","es3");$jscomp.checkEs6ConformanceViaProxy=function(){try{var n={},p=Object.create(new $jscomp.global.Proxy(n,{get:function(g,k,h){return g==n&&"q"==k&&h==p}}));return!0===p.q}catch(g){return!1}};
$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.owns=function(n,p){return Object.prototype.hasOwnProperty.call(n,p)};
$jscomp.polyfill("WeakMap",function(n){function p(){if(!n||!Object.seal)return!1;try{var c=Object.seal({}),a=Object.seal({}),d=new n([[c,2],[a,3]]);if(2!=d.get(c)||3!=d.get(a))return!1;d.delete(c);d.set(a,4);return!d.has(c)&&4==d.get(a)}catch(u){return!1}}function g(){}function k(c){if(!$jscomp.owns(c,f)){var a=new g;$jscomp.defineProperty(c,f,{value:a})}}function h(c){var a=Object[c];a&&(Object[c]=function(c){if(c instanceof g)return c;k(c);return a(c)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(n&&
$jscomp.ES6_CONFORMANCE)return n}else if(p())return n;var f="$jscomp_hidden_"+Math.random();h("freeze");h("preventExtensions");h("seal");var e=0,t=function(c){this.id_=(e+=Math.random()+1).toString();if(c){c=$jscomp.makeIterator(c);for(var a;!(a=c.next()).done;)a=a.value,this.set(a[0],a[1])}};t.prototype.set=function(c,a){k(c);if(!$jscomp.owns(c,f))throw Error("WeakMap key fail: "+c);c[f][this.id_]=a;return this};t.prototype.get=function(c){return $jscomp.owns(c,f)?c[f][this.id_]:void 0};t.prototype.has=
function(c){return $jscomp.owns(c,f)&&$jscomp.owns(c[f],this.id_)};t.prototype.delete=function(c){return $jscomp.owns(c,f)&&$jscomp.owns(c[f],this.id_)?delete c[f][this.id_]:!1};return t},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(n){function p(){if($jscomp.ASSUME_NO_NATIVE_MAP||!n||"function"!=typeof n||!n.prototype.entries||"function"!=typeof Object.seal)return!1;try{var c=Object.seal({x:4}),a=new n($jscomp.makeIterator([[c,"s"]]));if("s"!=a.get(c)||1!=a.size||a.get({x:4})||a.set({x:4},"t")!=a||2!=a.size)return!1;var d=a.entries(),e=d.next();if(e.done||e.value[0]!=c||"s"!=e.value[1])return!1;e=d.next();return e.done||4!=e.value[0].x||"t"!=e.value[1]||!d.next().done?!1:!0}catch(m){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(n&&$jscomp.ES6_CONFORMANCE)return n}else if(p())return n;$jscomp.initSymbolIterator();var g=new WeakMap,k=function(c){this.data_={};this.head_=e();this.size=0;if(c){c=$jscomp.makeIterator(c);for(var a;!(a=c.next()).done;)a=a.value,this.set(a[0],a[1])}};k.prototype.set=function(c,a){c=0===c?0:c;var d=h(this,c);d.list||(d.list=this.data_[d.id]=[]);d.entry?d.entry.value=a:(d.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:c,
value:a},d.list.push(d.entry),this.head_.previous.next=d.entry,this.head_.previous=d.entry,this.size++);return this};k.prototype.delete=function(c){c=h(this,c);return c.entry&&c.list?(c.list.splice(c.index,1),c.list.length||delete this.data_[c.id],c.entry.previous.next=c.entry.next,c.entry.next.previous=c.entry.previous,c.entry.head=null,this.size--,!0):!1};k.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=e();this.size=0};k.prototype.has=function(c){return!!h(this,c).entry};
k.prototype.get=function(c){return(c=h(this,c).entry)&&c.value};k.prototype.entries=function(){return f(this,function(c){return[c.key,c.value]})};k.prototype.keys=function(){return f(this,function(c){return c.key})};k.prototype.values=function(){return f(this,function(c){return c.value})};k.prototype.forEach=function(c,a){for(var d=this.entries(),e;!(e=d.next()).done;)e=e.value,c.call(a,e[1],e[0],this)};k.prototype[Symbol.iterator]=k.prototype.entries;var h=function(c,a){var d=a&&typeof a;"object"==
d||"function"==d?g.has(a)?d=g.get(a):(d=""+ ++t,g.set(a,d)):d="p_"+a;var e=c.data_[d];if(e&&$jscomp.owns(c.data_,d))for(c=0;c<e.length;c++){var m=e[c];if(a!==a&&m.key!==m.key||a===m.key)return{id:d,list:e,index:c,entry:m}}return{id:d,list:e,index:-1,entry:void 0}},f=function(c,a){var d=c.head_;return $jscomp.iteratorPrototype(function(){if(d){for(;d.head!=c.head_;)d=d.previous;for(;d.next!=d.head;)return d=d.next,{done:!1,value:a(d)};d=null}return{done:!0,value:void 0}})},e=function(){var c={};return c.previous=
c.next=c.head=c},t=0;return k},"es6","es3");$jscomp.polyfill("Array.prototype.entries",function(n){return n?n:function(){return $jscomp.iteratorFromArray(this,function(n,g){return[n,g]})}},"es6","es3");
(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{"/eyM":function(n,p,g){g.d(p,"a",function(){return d});var k=g("uyO6"),h=g("tVVT"),f=g("e2Mr"),e=g("y4Ty"),t=g("llUH"),c=g("Xeau"),a=g("QCD/"),d=function(){function d(){}d.BindEyePosition=function(a,b,d){void 0===d&&(d="vEyePosition");if(b._forcedViewPosition)a.setVector3(d,b._forcedViewPosition);else{var m=b.activeCamera.globalPosition;m||(m=b.activeCamera.devicePosition);a.setVector3(d,b._mirroredCameraPosition?b._mirroredCameraPosition:
m)}};d.PrepareDefinesForMergedUV=function(a,b,d){b._needUVs=!0;b[d]=!0;a.getTextureMatrix().isIdentityAs3x2()?(b[d+"DIRECTUV"]=a.coordinatesIndex+1,0===a.coordinatesIndex?b.MAINUV1=!0:b.MAINUV2=!0):b[d+"DIRECTUV"]=0};d.BindTextureMatrix=function(a,b,d){a=a.getTextureMatrix();b.updateMatrix(d+"Matrix",a)};d.GetFogState=function(a,b){return b.fogEnabled&&a.applyFog&&b.fogMode!==h.a.FOGMODE_NONE};d.PrepareDefinesForMisc=function(a,b,d,c,e,q,f){f._areMiscDirty&&(f.LOGARITHMICDEPTH=d,f.POINTSIZE=c,f.FOG=
e&&this.GetFogState(a,b),f.NONUNIFORMSCALING=a.nonUniformScaling,f.ALPHATEST=q)};d.PrepareDefinesForFrameBoundValues=function(a,b,d,c,e,q){void 0===e&&(e=null);void 0===q&&(q=!1);var m=!1;var r=null==e?void 0!==a.clipPlane&&null!==a.clipPlane:e;var f=null==e?void 0!==a.clipPlane2&&null!==a.clipPlane2:e;var w=null==e?void 0!==a.clipPlane3&&null!==a.clipPlane3:e;var u=null==e?void 0!==a.clipPlane4&&null!==a.clipPlane4:e;var h=null==e?void 0!==a.clipPlane5&&null!==a.clipPlane5:e;a=null==e?void 0!==a.clipPlane6&&
null!==a.clipPlane6:e;d.CLIPPLANE!==r&&(d.CLIPPLANE=r,m=!0);d.CLIPPLANE2!==f&&(d.CLIPPLANE2=f,m=!0);d.CLIPPLANE3!==w&&(d.CLIPPLANE3=w,m=!0);d.CLIPPLANE4!==u&&(d.CLIPPLANE4=u,m=!0);d.CLIPPLANE5!==h&&(d.CLIPPLANE5=h,m=!0);d.CLIPPLANE6!==a&&(d.CLIPPLANE6=a,m=!0);d.DEPTHPREPASS!==!b.getColorWrite()&&(d.DEPTHPREPASS=!d.DEPTHPREPASS,m=!0);d.INSTANCES!==c&&(d.INSTANCES=c,m=!0);d.THIN_INSTANCES!==q&&(d.THIN_INSTANCES=q,m=!0);m&&d.markAsUnprocessed()};d.PrepareDefinesForBones=function(a,b){if(a.useBones&&
a.computeBonesUsingShaders&&a.skeleton){b.NUM_BONE_INFLUENCERS=a.numBoneInfluencers;var d=void 0!==b.BONETEXTURE;a.skeleton.isUsingTextureForMatrices&&d?b.BONETEXTURE=!0:(b.BonesPerMesh=a.skeleton.bones.length+1,b.BONETEXTURE=d?!1:void 0,(d=a.getScene().prePassRenderer)&&d.enabled&&(a=-1===d.excludedSkinnedMesh.indexOf(a),b.BONES_VELOCITY_ENABLED=a))}else b.NUM_BONE_INFLUENCERS=0,b.BonesPerMesh=0};d.PrepareDefinesForMorphTargets=function(a,b){(a=a.morphTargetManager)?(b.MORPHTARGETS_UV=a.supportsUVs&&
b.UV1,b.MORPHTARGETS_TANGENT=a.supportsTangents&&b.TANGENT,b.MORPHTARGETS_NORMAL=a.supportsNormals&&b.NORMAL,b.MORPHTARGETS=0<a.numInfluencers,b.NUM_MORPH_INFLUENCERS=a.numInfluencers):(b.MORPHTARGETS_UV=!1,b.MORPHTARGETS_TANGENT=!1,b.MORPHTARGETS_NORMAL=!1,b.MORPHTARGETS=!1,b.NUM_MORPH_INFLUENCERS=0)};d.PrepareDefinesForAttributes=function(a,b,d,c,f,q){void 0===f&&(f=!1);void 0===q&&(q=!0);if(!b._areAttributesDirty&&b._needNormals===b._normals&&b._needUVs===b._uvs)return!1;b._normals=b._needNormals;
b._uvs=b._needUVs;b.NORMAL=b._needNormals&&a.isVerticesDataPresent(e.b.NormalKind);b._needNormals&&a.isVerticesDataPresent(e.b.TangentKind)&&(b.TANGENT=!0);b._needUVs?(b.UV1=a.isVerticesDataPresent(e.b.UVKind),b.UV2=a.isVerticesDataPresent(e.b.UV2Kind)):(b.UV1=!1,b.UV2=!1);d&&(d=a.useVertexColors&&a.isVerticesDataPresent(e.b.ColorKind),b.VERTEXCOLOR=d,b.VERTEXALPHA=a.hasVertexAlpha&&d&&q);c&&this.PrepareDefinesForBones(a,b);f&&this.PrepareDefinesForMorphTargets(a,b);return!0};d.PrepareDefinesForMultiview=
function(a,b){if(a.activeCamera){var d=b.MULTIVIEW;b.MULTIVIEW=null!==a.activeCamera.outputRenderTarget&&1<a.activeCamera.outputRenderTarget.getViewCount();b.MULTIVIEW!=d&&b.markAsUnprocessed()}};d.PrepareDefinesForPrePass=function(a,b,d){var c=b.PREPASS;if(b._arePrePassDirty){var m=[{type:1,define:"PREPASS_POSITION",index:"PREPASS_POSITION_INDEX"},{type:2,define:"PREPASS_VELOCITY",index:"PREPASS_VELOCITY_INDEX"},{type:3,define:"PREPASS_REFLECTIVITY",index:"PREPASS_REFLECTIVITY_INDEX"},{type:0,define:"PREPASS_IRRADIANCE",
index:"PREPASS_IRRADIANCE_INDEX"},{type:6,define:"PREPASS_ALBEDO",index:"PREPASS_ALBEDO_INDEX"},{type:5,define:"PREPASS_DEPTHNORMAL",index:"PREPASS_DEPTHNORMAL_INDEX"}];if(a.prePassRenderer&&a.prePassRenderer.enabled&&d)for(b.PREPASS=!0,b.SCENE_MRT_COUNT=a.prePassRenderer.mrtCount,d=0;d<m.length;d++){var q=a.prePassRenderer.getIndex(m[d].type);-1!==q?(b[m[d].define]=!0,b[m[d].index]=q):b[m[d].define]=!1}else for(b.PREPASS=!1,d=0;d<m.length;d++)b[m[d].define]=!1;b.PREPASS!=c&&(b.markAsUnprocessed(),
b.markAsImageProcessingDirty())}};d.PrepareDefinesForLight=function(a,b,d,c,e,q,f){f.needNormals=!0;void 0===e["LIGHT"+c]&&(f.needRebuild=!0);e["LIGHT"+c]=!0;e["SPOTLIGHT"+c]=!1;e["HEMILIGHT"+c]=!1;e["POINTLIGHT"+c]=!1;e["DIRLIGHT"+c]=!1;d.prepareLightSpecificDefines(e,c);e["LIGHT_FALLOFF_PHYSICAL"+c]=!1;e["LIGHT_FALLOFF_GLTF"+c]=!1;e["LIGHT_FALLOFF_STANDARD"+c]=!1;switch(d.falloffType){case t.a.FALLOFF_GLTF:e["LIGHT_FALLOFF_GLTF"+c]=!0;break;case t.a.FALLOFF_PHYSICAL:e["LIGHT_FALLOFF_PHYSICAL"+c]=
!0;break;case t.a.FALLOFF_STANDARD:e["LIGHT_FALLOFF_STANDARD"+c]=!0}q&&!d.specular.equalsFloats(0,0,0)&&(f.specularEnabled=!0);e["SHADOW"+c]=!1;e["SHADOWCSM"+c]=!1;e["SHADOWCSMDEBUG"+c]=!1;e["SHADOWCSMNUM_CASCADES"+c]=!1;e["SHADOWCSMUSESHADOWMAXZ"+c]=!1;e["SHADOWCSMNOBLEND"+c]=!1;e["SHADOWCSM_RIGHTHANDED"+c]=!1;e["SHADOWPCF"+c]=!1;e["SHADOWPCSS"+c]=!1;e["SHADOWPOISSON"+c]=!1;e["SHADOWESM"+c]=!1;e["SHADOWCLOSEESM"+c]=!1;e["SHADOWCUBE"+c]=!1;e["SHADOWLOWQUALITY"+c]=!1;e["SHADOWMEDIUMQUALITY"+c]=!1;
b&&b.receiveShadows&&a.shadowsEnabled&&d.shadowEnabled&&(a=d.getShadowGenerator())&&(b=a.getShadowMap())&&b.renderList&&0<b.renderList.length&&(f.shadowEnabled=!0,a.prepareDefines(e,c));d.lightmapMode!=t.a.LIGHTMAP_DEFAULT?(f.lightmapMode=!0,e["LIGHTMAPEXCLUDED"+c]=!0,e["LIGHTMAPNOSPECULAR"+c]=d.lightmapMode==t.a.LIGHTMAP_SHADOWSONLY):(e["LIGHTMAPEXCLUDED"+c]=!1,e["LIGHTMAPNOSPECULAR"+c]=!1)};d.PrepareDefinesForLights=function(a,b,d,c,e,q){void 0===e&&(e=4);void 0===q&&(q=!1);if(!d._areLightsDirty)return d._needNormals;
var m=0,r={needNormals:!1,needRebuild:!1,lightmapMode:!1,shadowEnabled:!1,specularEnabled:!1};if(a.lightsEnabled&&!q){q=0;for(var f=b.lightSources;q<f.length&&(this.PrepareDefinesForLight(a,b,f[q],m,d,c,r),m++,m!==e);q++);}d.SPECULARTERM=r.specularEnabled;d.SHADOWS=r.shadowEnabled;for(b=m;b<e;b++)void 0!==d["LIGHT"+b]&&(d["LIGHT"+b]=!1,d["HEMILIGHT"+b]=!1,d["POINTLIGHT"+b]=!1,d["DIRLIGHT"+b]=!1,d["SPOTLIGHT"+b]=!1,d["SHADOW"+b]=!1,d["SHADOWCSM"+b]=!1,d["SHADOWCSMDEBUG"+b]=!1,d["SHADOWCSMNUM_CASCADES"+
b]=!1,d["SHADOWCSMUSESHADOWMAXZ"+b]=!1,d["SHADOWCSMNOBLEND"+b]=!1,d["SHADOWCSM_RIGHTHANDED"+b]=!1,d["SHADOWPCF"+b]=!1,d["SHADOWPCSS"+b]=!1,d["SHADOWPOISSON"+b]=!1,d["SHADOWESM"+b]=!1,d["SHADOWCLOSEESM"+b]=!1,d["SHADOWCUBE"+b]=!1,d["SHADOWLOWQUALITY"+b]=!1,d["SHADOWMEDIUMQUALITY"+b]=!1);a=a.getEngine().getCaps();void 0===d.SHADOWFLOAT&&(r.needRebuild=!0);d.SHADOWFLOAT=r.shadowEnabled&&(a.textureFloatRender&&a.textureFloatLinearFiltering||a.textureHalfFloatRender&&a.textureHalfFloatLinearFiltering);
d.LIGHTMAPEXCLUDED=r.lightmapMode;r.needRebuild&&d.rebuild();return r.needNormals};d.PrepareUniformsAndSamplersForLight=function(a,b,d,c,e,q){void 0===e&&(e=null);void 0===q&&(q=!1);e&&e.push("Light"+a);q||(b.push("vLightData"+a,"vLightDiffuse"+a,"vLightSpecular"+a,"vLightDirection"+a,"vLightFalloff"+a,"vLightGround"+a,"lightMatrix"+a,"shadowsInfo"+a,"depthValues"+a),d.push("shadowSampler"+a),d.push("depthSampler"+a),b.push("viewFrustumZ"+a,"cascadeBlendFactor"+a,"lightSizeUVCorrection"+a,"depthCorrection"+
a,"penumbraDarkness"+a,"frustumLengths"+a),c&&(d.push("projectionLightSampler"+a),b.push("textureProjectionMatrix"+a)))};d.PrepareUniformsAndSamplersList=function(a,b,d,c){void 0===c&&(c=4);var e=null;if(a.uniformsNames){var q=a.uniformsNames;e=a.uniformBuffersNames;b=a.samplers;d=a.defines;c=a.maxSimultaneousLights||0}else q=a,b||(b=[]);for(a=0;a<c&&d["LIGHT"+a];a++)this.PrepareUniformsAndSamplersForLight(a,q,b,d["PROJECTEDLIGHTTEXTURE"+a],e);d.NUM_MORPH_INFLUENCERS&&q.push("morphTargetInfluences")};
d.HandleFallbacksForShadows=function(a,b,d,c){void 0===d&&(d=4);void 0===c&&(c=0);for(var e=0,q=0;q<d&&a["LIGHT"+q];q++)0<q&&(e=c+q,b.addFallback(e,"LIGHT"+q)),a.SHADOWS||(a["SHADOW"+q]&&b.addFallback(c,"SHADOW"+q),a["SHADOWPCF"+q]&&b.addFallback(c,"SHADOWPCF"+q),a["SHADOWPCSS"+q]&&b.addFallback(c,"SHADOWPCSS"+q),a["SHADOWPOISSON"+q]&&b.addFallback(c,"SHADOWPOISSON"+q),a["SHADOWESM"+q]&&b.addFallback(c,"SHADOWESM"+q),a["SHADOWCLOSEESM"+q]&&b.addFallback(c,"SHADOWCLOSEESM"+q));return e++};d.PrepareAttributesForMorphTargetsInfluencers=
function(a,b,d){this._TmpMorphInfluencers.NUM_MORPH_INFLUENCERS=d;this.PrepareAttributesForMorphTargets(a,b,this._TmpMorphInfluencers)};d.PrepareAttributesForMorphTargets=function(a,b,d){var c=d.NUM_MORPH_INFLUENCERS;if(0<c&&f.a.LastCreatedEngine){var m=f.a.LastCreatedEngine.getCaps().maxVertexAttribs,q=b.morphTargetManager,r=q&&q.supportsNormals&&d.NORMAL,u=q&&q.supportsTangents&&d.TANGENT;d=q&&q.supportsUVs&&d.UV1;for(q=0;q<c;q++)a.push(e.b.PositionKind+q),r&&a.push(e.b.NormalKind+q),u&&a.push(e.b.TangentKind+
q),d&&a.push(e.b.UVKind+"_"+q),a.length>m&&k.a.Error("Cannot add more vertex attributes for mesh "+b.name)}};d.PrepareAttributesForBones=function(a,b,d,c){0<d.NUM_BONE_INFLUENCERS&&(c.addCPUSkinningFallback(0,b),a.push(e.b.MatricesIndicesKind),a.push(e.b.MatricesWeightsKind),4<d.NUM_BONE_INFLUENCERS&&(a.push(e.b.MatricesIndicesExtraKind),a.push(e.b.MatricesWeightsExtraKind)))};d.PrepareAttributesForInstances=function(a,b){(b.INSTANCES||b.THIN_INSTANCES)&&this.PushAttributesForInstances(a)};d.PushAttributesForInstances=
function(a){a.push("world0");a.push("world1");a.push("world2");a.push("world3")};d.BindLightProperties=function(a,b,d){a.transferToEffect(b,d+"")};d.BindLight=function(a,b,d,c,e,q){void 0===q&&(q=!1);a._bindLight(b,d,c,e,q)};d.BindLights=function(a,b,d,c,e,q){void 0===e&&(e=4);void 0===q&&(q=!1);e=Math.min(b.lightSources.length,e);for(var m=0;m<e;m++)this.BindLight(b.lightSources[m],m,a,d,"boolean"===typeof c?c:c.SPECULARTERM,q)};d.BindFogParameters=function(a,b,d,c){void 0===c&&(c=!1);a.fogEnabled&&
b.applyFog&&a.fogMode!==h.a.FOGMODE_NONE&&(d.setFloat4("vFogInfos",a.fogMode,a.fogStart,a.fogEnd,a.fogDensity),c?(a.fogColor.toLinearSpaceToRef(this._tempFogColor),d.setColor3("vFogColor",this._tempFogColor)):d.setColor3("vFogColor",a.fogColor))};d.BindBonesParameters=function(a,b,c){if(b&&a&&(a.computeBonesUsingShaders&&b._bonesComputationForcedToCPU&&(a.computeBonesUsingShaders=!1),a.useBones&&a.computeBonesUsingShaders&&a.skeleton)){var e=a.skeleton;if(e.isUsingTextureForMatrices&&-1<b.getUniformIndex("boneTextureWidth"))a=
e.getTransformMatrixTexture(a),b.setTexture("boneSampler",a),b.setFloat("boneTextureWidth",4*(e.bones.length+1));else if(e=e.getTransformMatrices(a))b.setMatrices("mBones",e),c&&a.getScene().prePassRenderer&&a.getScene().prePassRenderer.getIndex(2)&&(c.previousBones[a.uniqueId]&&b.setMatrices("mPreviousBones",c.previousBones[a.uniqueId]),d._CopyBonesTransformationMatrices(e,c.previousBones[a.uniqueId]))}};d._CopyBonesTransformationMatrices=function(a,b){b.set(a);return b};d.BindMorphTargetParameters=
function(a,b){var d=a.morphTargetManager;a&&d&&b.setFloatArray("morphTargetInfluences",d.influences)};d.BindLogDepth=function(a,b,d){a.LOGARITHMICDEPTH&&b.setFloat("logarithmicDepthConstant",2/(Math.log(d.activeCamera.maxZ+1)/Math.LN2))};d.BindClipPlane=function(d,b){a.a.BindClipPlane(d,b)};d._TmpMorphInfluencers={NUM_MORPH_INFLUENCERS:0};d._tempFogColor=c.a.Black();return d}()},"1Xrb":function(n,p,g){g.d(p,"a",function(){return h});var k=g("/SR9"),h=function(){function f(){this.previousWorldMatrices=
{};this.previousBones={}}f.AddUniforms=function(e){e.push("previousWorld","previousViewProjection")};f.AddSamplers=function(e){};f.prototype.bindForSubMesh=function(e,f,c,a,d){f.prePassRenderer&&f.prePassRenderer.enabled&&-1!==f.prePassRenderer.getIndex(2)&&(this.previousWorldMatrices[c.uniqueId]||(this.previousWorldMatrices[c.uniqueId]=k.a.Identity()),this.previousViewProjection||(this.previousViewProjection=f.getTransformMatrix()),e.setMatrix("previousWorld",this.previousWorldMatrices[c.uniqueId]),
e.setMatrix("previousViewProjection",this.previousViewProjection),this.previousWorldMatrices[c.uniqueId]=a.clone(),this.previousViewProjection=f.getTransformMatrix().clone())};return f}()},Kbf9:function(n,p,g){g("sH6m");g("lJNW");var k=g("GR64");g.d(p,"a",function(){return k.b});g.d(p,"b",function(){return k.f});g.d(p,"c",function(){return k.j});g("TUvE")},NDL1:function(n,p,g){g.d(p,"a",function(){return r});var k=g("oYeq"),h=g("ADVu"),f=g("/SR9"),e=g("y4Ty"),t=g("aCSs"),c=g("/eyM");n=g("cdI9");p=
g("WHS4");var a=g("Xeau"),d=g("UpSL"),u=g("Ksm9"),m=g("qUIE"),b={effect:null,subMesh:null},r=function(r){function g(a,b,d,c){void 0===c&&(c={});a=r.call(this,a,b)||this;a._textures={};a._textureArrays={};a._floats={};a._ints={};a._floatsArrays={};a._colors3={};a._colors3Arrays={};a._colors4={};a._colors4Arrays={};a._vectors2={};a._vectors3={};a._vectors4={};a._matrices={};a._matrixArrays={};a._matrices3x3={};a._matrices2x2={};a._vectors2Arrays={};a._vectors3Arrays={};a._vectors4Arrays={};a._cachedWorldViewMatrix=
new f.a;a._cachedWorldViewProjectionMatrix=new f.a;a._multiview=!1;a._shaderPath=d;a._options=Object(k.a)({needAlphaBlending:!1,needAlphaTesting:!1,attributes:["position","normal","uv"],uniforms:["worldViewProjection"],uniformBuffers:[],samplers:[],defines:[]},c);return a}Object(k.d)(g,r);Object.defineProperty(g.prototype,"shaderPath",{get:function(){return this._shaderPath},set:function(a){this._shaderPath=a},enumerable:!1,configurable:!0});Object.defineProperty(g.prototype,"options",{get:function(){return this._options},
enumerable:!1,configurable:!0});g.prototype.getClassName=function(){return"ShaderMaterial"};g.prototype.needAlphaBlending=function(){return 1>this.alpha||this._options.needAlphaBlending};g.prototype.needAlphaTesting=function(){return this._options.needAlphaTesting};g.prototype._checkUniform=function(a){-1===this._options.uniforms.indexOf(a)&&this._options.uniforms.push(a)};g.prototype.setTexture=function(a,b){-1===this._options.samplers.indexOf(a)&&this._options.samplers.push(a);this._textures[a]=
b;return this};g.prototype.setTextureArray=function(a,b){-1===this._options.samplers.indexOf(a)&&this._options.samplers.push(a);this._checkUniform(a);this._textureArrays[a]=b;return this};g.prototype.setFloat=function(a,b){this._checkUniform(a);this._floats[a]=b;return this};g.prototype.setInt=function(a,b){this._checkUniform(a);this._ints[a]=b;return this};g.prototype.setFloats=function(a,b){this._checkUniform(a);this._floatsArrays[a]=b;return this};g.prototype.setColor3=function(a,b){this._checkUniform(a);
this._colors3[a]=b;return this};g.prototype.setColor3Array=function(a,b){this._checkUniform(a);this._colors3Arrays[a]=b.reduce(function(a,b){b.toArray(a,a.length);return a},[]);return this};g.prototype.setColor4=function(a,b){this._checkUniform(a);this._colors4[a]=b;return this};g.prototype.setColor4Array=function(a,b){this._checkUniform(a);this._colors4Arrays[a]=b.reduce(function(a,b){b.toArray(a,a.length);return a},[]);return this};g.prototype.setVector2=function(a,b){this._checkUniform(a);this._vectors2[a]=
b;return this};g.prototype.setVector3=function(a,b){this._checkUniform(a);this._vectors3[a]=b;return this};g.prototype.setVector4=function(a,b){this._checkUniform(a);this._vectors4[a]=b;return this};g.prototype.setMatrix=function(a,b){this._checkUniform(a);this._matrices[a]=b;return this};g.prototype.setMatrices=function(a,b){this._checkUniform(a);for(var d=new Float32Array(16*b.length),c=0;c<b.length;c++)b[c].copyToArray(d,16*c);this._matrixArrays[a]=d;return this};g.prototype.setMatrix3x3=function(a,
b){this._checkUniform(a);this._matrices3x3[a]=b;return this};g.prototype.setMatrix2x2=function(a,b){this._checkUniform(a);this._matrices2x2[a]=b;return this};g.prototype.setArray2=function(a,b){this._checkUniform(a);this._vectors2Arrays[a]=b;return this};g.prototype.setArray3=function(a,b){this._checkUniform(a);this._vectors3Arrays[a]=b;return this};g.prototype.setArray4=function(a,b){this._checkUniform(a);this._vectors4Arrays[a]=b;return this};g.prototype._checkCache=function(a,b){return a?this._effect&&
-1!==this._effect.defines.indexOf("#define INSTANCES")!==b?!1:!0:!0};g.prototype.isReadyForSubMesh=function(a,b,d){return this.isReady(a,d)};g.prototype.isReady=function(a,f){var m,r;if(this._effect&&this.isFrozen&&this._effect._wasPreviouslyReady)return!0;var q=this.getScene(),u=q.getEngine();if(!this.checkReadyOnEveryCall&&this._renderId===q.getRenderId()&&this._checkCache(a,f))return!0;var h=[],v=[],g=new d.a;u.getCaps().multiview&&q.activeCamera&&q.activeCamera.outputRenderTarget&&1<q.activeCamera.outputRenderTarget.getViewCount()&&
(this._multiview=!0,h.push("#define MULTIVIEW"),-1!==this._options.uniforms.indexOf("viewProjection")&&-1===this._options.uniforms.push("viewProjectionR")&&this._options.uniforms.push("viewProjectionR"));for(var k=0;k<this._options.defines.length;k++)h.push(this._options.defines[k]);for(k=0;k<this._options.attributes.length;k++)v.push(this._options.attributes[k]);a&&a.isVerticesDataPresent(e.b.ColorKind)&&(v.push(e.b.ColorKind),h.push("#define VERTEXCOLOR"));f&&(h.push("#define INSTANCES"),c.a.PushAttributesForInstances(v),
(null===a||void 0===a?0:a.hasThinInstances)&&h.push("#define THIN_INSTANCES"));f=0;a&&a.useBones&&a.computeBonesUsingShaders&&a.skeleton?(v.push(e.b.MatricesIndicesKind),v.push(e.b.MatricesWeightsKind),4<a.numBoneInfluencers&&(v.push(e.b.MatricesIndicesExtraKind),v.push(e.b.MatricesWeightsExtraKind)),k=a.skeleton,f=a.numBoneInfluencers,h.push("#define NUM_BONE_INFLUENCERS "+f),g.addCPUSkinningFallback(0,a),k.isUsingTextureForMatrices?(h.push("#define BONETEXTURE"),-1===this._options.uniforms.indexOf("boneTextureWidth")&&
this._options.uniforms.push("boneTextureWidth"),-1===this._options.samplers.indexOf("boneSampler")&&this._options.samplers.push("boneSampler")):(h.push("#define BonesPerMesh "+(k.bones.length+1)),-1===this._options.uniforms.indexOf("mBones")&&this._options.uniforms.push("mBones"))):h.push("#define NUM_BONE_INFLUENCERS 0");for(var t in this._textures)if(!this._textures[t].isReady())return!1;a&&this._shouldTurnAlphaTestOn(a)&&h.push("#define ALPHATEST");a=this._shaderPath;t=this._options.uniforms;k=
this._options.uniformBuffers;var y=this._options.samplers;this.customShaderNameResolve&&(t=t.slice(),k=k.slice(),y=y.slice(),a=this.customShaderNameResolve(a,t,k,y,h,v));var w=this._effect;h=h.join("\n");this._cachedDefines!==h&&(this._cachedDefines=h,this._effect=u.createEffect(a,{attributes:v,uniformsNames:t,uniformBuffersNames:k,samplers:y,defines:h,fallbacks:g,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousMorphTargets:f}},u),this._onEffectCreatedObservable&&(b.effect=
this._effect,this._onEffectCreatedObservable.notifyObservers(b)));if(null!==(r=!(null===(m=this._effect)||void 0===m?0:m.isReady()))&&void 0!==r?r:1)return!1;w!==this._effect&&q.resetCachedMaterial();this._renderId=q.getRenderId();return this._effect._wasPreviouslyReady=!0};g.prototype.bindOnlyWorldMatrix=function(a,b){var d=this.getScene();if(b=null!==b&&void 0!==b?b:this._effect)-1!==this._options.uniforms.indexOf("world")&&b.setMatrix("world",a),-1!==this._options.uniforms.indexOf("worldView")&&
(a.multiplyToRef(d.getViewMatrix(),this._cachedWorldViewMatrix),b.setMatrix("worldView",this._cachedWorldViewMatrix)),-1!==this._options.uniforms.indexOf("worldViewProjection")&&(a.multiplyToRef(d.getTransformMatrix(),this._cachedWorldViewProjectionMatrix),b.setMatrix("worldViewProjection",this._cachedWorldViewProjectionMatrix))};g.prototype.bindForSubMesh=function(a,b,d){this.bind(a,b,d._effectOverride)};g.prototype.bind=function(a,b,d){this.bindOnlyWorldMatrix(a,d);if((a=null!==d&&void 0!==d?d:
this._effect)&&this.getScene().getCachedMaterial()!==this){-1!==this._options.uniforms.indexOf("view")&&a.setMatrix("view",this.getScene().getViewMatrix());-1!==this._options.uniforms.indexOf("projection")&&a.setMatrix("projection",this.getScene().getProjectionMatrix());-1!==this._options.uniforms.indexOf("viewProjection")&&(a.setMatrix("viewProjection",this.getScene().getTransformMatrix()),this._multiview&&a.setMatrix("viewProjectionR",this.getScene()._transformMatrixR));this.getScene().activeCamera&&
-1!==this._options.uniforms.indexOf("cameraPosition")&&a.setVector3("cameraPosition",this.getScene().activeCamera.globalPosition);c.a.BindBonesParameters(b,a);for(var e in this._textures)a.setTexture(e,this._textures[e]);for(e in this._textureArrays)a.setTextureArray(e,this._textureArrays[e]);for(e in this._ints)a.setInt(e,this._ints[e]);for(e in this._floats)a.setFloat(e,this._floats[e]);for(e in this._floatsArrays)a.setArray(e,this._floatsArrays[e]);for(e in this._colors3)a.setColor3(e,this._colors3[e]);
for(e in this._colors3Arrays)a.setArray3(e,this._colors3Arrays[e]);for(e in this._colors4)d=this._colors4[e],a.setFloat4(e,d.r,d.g,d.b,d.a);for(e in this._colors4Arrays)a.setArray4(e,this._colors4Arrays[e]);for(e in this._vectors2)a.setVector2(e,this._vectors2[e]);for(e in this._vectors3)a.setVector3(e,this._vectors3[e]);for(e in this._vectors4)a.setVector4(e,this._vectors4[e]);for(e in this._matrices)a.setMatrix(e,this._matrices[e]);for(e in this._matrixArrays)a.setMatrices(e,this._matrixArrays[e]);
for(e in this._matrices3x3)a.setMatrix3x3(e,this._matrices3x3[e]);for(e in this._matrices2x2)a.setMatrix2x2(e,this._matrices2x2[e]);for(e in this._vectors2Arrays)a.setArray2(e,this._vectors2Arrays[e]);for(e in this._vectors3Arrays)a.setArray3(e,this._vectors3Arrays[e]);for(e in this._vectors4Arrays)a.setArray4(e,this._vectors4Arrays[e])}e=this._effect;this._effect=a;this._afterBind(b);this._effect=e};g.prototype._afterBind=function(a){r.prototype._afterBind.call(this,a);this.getScene()._cachedEffect=
this._effect};g.prototype.getActiveTextures=function(){var a=r.prototype.getActiveTextures.call(this),b;for(b in this._textures)a.push(this._textures[b]);for(b in this._textureArrays)for(var d=this._textureArrays[b],c=0;c<d.length;c++)a.push(d[c]);return a};g.prototype.hasTexture=function(a){if(r.prototype.hasTexture.call(this,a))return!0;for(var b in this._textures)if(this._textures[b]===a)return!0;for(b in this._textureArrays)for(var d=this._textureArrays[b],c=0;c<d.length;c++)if(d[c]===a)return!0;
return!1};g.prototype.clone=function(a){var b=this,d=h.a.Clone(function(){return new g(a,b.getScene(),b._shaderPath,b._options)},this);d.name=a;d.id=a;"object"===typeof d._shaderPath&&(d._shaderPath=Object(k.a)({},d._shaderPath));this._options=Object(k.a)({},this._options);Object.keys(this._options).forEach(function(a){var d=b._options[a];Array.isArray(d)&&(b._options[a]=d.slice(0))});for(var c in this._textures)d.setTexture(c,this._textures[c]);for(c in this._floats)d.setFloat(c,this._floats[c]);
for(c in this._floatsArrays)d.setFloats(c,this._floatsArrays[c]);for(c in this._colors3)d.setColor3(c,this._colors3[c]);for(c in this._colors4)d.setColor4(c,this._colors4[c]);for(c in this._vectors2)d.setVector2(c,this._vectors2[c]);for(c in this._vectors3)d.setVector3(c,this._vectors3[c]);for(c in this._vectors4)d.setVector4(c,this._vectors4[c]);for(c in this._matrices)d.setMatrix(c,this._matrices[c]);for(c in this._matrices3x3)d.setMatrix3x3(c,this._matrices3x3[c]);for(c in this._matrices2x2)d.setMatrix2x2(c,
this._matrices2x2[c]);return d};g.prototype.dispose=function(a,b,d){if(b){for(var c in this._textures)this._textures[c].dispose();for(c in this._textureArrays)for(var e=this._textureArrays[c],f=0;f<e.length;f++)e[f].dispose()}this._textures={};r.prototype.dispose.call(this,a,b,d)};g.prototype.serialize=function(){var a=h.a.Serialize(this);a.customType="BABYLON.ShaderMaterial";a.options=this._options;a.shaderPath=this._shaderPath;var b;a.textures={};for(b in this._textures)a.textures[b]=this._textures[b].serialize();
a.textureArrays={};for(b in this._textureArrays){a.textureArrays[b]=[];for(var d=this._textureArrays[b],c=0;c<d.length;c++)a.textureArrays[b].push(d[c].serialize())}a.floats={};for(b in this._floats)a.floats[b]=this._floats[b];a.FloatArrays={};for(b in this._floatsArrays)a.FloatArrays[b]=this._floatsArrays[b];a.colors3={};for(b in this._colors3)a.colors3[b]=this._colors3[b].asArray();a.colors3Arrays={};for(b in this._colors3Arrays)a.colors3Arrays[b]=this._colors3Arrays[b];a.colors4={};for(b in this._colors4)a.colors4[b]=
this._colors4[b].asArray();a.colors4Arrays={};for(b in this._colors4Arrays)a.colors4Arrays[b]=this._colors4Arrays[b];a.vectors2={};for(b in this._vectors2)a.vectors2[b]=this._vectors2[b].asArray();a.vectors3={};for(b in this._vectors3)a.vectors3[b]=this._vectors3[b].asArray();a.vectors4={};for(b in this._vectors4)a.vectors4[b]=this._vectors4[b].asArray();a.matrices={};for(b in this._matrices)a.matrices[b]=this._matrices[b].asArray();a.matrixArray={};for(b in this._matrixArrays)a.matrixArray[b]=this._matrixArrays[b];
a.matrices3x3={};for(b in this._matrices3x3)a.matrices3x3[b]=this._matrices3x3[b];a.matrices2x2={};for(b in this._matrices2x2)a.matrices2x2[b]=this._matrices2x2[b];a.vectors2Arrays={};for(b in this._vectors2Arrays)a.vectors2Arrays[b]=this._vectors2Arrays[b];a.vectors3Arrays={};for(b in this._vectors3Arrays)a.vectors3Arrays[b]=this._vectors3Arrays[b];a.vectors4Arrays={};for(b in this._vectors4Arrays)a.vectors4Arrays[b]=this._vectors4Arrays[b];return a};g.Parse=function(b,d,c){var e=h.a.Parse(function(){return new g(b.name,
d,b.shaderPath,b.options)},b,d,c),m;for(m in b.textures)e.setTexture(m,t.a.Parse(b.textures[m],d,c));for(m in b.textureArrays){for(var r=b.textureArrays[m],u=[],v=0;v<r.length;v++)u.push(t.a.Parse(r[v],d,c));e.setTextureArray(m,u)}for(m in b.floats)e.setFloat(m,b.floats[m]);for(m in b.floatsArrays)e.setFloats(m,b.floatsArrays[m]);for(m in b.colors3)e.setColor3(m,a.a.FromArray(b.colors3[m]));for(m in b.colors3Arrays)c=b.colors3Arrays[m].reduce(function(a,b,d){0===d%3?a.push([b]):a[a.length-1].push(b);
return a},[]).map(function(b){return a.a.FromArray(b)}),e.setColor3Array(m,c);for(m in b.colors4)e.setColor4(m,a.b.FromArray(b.colors4[m]));for(m in b.colors4Arrays)c=b.colors4Arrays[m].reduce(function(a,b,d){0===d%4?a.push([b]):a[a.length-1].push(b);return a},[]).map(function(b){return a.b.FromArray(b)}),e.setColor4Array(m,c);for(m in b.vectors2)e.setVector2(m,f.d.FromArray(b.vectors2[m]));for(m in b.vectors3)e.setVector3(m,f.e.FromArray(b.vectors3[m]));for(m in b.vectors4)e.setVector4(m,f.f.FromArray(b.vectors4[m]));
for(m in b.matrices)e.setMatrix(m,f.a.FromArray(b.matrices[m]));for(m in b.matrixArray)e._matrixArrays[m]=new Float32Array(b.matrixArray[m]);for(m in b.matrices3x3)e.setMatrix3x3(m,b.matrices3x3[m]);for(m in b.matrices2x2)e.setMatrix2x2(m,b.matrices2x2[m]);for(m in b.vectors2Arrays)e.setArray2(m,b.vectors2Arrays[m]);for(m in b.vectors3Arrays)e.setArray3(m,b.vectors3Arrays[m]);for(m in b.vectors4Arrays)e.setArray4(m,b.vectors4Arrays[m]);return e};g.ParseFromFileAsync=function(a,b,d,c){var e=this;void 0===
c&&(c="");return new Promise(function(f,r){var v=new u.a;v.addEventListener("readystatechange",function(){if(4==v.readyState)if(200==v.status){var b=JSON.parse(v.responseText);b=e.Parse(b,d||m.a.LastCreatedScene,c);a&&(b.name=a);f(b)}else r("Unable to load the ShaderMaterial")});v.open("GET",b);v.send()})};g.CreateFromSnippetAsync=function(a,b,d){var c=this;void 0===d&&(d="");return new Promise(function(e,f){var r=new u.a;r.addEventListener("readystatechange",function(){if(4==r.readyState)if(200==
r.status){var v=JSON.parse(JSON.parse(r.responseText).jsonPayload);v=JSON.parse(v.shaderMaterial);v=c.Parse(v,b||m.a.LastCreatedScene,d);v.snippetId=a;e(v)}else f("Unable to load the snippet "+a)});r.open("GET",c.SnippetUrl+"/"+a.replace(/#/g,"/"));r.send()})};g.SnippetUrl="https://snippet.babylonjs.com";return g}(n.a);p.a.RegisteredTypes["BABYLON.ShaderMaterial"]=r},"O+1A":function(n,p,g){g.d(p,"a",function(){return h});var k=g("qUIE"),h=function(){function f(){}Object.defineProperty(f,"DiffuseTextureEnabled",
{get:function(){return this._DiffuseTextureEnabled},set:function(e){this._DiffuseTextureEnabled!==e&&(this._DiffuseTextureEnabled=e,k.a.MarkAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0});Object.defineProperty(f,"DetailTextureEnabled",{get:function(){return this._DetailTextureEnabled},set:function(e){this._DetailTextureEnabled!==e&&(this._DetailTextureEnabled=e,k.a.MarkAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0});Object.defineProperty(f,"AmbientTextureEnabled",{get:function(){return this._AmbientTextureEnabled},
set:function(e){this._AmbientTextureEnabled!==e&&(this._AmbientTextureEnabled=e,k.a.MarkAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0});Object.defineProperty(f,"OpacityTextureEnabled",{get:function(){return this._OpacityTextureEnabled},set:function(e){this._OpacityTextureEnabled!==e&&(this._OpacityTextureEnabled=e,k.a.MarkAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0});Object.defineProperty(f,"ReflectionTextureEnabled",{get:function(){return this._ReflectionTextureEnabled},set:function(e){this._ReflectionTextureEnabled!==
e&&(this._ReflectionTextureEnabled=e,k.a.MarkAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0});Object.defineProperty(f,"EmissiveTextureEnabled",{get:function(){return this._EmissiveTextureEnabled},set:function(e){this._EmissiveTextureEnabled!==e&&(this._EmissiveTextureEnabled=e,k.a.MarkAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0});Object.defineProperty(f,"SpecularTextureEnabled",{get:function(){return this._SpecularTextureEnabled},set:function(e){this._SpecularTextureEnabled!==e&&
(this._SpecularTextureEnabled=e,k.a.MarkAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0});Object.defineProperty(f,"BumpTextureEnabled",{get:function(){return this._BumpTextureEnabled},set:function(e){this._BumpTextureEnabled!==e&&(this._BumpTextureEnabled=e,k.a.MarkAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0});Object.defineProperty(f,"LightmapTextureEnabled",{get:function(){return this._LightmapTextureEnabled},set:function(e){this._LightmapTextureEnabled!==e&&(this._LightmapTextureEnabled=
e,k.a.MarkAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0});Object.defineProperty(f,"RefractionTextureEnabled",{get:function(){return this._RefractionTextureEnabled},set:function(e){this._RefractionTextureEnabled!==e&&(this._RefractionTextureEnabled=e,k.a.MarkAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0});Object.defineProperty(f,"ColorGradingTextureEnabled",{get:function(){return this._ColorGradingTextureEnabled},set:function(e){this._ColorGradingTextureEnabled!==e&&(this._ColorGradingTextureEnabled=
e,k.a.MarkAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0});Object.defineProperty(f,"FresnelEnabled",{get:function(){return this._FresnelEnabled},set:function(e){this._FresnelEnabled!==e&&(this._FresnelEnabled=e,k.a.MarkAllMaterialsAsDirty(4))},enumerable:!1,configurable:!0});Object.defineProperty(f,"ClearCoatTextureEnabled",{get:function(){return this._ClearCoatTextureEnabled},set:function(e){this._ClearCoatTextureEnabled!==e&&(this._ClearCoatTextureEnabled=e,k.a.MarkAllMaterialsAsDirty(1))},
enumerable:!1,configurable:!0});Object.defineProperty(f,"ClearCoatBumpTextureEnabled",{get:function(){return this._ClearCoatBumpTextureEnabled},set:function(e){this._ClearCoatBumpTextureEnabled!==e&&(this._ClearCoatBumpTextureEnabled=e,k.a.MarkAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0});Object.defineProperty(f,"ClearCoatTintTextureEnabled",{get:function(){return this._ClearCoatTintTextureEnabled},set:function(e){this._ClearCoatTintTextureEnabled!==e&&(this._ClearCoatTintTextureEnabled=
e,k.a.MarkAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0});Object.defineProperty(f,"SheenTextureEnabled",{get:function(){return this._SheenTextureEnabled},set:function(e){this._SheenTextureEnabled!==e&&(this._SheenTextureEnabled=e,k.a.MarkAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0});Object.defineProperty(f,"AnisotropicTextureEnabled",{get:function(){return this._AnisotropicTextureEnabled},set:function(e){this._AnisotropicTextureEnabled!==e&&(this._AnisotropicTextureEnabled=e,k.a.MarkAllMaterialsAsDirty(1))},
enumerable:!1,configurable:!0});Object.defineProperty(f,"ThicknessTextureEnabled",{get:function(){return this._ThicknessTextureEnabled},set:function(e){this._ThicknessTextureEnabled!==e&&(this._ThicknessTextureEnabled=e,k.a.MarkAllMaterialsAsDirty(1))},enumerable:!1,configurable:!0});f._DiffuseTextureEnabled=!0;f._DetailTextureEnabled=!0;f._AmbientTextureEnabled=!0;f._OpacityTextureEnabled=!0;f._ReflectionTextureEnabled=!0;f._EmissiveTextureEnabled=!0;f._SpecularTextureEnabled=!0;f._BumpTextureEnabled=
!0;f._LightmapTextureEnabled=!0;f._RefractionTextureEnabled=!0;f._ColorGradingTextureEnabled=!0;f._FresnelEnabled=!0;f._ClearCoatTextureEnabled=!0;f._ClearCoatBumpTextureEnabled=!0;f._ClearCoatTintTextureEnabled=!0;f._SheenTextureEnabled=!0;f._AnisotropicTextureEnabled=!0;f._ThicknessTextureEnabled=!0;return f}()},"QCD/":function(n,p,g){g.d(p,"a",function(){return k});var k=function(){function h(){}h.BindClipPlane=function(f,e){if(e.clipPlane){var h=e.clipPlane;f.setFloat4("vClipPlane",h.normal.x,
h.normal.y,h.normal.z,h.d)}e.clipPlane2&&(h=e.clipPlane2,f.setFloat4("vClipPlane2",h.normal.x,h.normal.y,h.normal.z,h.d));e.clipPlane3&&(h=e.clipPlane3,f.setFloat4("vClipPlane3",h.normal.x,h.normal.y,h.normal.z,h.d));e.clipPlane4&&(h=e.clipPlane4,f.setFloat4("vClipPlane4",h.normal.x,h.normal.y,h.normal.z,h.d));e.clipPlane5&&(h=e.clipPlane5,f.setFloat4("vClipPlane5",h.normal.x,h.normal.y,h.normal.z,h.d));e.clipPlane6&&(h=e.clipPlane6,f.setFloat4("vClipPlane6",h.normal.x,h.normal.y,h.normal.z,h.d))};
return h}()},Qdxt:function(n,p,g){g.d(p,"a",function(){return k});var k=function(){function h(){this._areLightsDirty=this._isDirty=!0;this._areLightsDisposed=!1;this._areImageProcessingDirty=this._arePrePassDirty=this._areMiscDirty=this._areFresnelDirty=this._areTexturesDirty=this._areAttributesDirty=!0;this._needUVs=this._needNormals=this._uvs=this._normals=!1}Object.defineProperty(h.prototype,"isDirty",{get:function(){return this._isDirty},enumerable:!1,configurable:!0});h.prototype.markAsProcessed=
function(){this._areImageProcessingDirty=this._arePrePassDirty=this._areMiscDirty=this._areLightsDisposed=this._areLightsDirty=this._areFresnelDirty=this._areTexturesDirty=this._areAttributesDirty=this._isDirty=!1};h.prototype.markAsUnprocessed=function(){this._isDirty=!0};h.prototype.markAllAsDirty=function(){this._isDirty=this._areImageProcessingDirty=this._areMiscDirty=this._areFresnelDirty=this._areLightsDirty=this._areAttributesDirty=this._areTexturesDirty=!0};h.prototype.markAsImageProcessingDirty=
function(){this._isDirty=this._areImageProcessingDirty=!0};h.prototype.markAsLightDirty=function(f){void 0===f&&(f=!1);this._areLightsDirty=!0;this._areLightsDisposed=this._areLightsDisposed||f;this._isDirty=!0};h.prototype.markAsAttributesDirty=function(){this._isDirty=this._areAttributesDirty=!0};h.prototype.markAsTexturesDirty=function(){this._isDirty=this._areTexturesDirty=!0};h.prototype.markAsFresnelDirty=function(){this._isDirty=this._areFresnelDirty=!0};h.prototype.markAsMiscDirty=function(){this._isDirty=
this._areMiscDirty=!0};h.prototype.markAsPrePassDirty=function(){this._isDirty=this._arePrePassDirty=!0};h.prototype.rebuild=function(){this._keys=[];for(var f=0,e=Object.keys(this);f<e.length;f++){var h=e[f];"_"!==h[0]&&this._keys.push(h)}};h.prototype.isEqual=function(f){if(this._keys.length!==f._keys.length)return!1;for(var e=0;e<this._keys.length;e++){var h=this._keys[e];if(this[h]!==f[h])return!1}return!0};h.prototype.cloneTo=function(f){this._keys.length!==f._keys.length&&(f._keys=this._keys.slice(0));
for(var e=0;e<this._keys.length;e++){var h=this._keys[e];f[h]=this[h]}};h.prototype.reset=function(){for(var f=0;f<this._keys.length;f++){var e=this._keys[f];switch(typeof this[e]){case "number":this[e]=0;break;case "string":this[e]="";break;default:this[e]=!1}}};h.prototype.toString=function(){for(var f="",e=0;e<this._keys.length;e++){var h=this._keys[e],c=this[h];switch(typeof c){case "number":case "string":f+="#define "+h+" "+c+"\n";break;default:c&&(f+="#define "+h+"\n")}}return f};return h}()},
Qmvu:function(n,p,g){g.d(p,"a",function(){return h});var k=g("uyO6");g("3NAF");var h=function(){function f(e,f,c){this._alreadyBound=!1;this._valueCache={};this._engine=e;this._noUBO=!e.supportsUniformBuffers;this._dynamic=c;this._data=f||[];this._uniformLocations={};this._uniformSizes={};this._uniformLocationPointer=0;this._needSync=!1;this._noUBO?(this.updateMatrix3x3=this._updateMatrix3x3ForEffect,this.updateMatrix2x2=this._updateMatrix2x2ForEffect,this.updateFloat=this._updateFloatForEffect,this.updateFloat2=
this._updateFloat2ForEffect,this.updateFloat3=this._updateFloat3ForEffect,this.updateFloat4=this._updateFloat4ForEffect,this.updateMatrix=this._updateMatrixForEffect,this.updateVector3=this._updateVector3ForEffect,this.updateVector4=this._updateVector4ForEffect,this.updateColor3=this._updateColor3ForEffect,this.updateColor4=this._updateColor4ForEffect):(this._engine._uniformBuffers.push(this),this.updateMatrix3x3=this._updateMatrix3x3ForUniform,this.updateMatrix2x2=this._updateMatrix2x2ForUniform,
this.updateFloat=this._updateFloatForUniform,this.updateFloat2=this._updateFloat2ForUniform,this.updateFloat3=this._updateFloat3ForUniform,this.updateFloat4=this._updateFloat4ForUniform,this.updateMatrix=this._updateMatrixForUniform,this.updateVector3=this._updateVector3ForUniform,this.updateVector4=this._updateVector4ForUniform,this.updateColor3=this._updateColor3ForUniform,this.updateColor4=this._updateColor4ForUniform)}Object.defineProperty(f.prototype,"useUbo",{get:function(){return!this._noUBO},
enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"isSync",{get:function(){return!this._needSync},enumerable:!1,configurable:!0});f.prototype.isDynamic=function(){return void 0!==this._dynamic};f.prototype.getData=function(){return this._bufferData};f.prototype.getBuffer=function(){return this._buffer};f.prototype._fillAlignment=function(e){e=2>=e?e:4;if(0!==this._uniformLocationPointer%e){var f=this._uniformLocationPointer;this._uniformLocationPointer+=e-this._uniformLocationPointer%
e;e=this._uniformLocationPointer-f;for(f=0;f<e;f++)this._data.push(0)}};f.prototype.addUniform=function(e,f){if(!this._noUBO&&void 0===this._uniformLocations[e]){if(f instanceof Array){var c=f;f=c.length}else{c=[];for(var a=0;a<f;a++)c.push(0)}this._fillAlignment(f);this._uniformSizes[e]=f;this._uniformLocations[e]=this._uniformLocationPointer;this._uniformLocationPointer+=f;for(a=0;a<f;a++)this._data.push(c[a]);this._needSync=!0}};f.prototype.addMatrix=function(e,f){this.addUniform(e,Array.prototype.slice.call(f.toArray()))};
f.prototype.addFloat2=function(e,f,c){this.addUniform(e,[f,c])};f.prototype.addFloat3=function(e,f,c,a){this.addUniform(e,[f,c,a])};f.prototype.addColor3=function(e,f){var c=[];f.toArray(c);this.addUniform(e,c)};f.prototype.addColor4=function(e,f,c){var a=[];f.toArray(a);a.push(c);this.addUniform(e,a)};f.prototype.addVector3=function(e,f){var c=[];f.toArray(c);this.addUniform(e,c)};f.prototype.addMatrix3x3=function(e){this.addUniform(e,12)};f.prototype.addMatrix2x2=function(e){this.addUniform(e,8)};
f.prototype.create=function(){this._noUBO||this._buffer||(this._fillAlignment(4),this._bufferData=new Float32Array(this._data),this._rebuild(),this._needSync=!0)};f.prototype._rebuild=function(){!this._noUBO&&this._bufferData&&(this._buffer=this._dynamic?this._engine.createDynamicUniformBuffer(this._bufferData):this._engine.createUniformBuffer(this._bufferData))};f.prototype.update=function(){if(!this._buffer)this.create();else if(this._dynamic||this._needSync)this._engine.updateUniformBuffer(this._buffer,
this._bufferData),this._needSync=!1};f.prototype.updateUniform=function(e,f,c){var a=this._uniformLocations[e];if(void 0===a){if(this._buffer){k.a.Error("Cannot add an uniform after UBO has been created.");return}this.addUniform(e,c);a=this._uniformLocations[e]}this._buffer||this.create();if(this._dynamic)for(d=0;d<c;d++)this._bufferData[a+d]=f[d];else{e=!1;for(var d=0;d<c;d++)if(16===c||this._bufferData[a+d]!==f[d])e=!0,this._bufferData[a+d]=f[d];this._needSync=this._needSync||e}};f.prototype._cacheMatrix=
function(e,f){var c=this._valueCache[e];f=f.updateFlag;if(void 0!==c&&c===f)return!1;this._valueCache[e]=f;return!0};f.prototype._updateMatrix3x3ForUniform=function(e,h){for(var c=0;3>c;c++)f._tempBuffer[4*c]=h[3*c],f._tempBuffer[4*c+1]=h[3*c+1],f._tempBuffer[4*c+2]=h[3*c+2],f._tempBuffer[4*c+3]=0;this.updateUniform(e,f._tempBuffer,12)};f.prototype._updateMatrix3x3ForEffect=function(e,f){this._currentEffect.setMatrix3x3(e,f)};f.prototype._updateMatrix2x2ForEffect=function(e,f){this._currentEffect.setMatrix2x2(e,
f)};f.prototype._updateMatrix2x2ForUniform=function(e,h){for(var c=0;2>c;c++)f._tempBuffer[4*c]=h[2*c],f._tempBuffer[4*c+1]=h[2*c+1],f._tempBuffer[4*c+2]=0,f._tempBuffer[4*c+3]=0;this.updateUniform(e,f._tempBuffer,8)};f.prototype._updateFloatForEffect=function(e,f){this._currentEffect.setFloat(e,f)};f.prototype._updateFloatForUniform=function(e,h){f._tempBuffer[0]=h;this.updateUniform(e,f._tempBuffer,1)};f.prototype._updateFloat2ForEffect=function(e,f,c,a){void 0===a&&(a="");this._currentEffect.setFloat2(e+
a,f,c)};f.prototype._updateFloat2ForUniform=function(e,h,c){f._tempBuffer[0]=h;f._tempBuffer[1]=c;this.updateUniform(e,f._tempBuffer,2)};f.prototype._updateFloat3ForEffect=function(e,f,c,a,d){void 0===d&&(d="");this._currentEffect.setFloat3(e+d,f,c,a)};f.prototype._updateFloat3ForUniform=function(e,h,c,a){f._tempBuffer[0]=h;f._tempBuffer[1]=c;f._tempBuffer[2]=a;this.updateUniform(e,f._tempBuffer,3)};f.prototype._updateFloat4ForEffect=function(e,f,c,a,d,h){void 0===h&&(h="");this._currentEffect.setFloat4(e+
h,f,c,a,d)};f.prototype._updateFloat4ForUniform=function(e,h,c,a,d){f._tempBuffer[0]=h;f._tempBuffer[1]=c;f._tempBuffer[2]=a;f._tempBuffer[3]=d;this.updateUniform(e,f._tempBuffer,4)};f.prototype._updateMatrixForEffect=function(e,f){this._currentEffect.setMatrix(e,f)};f.prototype._updateMatrixForUniform=function(e,f){this._cacheMatrix(e,f)&&this.updateUniform(e,f.toArray(),16)};f.prototype._updateVector3ForEffect=function(e,f){this._currentEffect.setVector3(e,f)};f.prototype._updateVector3ForUniform=
function(e,h){h.toArray(f._tempBuffer);this.updateUniform(e,f._tempBuffer,3)};f.prototype._updateVector4ForEffect=function(e,f){this._currentEffect.setVector4(e,f)};f.prototype._updateVector4ForUniform=function(e,h){h.toArray(f._tempBuffer);this.updateUniform(e,f._tempBuffer,4)};f.prototype._updateColor3ForEffect=function(e,f,c){void 0===c&&(c="");this._currentEffect.setColor3(e+c,f)};f.prototype._updateColor3ForUniform=function(e,h){h.toArray(f._tempBuffer);this.updateUniform(e,f._tempBuffer,3)};
f.prototype._updateColor4ForEffect=function(e,f,c,a){void 0===a&&(a="");this._currentEffect.setColor4(e+a,f,c)};f.prototype._updateColor4ForUniform=function(e,h,c){h.toArray(f._tempBuffer);f._tempBuffer[3]=c;this.updateUniform(e,f._tempBuffer,4)};f.prototype.setTexture=function(e,f){this._currentEffect.setTexture(e,f)};f.prototype.updateUniformDirectly=function(e,f){this.updateUniform(e,f,f.length);this.update()};f.prototype.bindToEffect=function(e,f){this._currentEffect=e;!this._noUBO&&this._buffer&&
(this._alreadyBound=!0,e.bindUniformBuffer(this._buffer,f))};f.prototype.dispose=function(){if(!this._noUBO){var e=this._engine._uniformBuffers,f=e.indexOf(this);-1!==f&&(e[f]=e[e.length-1],e.pop());this._buffer&&this._engine._releaseBuffer(this._buffer)&&(this._buffer=null)}};f._MAX_UNIFORM_SIZE=256;f._tempBuffer=new Float32Array(f._MAX_UNIFORM_SIZE);return f}()},UpSL:function(n,p,g){g.d(p,"a",function(){return k});var k=function(){function h(){this._defines={};this._currentRank=32;this._maxRank=
-1;this._mesh=null}h.prototype.unBindMesh=function(){this._mesh=null};h.prototype.addFallback=function(f,e){this._defines[f]||(f<this._currentRank&&(this._currentRank=f),f>this._maxRank&&(this._maxRank=f),this._defines[f]=[]);this._defines[f].push(e)};h.prototype.addCPUSkinningFallback=function(f,e){this._mesh=e;f<this._currentRank&&(this._currentRank=f);f>this._maxRank&&(this._maxRank=f)};Object.defineProperty(h.prototype,"hasMoreFallbacks",{get:function(){return this._currentRank<=this._maxRank},
enumerable:!1,configurable:!0});h.prototype.reduce=function(f,e){if(this._mesh&&this._mesh.computeBonesUsingShaders&&0<this._mesh.numBoneInfluencers){this._mesh.computeBonesUsingShaders=!1;f=f.replace("#define NUM_BONE_INFLUENCERS "+this._mesh.numBoneInfluencers,"#define NUM_BONE_INFLUENCERS 0");e._bonesComputationForcedToCPU=!0;for(var h=this._mesh.getScene(),c=0;c<h.meshes.length;c++){var a=h.meshes[c];if(!a.material)!this._mesh.material&&a.computeBonesUsingShaders&&0<a.numBoneInfluencers&&(a.computeBonesUsingShaders=
!1);else if(a.computeBonesUsingShaders&&0!==a.numBoneInfluencers)if(a.material.getEffect()===e)a.computeBonesUsingShaders=!1;else if(a.subMeshes)for(var d=0,u=a.subMeshes;d<u.length;d++)if(u[d].effect===e){a.computeBonesUsingShaders=!1;break}}}else{if(e=this._defines[this._currentRank])for(c=0;c<e.length;c++)f=f.replace("#define "+e[c],"");this._currentRank++}return f};return h}()},Vc1k:function(n,p,g){g.d(p,"a",function(){return c});g.d(p,"b",function(){return a});var k=g("oYeq"),h=g("y4Ty"),f=g("JIAX"),
e=g("ps+7"),t=g("Z6Y1");g("+stD");var c=function(){function a(d,c){var b;void 0===c&&(c=a._DefaultOptions);this.engine=d;this._fullscreenViewport=new f.a(0,0,1,1);c=Object(k.a)(Object(k.a)({},a._DefaultOptions),c);this._vertexBuffers=(b={},b[h.b.PositionKind]=new h.b(d,c.positions,h.b.PositionKind,!1,!1,2),b);this._indexBuffer=d.createIndexBuffer(c.indices)}a.prototype.setViewport=function(a){void 0===a&&(a=this._fullscreenViewport);this.engine.setViewport(a)};a.prototype.bindBuffers=function(a){this.engine.bindBuffers(this._vertexBuffers,
this._indexBuffer,a)};a.prototype.applyEffectWrapper=function(a){this.engine.depthCullingState.depthTest=!1;this.engine.stencilState.stencilTest=!1;this.engine.enableEffect(a.effect);this.bindBuffers(a.effect);a.onApplyObservable.notifyObservers({})};a.prototype.restoreStates=function(){this.engine.depthCullingState.depthTest=!0;this.engine.stencilState.stencilTest=!0};a.prototype.draw=function(){this.engine.drawElementsType(0,0,6)};a.prototype.isRenderTargetTexture=function(a){return void 0!==a.renderList};
a.prototype.render=function(a,d){void 0===d&&(d=null);a.effect.isReady()&&(this.setViewport(),(d=null===d?null:this.isRenderTargetTexture(d)?d.getInternalTexture():d)&&this.engine.bindFramebuffer(d),this.applyEffectWrapper(a),this.draw(),d&&this.engine.unBindFramebuffer(d),this.restoreStates())};a.prototype.dispose=function(){var a=this._vertexBuffers[h.b.PositionKind];a&&(a.dispose(),delete this._vertexBuffers[h.b.PositionKind]);this._indexBuffer&&this.engine._releaseBuffer(this._indexBuffer)};a._DefaultOptions=
{positions:[1,1,-1,1,-1,-1,1,-1],indices:[0,1,2,0,2,3]};return a}(),a=function(){function a(a){var d=this;this.onApplyObservable=new e.a;var b=a.uniformNames||[];if(a.vertexShader)var c={fragmentSource:a.fragmentShader,vertexSource:a.vertexShader,spectorName:a.name||"effectWrapper"};else b.push("scale"),c={fragmentSource:a.fragmentShader,vertex:"postprocess",spectorName:a.name||"effectWrapper"},this.onApplyObservable.add(function(){d.effect.setFloat2("scale",1,1)});var f=a.defines?a.defines.join("\n"):
"";a.useShaderStore?(c.fragment=c.fragmentSource,c.vertex||(c.vertex=c.vertexSource),delete c.fragmentSource,delete c.vertexSource,this.effect=a.engine.createEffect(c.spectorName,a.attributeNames||["position"],b,a.samplerNames,f,void 0,a.onCompiled)):this.effect=new t.a(c,a.attributeNames||["position"],b,a.samplerNames,a.engine,f,void 0,a.onCompiled)}a.prototype.dispose=function(){this.effect.dispose()};return a}()},Z6Y1:function(n,p,g){g.d(p,"a",function(){return t});var k=g("ps+7"),h=g("h87I"),
f=g("uyO6"),e=g("E6EV"),t=function(){function c(a,d,f,m,b,r,g,w,q,n){var u=this;void 0===m&&(m=null);void 0===r&&(r=null);void 0===g&&(g=null);void 0===w&&(w=null);void 0===q&&(q=null);var x;this.name=null;this.defines="";this.onBind=this.onError=this.onCompiled=null;this.uniqueId=0;this.onCompileObservable=new k.a;this.onErrorObservable=new k.a;this._onBindObservable=null;this._multiTarget=this._bonesComputationForcedToCPU=this._wasPreviouslyReady=!1;this._uniformBuffersNames={};this._samplers={};
this._isReady=!1;this._compilationError="";this._allFallbacksProcessed=!1;this._uniforms={};this._key="";this._fallbacks=null;this._fragmentSourceCodeOverride=this._vertexSourceCodeOverride=this._fragmentSourceCode=this._vertexSourceCode="";this._transformFeedbackVaryings=null;this._rawFragmentSourceCode=this._rawVertexSourceCode="";this._pipelineContext=null;this._valueCache={};this.name=a;var p=null;if(d.attributes){this._engine=f;this._attributesNames=d.attributes;this._uniformsNames=d.uniformsNames.concat(d.samplers);
this._samplerList=d.samplers.slice();this.defines=d.defines;this.onError=d.onError;this.onCompiled=d.onCompiled;this._fallbacks=d.fallbacks;this._indexParameters=d.indexParameters;this._transformFeedbackVaryings=d.transformFeedbackVaryings||null;this._multiTarget=!!d.multiTarget;if(d.uniformBuffersNames)for(this._uniformBuffersNamesList=d.uniformBuffersNames.slice(),f=0;f<d.uniformBuffersNames.length;f++)this._uniformBuffersNames[d.uniformBuffersNames[f]]=f;p=null!==(x=d.processFinalCode)&&void 0!==
x?x:null}else this._engine=b,this.defines=null==r?"":r,this._uniformsNames=f.concat(m),this._samplerList=m?m.slice():[],this._attributesNames=d,this._uniformBuffersNamesList=[],this.onError=q,this.onCompiled=w,this._indexParameters=n,this._fallbacks=g;this._attributeLocationByName={};this.uniqueId=c._uniqueIdSeed++;x=h.a.IsWindowObjectExist()?this._engine.getHostDocument():null;a.vertexSource?d="source:"+a.vertexSource:a.vertexElement?(d=x?x.getElementById(a.vertexElement):null,d||(d=a.vertexElement)):
d=a.vertex||a;if(a.fragmentSource)var t="source:"+a.fragmentSource;else a.fragmentElement?(t=x?x.getElementById(a.fragmentElement):null,t||(t=a.fragmentElement)):t=a.fragment||a;var l={defines:this.defines.split("\n"),indexParameters:this._indexParameters,isFragment:!1,shouldUseHighPrecisionShader:this._engine._shouldUseHighPrecisionShader,processor:this._engine._shaderProcessor,supportsUniformBuffers:this._engine.supportsUniformBuffers,shadersRepository:c.ShadersRepository,includesShadersStore:c.IncludesShadersStore,
version:(100*this._engine.webGLVersion).toString(),platformName:2<=this._engine.webGLVersion?"WEBGL2":"WEBGL1"};this._loadShader(d,"Vertex","",function(b){u._rawVertexSourceCode=b;u._loadShader(t,"Fragment","Pixel",function(d){u._rawFragmentSourceCode=d;e.a.Process(b,l,function(b){p&&(b=p("vertex",b));l.isFragment=!0;e.a.Process(d,l,function(d){p&&(d=p("fragment",d));u._useFinalCode(b,d,a)},u._engine)},u._engine)})})}Object.defineProperty(c.prototype,"onBindObservable",{get:function(){this._onBindObservable||
(this._onBindObservable=new k.a);return this._onBindObservable},enumerable:!1,configurable:!0});c.prototype._useFinalCode=function(a,d,c){if(c){var e=c.fragmentElement||c.fragment||c.spectorName||c;this._vertexSourceCode="#define SHADER_NAME vertex:"+(c.vertexElement||c.vertex||c.spectorName||c)+"\n"+a;this._fragmentSourceCode="#define SHADER_NAME fragment:"+e+"\n"+d}else this._vertexSourceCode=a,this._fragmentSourceCode=d;this._prepareEffect()};Object.defineProperty(c.prototype,"key",{get:function(){return this._key},
enumerable:!1,configurable:!0});c.prototype.isReady=function(){try{return this._isReadyInternal()}catch(a){return!1}};c.prototype._isReadyInternal=function(){return this._isReady?!0:this._pipelineContext?this._pipelineContext.isReady:!1};c.prototype.getEngine=function(){return this._engine};c.prototype.getPipelineContext=function(){return this._pipelineContext};c.prototype.getAttributesNames=function(){return this._attributesNames};c.prototype.getAttributeLocation=function(a){return this._attributes[a]};
c.prototype.getAttributeLocationByName=function(a){return this._attributeLocationByName[a]};c.prototype.getAttributesCount=function(){return this._attributes.length};c.prototype.getUniformIndex=function(a){return this._uniformsNames.indexOf(a)};c.prototype.getUniform=function(a){return this._uniforms[a]};c.prototype.getSamplers=function(){return this._samplerList};c.prototype.getUniformNames=function(){return this._uniformsNames};c.prototype.getUniformBuffersNames=function(){return this._uniformBuffersNamesList};
c.prototype.getIndexParameters=function(){return this._indexParameters};c.prototype.getCompilationError=function(){return this._compilationError};c.prototype.allFallbacksProcessed=function(){return this._allFallbacksProcessed};c.prototype.executeWhenCompiled=function(a){var d=this;this.isReady()?a(this):(this.onCompileObservable.add(function(d){a(d)}),this._pipelineContext&&!this._pipelineContext.isAsync||setTimeout(function(){d._checkIsReady(null)},16))};c.prototype._checkIsReady=function(a){var d=
this;try{if(this._isReadyInternal())return}catch(u){this._processCompilationErrors(u,a);return}setTimeout(function(){d._checkIsReady(a)},16)};c.prototype._loadShader=function(a,d,e,f){"undefined"!==typeof HTMLElement&&a instanceof HTMLElement?(d=h.a.GetDOMTextContent(a),f(d)):"source:"===a.substr(0,7)?f(a.substr(7)):"base64:"===a.substr(0,7)?(d=window.atob(a.substr(7)),f(d)):c.ShadersStore[a+d+"Shader"]?f(c.ShadersStore[a+d+"Shader"]):e&&c.ShadersStore[a+e+"Shader"]?f(c.ShadersStore[a+e+"Shader"]):
(a="."===a[0]||"/"===a[0]||-1<a.indexOf("http")?a:c.ShadersRepository+a,this._engine._loadFile(a+"."+d.toLowerCase()+".fx",f))};Object.defineProperty(c.prototype,"vertexSourceCode",{get:function(){return this._vertexSourceCodeOverride&&this._fragmentSourceCodeOverride?this._vertexSourceCodeOverride:this._vertexSourceCode},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"fragmentSourceCode",{get:function(){return this._vertexSourceCodeOverride&&this._fragmentSourceCodeOverride?this._fragmentSourceCodeOverride:
this._fragmentSourceCode},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"rawVertexSourceCode",{get:function(){return this._rawVertexSourceCode},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"rawFragmentSourceCode",{get:function(){return this._rawFragmentSourceCode},enumerable:!1,configurable:!0});c.prototype._rebuildProgram=function(a,d,c,e){var b=this;this._isReady=!1;this._vertexSourceCodeOverride=a;this._fragmentSourceCodeOverride=d;this.onError=function(a,
b){e&&e(b)};this.onCompiled=function(){var a=b.getEngine().scenes;if(a)for(var d=0;d<a.length;d++)a[d].markAllMaterialsAsDirty(63);b._pipelineContext._handlesSpectorRebuildCallback(c)};this._fallbacks=null;this._prepareEffect()};c.prototype._prepareEffect=function(){var a=this,d=this._attributesNames,c=this.defines;this._valueCache={};var e=this._pipelineContext;try{var b=this._engine;this._pipelineContext=b.createPipelineContext();var f=this._rebuildProgram.bind(this);this._vertexSourceCodeOverride&&
this._fragmentSourceCodeOverride?b._preparePipelineContext(this._pipelineContext,this._vertexSourceCodeOverride,this._fragmentSourceCodeOverride,!0,f,null,this._transformFeedbackVaryings):b._preparePipelineContext(this._pipelineContext,this._vertexSourceCode,this._fragmentSourceCode,!1,f,c,this._transformFeedbackVaryings);b._executeWhenRenderingStateIsCompiled(this._pipelineContext,function(){if(b.supportsUniformBuffers)for(var c in a._uniformBuffersNames)a.bindUniformBlock(c,a._uniformBuffersNames[c]);
b.getUniforms(a._pipelineContext,a._uniformsNames).forEach(function(b,d){a._uniforms[a._uniformsNames[d]]=b});a._attributes=b.getAttributes(a._pipelineContext,d);if(d)for(c=0;c<d.length;c++)a._attributeLocationByName[d[c]]=a._attributes[c];for(c=0;c<a._samplerList.length;c++)null==a.getUniform(a._samplerList[c])&&(a._samplerList.splice(c,1),c--);a._samplerList.forEach(function(b,d){a._samplers[b]=d});b.bindSamplers(a);a._compilationError="";a._isReady=!0;if(a.onCompiled)a.onCompiled(a);a.onCompileObservable.notifyObservers(a);
a.onCompileObservable.clear();a._fallbacks&&a._fallbacks.unBindMesh();e&&a.getEngine()._deletePipelineContext(e)});this._pipelineContext.isAsync&&this._checkIsReady(e)}catch(x){this._processCompilationErrors(x,e)}};c.prototype._getShaderCodeAndErrorLine=function(a,d,c){var e=c?/FRAGMENT SHADER ERROR: 0:(\d+?):/:/VERTEX SHADER ERROR: 0:(\d+?):/,b=null;d&&a&&(d=d.match(e))&&2===d.length&&(d=parseInt(d[1]),e=a.split("\n",-1),e.length>=d&&(b="Offending line ["+d+"] in "+(c?"fragment":"vertex")+" code: "+
e[d-1]));return[a,b]};c.prototype._processCompilationErrors=function(a,d){var e,h,b;void 0===d&&(d=null);this._compilationError=a.message;var r=this._attributesNames;a=this._fallbacks;f.a.Error("Unable to compile effect:");f.a.Error("Uniforms: "+this._uniformsNames.map(function(a){return" "+a}));f.a.Error("Attributes: "+r.map(function(a){return" "+a}));f.a.Error("Defines:\r\n"+this.defines);if(c.LogShaderCodeOnCompilationError){var g=null,k=null;r=null;if(null===(e=this._pipelineContext)||void 0===
e?0:e._getVertexShaderCode())e=this._getShaderCodeAndErrorLine(this._pipelineContext._getVertexShaderCode(),this._compilationError,!1),r=e[0],g=e[1],r&&(f.a.Error("Vertex code:"),f.a.Error(r));if(null===(h=this._pipelineContext)||void 0===h?0:h._getFragmentShaderCode())h=this._getShaderCodeAndErrorLine(null===(b=this._pipelineContext)||void 0===b?void 0:b._getFragmentShaderCode(),this._compilationError,!0),r=h[0],k=h[1],r&&(f.a.Error("Fragment code:"),f.a.Error(r));g&&f.a.Error(g);k&&f.a.Error(k)}f.a.Error("Error: "+
this._compilationError);if(d){this._pipelineContext=d;this._isReady=!0;if(this.onError)this.onError(this,this._compilationError);this.onErrorObservable.notifyObservers(this)}if(a)if(this._pipelineContext=null,a.hasMoreFallbacks)this._allFallbacksProcessed=!1,f.a.Error("Trying next fallback."),this.defines=a.reduce(this.defines,this),this._prepareEffect();else{this._allFallbacksProcessed=!0;if(this.onError)this.onError(this,this._compilationError);this.onErrorObservable.notifyObservers(this);this.onErrorObservable.clear();
this._fallbacks&&this._fallbacks.unBindMesh()}else this._allFallbacksProcessed=!0};Object.defineProperty(c.prototype,"isSupported",{get:function(){return""===this._compilationError},enumerable:!1,configurable:!0});c.prototype._bindTexture=function(a,d){this._engine._bindTexture(this._samplers[a],d)};c.prototype.setTexture=function(a,d){this._engine.setTexture(this._samplers[a],this._uniforms[a],d)};c.prototype.setDepthStencilTexture=function(a,d){this._engine.setDepthStencilTexture(this._samplers[a],
this._uniforms[a],d)};c.prototype.setTextureArray=function(a,d){var c=a+"Ex";if(-1===this._samplerList.indexOf(c+"0")){for(var e=this._samplerList.indexOf(a),b=1;b<d.length;b++)this._samplerList.splice(e+b,0,c+(b-1).toString());e=c=0;for(b=this._samplerList;e<b.length;e++)this._samplers[b[e]]=c,c+=1}this._engine.setTextureArray(this._samplers[a],this._uniforms[a],d)};c.prototype.setTextureFromPostProcess=function(a,d){this._engine.setTextureFromPostProcess(this._samplers[a],d)};c.prototype.setTextureFromPostProcessOutput=
function(a,d){this._engine.setTextureFromPostProcessOutput(this._samplers[a],d)};c.prototype._cacheMatrix=function(a,d){var c=this._valueCache[a];d=d.updateFlag;if(void 0!==c&&c===d)return!1;this._valueCache[a]=d;return!0};c.prototype._cacheFloat2=function(a,d,c){var e=this._valueCache[a];if(!e||2!==e.length)return e=[d,c],this._valueCache[a]=e,!0;a=!1;e[0]!==d&&(e[0]=d,a=!0);e[1]!==c&&(e[1]=c,a=!0);return a};c.prototype._cacheFloat3=function(a,d,c,e){var b=this._valueCache[a];if(!b||3!==b.length)return b=
[d,c,e],this._valueCache[a]=b,!0;a=!1;b[0]!==d&&(b[0]=d,a=!0);b[1]!==c&&(b[1]=c,a=!0);b[2]!==e&&(b[2]=e,a=!0);return a};c.prototype._cacheFloat4=function(a,d,c,e,b){var f=this._valueCache[a];if(!f||4!==f.length)return f=[d,c,e,b],this._valueCache[a]=f,!0;a=!1;f[0]!==d&&(f[0]=d,a=!0);f[1]!==c&&(f[1]=c,a=!0);f[2]!==e&&(f[2]=e,a=!0);f[3]!==b&&(f[3]=b,a=!0);return a};c.prototype.bindUniformBuffer=function(a,d){d=this._uniformBuffersNames[d];void 0!==d&&c._baseCache[d]!==a&&(c._baseCache[d]=a,this._engine.bindUniformBufferBase(a,
d))};c.prototype.bindUniformBlock=function(a,d){this._engine.bindUniformBlock(this._pipelineContext,a,d)};c.prototype.setInt=function(a,d){var c=this._valueCache[a];if(void 0!==c&&c===d)return this;this._engine.setInt(this._uniforms[a],d)&&(this._valueCache[a]=d);return this};c.prototype.setIntArray=function(a,d){this._valueCache[a]=null;this._engine.setIntArray(this._uniforms[a],d);return this};c.prototype.setIntArray2=function(a,d){this._valueCache[a]=null;this._engine.setIntArray2(this._uniforms[a],
d);return this};c.prototype.setIntArray3=function(a,d){this._valueCache[a]=null;this._engine.setIntArray3(this._uniforms[a],d);return this};c.prototype.setIntArray4=function(a,d){this._valueCache[a]=null;this._engine.setIntArray4(this._uniforms[a],d);return this};c.prototype.setFloatArray=function(a,d){this._valueCache[a]=null;this._engine.setArray(this._uniforms[a],d);return this};c.prototype.setFloatArray2=function(a,d){this._valueCache[a]=null;this._engine.setArray2(this._uniforms[a],d);return this};
c.prototype.setFloatArray3=function(a,d){this._valueCache[a]=null;this._engine.setArray3(this._uniforms[a],d);return this};c.prototype.setFloatArray4=function(a,d){this._valueCache[a]=null;this._engine.setArray4(this._uniforms[a],d);return this};c.prototype.setArray=function(a,d){this._valueCache[a]=null;this._engine.setArray(this._uniforms[a],d);return this};c.prototype.setArray2=function(a,d){this._valueCache[a]=null;this._engine.setArray2(this._uniforms[a],d);return this};c.prototype.setArray3=
function(a,d){this._valueCache[a]=null;this._engine.setArray3(this._uniforms[a],d);return this};c.prototype.setArray4=function(a,d){this._valueCache[a]=null;this._engine.setArray4(this._uniforms[a],d);return this};c.prototype.setMatrices=function(a,d){if(!d)return this;this._valueCache[a]=null;this._engine.setMatrices(this._uniforms[a],d);return this};c.prototype.setMatrix=function(a,d){this._cacheMatrix(a,d)&&(this._engine.setMatrices(this._uniforms[a],d.toArray())||(this._valueCache[a]=null));return this};
c.prototype.setMatrix3x3=function(a,d){this._valueCache[a]=null;this._engine.setMatrix3x3(this._uniforms[a],d);return this};c.prototype.setMatrix2x2=function(a,d){this._valueCache[a]=null;this._engine.setMatrix2x2(this._uniforms[a],d);return this};c.prototype.setFloat=function(a,d){var c=this._valueCache[a];if(void 0!==c&&c===d)return this;this._engine.setFloat(this._uniforms[a],d)&&(this._valueCache[a]=d);return this};c.prototype.setBool=function(a,d){var c=this._valueCache[a];if(void 0!==c&&c===
d)return this;this._engine.setInt(this._uniforms[a],d?1:0)&&(this._valueCache[a]=d);return this};c.prototype.setVector2=function(a,d){this._cacheFloat2(a,d.x,d.y)&&(this._engine.setFloat2(this._uniforms[a],d.x,d.y)||(this._valueCache[a]=null));return this};c.prototype.setFloat2=function(a,d,c){this._cacheFloat2(a,d,c)&&(this._engine.setFloat2(this._uniforms[a],d,c)||(this._valueCache[a]=null));return this};c.prototype.setVector3=function(a,d){this._cacheFloat3(a,d.x,d.y,d.z)&&(this._engine.setFloat3(this._uniforms[a],
d.x,d.y,d.z)||(this._valueCache[a]=null));return this};c.prototype.setFloat3=function(a,d,c,e){this._cacheFloat3(a,d,c,e)&&(this._engine.setFloat3(this._uniforms[a],d,c,e)||(this._valueCache[a]=null));return this};c.prototype.setVector4=function(a,d){this._cacheFloat4(a,d.x,d.y,d.z,d.w)&&(this._engine.setFloat4(this._uniforms[a],d.x,d.y,d.z,d.w)||(this._valueCache[a]=null));return this};c.prototype.setFloat4=function(a,d,c,e,b){this._cacheFloat4(a,d,c,e,b)&&(this._engine.setFloat4(this._uniforms[a],
d,c,e,b)||(this._valueCache[a]=null));return this};c.prototype.setColor3=function(a,d){this._cacheFloat3(a,d.r,d.g,d.b)&&(this._engine.setFloat3(this._uniforms[a],d.r,d.g,d.b)||(this._valueCache[a]=null));return this};c.prototype.setColor4=function(a,d,c){this._cacheFloat4(a,d.r,d.g,d.b,c)&&(this._engine.setFloat4(this._uniforms[a],d.r,d.g,d.b,c)||(this._valueCache[a]=null));return this};c.prototype.setDirectColor4=function(a,d){this._cacheFloat4(a,d.r,d.g,d.b,d.a)&&(this._engine.setFloat4(this._uniforms[a],
d.r,d.g,d.b,d.a)||(this._valueCache[a]=null));return this};c.prototype.dispose=function(){this._engine._releaseEffect(this)};c.RegisterShader=function(a,d,e){d&&(c.ShadersStore[a+"PixelShader"]=d);e&&(c.ShadersStore[a+"VertexShader"]=e)};c.ResetCache=function(){c._baseCache={}};c.ShadersRepository="src/Shaders/";c.LogShaderCodeOnCompilationError=!0;c._uniqueIdSeed=0;c._baseCache={};c.ShadersStore={};c.IncludesShadersStore={};return c}()},afLn:function(n,p,g){g.d(p,"a",function(){return f});var k=
g("oYeq"),h=g("/SR9"),f=function(e){function f(c,a){c=e.call(this,c,a)||this;c._normalMatrix=new h.a;c._storeEffectOnSubMeshes=!0;return c}Object(k.d)(f,e);f.prototype.getEffect=function(){return this._activeEffect};f.prototype.isReady=function(c,a){return c?c.subMeshes&&0!==c.subMeshes.length?this.isReadyForSubMesh(c,c.subMeshes[0],a):!0:!1};f.prototype._isReadyForSubMesh=function(c){var a=c._materialDefines;return!this.checkReadyOnEveryCall&&c.effect&&a&&a._renderId===this.getScene().getRenderId()?
!0:!1};f.prototype.bindOnlyWorldMatrix=function(c){this._activeEffect.setMatrix("world",c)};f.prototype.bindOnlyNormalMatrix=function(c){this._activeEffect.setMatrix("normalMatrix",c)};f.prototype.bind=function(c,a){a&&this.bindForSubMesh(c,a,a.subMeshes[0])};f.prototype._afterBind=function(c,a){void 0===a&&(a=null);e.prototype._afterBind.call(this,c);this.getScene()._cachedEffect=a};f.prototype._mustRebind=function(c,a,d){void 0===d&&(d=1);return c.isCachedMaterialInvalid(this,a,d)};return f}(g("cdI9").a)},
cdI9:function(n,p,g){g.d(p,"a",function(){return m});var k=g("oYeq"),h=g("ADVu"),f=g("YKqZ"),e=g("ps+7"),t=g("e2Mr"),c=g("C1Wc"),a=g("Qmvu"),d=g("uyO6"),u=g("j2cH"),m=function(){function b(d,c,h){this.shadowDepthWrapper=null;this.allowShaderHotSwapping=!0;this.reservedDataStore=this.metadata=null;this.checkReadyOnlyOnce=this.checkReadyOnEveryCall=!1;this.state="";this._alpha=1;this._backFaceCulling=!0;this.getRenderTargetTextures=this.onError=this.onCompiled=null;this._storeEffectOnSubMeshes=this.doNotSerialize=
!1;this.animations=null;this.onDisposeObservable=new e.a;this._onBindObserver=this._onUnBindObservable=this._onDisposeObserver=null;this._alphaMode=2;this.forceDepthWrite=this.disableColorWrite=this.disableDepthWrite=this._needDepthPrePass=!1;this.depthFunction=0;this.separateCullingPass=!1;this._fogEnabled=!0;this.pointSize=1;this.zOffset=0;this._effect=null;this._useUBO=!1;this._fillMode=b.TriangleFillMode;this._cachedColorWriteState=this._cachedDepthWriteState=!1;this._cachedDepthFunctionState=
0;this._indexInSceneMaterialArray=-1;this.meshMap=null;this._forceAlphaTest=!1;this._transparencyMode=null;this.name=d;var m=1;this._scene=c||t.a.LastCreatedScene;for(this.id=d||f.b.RandomId();this._scene.getMaterialByID(this.id);)this.id=d+" "+m++;this.uniqueId=this._scene.getUniqueId();this.sideOrientation=this._scene.useRightHandedSystem?b.ClockWiseSideOrientation:b.CounterClockWiseSideOrientation;this._uniformBuffer=new a.a(this._scene.getEngine());this._useUBO=this.getScene().getEngine().supportsUniformBuffers;
h||this._scene.addMaterial(this);this._scene.useMaterialMeshMap&&(this.meshMap={})}Object.defineProperty(b.prototype,"canRenderToMRT",{get:function(){return!1},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"alpha",{get:function(){return this._alpha},set:function(a){this._alpha!==a&&(this._alpha=a,this.markAsDirty(b.MiscDirtyFlag))},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"backFaceCulling",{get:function(){return this._backFaceCulling},set:function(a){this._backFaceCulling!==
a&&(this._backFaceCulling=a,this.markAsDirty(b.TextureDirtyFlag))},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"hasRenderTargetTextures",{get:function(){return!1},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"onDispose",{set:function(a){this._onDisposeObserver&&this.onDisposeObservable.remove(this._onDisposeObserver);this._onDisposeObserver=this.onDisposeObservable.add(a)},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"onBindObservable",
{get:function(){this._onBindObservable||(this._onBindObservable=new e.a);return this._onBindObservable},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"onBind",{set:function(a){this._onBindObserver&&this.onBindObservable.remove(this._onBindObserver);this._onBindObserver=this.onBindObservable.add(a)},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"onUnBindObservable",{get:function(){this._onUnBindObservable||(this._onUnBindObservable=new e.a);return this._onUnBindObservable},
enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"onEffectCreatedObservable",{get:function(){this._onEffectCreatedObservable||(this._onEffectCreatedObservable=new e.a);return this._onEffectCreatedObservable},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"alphaMode",{get:function(){return this._alphaMode},set:function(a){this._alphaMode!==a&&(this._alphaMode=a,this.markAsDirty(b.TextureDirtyFlag))},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,
"needDepthPrePass",{get:function(){return this._needDepthPrePass},set:function(a){this._needDepthPrePass!==a&&(this._needDepthPrePass=a)&&(this.checkReadyOnEveryCall=!0)},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"fogEnabled",{get:function(){return this._fogEnabled},set:function(a){this._fogEnabled!==a&&(this._fogEnabled=a,this.markAsDirty(b.MiscDirtyFlag))},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"wireframe",{get:function(){switch(this._fillMode){case b.WireFrameFillMode:case b.LineListDrawMode:case b.LineLoopDrawMode:case b.LineStripDrawMode:return!0}return this._scene.forceWireframe},
set:function(a){this.fillMode=a?b.WireFrameFillMode:b.TriangleFillMode},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"pointsCloud",{get:function(){switch(this._fillMode){case b.PointFillMode:case b.PointListDrawMode:return!0}return this._scene.forcePointsCloud},set:function(a){this.fillMode=a?b.PointFillMode:b.TriangleFillMode},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"fillMode",{get:function(){return this._fillMode},set:function(a){this._fillMode!==a&&
(this._fillMode=a,this.markAsDirty(b.MiscDirtyFlag))},enumerable:!1,configurable:!0});b.prototype.toString=function(a){return"Name: "+this.name};b.prototype.getClassName=function(){return"Material"};Object.defineProperty(b.prototype,"isFrozen",{get:function(){return this.checkReadyOnlyOnce},enumerable:!1,configurable:!0});b.prototype.freeze=function(){this.markDirty();this.checkReadyOnlyOnce=!0};b.prototype.unfreeze=function(){this.markDirty();this.checkReadyOnlyOnce=!1};b.prototype.isReady=function(a,
b){return!0};b.prototype.isReadyForSubMesh=function(a,b,d){return!1};b.prototype.getEffect=function(){return this._effect};b.prototype.getScene=function(){return this._scene};Object.defineProperty(b.prototype,"transparencyMode",{get:function(){return this._transparencyMode},set:function(a){this._transparencyMode!==a&&(this._transparencyMode=a,this._forceAlphaTest=a===b.MATERIAL_ALPHATESTANDBLEND,this._markAllSubMeshesAsTexturesAndMiscDirty())},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,
"_disableAlphaBlending",{get:function(){return this._transparencyMode===b.MATERIAL_OPAQUE||this._transparencyMode===b.MATERIAL_ALPHATEST},enumerable:!1,configurable:!0});b.prototype.needAlphaBlending=function(){return this._disableAlphaBlending?!1:1>this.alpha};b.prototype.needAlphaBlendingForMesh=function(a){return this._disableAlphaBlending&&1<=a.visibility?!1:this.needAlphaBlending()||1>a.visibility||a.hasVertexAlpha};b.prototype.needAlphaTesting=function(){return this._forceAlphaTest?!0:!1};b.prototype._shouldTurnAlphaTestOn=
function(a){return!this.needAlphaBlendingForMesh(a)&&this.needAlphaTesting()};b.prototype.getAlphaTestTexture=function(){return null};b.prototype.markDirty=function(){for(var a=0,b=this.getScene().meshes;a<b.length;a++){var d=b[a];if(d.subMeshes){var c=0;for(d=d.subMeshes;c<d.length;c++){var e=d[c];e.getMaterial()===this&&e.effect&&(e.effect._wasPreviouslyReady=!1)}}}};b.prototype._preBind=function(a,d){void 0===d&&(d=null);var c=this._scene.getEngine();d=(null==d?this.sideOrientation:d)===b.ClockWiseSideOrientation;
c.enableEffect(a?a:this._effect);c.setState(this.backFaceCulling,this.zOffset,!1,d);return d};b.prototype.bind=function(a,b){};b.prototype.bindForSubMesh=function(a,b,d){};b.prototype.bindOnlyWorldMatrix=function(a){};b.prototype.bindSceneUniformBuffer=function(a,b){b.bindToEffect(a,"Scene")};b.prototype.bindView=function(a){this._useUBO?this.bindSceneUniformBuffer(a,this.getScene().getSceneUniformBuffer()):a.setMatrix("view",this.getScene().getViewMatrix())};b.prototype.bindViewProjection=function(a){this._useUBO?
this.bindSceneUniformBuffer(a,this.getScene().getSceneUniformBuffer()):a.setMatrix("viewProjection",this.getScene().getTransformMatrix())};b.prototype._afterBind=function(a){this._scene._cachedMaterial=this;this._scene._cachedVisibility=a?a.visibility:1;this._onBindObservable&&a&&this._onBindObservable.notifyObservers(a);this.disableDepthWrite&&(a=this._scene.getEngine(),this._cachedDepthWriteState=a.getDepthWrite(),a.setDepthWrite(!1));this.disableColorWrite&&(a=this._scene.getEngine(),this._cachedColorWriteState=
a.getColorWrite(),a.setColorWrite(!1));0!==this.depthFunction&&(a=this._scene.getEngine(),this._cachedDepthFunctionState=a.getDepthFunction()||0,a.setDepthFunction(this.depthFunction))};b.prototype.unbind=function(){this._onUnBindObservable&&this._onUnBindObservable.notifyObservers(this);if(0!==this.depthFunction){var a=this._scene.getEngine();a.setDepthFunction(this._cachedDepthFunctionState)}this.disableDepthWrite&&(a=this._scene.getEngine(),a.setDepthWrite(this._cachedDepthWriteState));this.disableColorWrite&&
(a=this._scene.getEngine(),a.setColorWrite(this._cachedColorWriteState))};b.prototype.getActiveTextures=function(){return[]};b.prototype.hasTexture=function(a){return!1};b.prototype.clone=function(a){return null};b.prototype.getBindedMeshes=function(){var a=this;if(this.meshMap){var b=[],d;for(d in this.meshMap){var c=this.meshMap[d];c&&b.push(c)}return b}return this._scene.meshes.filter(function(b){return b.material===a})};b.prototype.forceCompilation=function(a,b,d,e){var f=this,h=Object(k.a)({clipPlane:!1,
useInstances:!1},d),m=this.getScene(),g=this.allowShaderHotSwapping;this.allowShaderHotSwapping=!1;var r=function(){if(f._scene&&f._scene.getEngine()){var d=m.clipPlane;h.clipPlane&&(m.clipPlane=new u.a(0,0,0,1));if(f._storeEffectOnSubMeshes){var v=!0,k=null;if(a.subMeshes){var q=new c.a(0,0,0,0,0,a,void 0,!1,!1);q._materialDefines&&(q._materialDefines._renderId=-1);f.isReadyForSubMesh(a,q,h.useInstances)||(q.effect&&q.effect.getCompilationError()&&q.effect.allFallbacksProcessed()?k=q.effect.getCompilationError():
(v=!1,setTimeout(r,16)))}v&&(f.allowShaderHotSwapping=g,k&&e&&e(k),b&&b(f))}else f.isReady()?(f.allowShaderHotSwapping=g,b&&b(f)):setTimeout(r,16);h.clipPlane&&(m.clipPlane=d)}};r()};b.prototype.forceCompilationAsync=function(a,b){var d=this;return new Promise(function(c,e){d.forceCompilation(a,function(){c()},b,function(a){e(a)})})};b.prototype.markAsDirty=function(a){this.getScene().blockMaterialDirtyMechanism||(b._DirtyCallbackArray.length=0,a&b.TextureDirtyFlag&&b._DirtyCallbackArray.push(b._TextureDirtyCallBack),
a&b.LightDirtyFlag&&b._DirtyCallbackArray.push(b._LightsDirtyCallBack),a&b.FresnelDirtyFlag&&b._DirtyCallbackArray.push(b._FresnelDirtyCallBack),a&b.AttributesDirtyFlag&&b._DirtyCallbackArray.push(b._AttributeDirtyCallBack),a&b.MiscDirtyFlag&&b._DirtyCallbackArray.push(b._MiscDirtyCallBack),a&b.PrePassDirtyFlag&&b._DirtyCallbackArray.push(b._PrePassDirtyCallBack),b._DirtyCallbackArray.length&&this._markAllSubMeshesAsDirty(b._RunDirtyCallBacks),this.getScene().resetCachedMaterial())};b.prototype._markAllSubMeshesAsDirty=
function(a){if(!this.getScene().blockMaterialDirtyMechanism)for(var b=0,d=this.getScene().meshes;b<d.length;b++){var c=d[b];if(c.subMeshes){var e=0;for(c=c.subMeshes;e<c.length;e++){var f=c[e];f.getMaterial()===this&&f._materialDefines&&a(f._materialDefines)}}}};b.prototype._markScenePrePassDirty=function(){if(!this.getScene().blockMaterialDirtyMechanism){var a=this.getScene().enablePrePassRenderer();a&&a.markAsDirty()}};b.prototype._markAllSubMeshesAsAllDirty=function(){this._markAllSubMeshesAsDirty(b._AllDirtyCallBack)};
b.prototype._markAllSubMeshesAsImageProcessingDirty=function(){this._markAllSubMeshesAsDirty(b._ImageProcessingDirtyCallBack)};b.prototype._markAllSubMeshesAsTexturesDirty=function(){this._markAllSubMeshesAsDirty(b._TextureDirtyCallBack)};b.prototype._markAllSubMeshesAsFresnelDirty=function(){this._markAllSubMeshesAsDirty(b._FresnelDirtyCallBack)};b.prototype._markAllSubMeshesAsFresnelAndMiscDirty=function(){this._markAllSubMeshesAsDirty(b._FresnelAndMiscDirtyCallBack)};b.prototype._markAllSubMeshesAsLightsDirty=
function(){this._markAllSubMeshesAsDirty(b._LightsDirtyCallBack)};b.prototype._markAllSubMeshesAsAttributesDirty=function(){this._markAllSubMeshesAsDirty(b._AttributeDirtyCallBack)};b.prototype._markAllSubMeshesAsMiscDirty=function(){this._markAllSubMeshesAsDirty(b._MiscDirtyCallBack)};b.prototype._markAllSubMeshesAsPrePassDirty=function(){this._markAllSubMeshesAsDirty(b._MiscDirtyCallBack)};b.prototype._markAllSubMeshesAsTexturesAndMiscDirty=function(){this._markAllSubMeshesAsDirty(b._TextureAndMiscDirtyCallBack)};
b.prototype.setPrePassRenderer=function(a){return!1};b.prototype.dispose=function(a,b,d){b=this.getScene();b.stopAnimation(this);b.freeProcessedMaterials();b.removeMaterial(this);if(!0!==d)if(this.meshMap)for(var c in this.meshMap){if(d=this.meshMap[c])d.material=null,this.releaseVertexArrayObject(d,a)}else for(c=0,b=b.meshes;c<b.length;c++)d=b[c],d.material!==this||d.sourceMesh||(d.material=null,this.releaseVertexArrayObject(d,a));this._uniformBuffer.dispose();a&&this._effect&&(this._storeEffectOnSubMeshes||
this._effect.dispose(),this._effect=null);this.onDisposeObservable.notifyObservers(this);this.onDisposeObservable.clear();this._onBindObservable&&this._onBindObservable.clear();this._onUnBindObservable&&this._onUnBindObservable.clear();this._onEffectCreatedObservable&&this._onEffectCreatedObservable.clear()};b.prototype.releaseVertexArrayObject=function(a,b){if(a.geometry){var d=a.geometry;if(this._storeEffectOnSubMeshes){var c=0;for(a=a.subMeshes;c<a.length;c++){var e=a[c];d._releaseVertexArrayObject(e._materialEffect);
b&&e._materialEffect&&e._materialEffect.dispose()}}else d._releaseVertexArrayObject(this._effect)}};b.prototype.serialize=function(){return h.a.Serialize(this)};b.Parse=function(a,b,c){if(!a.customType)a.customType="BABYLON.StandardMaterial";else if("BABYLON.PBRMaterial"===a.customType&&a.overloadedAlbedo&&(a.customType="BABYLON.LegacyPBRMaterial",!BABYLON.LegacyPBRMaterial))return d.a.Error("Your scene is trying to load a legacy version of the PBRMaterial, please, include it from the materials library."),
null;return f.b.Instantiate(a.customType).Parse(a,b,c)};b.TriangleFillMode=0;b.WireFrameFillMode=1;b.PointFillMode=2;b.PointListDrawMode=3;b.LineListDrawMode=4;b.LineLoopDrawMode=5;b.LineStripDrawMode=6;b.TriangleStripDrawMode=7;b.TriangleFanDrawMode=8;b.ClockWiseSideOrientation=0;b.CounterClockWiseSideOrientation=1;b.TextureDirtyFlag=1;b.LightDirtyFlag=2;b.FresnelDirtyFlag=4;b.AttributesDirtyFlag=8;b.MiscDirtyFlag=16;b.PrePassDirtyFlag=32;b.AllDirtyFlag=63;b.MATERIAL_OPAQUE=0;b.MATERIAL_ALPHATEST=
1;b.MATERIAL_ALPHABLEND=2;b.MATERIAL_ALPHATESTANDBLEND=3;b.MATERIAL_NORMALBLENDMETHOD_WHITEOUT=0;b.MATERIAL_NORMALBLENDMETHOD_RNM=1;b._AllDirtyCallBack=function(a){return a.markAllAsDirty()};b._ImageProcessingDirtyCallBack=function(a){return a.markAsImageProcessingDirty()};b._TextureDirtyCallBack=function(a){return a.markAsTexturesDirty()};b._FresnelDirtyCallBack=function(a){return a.markAsFresnelDirty()};b._MiscDirtyCallBack=function(a){return a.markAsMiscDirty()};b._PrePassDirtyCallBack=function(a){return a.markAsPrePassDirty()};
b._LightsDirtyCallBack=function(a){return a.markAsLightDirty()};b._AttributeDirtyCallBack=function(a){return a.markAsAttributesDirty()};b._FresnelAndMiscDirtyCallBack=function(a){b._FresnelDirtyCallBack(a);b._MiscDirtyCallBack(a)};b._TextureAndMiscDirtyCallBack=function(a){b._TextureDirtyCallBack(a);b._MiscDirtyCallBack(a)};b._DirtyCallbackArray=[];b._RunDirtyCallBacks=function(a){for(var d=0,c=b._DirtyCallbackArray;d<c.length;d++)(0,c[d])(a)};Object(k.c)([Object(h.c)()],b.prototype,"id",void 0);
Object(k.c)([Object(h.c)()],b.prototype,"uniqueId",void 0);Object(k.c)([Object(h.c)()],b.prototype,"name",void 0);Object(k.c)([Object(h.c)()],b.prototype,"checkReadyOnEveryCall",void 0);Object(k.c)([Object(h.c)()],b.prototype,"checkReadyOnlyOnce",void 0);Object(k.c)([Object(h.c)()],b.prototype,"state",void 0);Object(k.c)([Object(h.c)("alpha")],b.prototype,"_alpha",void 0);Object(k.c)([Object(h.c)("backFaceCulling")],b.prototype,"_backFaceCulling",void 0);Object(k.c)([Object(h.c)()],b.prototype,"sideOrientation",
void 0);Object(k.c)([Object(h.c)("alphaMode")],b.prototype,"_alphaMode",void 0);Object(k.c)([Object(h.c)()],b.prototype,"_needDepthPrePass",void 0);Object(k.c)([Object(h.c)()],b.prototype,"disableDepthWrite",void 0);Object(k.c)([Object(h.c)()],b.prototype,"disableColorWrite",void 0);Object(k.c)([Object(h.c)()],b.prototype,"forceDepthWrite",void 0);Object(k.c)([Object(h.c)()],b.prototype,"depthFunction",void 0);Object(k.c)([Object(h.c)()],b.prototype,"separateCullingPass",void 0);Object(k.c)([Object(h.c)("fogEnabled")],
b.prototype,"_fogEnabled",void 0);Object(k.c)([Object(h.c)()],b.prototype,"pointSize",void 0);Object(k.c)([Object(h.c)()],b.prototype,"zOffset",void 0);Object(k.c)([Object(h.c)()],b.prototype,"pointsCloud",null);Object(k.c)([Object(h.c)()],b.prototype,"fillMode",null);Object(k.c)([Object(h.c)()],b.prototype,"transparencyMode",null);return b}()},dSHG:function(n,p,g){g.d(p,"a",function(){return c});var k=g("oYeq"),h=g("cdI9"),f=g("ADVu"),e=g("O+1A"),t=g("/eyM"),c=function(){function a(a){this._texture=
null;this.bumpLevel=this.roughnessBlendLevel=this.diffuseBlendLevel=1;this._normalBlendMethod=h.a.MATERIAL_NORMALBLENDMETHOD_WHITEOUT;this.isEnabled=this._isEnabled=!1;this._internalMarkAllSubMeshesAsTexturesDirty=a}a.prototype._markAllSubMeshesAsTexturesDirty=function(){this._internalMarkAllSubMeshesAsTexturesDirty()};a.prototype.isReadyForSubMesh=function(a,c){var d=c.getEngine();return a._areTexturesDirty&&c.texturesEnabled&&d.getCaps().standardDerivatives&&this._texture&&e.a.DetailTextureEnabled&&
!this._texture.isReady()?!1:!0};a.prototype.prepareDefines=function(a,c){this._isEnabled?(a.DETAIL_NORMALBLENDMETHOD=this._normalBlendMethod,c=c.getEngine(),a._areTexturesDirty&&(c.getCaps().standardDerivatives&&this._texture&&e.a.DetailTextureEnabled&&this._isEnabled?(t.a.PrepareDefinesForMergedUV(this._texture,a,"DETAIL"),a.DETAIL_NORMALBLENDMETHOD=this._normalBlendMethod):a.DETAIL=!1)):a.DETAIL=!1};a.prototype.bindForSubMesh=function(a,c,f){this._isEnabled&&(a.useUbo&&f&&a.isSync||!this._texture||
!e.a.DetailTextureEnabled||(a.updateFloat4("vDetailInfos",this._texture.coordinatesIndex,this.diffuseBlendLevel,this.bumpLevel,this.roughnessBlendLevel),t.a.BindTextureMatrix(this._texture,a,"detail")),c.texturesEnabled&&this._texture&&e.a.DetailTextureEnabled&&a.setTexture("detailSampler",this._texture))};a.prototype.hasTexture=function(a){return this._texture===a?!0:!1};a.prototype.getActiveTextures=function(a){this._texture&&a.push(this._texture)};a.prototype.getAnimatables=function(a){this._texture&&
this._texture.animations&&0<this._texture.animations.length&&a.push(this._texture)};a.prototype.dispose=function(a){var c;a&&(null===(c=this._texture)||void 0===c?void 0:c.dispose())};a.prototype.getClassName=function(){return"DetailMap"};a.AddUniforms=function(a){a.push("vDetailInfos")};a.AddSamplers=function(a){a.push("detailSampler")};a.PrepareUniformBuffer=function(a){a.addUniform("vDetailInfos",4);a.addUniform("detailMatrix",16)};a.prototype.copyTo=function(a){f.a.Clone(function(){return a},
this)};a.prototype.serialize=function(){return f.a.Serialize(this)};a.prototype.parse=function(a,c,e){var b=this;f.a.Parse(function(){return b},a,c,e)};Object(k.c)([Object(f.m)("detailTexture"),Object(f.b)("_markAllSubMeshesAsTexturesDirty")],a.prototype,"texture",void 0);Object(k.c)([Object(f.c)()],a.prototype,"diffuseBlendLevel",void 0);Object(k.c)([Object(f.c)()],a.prototype,"roughnessBlendLevel",void 0);Object(k.c)([Object(f.c)()],a.prototype,"bumpLevel",void 0);Object(k.c)([Object(f.c)(),Object(f.b)("_markAllSubMeshesAsTexturesDirty")],
a.prototype,"normalBlendMethod",void 0);Object(k.c)([Object(f.c)(),Object(f.b)("_markAllSubMeshesAsTexturesDirty")],a.prototype,"isEnabled",void 0);return a}()},jI0L:function(n,p,g){g.d(p,"a",function(){return f});var k=g("oYeq");n=g("cdI9");var h=g("cSa5");g=g("WHS4");var f=function(e){function f(c,a){c=e.call(this,c,a,!0)||this;a.multiMaterials.push(c);c.subMaterials=[];c._storeEffectOnSubMeshes=!0;return c}Object(k.d)(f,e);Object.defineProperty(f.prototype,"subMaterials",{get:function(){return this._subMaterials},
set:function(c){this._subMaterials=c;this._hookArray(c)},enumerable:!1,configurable:!0});f.prototype.getChildren=function(){return this.subMaterials};f.prototype._hookArray=function(c){var a=this,d=c.push;c.push=function(){for(var e=[],b=0;b<arguments.length;b++)e[b]=arguments[b];e=d.apply(c,e);a._markAllSubMeshesAsTexturesDirty();return e};var e=c.splice;c.splice=function(d,b){d=e.apply(c,[d,b]);a._markAllSubMeshesAsTexturesDirty();return d}};f.prototype.getSubMaterial=function(c){return 0>c||c>=
this.subMaterials.length?this.getScene().defaultMaterial:this.subMaterials[c]};f.prototype.getActiveTextures=function(){var c;return(c=e.prototype.getActiveTextures.call(this)).concat.apply(c,this.subMaterials.map(function(a){return a?a.getActiveTextures():[]}))};f.prototype.hasTexture=function(c){var a;if(e.prototype.hasTexture.call(this,c))return!0;for(var d=0;d<this.subMaterials.length;d++)if(null===(a=this.subMaterials[d])||void 0===a?0:a.hasTexture(c))return!0;return!1};f.prototype.getClassName=
function(){return"MultiMaterial"};f.prototype.isReadyForSubMesh=function(c,a,d){for(var e=0;e<this.subMaterials.length;e++){var f=this.subMaterials[e];if(f)if(f._storeEffectOnSubMeshes){if(!f.isReadyForSubMesh(c,a,d))return!1}else if(!f.isReady(c))return!1}return!0};f.prototype.clone=function(c,a){for(var d=new f(c,this.getScene()),e=0;e<this.subMaterials.length;e++){var h=this.subMaterials[e];h=a&&h?h.clone(c+"-"+h.name):this.subMaterials[e];d.subMaterials.push(h)}return d};f.prototype.serialize=
function(){var c={};c.name=this.name;c.id=this.id;h.a&&(c.tags=h.a.GetTags(this));c.materials=[];for(var a=0;a<this.subMaterials.length;a++){var d=this.subMaterials[a];d?c.materials.push(d.id):c.materials.push(null)}return c};f.prototype.dispose=function(c,a,d){var f=this.getScene();if(f){if(d)for(d=0;d<this.subMaterials.length;d++){var h=this.subMaterials[d];h&&h.dispose(c,a)}d=f.multiMaterials.indexOf(this);0<=d&&f.multiMaterials.splice(d,1);e.prototype.dispose.call(this,c,a)}};f.ParseMultiMaterial=
function(c,a){var d=new f(c.name,a);d.id=c.id;h.a&&h.a.AddTagsTo(d,c.tags);for(var e=0;e<c.materials.length;e++){var m=c.materials[e];m?d.subMaterials.push(a.getLastMaterialByID(m)):d.subMaterials.push(null)}return d};return f}(n.a);g.a.RegisteredTypes["BABYLON.MultiMaterial"]=f},kdvT:function(n,p,g){g.d(p,"a",function(){return A});var k=g("oYeq"),h=g("ADVu"),f=g("Bfey"),e=g("tVVT"),t=g("/SR9"),c=g("Xeau"),a=g("y4Ty"),d=g("1Xrb"),u=g("stmW"),m=g("cdI9");n=g("Qdxt");p=g("afLn");var b=g("/eyM"),r=g("aCSs"),
x=g("WHS4"),w=g("O+1A");g("lkEK");g("GlC4");var q=g("UpSL"),y=g("dSHG"),z={effect:null,subMesh:null},B=function(a){function b(){var b=a.call(this)||this;b.MAINUV1=!1;b.MAINUV2=!1;b.DIFFUSE=!1;b.DIFFUSEDIRECTUV=0;b.DETAIL=!1;b.DETAILDIRECTUV=0;b.DETAIL_NORMALBLENDMETHOD=0;b.AMBIENT=!1;b.AMBIENTDIRECTUV=0;b.OPACITY=!1;b.OPACITYDIRECTUV=0;b.OPACITYRGB=!1;b.REFLECTION=!1;b.EMISSIVE=!1;b.EMISSIVEDIRECTUV=0;b.SPECULAR=!1;b.SPECULARDIRECTUV=0;b.BUMP=!1;b.BUMPDIRECTUV=0;b.PARALLAX=!1;b.PARALLAXOCCLUSION=
!1;b.SPECULAROVERALPHA=!1;b.CLIPPLANE=!1;b.CLIPPLANE2=!1;b.CLIPPLANE3=!1;b.CLIPPLANE4=!1;b.CLIPPLANE5=!1;b.CLIPPLANE6=!1;b.ALPHATEST=!1;b.DEPTHPREPASS=!1;b.ALPHAFROMDIFFUSE=!1;b.POINTSIZE=!1;b.FOG=!1;b.SPECULARTERM=!1;b.DIFFUSEFRESNEL=!1;b.OPACITYFRESNEL=!1;b.REFLECTIONFRESNEL=!1;b.REFRACTIONFRESNEL=!1;b.EMISSIVEFRESNEL=!1;b.FRESNEL=!1;b.NORMAL=!1;b.UV1=!1;b.UV2=!1;b.VERTEXCOLOR=!1;b.VERTEXALPHA=!1;b.NUM_BONE_INFLUENCERS=0;b.BonesPerMesh=0;b.BONETEXTURE=!1;b.BONES_VELOCITY_ENABLED=!1;b.INSTANCES=
!1;b.THIN_INSTANCES=!1;b.GLOSSINESS=!1;b.ROUGHNESS=!1;b.EMISSIVEASILLUMINATION=!1;b.LINKEMISSIVEWITHDIFFUSE=!1;b.REFLECTIONFRESNELFROMSPECULAR=!1;b.LIGHTMAP=!1;b.LIGHTMAPDIRECTUV=0;b.OBJECTSPACE_NORMALMAP=!1;b.USELIGHTMAPASSHADOWMAP=!1;b.REFLECTIONMAP_3D=!1;b.REFLECTIONMAP_SPHERICAL=!1;b.REFLECTIONMAP_PLANAR=!1;b.REFLECTIONMAP_CUBIC=!1;b.USE_LOCAL_REFLECTIONMAP_CUBIC=!1;b.REFLECTIONMAP_PROJECTION=!1;b.REFLECTIONMAP_SKYBOX=!1;b.REFLECTIONMAP_EXPLICIT=!1;b.REFLECTIONMAP_EQUIRECTANGULAR=!1;b.REFLECTIONMAP_EQUIRECTANGULAR_FIXED=
!1;b.REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED=!1;b.INVERTCUBICMAP=!1;b.LOGARITHMICDEPTH=!1;b.REFRACTION=!1;b.REFRACTIONMAP_3D=!1;b.REFLECTIONOVERALPHA=!1;b.TWOSIDEDLIGHTING=!1;b.SHADOWFLOAT=!1;b.MORPHTARGETS=!1;b.MORPHTARGETS_NORMAL=!1;b.MORPHTARGETS_TANGENT=!1;b.MORPHTARGETS_UV=!1;b.NUM_MORPH_INFLUENCERS=0;b.NONUNIFORMSCALING=!1;b.PREMULTIPLYALPHA=!1;b.ALPHATEST_AFTERALLALPHACOMPUTATIONS=!1;b.ALPHABLEND=!0;b.PREPASS=!1;b.PREPASS_IRRADIANCE=!1;b.PREPASS_IRRADIANCE_INDEX=-1;b.PREPASS_ALBEDO=!1;
b.PREPASS_ALBEDO_INDEX=-1;b.PREPASS_DEPTHNORMAL=!1;b.PREPASS_DEPTHNORMAL_INDEX=-1;b.PREPASS_POSITION=!1;b.PREPASS_POSITION_INDEX=-1;b.PREPASS_VELOCITY=!1;b.PREPASS_VELOCITY_INDEX=-1;b.PREPASS_REFLECTIVITY=!1;b.PREPASS_REFLECTIVITY_INDEX=-1;b.SCENE_MRT_COUNT=0;b.RGBDLIGHTMAP=!1;b.RGBDREFLECTION=!1;b.RGBDREFRACTION=!1;b.IMAGEPROCESSING=!1;b.VIGNETTE=!1;b.VIGNETTEBLENDMODEMULTIPLY=!1;b.VIGNETTEBLENDMODEOPAQUE=!1;b.TONEMAPPING=!1;b.TONEMAPPING_ACES=!1;b.CONTRAST=!1;b.COLORCURVES=!1;b.COLORGRADING=!1;
b.COLORGRADING3D=!1;b.SAMPLER3DGREENDEPTH=!1;b.SAMPLER3DBGRMAP=!1;b.IMAGEPROCESSINGPOSTPROCESS=!1;b.MULTIVIEW=!1;b.IS_REFLECTION_LINEAR=!1;b.IS_REFRACTION_LINEAR=!1;b.EXPOSURE=!1;b.rebuild();return b}Object(k.d)(b,a);b.prototype.setReflectionMode=function(a){for(var b=0,c="REFLECTIONMAP_CUBIC REFLECTIONMAP_EXPLICIT REFLECTIONMAP_PLANAR REFLECTIONMAP_PROJECTION REFLECTIONMAP_PROJECTION REFLECTIONMAP_SKYBOX REFLECTIONMAP_SPHERICAL REFLECTIONMAP_EQUIRECTANGULAR REFLECTIONMAP_EQUIRECTANGULAR_FIXED REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED".split(" ");b<
c.length;b++){var d=c[b];this[d]=d===a}};return b}(n.a),A=function(g){function l(a,b){var e=g.call(this,a,b)||this;e._diffuseTexture=null;e._ambientTexture=null;e._opacityTexture=null;e._reflectionTexture=null;e._emissiveTexture=null;e._specularTexture=null;e._bumpTexture=null;e._lightmapTexture=null;e._refractionTexture=null;e.ambientColor=new c.a(0,0,0);e.diffuseColor=new c.a(1,1,1);e.specularColor=new c.a(1,1,1);e.emissiveColor=new c.a(0,0,0);e.specularPower=64;e._useAlphaFromDiffuseTexture=!1;
e._useEmissiveAsIllumination=!1;e._linkEmissiveWithDiffuse=!1;e._useSpecularOverAlpha=!1;e._useReflectionOverAlpha=!1;e._disableLighting=!1;e._useObjectSpaceNormalMap=!1;e._useParallax=!1;e._useParallaxOcclusion=!1;e.parallaxScaleBias=.05;e._roughness=0;e.indexOfRefraction=.98;e.invertRefractionY=!0;e.alphaCutOff=.4;e._useLightmapAsShadowmap=!1;e._useReflectionFresnelFromSpecular=!1;e._useGlossinessFromSpecularMapAlpha=!1;e._maxSimultaneousLights=4;e._invertNormalMapX=!1;e._invertNormalMapY=!1;e._twoSidedLighting=
!1;e.detailMap=new y.a(e._markAllSubMeshesAsTexturesDirty.bind(e));e._renderTargets=new f.a(16);e._worldViewProjectionMatrix=t.a.Zero();e._globalAmbientColor=new c.a(0,0,0);e._rebuildInParallel=!1;e._attachImageProcessingConfiguration(null);e.prePassConfiguration=new d.a;e.getRenderTargetTextures=function(){e._renderTargets.reset();l.ReflectionTextureEnabled&&e._reflectionTexture&&e._reflectionTexture.isRenderTarget&&e._renderTargets.push(e._reflectionTexture);l.RefractionTextureEnabled&&e._refractionTexture&&
e._refractionTexture.isRenderTarget&&e._renderTargets.push(e._refractionTexture);return e._renderTargets};return e}Object(k.d)(l,g);Object.defineProperty(l.prototype,"imageProcessingConfiguration",{get:function(){return this._imageProcessingConfiguration},set:function(a){this._attachImageProcessingConfiguration(a);this._markAllSubMeshesAsTexturesDirty()},enumerable:!1,configurable:!0});l.prototype._attachImageProcessingConfiguration=function(a){var b=this;a!==this._imageProcessingConfiguration&&(this._imageProcessingConfiguration&&
this._imageProcessingObserver&&this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver),this._imageProcessingConfiguration=a?a:this.getScene().imageProcessingConfiguration)&&(this._imageProcessingObserver=this._imageProcessingConfiguration.onUpdateParameters.add(function(){b._markAllSubMeshesAsImageProcessingDirty()}))};Object.defineProperty(l.prototype,"cameraColorCurvesEnabled",{get:function(){return this.imageProcessingConfiguration.colorCurvesEnabled},set:function(a){this.imageProcessingConfiguration.colorCurvesEnabled=
a},enumerable:!1,configurable:!0});Object.defineProperty(l.prototype,"cameraColorGradingEnabled",{get:function(){return this.imageProcessingConfiguration.colorGradingEnabled},set:function(a){this.imageProcessingConfiguration.colorGradingEnabled=a},enumerable:!1,configurable:!0});Object.defineProperty(l.prototype,"cameraToneMappingEnabled",{get:function(){return this._imageProcessingConfiguration.toneMappingEnabled},set:function(a){this._imageProcessingConfiguration.toneMappingEnabled=a},enumerable:!1,
configurable:!0});Object.defineProperty(l.prototype,"cameraExposure",{get:function(){return this._imageProcessingConfiguration.exposure},set:function(a){this._imageProcessingConfiguration.exposure=a},enumerable:!1,configurable:!0});Object.defineProperty(l.prototype,"cameraContrast",{get:function(){return this._imageProcessingConfiguration.contrast},set:function(a){this._imageProcessingConfiguration.contrast=a},enumerable:!1,configurable:!0});Object.defineProperty(l.prototype,"cameraColorGradingTexture",
{get:function(){return this._imageProcessingConfiguration.colorGradingTexture},set:function(a){this._imageProcessingConfiguration.colorGradingTexture=a},enumerable:!1,configurable:!0});Object.defineProperty(l.prototype,"cameraColorCurves",{get:function(){return this._imageProcessingConfiguration.colorCurves},set:function(a){this._imageProcessingConfiguration.colorCurves=a},enumerable:!1,configurable:!0});Object.defineProperty(l.prototype,"canRenderToMRT",{get:function(){return!0},enumerable:!1,configurable:!0});
Object.defineProperty(l.prototype,"hasRenderTargetTextures",{get:function(){return l.ReflectionTextureEnabled&&this._reflectionTexture&&this._reflectionTexture.isRenderTarget||l.RefractionTextureEnabled&&this._refractionTexture&&this._refractionTexture.isRenderTarget?!0:!1},enumerable:!1,configurable:!0});l.prototype.getClassName=function(){return"StandardMaterial"};Object.defineProperty(l.prototype,"useLogarithmicDepth",{get:function(){return this._useLogarithmicDepth},set:function(a){this._useLogarithmicDepth=
a&&this.getScene().getEngine().getCaps().fragmentDepthSupported;this._markAllSubMeshesAsMiscDirty()},enumerable:!1,configurable:!0});l.prototype.needAlphaBlending=function(){return this._disableAlphaBlending?!1:1>this.alpha||null!=this._opacityTexture||this._shouldUseAlphaFromDiffuseTexture()||this._opacityFresnelParameters&&this._opacityFresnelParameters.isEnabled};l.prototype.needAlphaTesting=function(){return this._forceAlphaTest?!0:this._hasAlphaChannel()&&(null==this._transparencyMode||this._transparencyMode===
m.a.MATERIAL_ALPHATEST)};l.prototype._shouldUseAlphaFromDiffuseTexture=function(){return null!=this._diffuseTexture&&this._diffuseTexture.hasAlpha&&this._useAlphaFromDiffuseTexture&&this._transparencyMode!==m.a.MATERIAL_OPAQUE};l.prototype._hasAlphaChannel=function(){return null!=this._diffuseTexture&&this._diffuseTexture.hasAlpha||null!=this._opacityTexture};l.prototype.getAlphaTestTexture=function(){return this._diffuseTexture};l.prototype.isReadyForSubMesh=function(c,e,f){void 0===f&&(f=!1);if(e.effect&&
this.isFrozen&&e.effect._wasPreviouslyReady)return!0;e._materialDefines||(e._materialDefines=new B);var h=this.getScene(),g=e._materialDefines;if(this._isReadyForSubMesh(e))return!0;var m=h.getEngine();g._needNormals=b.a.PrepareDefinesForLights(h,c,g,!0,this._maxSimultaneousLights,this._disableLighting);b.a.PrepareDefinesForMultiview(h,g);b.a.PrepareDefinesForPrePass(h,g,this.canRenderToMRT);if(g._areTexturesDirty){g._needUVs=!1;g.MAINUV1=!1;g.MAINUV2=!1;if(h.texturesEnabled){if(this._diffuseTexture&&
l.DiffuseTextureEnabled)if(this._diffuseTexture.isReadyOrNotBlocking())b.a.PrepareDefinesForMergedUV(this._diffuseTexture,g,"DIFFUSE");else return!1;else g.DIFFUSE=!1;if(this._ambientTexture&&l.AmbientTextureEnabled)if(this._ambientTexture.isReadyOrNotBlocking())b.a.PrepareDefinesForMergedUV(this._ambientTexture,g,"AMBIENT");else return!1;else g.AMBIENT=!1;if(this._opacityTexture&&l.OpacityTextureEnabled)if(this._opacityTexture.isReadyOrNotBlocking())b.a.PrepareDefinesForMergedUV(this._opacityTexture,
g,"OPACITY"),g.OPACITYRGB=this._opacityTexture.getAlphaFromRGB;else return!1;else g.OPACITY=!1;if(this._reflectionTexture&&l.ReflectionTextureEnabled)if(this._reflectionTexture.isReadyOrNotBlocking()){g._needNormals=!0;g.REFLECTION=!0;g.ROUGHNESS=0<this._roughness;g.REFLECTIONOVERALPHA=this._useReflectionOverAlpha;g.INVERTCUBICMAP=this._reflectionTexture.coordinatesMode===r.a.INVCUBIC_MODE;g.REFLECTIONMAP_3D=this._reflectionTexture.isCube;g.RGBDREFLECTION=this._reflectionTexture.isRGBD;switch(this._reflectionTexture.coordinatesMode){case r.a.EXPLICIT_MODE:g.setReflectionMode("REFLECTIONMAP_EXPLICIT");
break;case r.a.PLANAR_MODE:g.setReflectionMode("REFLECTIONMAP_PLANAR");break;case r.a.PROJECTION_MODE:g.setReflectionMode("REFLECTIONMAP_PROJECTION");break;case r.a.SKYBOX_MODE:g.setReflectionMode("REFLECTIONMAP_SKYBOX");break;case r.a.SPHERICAL_MODE:g.setReflectionMode("REFLECTIONMAP_SPHERICAL");break;case r.a.EQUIRECTANGULAR_MODE:g.setReflectionMode("REFLECTIONMAP_EQUIRECTANGULAR");break;case r.a.FIXED_EQUIRECTANGULAR_MODE:g.setReflectionMode("REFLECTIONMAP_EQUIRECTANGULAR_FIXED");break;case r.a.FIXED_EQUIRECTANGULAR_MIRRORED_MODE:g.setReflectionMode("REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED");
break;default:g.setReflectionMode("REFLECTIONMAP_CUBIC")}g.USE_LOCAL_REFLECTIONMAP_CUBIC=this._reflectionTexture.boundingBoxSize?!0:!1}else return!1;else g.REFLECTION=!1;if(this._emissiveTexture&&l.EmissiveTextureEnabled)if(this._emissiveTexture.isReadyOrNotBlocking())b.a.PrepareDefinesForMergedUV(this._emissiveTexture,g,"EMISSIVE");else return!1;else g.EMISSIVE=!1;if(this._lightmapTexture&&l.LightmapTextureEnabled)if(this._lightmapTexture.isReadyOrNotBlocking())b.a.PrepareDefinesForMergedUV(this._lightmapTexture,
g,"LIGHTMAP"),g.USELIGHTMAPASSHADOWMAP=this._useLightmapAsShadowmap,g.RGBDLIGHTMAP=this._lightmapTexture.isRGBD;else return!1;else g.LIGHTMAP=!1;if(this._specularTexture&&l.SpecularTextureEnabled)if(this._specularTexture.isReadyOrNotBlocking())b.a.PrepareDefinesForMergedUV(this._specularTexture,g,"SPECULAR"),g.GLOSSINESS=this._useGlossinessFromSpecularMapAlpha;else return!1;else g.SPECULAR=!1;if(h.getEngine().getCaps().standardDerivatives&&this._bumpTexture&&l.BumpTextureEnabled){if(this._bumpTexture.isReady())b.a.PrepareDefinesForMergedUV(this._bumpTexture,
g,"BUMP"),g.PARALLAX=this._useParallax,g.PARALLAXOCCLUSION=this._useParallaxOcclusion;else return!1;g.OBJECTSPACE_NORMALMAP=this._useObjectSpaceNormalMap}else g.BUMP=!1;if(this._refractionTexture&&l.RefractionTextureEnabled)if(this._refractionTexture.isReadyOrNotBlocking())g._needUVs=!0,g.REFRACTION=!0,g.REFRACTIONMAP_3D=this._refractionTexture.isCube,g.RGBDREFRACTION=this._refractionTexture.isRGBD;else return!1;else g.REFRACTION=!1;g.TWOSIDEDLIGHTING=!this._backFaceCulling&&this._twoSidedLighting}else g.DIFFUSE=
!1,g.AMBIENT=!1,g.OPACITY=!1,g.REFLECTION=!1,g.EMISSIVE=!1,g.LIGHTMAP=!1,g.BUMP=!1,g.REFRACTION=!1;g.ALPHAFROMDIFFUSE=this._shouldUseAlphaFromDiffuseTexture();g.EMISSIVEASILLUMINATION=this._useEmissiveAsIllumination;g.LINKEMISSIVEWITHDIFFUSE=this._linkEmissiveWithDiffuse;g.SPECULAROVERALPHA=this._useSpecularOverAlpha;g.PREMULTIPLYALPHA=7===this.alphaMode||8===this.alphaMode;g.ALPHATEST_AFTERALLALPHACOMPUTATIONS=null!==this.transparencyMode;g.ALPHABLEND=null===this.transparencyMode||this.needAlphaBlendingForMesh(c)}if(!this.detailMap.isReadyForSubMesh(g,
h))return!1;if(g._areImageProcessingDirty&&this._imageProcessingConfiguration){if(!this._imageProcessingConfiguration.isReady())return!1;this._imageProcessingConfiguration.prepareDefines(g);g.IS_REFLECTION_LINEAR=null!=this.reflectionTexture&&!this.reflectionTexture.gammaSpace;g.IS_REFRACTION_LINEAR=null!=this.refractionTexture&&!this.refractionTexture.gammaSpace}if(g._areFresnelDirty)if(l.FresnelEnabled){if(this._diffuseFresnelParameters||this._opacityFresnelParameters||this._emissiveFresnelParameters||
this._refractionFresnelParameters||this._reflectionFresnelParameters)g.DIFFUSEFRESNEL=this._diffuseFresnelParameters&&this._diffuseFresnelParameters.isEnabled,g.OPACITYFRESNEL=this._opacityFresnelParameters&&this._opacityFresnelParameters.isEnabled,g.REFLECTIONFRESNEL=this._reflectionFresnelParameters&&this._reflectionFresnelParameters.isEnabled,g.REFLECTIONFRESNELFROMSPECULAR=this._useReflectionFresnelFromSpecular,g.REFRACTIONFRESNEL=this._refractionFresnelParameters&&this._refractionFresnelParameters.isEnabled,
g.EMISSIVEFRESNEL=this._emissiveFresnelParameters&&this._emissiveFresnelParameters.isEnabled,g._needNormals=!0,g.FRESNEL=!0}else g.FRESNEL=!1;b.a.PrepareDefinesForMisc(c,h,this._useLogarithmicDepth,this.pointsCloud,this.fogEnabled,this._shouldTurnAlphaTestOn(c)||this._forceAlphaTest,g);b.a.PrepareDefinesForAttributes(c,g,!0,!0,!0);b.a.PrepareDefinesForFrameBoundValues(h,m,g,f,null,e.getRenderingMesh().hasThinInstances);this.detailMap.prepareDefines(g,h);if(g.isDirty){f=g._areLightsDisposed;g.markAsProcessed();
var k=new q.a;g.REFLECTION&&k.addFallback(0,"REFLECTION");g.SPECULAR&&k.addFallback(0,"SPECULAR");g.BUMP&&k.addFallback(0,"BUMP");g.PARALLAX&&k.addFallback(1,"PARALLAX");g.PARALLAXOCCLUSION&&k.addFallback(0,"PARALLAXOCCLUSION");g.SPECULAROVERALPHA&&k.addFallback(0,"SPECULAROVERALPHA");g.FOG&&k.addFallback(1,"FOG");g.POINTSIZE&&k.addFallback(0,"POINTSIZE");g.LOGARITHMICDEPTH&&k.addFallback(0,"LOGARITHMICDEPTH");b.a.HandleFallbacksForShadows(g,k,this._maxSimultaneousLights);g.SPECULARTERM&&k.addFallback(0,
"SPECULARTERM");g.DIFFUSEFRESNEL&&k.addFallback(1,"DIFFUSEFRESNEL");g.OPACITYFRESNEL&&k.addFallback(2,"OPACITYFRESNEL");g.REFLECTIONFRESNEL&&k.addFallback(3,"REFLECTIONFRESNEL");g.EMISSIVEFRESNEL&&k.addFallback(4,"EMISSIVEFRESNEL");g.FRESNEL&&k.addFallback(4,"FRESNEL");g.MULTIVIEW&&k.addFallback(0,"MULTIVIEW");var v=[a.b.PositionKind];g.NORMAL&&v.push(a.b.NormalKind);g.UV1&&v.push(a.b.UVKind);g.UV2&&v.push(a.b.UV2Kind);g.VERTEXCOLOR&&v.push(a.b.ColorKind);b.a.PrepareAttributesForBones(v,c,g,k);b.a.PrepareAttributesForInstances(v,
g);b.a.PrepareAttributesForMorphTargets(v,c,g);var n="default",p="world view viewProjection vEyePosition vLightsType vAmbientColor vDiffuseColor vSpecularColor vEmissiveColor visibility vFogInfos vFogColor pointSize vDiffuseInfos vAmbientInfos vOpacityInfos vReflectionInfos vEmissiveInfos vSpecularInfos vBumpInfos vLightmapInfos vRefractionInfos mBones vClipPlane vClipPlane2 vClipPlane3 vClipPlane4 vClipPlane5 vClipPlane6 diffuseMatrix ambientMatrix opacityMatrix reflectionMatrix emissiveMatrix specularMatrix bumpMatrix normalMatrix lightmapMatrix refractionMatrix diffuseLeftColor diffuseRightColor opacityParts reflectionLeftColor reflectionRightColor emissiveLeftColor emissiveRightColor refractionLeftColor refractionRightColor vReflectionPosition vReflectionSize logarithmicDepthConstant vTangentSpaceParams alphaCutOff boneTextureWidth".split(" "),
w="diffuseSampler ambientSampler opacitySampler reflectionCubeSampler reflection2DSampler emissiveSampler specularSampler bumpSampler lightmapSampler refractionCubeSampler refraction2DSampler boneSampler".split(" "),x=["Material","Scene"];y.a.AddUniforms(p);y.a.AddSamplers(w);d.a.AddUniforms(p);d.a.AddSamplers(p);u.a&&(u.a.PrepareUniforms(p,g),u.a.PrepareSamplers(w,g));b.a.PrepareUniformsAndSamplersList({uniformsNames:p,uniformBuffersNames:x,samplers:w,defines:g,maxSimultaneousLights:this._maxSimultaneousLights});
var t={};this.customShaderNameResolve&&(n=this.customShaderNameResolve(n,p,x,w,g,v,t));var C=g.toString();c=e.effect;if(m=h.getEngine().createEffect(n,{attributes:v,uniformsNames:p,uniformBuffersNames:x,samplers:w,defines:C,fallbacks:k,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:this._maxSimultaneousLights,maxSimultaneousMorphTargets:g.NUM_MORPH_INFLUENCERS},processFinalCode:t.processFinalCode,multiTarget:g.PREPASS},m))if(this._onEffectCreatedObservable&&
(z.effect=m,z.subMesh=e,this._onEffectCreatedObservable.notifyObservers(z)),this.allowShaderHotSwapping&&c&&!m.isReady()){if(this._rebuildInParallel=!0,g.markAsUnprocessed(),f)return g._areLightsDisposed=!0,!1}else this._rebuildInParallel=!1,h.resetCachedMaterial(),e.setEffect(m,g),this.buildUniformLayout()}if(!e.effect||!e.effect.isReady())return!1;g._renderId=h.getRenderId();return e.effect._wasPreviouslyReady=!0};l.prototype.buildUniformLayout=function(){var a=this._uniformBuffer;a.addUniform("diffuseLeftColor",
4);a.addUniform("diffuseRightColor",4);a.addUniform("opacityParts",4);a.addUniform("reflectionLeftColor",4);a.addUniform("reflectionRightColor",4);a.addUniform("refractionLeftColor",4);a.addUniform("refractionRightColor",4);a.addUniform("emissiveLeftColor",4);a.addUniform("emissiveRightColor",4);a.addUniform("vDiffuseInfos",2);a.addUniform("vAmbientInfos",2);a.addUniform("vOpacityInfos",2);a.addUniform("vReflectionInfos",2);a.addUniform("vReflectionPosition",3);a.addUniform("vReflectionSize",3);a.addUniform("vEmissiveInfos",
2);a.addUniform("vLightmapInfos",2);a.addUniform("vSpecularInfos",2);a.addUniform("vBumpInfos",3);a.addUniform("diffuseMatrix",16);a.addUniform("ambientMatrix",16);a.addUniform("opacityMatrix",16);a.addUniform("reflectionMatrix",16);a.addUniform("emissiveMatrix",16);a.addUniform("lightmapMatrix",16);a.addUniform("specularMatrix",16);a.addUniform("bumpMatrix",16);a.addUniform("vTangentSpaceParams",2);a.addUniform("pointSize",1);a.addUniform("refractionMatrix",16);a.addUniform("vRefractionInfos",4);
a.addUniform("vSpecularColor",4);a.addUniform("vEmissiveColor",3);a.addUniform("visibility",1);a.addUniform("vDiffuseColor",4);y.a.PrepareUniformBuffer(a);a.create()};l.prototype.unbind=function(){if(this._activeEffect){var a=!1;this._reflectionTexture&&this._reflectionTexture.isRenderTarget&&(this._activeEffect.setTexture("reflection2DSampler",null),a=!0);this._refractionTexture&&this._refractionTexture.isRenderTarget&&(this._activeEffect.setTexture("refraction2DSampler",null),a=!0);a&&this._markAllSubMeshesAsTexturesDirty()}g.prototype.unbind.call(this)};
l.prototype.bindForSubMesh=function(a,d,f){var g=this.getScene(),h=f._materialDefines;if(h&&(f=f.effect)){this._activeEffect=f;h.INSTANCES&&!h.THIN_INSTANCES||this.bindOnlyWorldMatrix(a);this.prePassConfiguration.bindForSubMesh(this._activeEffect,g,d,a,this.isFrozen);h.OBJECTSPACE_NORMALMAP&&(a.toNormalMatrix(this._normalMatrix),this.bindOnlyNormalMatrix(this._normalMatrix));a=this._mustRebind(g,f,d.visibility);b.a.BindBonesParameters(d,f);var k=this._uniformBuffer;if(a){k.bindToEffect(f,"Material");
this.bindViewProjection(f);if(!k.useUbo||!this.isFrozen||!k.isSync){l.FresnelEnabled&&h.FRESNEL&&(this.diffuseFresnelParameters&&this.diffuseFresnelParameters.isEnabled&&(k.updateColor4("diffuseLeftColor",this.diffuseFresnelParameters.leftColor,this.diffuseFresnelParameters.power),k.updateColor4("diffuseRightColor",this.diffuseFresnelParameters.rightColor,this.diffuseFresnelParameters.bias)),this.opacityFresnelParameters&&this.opacityFresnelParameters.isEnabled&&k.updateColor4("opacityParts",new c.a(this.opacityFresnelParameters.leftColor.toLuminance(),
this.opacityFresnelParameters.rightColor.toLuminance(),this.opacityFresnelParameters.bias),this.opacityFresnelParameters.power),this.reflectionFresnelParameters&&this.reflectionFresnelParameters.isEnabled&&(k.updateColor4("reflectionLeftColor",this.reflectionFresnelParameters.leftColor,this.reflectionFresnelParameters.power),k.updateColor4("reflectionRightColor",this.reflectionFresnelParameters.rightColor,this.reflectionFresnelParameters.bias)),this.refractionFresnelParameters&&this.refractionFresnelParameters.isEnabled&&
(k.updateColor4("refractionLeftColor",this.refractionFresnelParameters.leftColor,this.refractionFresnelParameters.power),k.updateColor4("refractionRightColor",this.refractionFresnelParameters.rightColor,this.refractionFresnelParameters.bias)),this.emissiveFresnelParameters&&this.emissiveFresnelParameters.isEnabled&&(k.updateColor4("emissiveLeftColor",this.emissiveFresnelParameters.leftColor,this.emissiveFresnelParameters.power),k.updateColor4("emissiveRightColor",this.emissiveFresnelParameters.rightColor,
this.emissiveFresnelParameters.bias)));if(g.texturesEnabled){this._diffuseTexture&&l.DiffuseTextureEnabled&&(k.updateFloat2("vDiffuseInfos",this._diffuseTexture.coordinatesIndex,this._diffuseTexture.level),b.a.BindTextureMatrix(this._diffuseTexture,k,"diffuse"));this._ambientTexture&&l.AmbientTextureEnabled&&(k.updateFloat2("vAmbientInfos",this._ambientTexture.coordinatesIndex,this._ambientTexture.level),b.a.BindTextureMatrix(this._ambientTexture,k,"ambient"));this._opacityTexture&&l.OpacityTextureEnabled&&
(k.updateFloat2("vOpacityInfos",this._opacityTexture.coordinatesIndex,this._opacityTexture.level),b.a.BindTextureMatrix(this._opacityTexture,k,"opacity"));this._hasAlphaChannel()&&f.setFloat("alphaCutOff",this.alphaCutOff);if(this._reflectionTexture&&l.ReflectionTextureEnabled&&(k.updateFloat2("vReflectionInfos",this._reflectionTexture.level,this.roughness),k.updateMatrix("reflectionMatrix",this._reflectionTexture.getReflectionTextureMatrix()),this._reflectionTexture.boundingBoxSize)){var m=this._reflectionTexture;
k.updateVector3("vReflectionPosition",m.boundingBoxPosition);k.updateVector3("vReflectionSize",m.boundingBoxSize)}this._emissiveTexture&&l.EmissiveTextureEnabled&&(k.updateFloat2("vEmissiveInfos",this._emissiveTexture.coordinatesIndex,this._emissiveTexture.level),b.a.BindTextureMatrix(this._emissiveTexture,k,"emissive"));this._lightmapTexture&&l.LightmapTextureEnabled&&(k.updateFloat2("vLightmapInfos",this._lightmapTexture.coordinatesIndex,this._lightmapTexture.level),b.a.BindTextureMatrix(this._lightmapTexture,
k,"lightmap"));this._specularTexture&&l.SpecularTextureEnabled&&(k.updateFloat2("vSpecularInfos",this._specularTexture.coordinatesIndex,this._specularTexture.level),b.a.BindTextureMatrix(this._specularTexture,k,"specular"));this._bumpTexture&&g.getEngine().getCaps().standardDerivatives&&l.BumpTextureEnabled&&(k.updateFloat3("vBumpInfos",this._bumpTexture.coordinatesIndex,1/this._bumpTexture.level,this.parallaxScaleBias),b.a.BindTextureMatrix(this._bumpTexture,k,"bump"),g._mirroredCameraPosition?k.updateFloat2("vTangentSpaceParams",
this._invertNormalMapX?1:-1,this._invertNormalMapY?1:-1):k.updateFloat2("vTangentSpaceParams",this._invertNormalMapX?-1:1,this._invertNormalMapY?-1:1));this._refractionTexture&&l.RefractionTextureEnabled&&(m=1,this._refractionTexture.isCube||(k.updateMatrix("refractionMatrix",this._refractionTexture.getReflectionTextureMatrix()),this._refractionTexture.depth&&(m=this._refractionTexture.depth)),k.updateFloat4("vRefractionInfos",this._refractionTexture.level,this.indexOfRefraction,m,this.invertRefractionY?
-1:1))}this.pointsCloud&&k.updateFloat("pointSize",this.pointSize);h.SPECULARTERM&&k.updateColor4("vSpecularColor",this.specularColor,this.specularPower);k.updateColor3("vEmissiveColor",l.EmissiveTextureEnabled?this.emissiveColor:c.a.BlackReadOnly);k.updateColor4("vDiffuseColor",this.diffuseColor,this.alpha)}k.updateFloat("visibility",d.visibility);g.texturesEnabled&&(this._diffuseTexture&&l.DiffuseTextureEnabled&&f.setTexture("diffuseSampler",this._diffuseTexture),this._ambientTexture&&l.AmbientTextureEnabled&&
f.setTexture("ambientSampler",this._ambientTexture),this._opacityTexture&&l.OpacityTextureEnabled&&f.setTexture("opacitySampler",this._opacityTexture),this._reflectionTexture&&l.ReflectionTextureEnabled&&(this._reflectionTexture.isCube?f.setTexture("reflectionCubeSampler",this._reflectionTexture):f.setTexture("reflection2DSampler",this._reflectionTexture)),this._emissiveTexture&&l.EmissiveTextureEnabled&&f.setTexture("emissiveSampler",this._emissiveTexture),this._lightmapTexture&&l.LightmapTextureEnabled&&
f.setTexture("lightmapSampler",this._lightmapTexture),this._specularTexture&&l.SpecularTextureEnabled&&f.setTexture("specularSampler",this._specularTexture),this._bumpTexture&&g.getEngine().getCaps().standardDerivatives&&l.BumpTextureEnabled&&f.setTexture("bumpSampler",this._bumpTexture),this._refractionTexture&&l.RefractionTextureEnabled&&(this._refractionTexture.isCube?f.setTexture("refractionCubeSampler",this._refractionTexture):f.setTexture("refraction2DSampler",this._refractionTexture)));this.detailMap.bindForSubMesh(k,
g,this.isFrozen);b.a.BindClipPlane(f,g);g.ambientColor.multiplyToRef(this.ambientColor,this._globalAmbientColor);b.a.BindEyePosition(f,g);f.setColor3("vAmbientColor",this._globalAmbientColor)}if(a||!this.isFrozen)g.lightsEnabled&&!this._disableLighting&&b.a.BindLights(g,d,f,h,this._maxSimultaneousLights,this._rebuildInParallel),(g.fogEnabled&&d.applyFog&&g.fogMode!==e.a.FOGMODE_NONE||this._reflectionTexture||this._refractionTexture)&&this.bindView(f),b.a.BindFogParameters(g,d,f),h.NUM_MORPH_INFLUENCERS&&
b.a.BindMorphTargetParameters(d,f),this.useLogarithmicDepth&&b.a.BindLogDepth(h,f,g),this._imageProcessingConfiguration&&!this._imageProcessingConfiguration.applyByPostProcess&&this._imageProcessingConfiguration.bind(this._activeEffect);k.update();this._afterBind(d,this._activeEffect)}};l.prototype.getAnimatables=function(){var a=[];this._diffuseTexture&&this._diffuseTexture.animations&&0<this._diffuseTexture.animations.length&&a.push(this._diffuseTexture);this._ambientTexture&&this._ambientTexture.animations&&
0<this._ambientTexture.animations.length&&a.push(this._ambientTexture);this._opacityTexture&&this._opacityTexture.animations&&0<this._opacityTexture.animations.length&&a.push(this._opacityTexture);this._reflectionTexture&&this._reflectionTexture.animations&&0<this._reflectionTexture.animations.length&&a.push(this._reflectionTexture);this._emissiveTexture&&this._emissiveTexture.animations&&0<this._emissiveTexture.animations.length&&a.push(this._emissiveTexture);this._specularTexture&&this._specularTexture.animations&&
0<this._specularTexture.animations.length&&a.push(this._specularTexture);this._bumpTexture&&this._bumpTexture.animations&&0<this._bumpTexture.animations.length&&a.push(this._bumpTexture);this._lightmapTexture&&this._lightmapTexture.animations&&0<this._lightmapTexture.animations.length&&a.push(this._lightmapTexture);this._refractionTexture&&this._refractionTexture.animations&&0<this._refractionTexture.animations.length&&a.push(this._refractionTexture);this.detailMap.getAnimatables(a);return a};l.prototype.getActiveTextures=
function(){var a=g.prototype.getActiveTextures.call(this);this._diffuseTexture&&a.push(this._diffuseTexture);this._ambientTexture&&a.push(this._ambientTexture);this._opacityTexture&&a.push(this._opacityTexture);this._reflectionTexture&&a.push(this._reflectionTexture);this._emissiveTexture&&a.push(this._emissiveTexture);this._specularTexture&&a.push(this._specularTexture);this._bumpTexture&&a.push(this._bumpTexture);this._lightmapTexture&&a.push(this._lightmapTexture);this._refractionTexture&&a.push(this._refractionTexture);
this.detailMap.getActiveTextures(a);return a};l.prototype.hasTexture=function(a){return g.prototype.hasTexture.call(this,a)||this._diffuseTexture===a||this._ambientTexture===a||this._opacityTexture===a||this._reflectionTexture===a||this._emissiveTexture===a||this._specularTexture===a||this._bumpTexture===a||this._lightmapTexture===a||this._refractionTexture===a?!0:this.detailMap.hasTexture(a)};l.prototype.dispose=function(a,b){var c,d,e,f,h,k,m,l,r;b&&(null===(c=this._diffuseTexture)||void 0===c?
void 0:c.dispose(),null===(d=this._ambientTexture)||void 0===d?void 0:d.dispose(),null===(e=this._opacityTexture)||void 0===e?void 0:e.dispose(),null===(f=this._reflectionTexture)||void 0===f?void 0:f.dispose(),null===(h=this._emissiveTexture)||void 0===h?void 0:h.dispose(),null===(k=this._specularTexture)||void 0===k?void 0:k.dispose(),null===(m=this._bumpTexture)||void 0===m?void 0:m.dispose(),null===(l=this._lightmapTexture)||void 0===l?void 0:l.dispose(),null===(r=this._refractionTexture)||void 0===
r?void 0:r.dispose());this.detailMap.dispose(b);this._imageProcessingConfiguration&&this._imageProcessingObserver&&this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver);g.prototype.dispose.call(this,a,b)};l.prototype.clone=function(a){var b=this,c=h.a.Clone(function(){return new l(a,b.getScene())},this);c.name=a;c.id=a;return c};l.prototype.serialize=function(){return h.a.Serialize(this)};l.Parse=function(a,b,c){return h.a.Parse(function(){return new l(a.name,
b)},a,b,c)};Object.defineProperty(l,"DiffuseTextureEnabled",{get:function(){return w.a.DiffuseTextureEnabled},set:function(a){w.a.DiffuseTextureEnabled=a},enumerable:!1,configurable:!0});Object.defineProperty(l,"DetailTextureEnabled",{get:function(){return w.a.DetailTextureEnabled},set:function(a){w.a.DetailTextureEnabled=a},enumerable:!1,configurable:!0});Object.defineProperty(l,"AmbientTextureEnabled",{get:function(){return w.a.AmbientTextureEnabled},set:function(a){w.a.AmbientTextureEnabled=a},
enumerable:!1,configurable:!0});Object.defineProperty(l,"OpacityTextureEnabled",{get:function(){return w.a.OpacityTextureEnabled},set:function(a){w.a.OpacityTextureEnabled=a},enumerable:!1,configurable:!0});Object.defineProperty(l,"ReflectionTextureEnabled",{get:function(){return w.a.ReflectionTextureEnabled},set:function(a){w.a.ReflectionTextureEnabled=a},enumerable:!1,configurable:!0});Object.defineProperty(l,"EmissiveTextureEnabled",{get:function(){return w.a.EmissiveTextureEnabled},set:function(a){w.a.EmissiveTextureEnabled=
a},enumerable:!1,configurable:!0});Object.defineProperty(l,"SpecularTextureEnabled",{get:function(){return w.a.SpecularTextureEnabled},set:function(a){w.a.SpecularTextureEnabled=a},enumerable:!1,configurable:!0});Object.defineProperty(l,"BumpTextureEnabled",{get:function(){return w.a.BumpTextureEnabled},set:function(a){w.a.BumpTextureEnabled=a},enumerable:!1,configurable:!0});Object.defineProperty(l,"LightmapTextureEnabled",{get:function(){return w.a.LightmapTextureEnabled},set:function(a){w.a.LightmapTextureEnabled=
a},enumerable:!1,configurable:!0});Object.defineProperty(l,"RefractionTextureEnabled",{get:function(){return w.a.RefractionTextureEnabled},set:function(a){w.a.RefractionTextureEnabled=a},enumerable:!1,configurable:!0});Object.defineProperty(l,"ColorGradingTextureEnabled",{get:function(){return w.a.ColorGradingTextureEnabled},set:function(a){w.a.ColorGradingTextureEnabled=a},enumerable:!1,configurable:!0});Object.defineProperty(l,"FresnelEnabled",{get:function(){return w.a.FresnelEnabled},set:function(a){w.a.FresnelEnabled=
a},enumerable:!1,configurable:!0});Object(k.c)([Object(h.m)("diffuseTexture")],l.prototype,"_diffuseTexture",void 0);Object(k.c)([Object(h.b)("_markAllSubMeshesAsTexturesAndMiscDirty")],l.prototype,"diffuseTexture",void 0);Object(k.c)([Object(h.m)("ambientTexture")],l.prototype,"_ambientTexture",void 0);Object(k.c)([Object(h.b)("_markAllSubMeshesAsTexturesDirty")],l.prototype,"ambientTexture",void 0);Object(k.c)([Object(h.m)("opacityTexture")],l.prototype,"_opacityTexture",void 0);Object(k.c)([Object(h.b)("_markAllSubMeshesAsTexturesAndMiscDirty")],
l.prototype,"opacityTexture",void 0);Object(k.c)([Object(h.m)("reflectionTexture")],l.prototype,"_reflectionTexture",void 0);Object(k.c)([Object(h.b)("_markAllSubMeshesAsTexturesDirty")],l.prototype,"reflectionTexture",void 0);Object(k.c)([Object(h.m)("emissiveTexture")],l.prototype,"_emissiveTexture",void 0);Object(k.c)([Object(h.b)("_markAllSubMeshesAsTexturesDirty")],l.prototype,"emissiveTexture",void 0);Object(k.c)([Object(h.m)("specularTexture")],l.prototype,"_specularTexture",void 0);Object(k.c)([Object(h.b)("_markAllSubMeshesAsTexturesDirty")],
l.prototype,"specularTexture",void 0);Object(k.c)([Object(h.m)("bumpTexture")],l.prototype,"_bumpTexture",void 0);Object(k.c)([Object(h.b)("_markAllSubMeshesAsTexturesDirty")],l.prototype,"bumpTexture",void 0);Object(k.c)([Object(h.m)("lightmapTexture")],l.prototype,"_lightmapTexture",void 0);Object(k.c)([Object(h.b)("_markAllSubMeshesAsTexturesDirty")],l.prototype,"lightmapTexture",void 0);Object(k.c)([Object(h.m)("refractionTexture")],l.prototype,"_refractionTexture",void 0);Object(k.c)([Object(h.b)("_markAllSubMeshesAsTexturesDirty")],
l.prototype,"refractionTexture",void 0);Object(k.c)([Object(h.e)("ambient")],l.prototype,"ambientColor",void 0);Object(k.c)([Object(h.e)("diffuse")],l.prototype,"diffuseColor",void 0);Object(k.c)([Object(h.e)("specular")],l.prototype,"specularColor",void 0);Object(k.c)([Object(h.e)("emissive")],l.prototype,"emissiveColor",void 0);Object(k.c)([Object(h.c)()],l.prototype,"specularPower",void 0);Object(k.c)([Object(h.c)("useAlphaFromDiffuseTexture")],l.prototype,"_useAlphaFromDiffuseTexture",void 0);
Object(k.c)([Object(h.b)("_markAllSubMeshesAsTexturesAndMiscDirty")],l.prototype,"useAlphaFromDiffuseTexture",void 0);Object(k.c)([Object(h.c)("useEmissiveAsIllumination")],l.prototype,"_useEmissiveAsIllumination",void 0);Object(k.c)([Object(h.b)("_markAllSubMeshesAsTexturesDirty")],l.prototype,"useEmissiveAsIllumination",void 0);Object(k.c)([Object(h.c)("linkEmissiveWithDiffuse")],l.prototype,"_linkEmissiveWithDiffuse",void 0);Object(k.c)([Object(h.b)("_markAllSubMeshesAsTexturesDirty")],l.prototype,
"linkEmissiveWithDiffuse",void 0);Object(k.c)([Object(h.c)("useSpecularOverAlpha")],l.prototype,"_useSpecularOverAlpha",void 0);Object(k.c)([Object(h.b)("_markAllSubMeshesAsTexturesDirty")],l.prototype,"useSpecularOverAlpha",void 0);Object(k.c)([Object(h.c)("useReflectionOverAlpha")],l.prototype,"_useReflectionOverAlpha",void 0);Object(k.c)([Object(h.b)("_markAllSubMeshesAsTexturesDirty")],l.prototype,"useReflectionOverAlpha",void 0);Object(k.c)([Object(h.c)("disableLighting")],l.prototype,"_disableLighting",
void 0);Object(k.c)([Object(h.b)("_markAllSubMeshesAsLightsDirty")],l.prototype,"disableLighting",void 0);Object(k.c)([Object(h.c)("useObjectSpaceNormalMap")],l.prototype,"_useObjectSpaceNormalMap",void 0);Object(k.c)([Object(h.b)("_markAllSubMeshesAsTexturesDirty")],l.prototype,"useObjectSpaceNormalMap",void 0);Object(k.c)([Object(h.c)("useParallax")],l.prototype,"_useParallax",void 0);Object(k.c)([Object(h.b)("_markAllSubMeshesAsTexturesDirty")],l.prototype,"useParallax",void 0);Object(k.c)([Object(h.c)("useParallaxOcclusion")],
l.prototype,"_useParallaxOcclusion",void 0);Object(k.c)([Object(h.b)("_markAllSubMeshesAsTexturesDirty")],l.prototype,"useParallaxOcclusion",void 0);Object(k.c)([Object(h.c)()],l.prototype,"parallaxScaleBias",void 0);Object(k.c)([Object(h.c)("roughness")],l.prototype,"_roughness",void 0);Object(k.c)([Object(h.b)("_markAllSubMeshesAsTexturesDirty")],l.prototype,"roughness",void 0);Object(k.c)([Object(h.c)()],l.prototype,"indexOfRefraction",void 0);Object(k.c)([Object(h.c)()],l.prototype,"invertRefractionY",
void 0);Object(k.c)([Object(h.c)()],l.prototype,"alphaCutOff",void 0);Object(k.c)([Object(h.c)("useLightmapAsShadowmap")],l.prototype,"_useLightmapAsShadowmap",void 0);Object(k.c)([Object(h.b)("_markAllSubMeshesAsTexturesDirty")],l.prototype,"useLightmapAsShadowmap",void 0);Object(k.c)([Object(h.h)("diffuseFresnelParameters")],l.prototype,"_diffuseFresnelParameters",void 0);Object(k.c)([Object(h.b)("_markAllSubMeshesAsFresnelDirty")],l.prototype,"diffuseFresnelParameters",void 0);Object(k.c)([Object(h.h)("opacityFresnelParameters")],
l.prototype,"_opacityFresnelParameters",void 0);Object(k.c)([Object(h.b)("_markAllSubMeshesAsFresnelAndMiscDirty")],l.prototype,"opacityFresnelParameters",void 0);Object(k.c)([Object(h.h)("reflectionFresnelParameters")],l.prototype,"_reflectionFresnelParameters",void 0);Object(k.c)([Object(h.b)("_markAllSubMeshesAsFresnelDirty")],l.prototype,"reflectionFresnelParameters",void 0);Object(k.c)([Object(h.h)("refractionFresnelParameters")],l.prototype,"_refractionFresnelParameters",void 0);Object(k.c)([Object(h.b)("_markAllSubMeshesAsFresnelDirty")],
l.prototype,"refractionFresnelParameters",void 0);Object(k.c)([Object(h.h)("emissiveFresnelParameters")],l.prototype,"_emissiveFresnelParameters",void 0);Object(k.c)([Object(h.b)("_markAllSubMeshesAsFresnelDirty")],l.prototype,"emissiveFresnelParameters",void 0);Object(k.c)([Object(h.c)("useReflectionFresnelFromSpecular")],l.prototype,"_useReflectionFresnelFromSpecular",void 0);Object(k.c)([Object(h.b)("_markAllSubMeshesAsFresnelDirty")],l.prototype,"useReflectionFresnelFromSpecular",void 0);Object(k.c)([Object(h.c)("useGlossinessFromSpecularMapAlpha")],
l.prototype,"_useGlossinessFromSpecularMapAlpha",void 0);Object(k.c)([Object(h.b)("_markAllSubMeshesAsTexturesDirty")],l.prototype,"useGlossinessFromSpecularMapAlpha",void 0);Object(k.c)([Object(h.c)("maxSimultaneousLights")],l.prototype,"_maxSimultaneousLights",void 0);Object(k.c)([Object(h.b)("_markAllSubMeshesAsLightsDirty")],l.prototype,"maxSimultaneousLights",void 0);Object(k.c)([Object(h.c)("invertNormalMapX")],l.prototype,"_invertNormalMapX",void 0);Object(k.c)([Object(h.b)("_markAllSubMeshesAsTexturesDirty")],
l.prototype,"invertNormalMapX",void 0);Object(k.c)([Object(h.c)("invertNormalMapY")],l.prototype,"_invertNormalMapY",void 0);Object(k.c)([Object(h.b)("_markAllSubMeshesAsTexturesDirty")],l.prototype,"invertNormalMapY",void 0);Object(k.c)([Object(h.c)("twoSidedLighting")],l.prototype,"_twoSidedLighting",void 0);Object(k.c)([Object(h.b)("_markAllSubMeshesAsTexturesDirty")],l.prototype,"twoSidedLighting",void 0);Object(k.c)([Object(h.c)()],l.prototype,"useLogarithmicDepth",null);return l}(p.a);x.a.RegisteredTypes["BABYLON.StandardMaterial"]=
A;e.a.DefaultMaterialFactory=function(a){return new A("default material",a)}},lcUQ:function(n,p,g){g.d(p,"b",function(){return t.a});g.d(p,"a",function(){return c.a});g("GICC");g("0YF5");g("UpSL");var k=g("Z6Y1"),h=g("Dc3z"),f=g("Xeau"),e=g("qUIE");n=g("ADVu");p=function(){function a(a){void 0===a&&(a={});this._isEnabled=!0;this.bias=void 0===a.bias?0:a.bias;this.power=void 0===a.power?1:a.power;this.leftColor=a.leftColor||f.a.White();this.rightColor=a.rightColor||f.a.Black();!1===a.isEnabled&&(this.isEnabled=
!1)}Object.defineProperty(a.prototype,"isEnabled",{get:function(){return this._isEnabled},set:function(a){this._isEnabled!==a&&(this._isEnabled=a,e.a.MarkAllMaterialsAsDirty(20))},enumerable:!1,configurable:!0});a.prototype.clone=function(){var b=new a;h.a.DeepCopy(this,b);return b};a.prototype.equals=function(a){return a&&this.bias===a.bias&&this.power===a.power&&this.leftColor.equals(a.leftColor)&&this.rightColor.equals(a.rightColor)&&this.isEnabled===a.isEnabled};a.prototype.serialize=function(){return{isEnabled:this.isEnabled,
leftColor:this.leftColor.asArray(),rightColor:this.rightColor.asArray(),bias:this.bias,power:this.power}};a.Parse=function(b){return new a({isEnabled:b.isEnabled,leftColor:f.a.FromArray(b.leftColor),rightColor:f.a.FromArray(b.rightColor),bias:b.bias,power:b.power||1})};return a}();n.a._FresnelParametersParser=p.Parse;g("stmW");g("cdI9");g("Qdxt");g("QCD/");g("/eyM");g("jI0L");g("mVZL");g("afLn");g("NDL1");var t=g("kdvT"),c=g("+z/8");g("Qmvu");g("O+1A");g("EPWA");g("Vc1k");var a=g("FQ8M"),d=g("RLC9"),
u=function(){function a(){this.mm=new Map}a.prototype.get=function(a,c){a=this.mm.get(a);if(void 0!==a)return a.get(c)};a.prototype.set=function(a,c,d){var b=this.mm.get(a);void 0===b&&this.mm.set(a,b=new Map);b.set(c,d)};return a}();(function(){function c(a,c,e){var b=this;this._baseMaterial=a;this._scene=c;this._options=e;this._subMeshToEffect=new Map;this._subMeshToDepthEffect=new u;this._meshes=new Map;if(c="NodeMaterial"===a.getClassName()?"u_":"")for(this._matriceNames={world:c+"World",view:c+
"View",projection:c+"Projection",viewProjection:c+"ViewProjection",worldView:c+"WorldxView",worldViewProjection:c+"WorldxViewxProjection"},a=a.getInputBlocks(),c=0;c<a.length;++c)switch(a[c]._systemValue){case d.a.World:this._matriceNames.world=a[c].associatedVariableName;break;case d.a.View:this._matriceNames.view=a[c].associatedVariableName;break;case d.a.Projection:this._matriceNames.projection=a[c].associatedVariableName;break;case d.a.ViewProjection:this._matriceNames.viewProjection=a[c].associatedVariableName;
break;case d.a.WorldView:this._matriceNames.worldView=a[c].associatedVariableName;break;case d.a.WorldViewProjection:this._matriceNames.worldViewProjection=a[c].associatedVariableName}else this._matriceNames={world:c+"world",view:c+"view",projection:c+"projection",viewProjection:c+"viewProjection",worldView:c+"worldView",worldViewProjection:c+"worldViewProjection"};this._onEffectCreatedObserver=this._baseMaterial.onEffectCreatedObservable.add(function(a){var c,d=null===(c=a.subMesh)||void 0===c?void 0:
c.getMesh();d&&!b._meshes.has(d)&&b._meshes.set(d,d.onDisposeObservable.add(function(a){for(var c=b._subMeshToEffect.keys(),d=c.next();!0!==d.done;d=c.next())d=d.value,(null===d||void 0===d?void 0:d.getMesh())===a&&(b._subMeshToEffect.delete(d),b._subMeshToDepthEffect.mm.delete(d))}));b._subMeshToEffect.set(a.subMesh,a.effect);b._subMeshToDepthEffect.mm.delete(a.subMesh)})}Object.defineProperty(c.prototype,"standalone",{get:function(){var a,c;return null!==(c=null===(a=this._options)||void 0===a?
void 0:a.standalone)&&void 0!==c?c:!1},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"baseMaterial",{get:function(){return this._baseMaterial},enumerable:!1,configurable:!0});c.prototype.getEffect=function(a,c){var b,d,e,f,g,h;return null!==(h=null!==(e=null===(d=null===(b=this._subMeshToDepthEffect.mm.get(a))||void 0===b?void 0:b.get(c))||void 0===d?void 0:d.depthEffect)&&void 0!==e?e:null===(g=null===(f=this._subMeshToDepthEffect.mm.get(null))||void 0===f?void 0:f.get(c))||void 0===
g?void 0:g.depthEffect)&&void 0!==h?h:null};c.prototype.isReadyForSubMesh=function(a,c,d,e){var b,f;this.standalone&&this._baseMaterial.isReadyForSubMesh(a.getMesh(),a,e);return null!==(f=null===(b=this._makeEffect(a,c,d))||void 0===b?void 0:b.isReady())&&void 0!==f?f:!1};c.prototype.dispose=function(){this._baseMaterial.onEffectCreatedObservable.remove(this._onEffectCreatedObserver);this._onEffectCreatedObserver=null;for(var a=this._meshes.entries(),c=a.next();!0!==c.done;c=a.next())c=c.value,c[0].onDisposeObservable.remove(c[1])};
c.prototype._makeEffect=function(b,c,d){var e,f=null!==(e=this._subMeshToEffect.get(b))&&void 0!==e?e:this._subMeshToEffect.get(null);if(!f)return null;e=this._subMeshToDepthEffect.get(b,d);e||(e={depthEffect:null,depthDefines:"",token:a.a.RandomId()},this._subMeshToDepthEffect.set(b,d,e));b=c.join("\n");if(e.depthEffect&&b===e.depthDefines)return e.depthEffect;e.depthDefines=b;c=f.rawVertexSourceCode;d=f.rawFragmentSourceCode;var g=this._options&&this._options.remappedVariables?"#include<shadowMapVertexNormalBias>("+
this._options.remappedVariables.join(",")+")":k.a.IncludesShadersStore.shadowMapVertexNormalBias,h=this._options&&this._options.remappedVariables?"#include<shadowMapVertexMetric>("+this._options.remappedVariables.join(",")+")":k.a.IncludesShadersStore.shadowMapVertexMetric,m=this._options&&this._options.remappedVariables?"#include<shadowMapFragmentSoftTransparentShadow>("+this._options.remappedVariables.join(",")+")":k.a.IncludesShadersStore.shadowMapFragmentSoftTransparentShadow,n=k.a.IncludesShadersStore.shadowMapFragment;
c=c.replace(/void\s+?main/g,k.a.IncludesShadersStore.shadowMapVertexDeclaration+"\r\nvoid main");c=c.replace(/#define SHADOWDEPTH_NORMALBIAS|#define CUSTOM_VERTEX_UPDATE_WORLDPOS/g,g);c=-1!==c.indexOf("#define SHADOWDEPTH_METRIC")?c.replace(/#define SHADOWDEPTH_METRIC/g,h):c.replace(/}\s*$/g,h+"\r\n}");c=c.replace(/#define SHADER_NAME.*?\n|out vec4 glFragColor;\n/g,"");g=0<=d.indexOf("#define SHADOWDEPTH_SOFTTRANSPARENTSHADOW")||0<=d.indexOf("#define CUSTOM_FRAGMENT_BEFORE_FOG");h=-1!==d.indexOf("#define SHADOWDEPTH_FRAGMENT");
var u="";g?d=d.replace(/#define SHADOWDEPTH_SOFTTRANSPARENTSHADOW|#define CUSTOM_FRAGMENT_BEFORE_FOG/g,m):u=m+"\r\n";d=d.replace(/void\s+?main/g,k.a.IncludesShadersStore.shadowMapFragmentDeclaration+"\r\nvoid main");h?d=d.replace(/#define SHADOWDEPTH_FRAGMENT/g,n):u+=n+"\r\n";u&&(d=d.replace(/}\s*$/g,u+"}"));d=d.replace(/#define SHADER_NAME.*?\n|out vec4 glFragColor;\n/g,"");m=f.getUniformNames().slice();m.push("biasAndScaleSM","depthValuesSM","lightDataSM","softTransparentShadowSM");e.depthEffect=
this._scene.getEngine().createEffect({vertexSource:c,fragmentSource:d,vertexToken:e.token,fragmentToken:e.token},{attributes:f.getAttributesNames(),uniformsNames:m,uniformBuffersNames:f.getUniformBuffersNames(),samplers:f.getSamplers(),defines:b+"\n"+f.defines.replace("#define SHADOWS","").replace(/#define SHADOW\d/g,""),indexParameters:f.getIndexParameters()},this._scene.getEngine());return e.depthEffect};return c})()},stmW:function(n,p,g){g.d(p,"b",function(){return a});g.d(p,"a",function(){return d});
var k=g("oYeq"),h=g("ADVu"),f=g("ps+7"),e=g("YKqZ"),t=g("Xeau");n=g("Qdxt");var c=g("0YF5"),a=function(a){function c(){var b=a.call(this)||this;b.IMAGEPROCESSING=!1;b.VIGNETTE=!1;b.VIGNETTEBLENDMODEMULTIPLY=!1;b.VIGNETTEBLENDMODEOPAQUE=!1;b.TONEMAPPING=!1;b.TONEMAPPING_ACES=!1;b.CONTRAST=!1;b.COLORCURVES=!1;b.COLORGRADING=!1;b.COLORGRADING3D=!1;b.SAMPLER3DGREENDEPTH=!1;b.SAMPLER3DBGRMAP=!1;b.IMAGEPROCESSINGPOSTPROCESS=!1;b.EXPOSURE=!1;b.rebuild();return b}Object(k.d)(c,a);return c}(n.a),d=function(){function a(){this.colorCurves=
new c.a;this._colorGradingEnabled=this._colorCurvesEnabled=!1;this._colorGradingBGR=this._colorGradingWithGreenDepth=!0;this._exposure=1;this._toneMappingEnabled=!1;this._toneMappingType=a.TONEMAPPING_STANDARD;this._contrast=1;this.vignetteCentreY=this.vignetteCentreX=this.vignetteStretch=0;this.vignetteWeight=1.5;this.vignetteColor=new t.b(0,0,0,0);this.vignetteCameraFov=.5;this._vignetteBlendMode=a.VIGNETTEMODE_MULTIPLY;this._applyByPostProcess=this._vignetteEnabled=!1;this._isEnabled=!0;this.onUpdateParameters=
new f.a}Object.defineProperty(a.prototype,"colorCurvesEnabled",{get:function(){return this._colorCurvesEnabled},set:function(a){this._colorCurvesEnabled!==a&&(this._colorCurvesEnabled=a,this._updateParameters())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"colorGradingTexture",{get:function(){return this._colorGradingTexture},set:function(a){this._colorGradingTexture!==a&&(this._colorGradingTexture=a,this._updateParameters())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,
"colorGradingEnabled",{get:function(){return this._colorGradingEnabled},set:function(a){this._colorGradingEnabled!==a&&(this._colorGradingEnabled=a,this._updateParameters())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"colorGradingWithGreenDepth",{get:function(){return this._colorGradingWithGreenDepth},set:function(a){this._colorGradingWithGreenDepth!==a&&(this._colorGradingWithGreenDepth=a,this._updateParameters())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,
"colorGradingBGR",{get:function(){return this._colorGradingBGR},set:function(a){this._colorGradingBGR!==a&&(this._colorGradingBGR=a,this._updateParameters())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"exposure",{get:function(){return this._exposure},set:function(a){this._exposure!==a&&(this._exposure=a,this._updateParameters())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"toneMappingEnabled",{get:function(){return this._toneMappingEnabled},set:function(a){this._toneMappingEnabled!==
a&&(this._toneMappingEnabled=a,this._updateParameters())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"toneMappingType",{get:function(){return this._toneMappingType},set:function(a){this._toneMappingType!==a&&(this._toneMappingType=a,this._updateParameters())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"contrast",{get:function(){return this._contrast},set:function(a){this._contrast!==a&&(this._contrast=a,this._updateParameters())},enumerable:!1,configurable:!0});
Object.defineProperty(a.prototype,"vignetteBlendMode",{get:function(){return this._vignetteBlendMode},set:function(a){this._vignetteBlendMode!==a&&(this._vignetteBlendMode=a,this._updateParameters())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"vignetteEnabled",{get:function(){return this._vignetteEnabled},set:function(a){this._vignetteEnabled!==a&&(this._vignetteEnabled=a,this._updateParameters())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"applyByPostProcess",
{get:function(){return this._applyByPostProcess},set:function(a){this._applyByPostProcess!==a&&(this._applyByPostProcess=a,this._updateParameters())},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"isEnabled",{get:function(){return this._isEnabled},set:function(a){this._isEnabled!==a&&(this._isEnabled=a,this._updateParameters())},enumerable:!1,configurable:!0});a.prototype._updateParameters=function(){this.onUpdateParameters.notifyObservers(this)};a.prototype.getClassName=function(){return"ImageProcessingConfiguration"};
a.PrepareUniforms=function(a,b){b.EXPOSURE&&a.push("exposureLinear");b.CONTRAST&&a.push("contrast");b.COLORGRADING&&a.push("colorTransformSettings");b.VIGNETTE&&(a.push("vInverseScreenSize"),a.push("vignetteSettings1"),a.push("vignetteSettings2"));b.COLORCURVES&&c.a.PrepareUniforms(a)};a.PrepareSamplers=function(a,b){b.COLORGRADING&&a.push("txColorTransform")};a.prototype.prepareDefines=function(c,b){void 0===b&&(b=!1);if(b===this.applyByPostProcess&&this._isEnabled){c.VIGNETTE=this.vignetteEnabled;
c.VIGNETTEBLENDMODEMULTIPLY=this.vignetteBlendMode===a._VIGNETTEMODE_MULTIPLY;c.VIGNETTEBLENDMODEOPAQUE=!c.VIGNETTEBLENDMODEMULTIPLY;c.TONEMAPPING=this.toneMappingEnabled;switch(this._toneMappingType){case a.TONEMAPPING_ACES:c.TONEMAPPING_ACES=!0;break;default:c.TONEMAPPING_ACES=!1}c.CONTRAST=1!==this.contrast;c.EXPOSURE=1!==this.exposure;c.COLORCURVES=this.colorCurvesEnabled&&!!this.colorCurves;c.COLORGRADING=this.colorGradingEnabled&&!!this.colorGradingTexture;c.COLORGRADING3D=c.COLORGRADING?this.colorGradingTexture.is3D:
!1;c.SAMPLER3DGREENDEPTH=this.colorGradingWithGreenDepth;c.SAMPLER3DBGRMAP=this.colorGradingBGR;c.IMAGEPROCESSINGPOSTPROCESS=this.applyByPostProcess;c.IMAGEPROCESSING=c.VIGNETTE||c.TONEMAPPING||c.CONTRAST||c.EXPOSURE||c.COLORCURVES||c.COLORGRADING}else c.VIGNETTE=!1,c.TONEMAPPING=!1,c.TONEMAPPING_ACES=!1,c.CONTRAST=!1,c.EXPOSURE=!1,c.COLORCURVES=!1,c.COLORGRADING=!1,c.COLORGRADING3D=!1,c.IMAGEPROCESSING=!1,c.IMAGEPROCESSINGPOSTPROCESS=this.applyByPostProcess&&this._isEnabled};a.prototype.isReady=
function(){return!this.colorGradingEnabled||!this.colorGradingTexture||this.colorGradingTexture.isReady()};a.prototype.bind=function(a,b){this._colorCurvesEnabled&&this.colorCurves&&c.a.Bind(this.colorCurves,a);if(this._vignetteEnabled){var d=1/a.getEngine().getRenderWidth(),f=1/a.getEngine().getRenderHeight();a.setFloat2("vInverseScreenSize",d,f);var g=Math.tan(.5*this.vignetteCameraFov);b=g*(null!=b?b:f/d);d=Math.sqrt(b*g);b=e.b.Mix(b,d,this.vignetteStretch);g=e.b.Mix(g,d,this.vignetteStretch);
a.setFloat4("vignetteSettings1",b,g,-b*this.vignetteCentreX,-g*this.vignetteCentreY);a.setFloat4("vignetteSettings2",this.vignetteColor.r,this.vignetteColor.g,this.vignetteColor.b,-2*this.vignetteWeight)}a.setFloat("exposureLinear",this.exposure);a.setFloat("contrast",this.contrast);this.colorGradingTexture&&(a.setTexture("txColorTransform",this.colorGradingTexture),g=this.colorGradingTexture.getSize().height,a.setFloat4("colorTransformSettings",(g-1)/g,.5/g,g,this.colorGradingTexture.level))};a.prototype.clone=
function(){return h.a.Clone(function(){return new a},this)};a.prototype.serialize=function(){return h.a.Serialize(this)};a.Parse=function(c){return h.a.Parse(function(){return new a},c,null,null)};Object.defineProperty(a,"VIGNETTEMODE_MULTIPLY",{get:function(){return this._VIGNETTEMODE_MULTIPLY},enumerable:!1,configurable:!0});Object.defineProperty(a,"VIGNETTEMODE_OPAQUE",{get:function(){return this._VIGNETTEMODE_OPAQUE},enumerable:!1,configurable:!0});a.TONEMAPPING_STANDARD=0;a.TONEMAPPING_ACES=
1;a._VIGNETTEMODE_MULTIPLY=0;a._VIGNETTEMODE_OPAQUE=1;Object(k.c)([Object(h.g)()],a.prototype,"colorCurves",void 0);Object(k.c)([Object(h.c)()],a.prototype,"_colorCurvesEnabled",void 0);Object(k.c)([Object(h.m)("colorGradingTexture")],a.prototype,"_colorGradingTexture",void 0);Object(k.c)([Object(h.c)()],a.prototype,"_colorGradingEnabled",void 0);Object(k.c)([Object(h.c)()],a.prototype,"_colorGradingWithGreenDepth",void 0);Object(k.c)([Object(h.c)()],a.prototype,"_colorGradingBGR",void 0);Object(k.c)([Object(h.c)()],
a.prototype,"_exposure",void 0);Object(k.c)([Object(h.c)()],a.prototype,"_toneMappingEnabled",void 0);Object(k.c)([Object(h.c)()],a.prototype,"_toneMappingType",void 0);Object(k.c)([Object(h.c)()],a.prototype,"_contrast",void 0);Object(k.c)([Object(h.c)()],a.prototype,"vignetteStretch",void 0);Object(k.c)([Object(h.c)()],a.prototype,"vignetteCentreX",void 0);Object(k.c)([Object(h.c)()],a.prototype,"vignetteCentreY",void 0);Object(k.c)([Object(h.c)()],a.prototype,"vignetteWeight",void 0);Object(k.c)([Object(h.f)()],
a.prototype,"vignetteColor",void 0);Object(k.c)([Object(h.c)()],a.prototype,"vignetteCameraFov",void 0);Object(k.c)([Object(h.c)()],a.prototype,"_vignetteBlendMode",void 0);Object(k.c)([Object(h.c)()],a.prototype,"_vignetteEnabled",void 0);Object(k.c)([Object(h.c)()],a.prototype,"_applyByPostProcess",void 0);Object(k.c)([Object(h.c)()],a.prototype,"_isEnabled",void 0);return a}();h.a._ImageProcessingConfigurationParser=d.Parse}}]);
