/*
 *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
*****************************************************************************/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(k){var f=0;return function(){return f<k.length?{done:!1,value:k[f++]}:{done:!0}}};$jscomp.arrayIterator=function(k){return{next:$jscomp.arrayIteratorImpl(k)}};$jscomp.makeIterator=function(k){var f="undefined"!=typeof Symbol&&Symbol.iterator&&k[Symbol.iterator];return f?f.call(k):$jscomp.arrayIterator(k)};
$jscomp.getGlobal=function(k){return"undefined"!=typeof window&&window===k?k:"undefined"!=typeof global&&null!=global?global:k};$jscomp.global=$jscomp.getGlobal(this);$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(k,f,a){k!=Array.prototype&&k!=Object.prototype&&(k[f]=a.value)};
$jscomp.polyfill=function(k,f,a,n){if(f){a=$jscomp.global;k=k.split(".");for(n=0;n<k.length-1;n++){var l=k[n];l in a||(a[l]={});a=a[l]}k=k[k.length-1];n=a[k];f=f(n);f!=n&&null!=f&&$jscomp.defineProperty(a,k,{configurable:!0,writable:!0,value:f})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(k){function f(){this.batch_=null}function a(a){return a instanceof l?a:new l(function(e,g){e(a)})}if(k&&!$jscomp.FORCE_POLYFILL_PROMISE)return k;f.prototype.asyncExecute=function(a){if(null==this.batch_){this.batch_=[];var e=this;this.asyncExecuteFunction(function(){e.executeBatch_()})}this.batch_.push(a)};var n=$jscomp.global.setTimeout;f.prototype.asyncExecuteFunction=function(a){n(a,0)};f.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=
this.batch_;this.batch_=[];for(var e=0;e<a.length;++e){var g=a[e];a[e]=null;try{g()}catch(q){this.asyncThrow_(q)}}}this.batch_=null};f.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var l=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var e=this.createResolveAndReject_();try{a(e.resolve,e.reject)}catch(g){e.reject(g)}};l.prototype.createResolveAndReject_=function(){function a(a){return function(h){g||(g=!0,a.call(e,h))}}var e=this,g=!1;
return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};l.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof l)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var e=null!=a;break a;case "function":e=!0;break a;default:e=!1}e?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};l.prototype.resolveToNonPromiseObj_=function(a){var e=void 0;try{e=a.then}catch(g){this.reject_(g);return}"function"==typeof e?
this.settleSameAsThenable_(e,a):this.fulfill_(a)};l.prototype.reject_=function(a){this.settle_(2,a)};l.prototype.fulfill_=function(a){this.settle_(1,a)};l.prototype.settle_=function(a,e){if(0!=this.state_)throw Error("Cannot settle("+a+", "+e+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=e;this.executeOnSettledCallbacks_()};l.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=0;a<this.onSettledCallbacks_.length;++a)r.asyncExecute(this.onSettledCallbacks_[a]);
this.onSettledCallbacks_=null}};var r=new f;l.prototype.settleSameAsPromise_=function(a){var e=this.createResolveAndReject_();a.callWhenSettled_(e.resolve,e.reject)};l.prototype.settleSameAsThenable_=function(a,e){var g=this.createResolveAndReject_();try{a.call(e,g.resolve,g.reject)}catch(q){g.reject(q)}};l.prototype.then=function(a,e){function g(b,c){return"function"==typeof b?function(d){try{q(b(d))}catch(t){h(t)}}:c}var q,h,c=new l(function(b,c){q=b;h=c});this.callWhenSettled_(g(a,q),g(e,h));return c};
l.prototype.catch=function(a){return this.then(void 0,a)};l.prototype.callWhenSettled_=function(a,e){function g(){switch(q.state_){case 1:a(q.result_);break;case 2:e(q.result_);break;default:throw Error("Unexpected state: "+q.state_);}}var q=this;null==this.onSettledCallbacks_?r.asyncExecute(g):this.onSettledCallbacks_.push(g)};l.resolve=a;l.reject=function(a){return new l(function(e,g){g(a)})};l.race=function(p){return new l(function(e,g){for(var q=$jscomp.makeIterator(p),h=q.next();!h.done;h=q.next())a(h.value).callWhenSettled_(e,
g)})};l.all=function(p){var e=$jscomp.makeIterator(p),g=e.next();return g.done?a([]):new l(function(q,h){function c(d){return function(c){b[d]=c;m--;0==m&&q(b)}}var b=[],m=0;do b.push(void 0),m++,a(g.value).callWhenSettled_(c(b.length-1),h),g=e.next();while(!g.done)})};return l},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(k,f){this.$jscomp$symbol$id_=k;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:f})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function k(a){if(this instanceof k)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(a||"")+"_"+f++,a)}var f=0;return k}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var k=$jscomp.global.Symbol.iterator;k||(k=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[k]&&$jscomp.defineProperty(Array.prototype,k,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var k=$jscomp.global.Symbol.asyncIterator;k||(k=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(k){$jscomp.initSymbolIterator();k={next:k};k[$jscomp.global.Symbol.iterator]=function(){return this};return k};
$jscomp.iteratorFromArray=function(k,f){$jscomp.initSymbolIterator();k instanceof String&&(k+="");var a=0,n={next:function(){if(a<k.length){var l=a++;return{value:f(l,k[l]),done:!1}}n.next=function(){return{done:!0,value:void 0}};return n.next()}};n[Symbol.iterator]=function(){return n};return n};$jscomp.polyfill("Array.prototype.keys",function(k){return k?k:function(){return $jscomp.iteratorFromArray(this,function(f){return f})}},"es6","es3");
$jscomp.underscoreProtoCanBeSet=function(){var k={a:!0},f={};try{return f.__proto__=k,f.a}catch(a){}return!1};$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(k,f){k.__proto__=f;if(k.__proto__!==f)throw new TypeError(k+" is not extensible");return k}:null;$jscomp.polyfill("Object.setPrototypeOf",function(k){return k||$jscomp.setPrototypeOf},"es6","es5");
$jscomp.owns=function(k,f){return Object.prototype.hasOwnProperty.call(k,f)};$jscomp.assign="function"==typeof Object.assign?Object.assign:function(k,f){for(var a=1;a<arguments.length;a++){var n=arguments[a];if(n)for(var l in n)$jscomp.owns(n,l)&&(k[l]=n[l])}return k};$jscomp.polyfill("Object.assign",function(k){return k||$jscomp.assign},"es6","es3");
(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{"0bNo":function(k,f,a){a.d(f,"a",function(){return e});var n=a("oYeq"),l=a("ps+7"),r=a("78Wx"),p=a("Klbi"),e=function(){function a(a,h,c){var b=this;void 0===c&&(c={});this.xrSessionManager=a;this.xrCamera=h;this.options=c;this.controllers=[];this.onControllerAddedObservable=new l.a;this.onControllerRemovedObservable=new l.a;this._onInputSourcesChange=function(c){b._addAndRemoveControllers(c.added,c.removed)};this._sessionEndedObserver=this.xrSessionManager.onXRSessionEnded.add(function(){b._addAndRemoveControllers([],
b.controllers.map(function(b){return b.inputSource}))});this._sessionInitObserver=this.xrSessionManager.onXRSessionInit.add(function(c){c.addEventListener("inputsourceschange",b._onInputSourcesChange)});this._frameObserver=this.xrSessionManager.onXRFrameObservable.add(function(c){b.controllers.forEach(function(d){d.updateFromXRFrame(c,b.xrSessionManager.referenceSpace)})});this.options.customControllersRepositoryURL&&(p.a.BaseRepositoryUrl=this.options.customControllersRepositoryURL);p.a.UseOnlineRepository=
!this.options.disableOnlineControllerRepository;if(p.a.UseOnlineRepository)try{p.a.UpdateProfilesList().catch(function(){p.a.UseOnlineRepository=!1})}catch(m){p.a.UseOnlineRepository=!1}}a.prototype._addAndRemoveControllers=function(a,h){for(var c=this,b=this.controllers.map(function(b){return b.inputSource}),m=0;m<a.length;m++){var d=a[m];-1===b.indexOf(d)&&(d=new r.a(this.xrSessionManager.scene,d,Object(n.a)(Object(n.a)({},this.options.controllerOptions||{}),{forceControllerProfile:this.options.forceInputProfile,
doNotLoadControllerMesh:this.options.doNotLoadControllerMeshes,disableMotionControllerAnimation:this.options.disableControllerAnimation})),this.controllers.push(d),this.onControllerAddedObservable.notifyObservers(d))}var t=[],u=[];this.controllers.forEach(function(b){-1===h.indexOf(b.inputSource)?t.push(b):u.push(b)});this.controllers=t;u.forEach(function(b){c.onControllerRemovedObservable.notifyObservers(b);b.dispose()})};a.prototype.dispose=function(){this.controllers.forEach(function(a){a.dispose()});
this.xrSessionManager.onXRFrameObservable.remove(this._frameObserver);this.xrSessionManager.onXRSessionInit.remove(this._sessionInitObserver);this.xrSessionManager.onXRSessionEnded.remove(this._sessionEndedObserver);this.onControllerAddedObservable.clear();this.onControllerRemovedObservable.clear()};return a}()},"2+CT":function(k,f,a){a.d(f,"a",function(){return h});var n=a("oYeq"),l=a("SqQr"),r=a("0bNo"),p=a("TTtC"),e=a("7FyR"),g=a("is1F"),q=a("uyO6");(function(){return function(){}})();var h=function(){function c(){}
c.CreateAsync=function(b,a){void 0===a&&(a={});var d=new c;return l.a.CreateAsync(b).then(function(c){d.baseExperience=c;a.ignoreNativeCameraTransformation&&(d.baseExperience.camera.compensateOnFirstFrame=!1);d.input=new r.a(c.sessionManager,c.camera,Object(n.a)({controllerOptions:{renderingGroupId:a.renderingGroupId}},a.inputOptions||{}));d.pointerSelection=d.baseExperience.featuresManager.enableFeature(p.a.Name,a.useStablePlugins?"stable":"latest",{xrInput:d.input,renderingGroupId:a.renderingGroupId});
a.disableTeleportation||(d.teleportation=d.baseExperience.featuresManager.enableFeature(g.a.Name,a.useStablePlugins?"stable":"latest",{floorMeshes:a.floorMeshes,xrInput:d.input,renderingGroupId:a.renderingGroupId}),d.teleportation.setSelectionFeature(d.pointerSelection));d.renderTarget=d.baseExperience.sessionManager.getWebXRRenderTarget(a.outputCanvasOptions);if(!a.disableDefaultUI)return c=Object(n.a)({renderTarget:d.renderTarget},a.uiOptions||{}),a.optionalFeatures&&(c.optionalFeatures="boolean"===
typeof a.optionalFeatures?["hit-test","anchors","plane-detection","hand-tracking"]:a.optionalFeatures),e.a.CreateAsync(b,d.baseExperience,c).then(function(b){d.enterExitUI=b})}).then(function(){return d}).catch(function(b){q.a.Error("Error initializing XR");q.a.Error(b);return d})};c.prototype.dispose=function(){this.baseExperience&&this.baseExperience.dispose();this.input&&this.input.dispose();this.enterExitUI&&this.enterExitUI.dispose();this.renderTarget&&this.renderTarget.dispose()};return c}()},
"78Wx":function(k,f,a){a.d(f,"a",function(){return q});var n=a("ps+7"),l=a("ikaq"),r=a("/SR9"),p=a("Klbi"),e=a("YKqZ"),g=0,q=function(){function a(c,b,a){var d=this;void 0===a&&(a={});this._scene=c;this.inputSource=b;this._options=a;this._tmpVector=new r.e;this._disposed=!1;this.onDisposeObservable=new n.a;this.onMeshLoadedObservable=new n.a;this.onMotionControllerInitObservable=new n.a;this._uniqueId="controller-"+g++ +"-"+b.targetRayMode+"-"+b.handedness;this.pointer=new l.a(this._uniqueId+"-pointer",
c);this.pointer.rotationQuaternion=new r.b;this.inputSource.gripSpace&&(this.grip=new l.a(this._uniqueId+"-grip",this._scene),this.grip.rotationQuaternion=new r.b);this._tmpVector.set(0,0,this._scene.useRightHandedSystem?-1:1);this.inputSource.gamepad&&p.a.GetMotionControllerWithXRInput(b,c,this._options.forceControllerProfile).then(function(b){d.motionController=b;d.onMotionControllerInitObservable.notifyObservers(b);d._options.doNotLoadControllerMesh||d.motionController.loadModel().then(function(b){var a;
b&&d.motionController&&d.motionController.rootMesh&&(d._options.renderingGroupId&&(d.motionController.rootMesh.renderingGroupId=d._options.renderingGroupId,d.motionController.rootMesh.getChildMeshes(!1).forEach(function(b){return b.renderingGroupId=d._options.renderingGroupId})),d.onMeshLoadedObservable.notifyObservers(d.motionController.rootMesh),d.motionController.rootMesh.parent=d.grip||d.pointer,d.motionController.disableAnimation=!!d._options.disableMotionControllerAnimation);d._disposed&&(null===
(a=d.motionController)||void 0===a?void 0:a.dispose())})},function(){e.b.Warn("Could not find a matching motion controller for the registered input source")})}Object.defineProperty(a.prototype,"uniqueId",{get:function(){return this._uniqueId},enumerable:!1,configurable:!0});a.prototype.dispose=function(){this.grip&&this.grip.dispose();this.motionController&&this.motionController.dispose();this.pointer.dispose();this.onMotionControllerInitObservable.clear();this.onMeshLoadedObservable.clear();this.onDisposeObservable.notifyObservers(this);
this.onDisposeObservable.clear();this._disposed=!0};a.prototype.getWorldPointerRayToRef=function(a,b){void 0===b&&(b=!1);b=b&&this.grip?this.grip:this.pointer;r.e.TransformNormalToRef(this._tmpVector,b.getWorldMatrix(),a.direction);a.direction.normalize();a.origin.copyFrom(b.absolutePosition);a.length=1E3};a.prototype.updateFromXRFrame=function(a,b){var c=a.getPose(this.inputSource.targetRaySpace,b);if(c){var d=c.transform.position;this.pointer.position.set(d.x,d.y,d.z);d=c.transform.orientation;
this.pointer.rotationQuaternion.set(d.x,d.y,d.z,d.w);this._scene.useRightHandedSystem||(this.pointer.position.z*=-1,this.pointer.rotationQuaternion.z*=-1,this.pointer.rotationQuaternion.w*=-1)}this.inputSource.gripSpace&&this.grip&&(b=a.getPose(this.inputSource.gripSpace,b))&&(d=b.transform.position,b=b.transform.orientation,this.grip.position.set(d.x,d.y,d.z),this.grip.rotationQuaternion.set(b.x,b.y,b.z,b.w),this._scene.useRightHandedSystem||(this.grip.position.z*=-1,this.grip.rotationQuaternion.z*=
-1,this.grip.rotationQuaternion.w*=-1));this.motionController&&this.motionController.updateFromXRFrame(a)};return a}()},"7FyR":function(k,f,a){a.d(f,"a",function(){return g});var n=a("oYeq"),l=a("ps+7"),r=a("Ul6c"),p=a("YKqZ"),e=function(){function a(a,c,b){this.element=a;this.sessionMode=c;this.referenceSpaceType=b}a.prototype.update=function(a){};return a}();(function(){return function(){}})();var g=function(){function a(a,c){var b=this;this.scene=a;this.options=c;this._activeButton=null;this._buttons=
[];this.activeButtonChangedObservable=new l.a;this.overlay=document.createElement("div");this.overlay.classList.add("xr-button-overlay");this.overlay.style.cssText="z-index:11;position: absolute; right: 20px;bottom: 50px;";"undefined"!==typeof window&&window.location&&"http:"===window.location.protocol&&p.b.Warn("WebXR can only be served over HTTPS");if(c.customButtons)this._buttons=c.customButtons;else{var m=c.sessionMode||"immersive-vr";c=c.referenceSpaceType||"local-floor";var d=".babylonVRicon { color: #868686; border-color: #868686; border-style: solid; margin-left: 10px; height: 50px; width: 80px; background-color: rgba(51,51,51,0.7); background-image: url("+
("undefined"===typeof SVGSVGElement?"https://cdn.babylonjs.com/Assets/vrButton.png":"data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%222048%22%20height%3D%221152%22%20viewBox%3D%220%200%202048%201152%22%20version%3D%221.1%22%3E%3Cpath%20transform%3D%22rotate%28180%201024%2C576.0000000000001%29%22%20d%3D%22m1109%2C896q17%2C0%2030%2C-12t13%2C-30t-12.5%2C-30.5t-30.5%2C-12.5l-170%2C0q-18%2C0%20-30.5%2C12.5t-12.5%2C30.5t13%2C30t30%2C12l170%2C0zm-85%2C256q59%2C0%20132.5%2C-1.5t154.5%2C-5.5t164.5%2C-11.5t163%2C-20t150%2C-30t124.5%2C-41.5q23%2C-11%2042%2C-24t38%2C-30q27%2C-25%2041%2C-61.5t14%2C-72.5l0%2C-257q0%2C-123%20-47%2C-232t-128%2C-190t-190%2C-128t-232%2C-47l-81%2C0q-37%2C0%20-68.5%2C14t-60.5%2C34.5t-55.5%2C45t-53%2C45t-53%2C34.5t-55.5%2C14t-55.5%2C-14t-53%2C-34.5t-53%2C-45t-55.5%2C-45t-60.5%2C-34.5t-68.5%2C-14l-81%2C0q-123%2C0%20-232%2C47t-190%2C128t-128%2C190t-47%2C232l0%2C257q0%2C68%2038%2C115t97%2C73q54%2C24%20124.5%2C41.5t150%2C30t163%2C20t164.5%2C11.5t154.5%2C5.5t132.5%2C1.5zm939%2C-298q0%2C39%20-24.5%2C67t-58.5%2C42q-54%2C23%20-122%2C39.5t-143.5%2C28t-155.5%2C19t-157%2C11t-148.5%2C5t-129.5%2C1.5q-59%2C0%20-130%2C-1.5t-148%2C-5t-157%2C-11t-155.5%2C-19t-143.5%2C-28t-122%2C-39.5q-34%2C-14%20-58.5%2C-42t-24.5%2C-67l0%2C-257q0%2C-106%2040.5%2C-199t110%2C-162.5t162.5%2C-109.5t199%2C-40l81%2C0q27%2C0%2052%2C14t50%2C34.5t51%2C44.5t55.5%2C44.5t63.5%2C34.5t74%2C14t74%2C-14t63.5%2C-34.5t55.5%2C-44.5t51%2C-44.5t50%2C-34.5t52%2C-14l14%2C0q37%2C0%2070%2C0.5t64.5%2C4.5t63.5%2C12t68%2C23q71%2C30%20128.5%2C78.5t98.5%2C110t63.5%2C133.5t22.5%2C149l0%2C257z%22%20fill%3D%22white%22%20/%3E%3C/svg%3E%0A")+
'); background-size: 80%; background-repeat:no-repeat; background-position: center; border: none; outline: none; transition: transform 0.125s ease-out } .babylonVRicon:hover { transform: scale(1.05) } .babylonVRicon:active {background-color: rgba(51,51,51,1) } .babylonVRicon:focus {background-color: rgba(51,51,51,1) }.babylonVRicon.vrdisplaypresenting { background-image: none;} .vrdisplaypresenting::after { content: "EXIT"} .xr-error::after { content: "ERROR"}';var h=document.createElement("style");
h.appendChild(document.createTextNode(d));document.getElementsByTagName("head")[0].appendChild(h);var u=document.createElement("button");u.className="babylonVRicon";u.title=m+" - "+c;this._buttons.push(new e(u,m,c));this._buttons[this._buttons.length-1].update=function(b){this.element.style.display=null===b||b===this?"":"none";u.className="babylonVRicon"+(b===this?" vrdisplaypresenting":"")};this._updateButtons(null)}(m=a.getEngine().getInputElement())&&m.parentNode&&(m.parentNode.appendChild(this.overlay),
a.onDisposeObservable.addOnce(function(){b.dispose()}))}a.CreateAsync=function(h,c,b){var m=this,d=new a(h,b);h=d._buttons.map(function(b){return c.sessionManager.isSessionSupportedAsync(b.sessionMode)});c.onStateChangedObservable.add(function(b){b==r.a.NOT_IN_XR&&d._updateButtons(null)});return Promise.all(h).then(function(a){a.forEach(function(a,h){a?(d.overlay.appendChild(d._buttons[h].element),d._buttons[h].element.onclick=function(){return Object(n.b)(m,void 0,void 0,function(){var a,m,t;return Object(n.e)(this,
function(e){switch(e.label){case 0:return c.state!=r.a.IN_XR?[3,2]:[4,c.exitXRAsync()];case 1:return e.sent(),d._updateButtons(null),[3,6];case 2:if(c.state!=r.a.NOT_IN_XR||!b.renderTarget)return[3,6];e.label=3;case 3:return e.trys.push([3,5,,6]),[4,c.enterXRAsync(d._buttons[h].sessionMode,d._buttons[h].referenceSpaceType,b.renderTarget,{optionalFeatures:b.optionalFeatures,requiredFeatures:b.requiredFeatures})];case 4:return e.sent(),d._updateButtons(d._buttons[h]),[3,6];case 5:a=e.sent();d._updateButtons(null);
m=d._buttons[h].element;t=m.title;m.title="Error entering XR session : "+t;m.classList.add("xr-error");if(b.onError)b.onError(a);return[3,6];case 6:return[2]}})})}):p.b.Warn('Session mode "'+d._buttons[h].sessionMode+'" not supported in browser')});return d})};a.prototype.dispose=function(){var a=this.scene.getEngine().getInputElement();a&&a.parentNode&&a.parentNode.contains(this.overlay)&&a.parentNode.removeChild(this.overlay);this.activeButtonChangedObservable.clear()};a.prototype._updateButtons=
function(a){var c=this;this._activeButton=a;this._buttons.forEach(function(b){b.update(c._activeButton)});this.activeButtonChangedObservable.notifyObservers(this._activeButton)};return a}()},De3F:function(k,f,a){a.d(f,"a",function(){return p});var n=a("oYeq");k=a("c6XG");var l=a("wAMR"),r=a("/SR9"),p=function(a){function g(h,c,b){h=a.call(this,h,e[b],c,b)||this;h.profileId=g.ProfileId;return h}Object(n.d)(g,a);g.prototype._getFilenameAndPath=function(){return{filename:"generic.babylon",path:"https://controllers.babylonjs.com/generic/"}};
g.prototype._getModelLoadingConstraints=function(){return!0};g.prototype._processLoadedModel=function(a){};g.prototype._setRootMesh=function(a){var c=this;this.rootMesh=new l.a(this.profileId+" "+this.handedness,this.scene);a.forEach(function(b){b.isPickable=!1;b.parent||b.setParent(c.rootMesh)});this.rootMesh.rotationQuaternion=r.b.FromEulerAngles(0,Math.PI,0)};g.prototype._updateModel=function(){};g.ProfileId="generic-trigger";return g}(k.a),e={left:{selectComponentId:"xr-standard-trigger",components:{"xr-standard-trigger":{type:"trigger",
gamepadIndices:{button:0},rootNodeName:"xr_standard_trigger",visualResponses:{}}},gamepadMapping:"xr-standard",rootNodeName:"generic-trigger-left",assetPath:"left.glb"},right:{selectComponentId:"xr-standard-trigger",components:{"xr-standard-trigger":{type:"trigger",gamepadIndices:{button:0},rootNodeName:"xr_standard_trigger",visualResponses:{}}},gamepadMapping:"xr-standard",rootNodeName:"generic-trigger-right",assetPath:"right.glb"},none:{selectComponentId:"xr-standard-trigger",components:{"xr-standard-trigger":{type:"trigger",
gamepadIndices:{button:0},rootNodeName:"xr_standard_trigger",visualResponses:{}}},gamepadMapping:"xr-standard",rootNodeName:"generic-trigger-none",assetPath:"none.glb"}}},FH9a:function(k,f,a){a.d(f,"a",function(){return q});var n=a("oYeq");k=a("KbzI");var l=a("wAMR"),r=a("uyO6"),p=a("e2Mr"),e=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}Object(n.d)(c,a);return c}(k.a),g=function(){return function(){this.rootNodes=[];this.skeletons=[];this.animationGroups=[]}}(),q=function(a){function c(b){var c=
a.call(this)||this;c._wasAddedToScene=!1;c.scene=b;c.sounds=[];c.effectLayers=[];c.layers=[];c.lensFlareSystems=[];c.proceduralTextures=[];c.reflectionProbes=[];b.onDisposeObservable.add(function(){c._wasAddedToScene||c.dispose()});return c}Object(n.d)(c,a);c.prototype.instantiateModelsToScene=function(b,a){var c=this;void 0===a&&(a=!1);var m={},h={},e=new g,v=[],q=[],p={doNotInstantiate:!0},f=function(a,c){m[a.uniqueId]=c.uniqueId;h[c.uniqueId]=c;b&&(c.name=b(a.name));if(c instanceof l.a&&c.morphTargetManager){a=
a.morphTargetManager;c.morphTargetManager=a.clone();for(var d=0;d<a.numTargets;d++){var e=a.getTarget(d),t=c.morphTargetManager.getTarget(d);m[e.uniqueId]=t.uniqueId;h[t.uniqueId]=t}}};this.transformNodes.forEach(function(b){b.parent||(b=b.instantiateHierarchy(null,p,function(b,a){f(b,a)}))&&e.rootNodes.push(b)});this.meshes.forEach(function(d){d.parent||(d=d.instantiateHierarchy(null,p,function(d,e){f(d,e);if(e.material&&e.material)if(a){d=d.material;if(-1===q.indexOf(d)){var t=d.clone(b?b(d.name):
"Clone of "+d.name);q.push(d);m[d.uniqueId]=t.uniqueId;h[t.uniqueId]=t;if("MultiMaterial"===d.getClassName()){for(var g=0,u=d.subMaterials;g<u.length;g++){var v=u[g];v&&(t=v.clone(b?b(v.name):"Clone of "+v.name),q.push(v),m[v.uniqueId]=t.uniqueId,h[t.uniqueId]=t)}d.subMaterials=d.subMaterials.map(function(b){return b&&h[m[b.uniqueId]]})}}e.material=h[m[d.uniqueId]]}else"MultiMaterial"===e.material.getClassName()?-1===c.scene.multiMaterials.indexOf(e.material)&&c.scene.addMultiMaterial(e.material):
-1===c.scene.materials.indexOf(e.material)&&c.scene.addMaterial(e.material)}))&&e.rootNodes.push(d)});this.skeletons.forEach(function(a){var d=a.clone(b?b(a.name):"Clone of "+a.name);a.overrideMesh&&(d.overrideMesh=h[m[a.overrideMesh.uniqueId]]);for(var t=0,g=c.meshes;t<g.length;t++){var u=g[t];if(u.skeleton===a&&!u.isAnInstance&&(h[m[u.uniqueId]].skeleton=d,-1===v.indexOf(d))){v.push(d);u=0;for(var q=d.bones;u<q.length;u++){var w=q[u];w._linkedTransformNode&&(w._linkedTransformNode=h[m[w._linkedTransformNode.uniqueId]])}}}e.skeletons.push(d)});
this.animationGroups.forEach(function(b){b=b.clone(b.name,function(b){return h[m[b.uniqueId]]||b});e.animationGroups.push(b)});return e};c.prototype.addAllToScene=function(){var b=this;this._wasAddedToScene=!0;this.cameras.forEach(function(a){b.scene.addCamera(a)});this.lights.forEach(function(a){b.scene.addLight(a)});this.meshes.forEach(function(a){b.scene.addMesh(a)});this.skeletons.forEach(function(a){b.scene.addSkeleton(a)});this.animations.forEach(function(a){b.scene.addAnimation(a)});this.animationGroups.forEach(function(a){b.scene.addAnimationGroup(a)});
this.multiMaterials.forEach(function(a){b.scene.addMultiMaterial(a)});this.materials.forEach(function(a){b.scene.addMaterial(a)});this.morphTargetManagers.forEach(function(a){b.scene.addMorphTargetManager(a)});this.geometries.forEach(function(a){b.scene.addGeometry(a)});this.transformNodes.forEach(function(a){b.scene.addTransformNode(a)});this.actionManagers.forEach(function(a){b.scene.addActionManager(a)});this.textures.forEach(function(a){b.scene.addTexture(a)});this.reflectionProbes.forEach(function(a){b.scene.addReflectionProbe(a)});
this.environmentTexture&&(this.scene.environmentTexture=this.environmentTexture);for(var a=0,c=this.scene._serializableComponents;a<c.length;a++)c[a].addFromContainer(this)};c.prototype.removeAllFromScene=function(){var a=this;this._wasAddedToScene=!1;this.cameras.forEach(function(b){a.scene.removeCamera(b)});this.lights.forEach(function(b){a.scene.removeLight(b)});this.meshes.forEach(function(b){a.scene.removeMesh(b)});this.skeletons.forEach(function(b){a.scene.removeSkeleton(b)});this.animations.forEach(function(b){a.scene.removeAnimation(b)});
this.animationGroups.forEach(function(b){a.scene.removeAnimationGroup(b)});this.multiMaterials.forEach(function(b){a.scene.removeMultiMaterial(b)});this.materials.forEach(function(b){a.scene.removeMaterial(b)});this.morphTargetManagers.forEach(function(b){a.scene.removeMorphTargetManager(b)});this.geometries.forEach(function(b){a.scene.removeGeometry(b)});this.transformNodes.forEach(function(b){a.scene.removeTransformNode(b)});this.actionManagers.forEach(function(b){a.scene.removeActionManager(b)});
this.textures.forEach(function(b){a.scene.removeTexture(b)});this.reflectionProbes.forEach(function(b){a.scene.removeReflectionProbe(b)});this.environmentTexture===this.scene.environmentTexture&&(this.scene.environmentTexture=null);for(var c=0,d=this.scene._serializableComponents;c<d.length;c++)d[c].removeFromContainer(this)};c.prototype.dispose=function(){this.cameras.forEach(function(a){a.dispose()});this.cameras=[];this.lights.forEach(function(a){a.dispose()});this.lights=[];this.meshes.forEach(function(a){a.dispose()});
this.meshes=[];this.skeletons.forEach(function(a){a.dispose()});this.skeletons=[];this.animationGroups.forEach(function(a){a.dispose()});this.animationGroups=[];this.multiMaterials.forEach(function(a){a.dispose()});this.multiMaterials=[];this.materials.forEach(function(a){a.dispose()});this.materials=[];this.geometries.forEach(function(a){a.dispose()});this.geometries=[];this.transformNodes.forEach(function(a){a.dispose()});this.transformNodes=[];this.actionManagers.forEach(function(a){a.dispose()});
this.actionManagers=[];this.textures.forEach(function(a){a.dispose()});this.textures=[];this.reflectionProbes.forEach(function(a){a.dispose()});this.reflectionProbes=[];this.environmentTexture&&(this.environmentTexture.dispose(),this.environmentTexture=null);for(var a=0,c=this.scene._serializableComponents;a<c.length;a++)c[a].removeFromContainer(this,!0)};c.prototype._moveAssets=function(a,c,d){if(a)for(var b=0;b<a.length;b++){var m=a[b],h=!0;if(d)for(var e=0,g=d;e<g.length;e++)if(m===g[e]){h=!1;
break}h&&c.push(m)}};c.prototype.moveAllFromScene=function(a){this._wasAddedToScene=!1;void 0===a&&(a=new e);for(var b in this)this.hasOwnProperty(b)&&(this[b]=this[b]||("environmentTexture"===b?null:[]),this._moveAssets(this.scene[b],this[b],a[b]));this.environmentTexture=this.scene.environmentTexture;this.removeAllFromScene()};c.prototype.createRootMesh=function(){var a=new l.a("assetContainerRootMesh",this.scene);this.meshes.forEach(function(b){b.parent||a.addChild(b)});this.meshes.unshift(a);
return a};c.prototype.mergeAnimationsTo=function(a,c,d){void 0===a&&(a=p.a.LastCreatedScene);void 0===d&&(d=null);if(!a)return r.a.Error("No scene available to merge animations to"),[];var b=d?d:function(b){var c=b.animations.length?b.animations[0].targetProperty:"",d=b.name.split(".").join("").split("_primitive")[0];switch(c){case "position":case "rotationQuaternion":b=a.getTransformNodeByName(b.name)||a.getTransformNodeByName(d);break;case "influence":b=a.getMorphTargetByName(b.name)||a.getMorphTargetByName(d);
break;default:b=a.getNodeByName(b.name)||a.getNodeByName(d)}return b};this.getNodes().forEach(function(a){var c=b(a);if(null!==c){for(var d=function(a){for(var b=0,d=c.animations.filter(function(b){return b.targetProperty===a.targetProperty});b<d.length;b++){var m=c.animations.indexOf(d[b],0);-1<m&&c.animations.splice(m,1)}},m=0,h=a.animations;m<h.length;m++)d(h[m]);c.animations=c.animations.concat(a.animations)}});var m=[];this.animationGroups.slice().forEach(function(a){m.push(a.clone(a.name,b));
a.animatables.forEach(function(a){a.stop()})});c.forEach(function(c){var d=b(c.target);d&&(a.beginAnimation(d,c.fromFrame,c.toFrame,c.loopAnimation,c.speedRatio,c.onAnimationEnd?c.onAnimationEnd:void 0,void 0,!0,void 0,c.onAnimationLoop?c.onAnimationLoop:void 0),a.stopAnimation(c.target))});return m};return c}(k.a)},HD13:function(k,f,a){a.d(f,"a",function(){return g});var n=a("uyO6"),l=a("ps+7"),r=a("k2R8"),p=a("srWW"),e=a("T8jy"),g=function(){function a(a){this.scene=a;this._sessionEnded=!1;this.baseLayer=
null;this.currentTimestamp=-1;this.defaultHeightCompensation=1.7;this.onXRFrameObservable=new l.a;this.onXRReferenceSpaceChanged=new l.a;this.onXRSessionEnded=new l.a;this.onXRSessionInit=new l.a}Object.defineProperty(a.prototype,"referenceSpace",{get:function(){return this._referenceSpace},set:function(a){this._referenceSpace=a;this.onXRReferenceSpaceChanged.notifyObservers(this._referenceSpace)},enumerable:!1,configurable:!0});a.prototype.dispose=function(){this._sessionEnded||this.exitXRAsync();
this.onXRFrameObservable.clear();this.onXRSessionEnded.clear();this.onXRReferenceSpaceChanged.clear();this.onXRSessionInit.clear()};a.prototype.exitXRAsync=function(){return this.session&&!this._sessionEnded?(this._sessionEnded=!0,this.session.end().catch(function(a){n.a.Warn("Could not end XR session.")})):Promise.resolve()};a.prototype.getRenderTargetTextureForEye=function(a){return this._rttProvider.getRenderTargetForEye(a)};a.prototype.getWebXRRenderTarget=function(a){var c=this.scene.getEngine();
if(this._xrNavigator.xr.native)return this._xrNavigator.xr.getWebXRRenderTarget(c);a=a||e.b.GetDefaults(c);a.canvasElement=c.getRenderingCanvas()||void 0;return new e.a(this,a)};a.prototype.initializeAsync=function(){this._xrNavigator=navigator;return this._xrNavigator.xr?Promise.resolve():Promise.reject("WebXR not available")};a.prototype.initializeSessionAsync=function(a,c){var b=this;void 0===a&&(a="immersive-vr");void 0===c&&(c={});return this._xrNavigator.xr.requestSession(a,c).then(function(a){b.session=
a;b.onXRSessionInit.notifyObservers(a);b._sessionEnded=!1;b.session.addEventListener("end",function(){var a=b.scene.getEngine();b._sessionEnded=!0;b._rttProvider=null;a.framebufferDimensionsObject=null;a.restoreDefaultFramebuffer();a.customAnimationFrameRequester=null;b.onXRSessionEnded.notifyObservers(null);a._renderLoop()},{once:!0});return b.session})};a.prototype.isSessionSupportedAsync=function(e){return a.IsSessionSupportedAsync(e)};a.prototype.resetReferenceSpace=function(){this.referenceSpace=
this.baseReferenceSpace};a.prototype.runXRRenderLoop=function(){var a=this,c=this.scene.getEngine();c.customAnimationFrameRequester={requestAnimationFrame:this.session.requestAnimationFrame.bind(this.session),renderFunction:function(b,d){a._sessionEnded||(a.currentFrame=d,a.currentTimestamp=b,d&&(c.framebufferDimensionsObject=a.baseLayer,a.onXRFrameObservable.notifyObservers(d),c._renderLoop(),c.framebufferDimensionsObject=null))}};if(this._xrNavigator.xr.native)this._rttProvider=this._xrNavigator.xr.getNativeRenderTargetProvider(this.session,
this._createRenderTargetTexture.bind(this));else{var b=this._createRenderTargetTexture(this.baseLayer.framebufferWidth,this.baseLayer.framebufferHeight,this.baseLayer.framebuffer);this._rttProvider={getRenderTargetForEye:function(){return b}};c.framebufferDimensionsObject=this.baseLayer}"undefined"!==typeof window&&window.cancelAnimationFrame&&window.cancelAnimationFrame(c._frameHandler);c._renderLoop()};a.prototype.setReferenceSpaceTypeAsync=function(a){var c=this;void 0===a&&(a="local-floor");return this.session.requestReferenceSpace(a).then(function(a){return a},
function(a){n.a.Error("XR.requestReferenceSpace failed for the following reason: ");n.a.Error(a);n.a.Log('Defaulting to universally-supported "viewer" reference space type.');return c.session.requestReferenceSpace("viewer").then(function(a){var b=new XRRigidTransform({x:0,y:-c.defaultHeightCompensation,z:0});return a.getOffsetReferenceSpace(b)},function(a){n.a.Error(a);throw'XR initialization failed: required "viewer" reference space type not supported.';})}).then(function(a){return c.session.requestReferenceSpace("viewer").then(function(b){c.viewerReferenceSpace=
b;return a})}).then(function(a){c.referenceSpace=c.baseReferenceSpace=a;return c.referenceSpace})};a.prototype.updateRenderStateAsync=function(a){a.baseLayer&&(this.baseLayer=a.baseLayer);return this.session.updateRenderState(a)};a.IsSessionSupportedAsync=function(a){if(!navigator.xr)return Promise.resolve(!1);var c=navigator.xr.isSessionSupported||navigator.xr.supportsSession;return c?c.call(navigator.xr,a).then(function(a){return Promise.resolve("undefined"===typeof a?!0:a)}).catch(function(a){n.a.Warn(a);
return Promise.resolve(!1)}):Promise.resolve(!1)};a.prototype._createRenderTargetTexture=function(a,c,b){void 0===b&&(b=null);var m=new r.a(this.scene.getEngine(),r.b.Unknown,!0);m.width=a;m.height=c;m._framebuffer=b;a=new p.a("XR renderTargetTexture",{width:a,height:c},this.scene,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,!0);a._texture=m;return a};return a}()},KbzI:function(k,f,a){a.d(f,"a",function(){return n});var n=function(){function a(){this.rootNodes=[];this.cameras=[];
this.lights=[];this.meshes=[];this.skeletons=[];this.particleSystems=[];this.animations=[];this.animationGroups=[];this.multiMaterials=[];this.materials=[];this.morphTargetManagers=[];this.geometries=[];this.transformNodes=[];this.actionManagers=[];this.textures=[];this._environmentTexture=null;this.postProcesses=[]}a.AddParser=function(a,p){this._BabylonFileParsers[a]=p};a.GetParser=function(a){return this._BabylonFileParsers[a]?this._BabylonFileParsers[a]:null};a.AddIndividualParser=function(a,
p){this._IndividualBabylonFileParsers[a]=p};a.GetIndividualParser=function(a){return this._IndividualBabylonFileParsers[a]?this._IndividualBabylonFileParsers[a]:null};a.Parse=function(a,p,e,g){for(var q in this._BabylonFileParsers)if(this._BabylonFileParsers.hasOwnProperty(q))this._BabylonFileParsers[q](a,p,e,g)};Object.defineProperty(a.prototype,"environmentTexture",{get:function(){return this._environmentTexture},set:function(a){this._environmentTexture=a},enumerable:!1,configurable:!0});a.prototype.getNodes=
function(){var a=[];a=a.concat(this.meshes);a=a.concat(this.lights);a=a.concat(this.cameras);a=a.concat(this.transformNodes);this.skeletons.forEach(function(p){return a=a.concat(p.bones)});return a};a._BabylonFileParsers={};a._IndividualBabylonFileParsers={};return a}()},Klbi:function(k,f,a){a.d(f,"a",function(){return p});var n=a("De3F"),l=a("YKqZ"),r=a("M3k4"),p=function(){function a(){}a.ClearProfilesCache=function(){this._ProfilesList=null;this._ProfileLoadingPromises={}};a.DefaultFallbacks=function(){this.RegisterFallbacksForProfileId("google-daydream",
["generic-touchpad"]);this.RegisterFallbacksForProfileId("htc-vive-focus",["generic-trigger-touchpad"]);this.RegisterFallbacksForProfileId("htc-vive",["generic-trigger-squeeze-touchpad"]);this.RegisterFallbacksForProfileId("magicleap-one",["generic-trigger-squeeze-touchpad"]);this.RegisterFallbacksForProfileId("windows-mixed-reality",["generic-trigger-squeeze-touchpad-thumbstick"]);this.RegisterFallbacksForProfileId("microsoft-mixed-reality",["windows-mixed-reality","generic-trigger-squeeze-touchpad-thumbstick"]);
this.RegisterFallbacksForProfileId("oculus-go",["generic-trigger-touchpad"]);this.RegisterFallbacksForProfileId("oculus-touch-v2",["oculus-touch","generic-trigger-squeeze-thumbstick"]);this.RegisterFallbacksForProfileId("oculus-touch",["generic-trigger-squeeze-thumbstick"]);this.RegisterFallbacksForProfileId("samsung-gearvr",["windows-mixed-reality","generic-trigger-squeeze-touchpad-thumbstick"]);this.RegisterFallbacksForProfileId("samsung-odyssey",["generic-touchpad"]);this.RegisterFallbacksForProfileId("valve-index",
["generic-trigger-squeeze-touchpad-thumbstick"])};a.FindFallbackWithProfileId=function(a){var e=this._Fallbacks[a]||[];e.unshift(a);return e};a.GetMotionControllerWithXRInput=function(a,e,h){var c=this,b=[];h&&b.push(h);b.push.apply(b,a.profiles||[]);b.length&&!b[0]&&b.pop();if(a.gamepad&&a.gamepad.id)switch(a.gamepad.id){case a.gamepad.id.match(/oculus touch/gi)?a.gamepad.id:void 0:b.push("oculus-touch-v2")}h=b.indexOf("windows-mixed-reality");-1!==h&&b.splice(h,0,"microsoft-mixed-reality");b.length||
b.push("generic-trigger");if(this.UseOnlineRepository){var m=this.PrioritizeOnlineRepository?this._LoadProfilesFromAvailableControllers:this._LoadProfileFromRepository;return(this.PrioritizeOnlineRepository?this._LoadProfileFromRepository:this._LoadProfilesFromAvailableControllers).call(this,b,a,e).catch(function(){return m.call(c,b,a,e)})}return this._LoadProfilesFromAvailableControllers(b,a,e)};a.RegisterController=function(a,e){this._AvailableControllers[a]=e};a.RegisterFallbacksForProfileId=function(a,
e){var h;this._Fallbacks[a]?(h=this._Fallbacks[a]).push.apply(h,e):this._Fallbacks[a]=e};a.UpdateProfilesList=function(){return this._ProfilesList=l.b.LoadFileAsync(this.BaseRepositoryUrl+"/profiles/profilesList.json",!1).then(function(a){return JSON.parse(a.toString())})};a._LoadProfileFromRepository=function(a,e,h){var c=this;return Promise.resolve().then(function(){return c._ProfilesList?c._ProfilesList:c.UpdateProfilesList()}).then(function(b){for(var c=0;c<a.length;++c)if(a[c]&&b[a[c]])return a[c];
throw Error("neither controller "+a[0]+" nor all fallbacks were found in the repository,");}).then(function(a){c._ProfileLoadingPromises[a]||(c._ProfileLoadingPromises[a]=l.b.LoadFileAsync(c.BaseRepositoryUrl+"/profiles/"+a+"/profile.json",!1).then(function(a){return JSON.parse(a)}));return c._ProfileLoadingPromises[a]}).then(function(a){return new r.a(h,e,a,c.BaseRepositoryUrl)})};a._LoadProfilesFromAvailableControllers=function(a,e,h){for(var c=0;c<a.length;++c)if(a[c])for(var b=this.FindFallbackWithProfileId(a[c]),
m=0;m<b.length;++m){var d=this._AvailableControllers[b[m]];if(d)return Promise.resolve(d(e,h))}throw Error("no controller requested was found in the available controllers list");};a._AvailableControllers={};a._Fallbacks={};a._ProfileLoadingPromises={};a.BaseRepositoryUrl="https://immersive-web.github.io/webxr-input-profiles/packages/viewer/dist";a.PrioritizeOnlineRepository=!0;a.UseOnlineRepository=!0;return a}();p.RegisterController(n.a.ProfileId,function(a,g){return new n.a(g,a.gamepad,a.handedness)});
p.DefaultFallbacks()},M3k4:function(k,f,a){a.d(f,"a",function(){return b});var n=a("oYeq");k=a("c6XG");var l=a("R0D4"),r=a("wAMR"),p=a("SYzJ"),e=a("Xeau"),g=a("UlYS"),q=a("H22S"),h=a("kdvT"),c=a("uyO6"),b=function(a){function b(b,c,d,m){b=a.call(this,b,d.layouts[c.handedness||"none"],c.gamepad,c.handedness)||this;b._repositoryUrl=m;b._buttonMeshMapping={};b._touchDots={};b.profileId=d.profileId;return b}Object(n.d)(b,a);b.prototype.dispose=function(){var b=this;a.prototype.dispose.call(this);Object.keys(this._touchDots).forEach(function(a){b._touchDots[a].dispose()})};
b.prototype._getFilenameAndPath=function(){return{filename:this.layout.assetPath,path:this._repositoryUrl+"/profiles/"+this.profileId+"/"}};b.prototype._getModelLoadingConstraints=function(){var a=l.a.IsPluginForExtensionAvailable(".glb");a||c.a.Warn("glTF / glb loaded was not registered, using generic controller instead");return a};b.prototype._processLoadedModel=function(a){var b=this;this.getComponentIds().forEach(function(a){var c=b.layout.components[a];b._buttonMeshMapping[a]={mainMesh:b._getChildByName(b.rootMesh,
c.rootNodeName),states:{}};Object.keys(c.visualResponses).forEach(function(d){var m=c.visualResponses[d];"transform"===m.valueNodeProperty?b._buttonMeshMapping[a].states[d]={valueMesh:b._getChildByName(b.rootMesh,m.valueNodeName),minMesh:b._getChildByName(b.rootMesh,m.minNodeName),maxMesh:b._getChildByName(b.rootMesh,m.maxNodeName)}:(b._buttonMeshMapping[a].states[d]={valueMesh:b._getChildByName(b.rootMesh,c.type===g.a.TOUCHPAD_TYPE&&c.touchPointNodeName?c.touchPointNodeName:m.valueNodeName)},c.type!==
g.a.TOUCHPAD_TYPE||b._touchDots[d]||(m=q.a.CreateSphere(d+"dot",{diameter:.0015,segments:8},b.scene),m.material=new h.a(d+"mat",b.scene),m.material.diffuseColor=e.a.Red(),m.parent=b._buttonMeshMapping[a].states[d].valueMesh||null,m.isVisible=!1,b._touchDots[d]=m))})})};b.prototype._setRootMesh=function(a){this.rootMesh=new r.a(this.profileId+"-"+this.handedness,this.scene);this.rootMesh.isPickable=!1;for(var b,c=0;c<a.length;c++){var d=a[c];d.isPickable=!1;d.parent||(b=d)}b&&b.setParent(this.rootMesh);
this.scene.useRightHandedSystem||this.rootMesh.rotate(p.a.Y,Math.PI,p.c.WORLD)};b.prototype._updateModel=function(a){var b=this;this.disableAnimation||this.getComponentIds().forEach(function(a){var c=b.getComponent(a);if(c.hasChanges){var d=b._buttonMeshMapping[a],m=b.layout.components[a];Object.keys(m.visualResponses).forEach(function(a){var e=m.visualResponses[a],h=c.value;"xAxis"===e.componentProperty?h=c.axes.x:"yAxis"===e.componentProperty&&(h=c.axes.y);if("transform"===e.valueNodeProperty)b._lerpTransform(d.states[a],
h,"button"!==e.componentProperty);else{if(e=d.states[a].valueMesh)e.isVisible=c.touched||c.pressed;b._touchDots[a]&&(b._touchDots[a].isVisible=c.touched||c.pressed)}})}})};return b}(k.a)},NIHf:function(k,f,a){a.d(f,"a",function(){return h});var n=a("oYeq"),l=a("/SR9"),r=a("CAkI");k=a("sdjL");var p=a("fX5v"),e=a("JIAX"),g=a("ps+7"),q=a("Ul6c"),h=function(a){function b(b,c,e){var d=a.call(this,b,l.e.Zero(),c)||this;d._xrSessionManager=e;d._firstFrame=!1;d._referenceQuaternion=l.b.Identity();d._referencedPosition=
new l.e;d._xrInvPositionCache=new l.e;d._xrInvQuaternionCache=l.b.Identity();d._trackingState=q.b.NOT_TRACKING;d.onBeforeCameraTeleport=new g.a;d.onAfterCameraTeleport=new g.a;d.onTrackingStateChanged=new g.a;d.compensateOnFirstFrame=!0;d._rotate180=new l.b(0,1,0,0);d.minZ=.1;d.rotationQuaternion=new l.b;d.cameraRigMode=r.a.RIG_MODE_CUSTOM;d.updateUpVectorFromRotation=!0;d._updateNumberOfRigCameras(1);d.freezeProjectionMatrix();d._xrSessionManager.onXRSessionInit.add(function(){d._referencedPosition.copyFromFloats(0,
0,0);d._referenceQuaternion.copyFromFloats(0,0,0,1);d._firstFrame=d.compensateOnFirstFrame});d._xrSessionManager.onXRFrameObservable.add(function(a){d._firstFrame&&d._updateFromXRSession();d._updateReferenceSpace();d._updateFromXRSession()},void 0,!0);return d}Object(n.d)(b,a);Object.defineProperty(b.prototype,"trackingState",{get:function(){return this._trackingState},enumerable:!1,configurable:!0});b.prototype._setTrackingState=function(a){this._trackingState!==a&&(this._trackingState=a,this.onTrackingStateChanged.notifyObservers(a))};
Object.defineProperty(b.prototype,"realWorldHeight",{get:function(){var a=this._xrSessionManager.currentFrame&&this._xrSessionManager.currentFrame.getViewerPose(this._xrSessionManager.baseReferenceSpace);return a&&a.transform?a.transform.position.y:0},enumerable:!1,configurable:!0});b.prototype._updateForDualEyeDebugging=function(){this._updateNumberOfRigCameras(2);this.rigCameras[0].viewport=new e.a(0,0,.5,1);this.rigCameras[0].outputRenderTarget=null;this.rigCameras[1].viewport=new e.a(.5,0,.5,
1);this.rigCameras[1].outputRenderTarget=null};b.prototype.setTransformationFromNonVRCamera=function(a,b){void 0===a&&(a=this.getScene().activeCamera);void 0===b&&(b=!0);a&&a!==this&&(a.computeWorldMatrix().decompose(void 0,this.rotationQuaternion,this.position),this.position.y=0,l.b.FromEulerAnglesToRef(0,this.rotationQuaternion.toEulerAngles().y,0,this.rotationQuaternion),this._firstFrame=!0,b&&this._xrSessionManager.resetReferenceSpace())};b.prototype.getClassName=function(){return"WebXRCamera"};
b.prototype._updateFromXRSession=function(){var a=this,b=this._xrSessionManager.currentFrame&&this._xrSessionManager.currentFrame.getViewerPose(this._xrSessionManager.referenceSpace);if(b){this._setTrackingState(b.emulatedPosition?q.b.TRACKING_LOST:q.b.TRACKING);if(b.transform){var c=b.transform.position;this._referencedPosition.set(c.x,c.y,c.z);c=b.transform.orientation;this._referenceQuaternion.set(c.x,c.y,c.z,c.w);this._scene.useRightHandedSystem||(this._referencedPosition.z*=-1,this._referenceQuaternion.z*=
-1,this._referenceQuaternion.w*=-1);this._firstFrame?(this._firstFrame=!1,this.position.y+=this._referencedPosition.y,this._referenceQuaternion.copyFromFloats(0,0,0,1)):(this.rotationQuaternion.copyFrom(this._referenceQuaternion),this.position.copyFrom(this._referencedPosition))}this.rigCameras.length!==b.views.length&&this._updateNumberOfRigCameras(b.views.length);b.views.forEach(function(b,c){var d=a.rigCameras[c];d.isLeftCamera||d.isRightCamera||("right"===b.eye?d._isRightCamera=!0:"left"===b.eye&&
(d._isLeftCamera=!0));var e=b.transform.position,m=b.transform.orientation;d.position.set(e.x,e.y,e.z);d.rotationQuaternion.set(m.x,m.y,m.z,m.w);a._scene.useRightHandedSystem?d.rotationQuaternion.multiplyInPlace(a._rotate180):(d.position.z*=-1,d.rotationQuaternion.z*=-1,d.rotationQuaternion.w*=-1);l.a.FromFloat32ArrayToRefScaled(b.projectionMatrix,0,1,d._projectionMatrix);a._scene.useRightHandedSystem||d._projectionMatrix.toggleProjectionMatrixHandInPlace();0===c&&a._projectionMatrix.copyFrom(d._projectionMatrix);
a._xrSessionManager.session.renderState.baseLayer&&(c=a._xrSessionManager.session.renderState.baseLayer.getViewport(b),e=a._xrSessionManager.session.renderState.baseLayer.framebufferWidth,m=a._xrSessionManager.session.renderState.baseLayer.framebufferHeight,d.viewport.width=c.width/e,d.viewport.height=c.height/m,d.viewport.x=c.x/e,d.viewport.y=c.y/m);d.outputRenderTarget=a._xrSessionManager.getRenderTargetTextureForEye(b.eye)})}else this._setTrackingState(q.b.NOT_TRACKING)};b.prototype._updateNumberOfRigCameras=
function(a){for(void 0===a&&(a=1);this.rigCameras.length<a;){var b=new p.a("XR-RigCamera: "+this.rigCameras.length,l.e.Zero(),this.getScene());b.minZ=.1;b.rotationQuaternion=new l.b;b.updateUpVectorFromRotation=!0;b.isRigCamera=!0;b.rigParent=this;b.freezeProjectionMatrix();this.rigCameras.push(b)}for(;this.rigCameras.length>a;)(b=this.rigCameras.pop())&&b.dispose()};b.prototype._updateReferenceSpace=function(){this.position.equals(this._referencedPosition)&&this.rotationQuaternion.equals(this._referenceQuaternion)||
(this.position.subtractToRef(this._referencedPosition,this._referencedPosition),this._referenceQuaternion.conjugateInPlace(),this._referenceQuaternion.multiplyToRef(this.rotationQuaternion,this._referenceQuaternion),this._updateReferenceSpaceOffset(this._referencedPosition,this._referenceQuaternion.normalize()))};b.prototype._updateReferenceSpaceOffset=function(a,b,c){void 0===c&&(c=!1);this._xrSessionManager.referenceSpace&&this._xrSessionManager.currentFrame&&(this._xrInvPositionCache.copyFrom(a),
b?this._xrInvQuaternionCache.copyFrom(b):this._xrInvQuaternionCache.copyFromFloats(0,0,0,1),this._scene.useRightHandedSystem||(this._xrInvPositionCache.z*=-1,this._xrInvQuaternionCache.z*=-1,this._xrInvQuaternionCache.w*=-1),this._xrInvPositionCache.negateInPlace(),this._xrInvQuaternionCache.conjugateInPlace(),this._xrInvPositionCache.rotateByQuaternionToRef(this._xrInvQuaternionCache,this._xrInvPositionCache),c&&(this._xrInvPositionCache.y=0),a=new XRRigidTransform({x:this._xrInvPositionCache.x,
y:this._xrInvPositionCache.y,z:this._xrInvPositionCache.z},{x:this._xrInvQuaternionCache.x,y:this._xrInvQuaternionCache.y,z:this._xrInvQuaternionCache.z,w:this._xrInvQuaternionCache.w}),a=this._xrSessionManager.referenceSpace.getOffsetReferenceSpace(a),b=this._xrSessionManager.currentFrame&&this._xrSessionManager.currentFrame.getViewerPose(a))&&(b=new l.e(b.transform.position.x,b.transform.position.y,b.transform.position.z),this._scene.useRightHandedSystem||(b.z*=-1),this.position.subtractToRef(b,
b),this._scene.useRightHandedSystem||(b.z*=-1),b.negateInPlace(),b=new XRRigidTransform({x:b.x,y:b.y,z:b.z}),this._xrSessionManager.referenceSpace=a.getOffsetReferenceSpace(b))};return b}(k.a)},SqQr:function(k,f,a){a.d(f,"a",function(){return q});var n=a("ps+7"),l=a("HD13"),r=a("NIHf"),p=a("Ul6c"),e=a("whcN"),g=a("uyO6"),q=function(){function a(a){var b=this;this.scene=a;this._nonVRCamera=null;this._originalSceneAutoClear=!0;this._supported=!1;this.onInitialXRPoseSetObservable=new n.a;this.onStateChangedObservable=
new n.a;this.state=p.a.NOT_IN_XR;this.sessionManager=new l.a(a);this.camera=new r.a("",a,this.sessionManager);this.featuresManager=new e.b(this.sessionManager);a.onDisposeObservable.add(function(){b.exitXRAsync()})}a.CreateAsync=function(c){var b=new a(c);return b.sessionManager.initializeAsync().then(function(){b._supported=!0;return b}).catch(function(a){b._setState(p.a.NOT_IN_XR);b.dispose();throw a;})};a.prototype.dispose=function(){this.camera.dispose();this.onStateChangedObservable.clear();
this.onInitialXRPoseSetObservable.clear();this.sessionManager.dispose();this._nonVRCamera&&(this.scene.activeCamera=this._nonVRCamera)};a.prototype.enterXRAsync=function(a,b,e,d){var c=this;void 0===e&&(e=this.sessionManager.getWebXRRenderTarget());void 0===d&&(d={});if(!this._supported)throw"WebXR not supported in this browser or environment";this._setState(p.a.ENTERING_XR);"viewer"!==b&&"local"!==b&&(d.optionalFeatures=d.optionalFeatures||[],d.optionalFeatures.push(b));this.featuresManager.extendXRSessionInitObject(d);
"immersive-ar"===a&&"unbounded"!==b&&g.a.Warn("We recommend using 'unbounded' reference space type when using 'immersive-ar' session mode");return this.sessionManager.initializeSessionAsync(a,d).then(function(){return c.sessionManager.setReferenceSpaceTypeAsync(b)}).then(function(){return e.initializeXRLayerAsync(c.sessionManager.session)}).then(function(){return c.sessionManager.updateRenderStateAsync({depthFar:c.camera.maxZ,depthNear:c.camera.minZ,baseLayer:e.xrLayer})}).then(function(){c.sessionManager.runXRRenderLoop();
c._originalSceneAutoClear=c.scene.autoClear;c._nonVRCamera=c.scene.activeCamera;c.scene.activeCamera=c.camera;"immersive-ar"!==a?c._nonXRToXRCamera():(c.scene.autoClear=!1,c.camera.compensateOnFirstFrame=!1);c.sessionManager.onXRSessionEnded.addOnce(function(){c.camera.rigCameras.forEach(function(a){a.outputRenderTarget=null});c.scene.autoClear=c._originalSceneAutoClear;c.scene.activeCamera=c._nonVRCamera;"immersive-ar"!==a&&c.camera.compensateOnFirstFrame&&(c._nonVRCamera.setPosition?c._nonVRCamera.setPosition(c.camera.position):
c._nonVRCamera.position.copyFrom(c.camera.position));c._setState(p.a.NOT_IN_XR)});c.sessionManager.onXRFrameObservable.addOnce(function(){c._setState(p.a.IN_XR)});return c.sessionManager}).catch(function(a){console.log(a);console.log(a.message);c._setState(p.a.NOT_IN_XR);throw a;})};a.prototype.exitXRAsync=function(){if(this.state!==p.a.IN_XR)return Promise.resolve();this._setState(p.a.EXITING_XR);return this.sessionManager.exitXRAsync()};a.prototype._nonXRToXRCamera=function(){this.camera.setTransformationFromNonVRCamera(this._nonVRCamera);
this.onInitialXRPoseSetObservable.notifyObservers(this.camera)};a.prototype._setState=function(a){this.state!==a&&(this.state=a,this.onStateChangedObservable.notifyObservers(this.state))};return a}()},T8jy:function(k,f,a){a.d(f,"b",function(){return l});a.d(f,"a",function(){return r});var n=a("ps+7"),l=function(){function a(){}a.GetDefaults=function(e){var g=new a;g.canvasOptions={antialias:!0,depth:!0,stencil:e?e.isStencilEnable:!0,alpha:!0,multiview:!1,framebufferScaleFactor:1};g.newCanvasCssStyle=
"position:absolute; bottom:0px;right:0px;z-index:10;width:90%;height:100%;background-color: #000000;";return g};return a}(),r=function(){function a(a,g){var e=this;void 0===g&&(g=l.GetDefaults());this._options=g;this.xrLayer=this._canvas=null;this.onXRLayerInitObservable=new n.a;this._engine=a.scene.getEngine();g.canvasElement?this._setManagedOutputCanvas(g.canvasElement):(g=document.createElement("canvas"),g.style.cssText=this._options.newCanvasCssStyle||"position:absolute; bottom:0px;right:0px;",
this._setManagedOutputCanvas(g));a.onXRSessionInit.add(function(){e._addCanvas()});a.onXRSessionEnded.add(function(){e._removeCanvas()})}a.prototype.dispose=function(){this._removeCanvas();this._setManagedOutputCanvas(null)};a.prototype.initializeXRLayerAsync=function(a){var e=this,f=function(){var h=new XRWebGLLayer(a,e.canvasContext,e._options.canvasOptions);e.onXRLayerInitObservable.notifyObservers(h);return h};return this.canvasContext.makeXRCompatible?this.canvasContext.makeXRCompatible().then(function(){e.xrLayer=
f();return e.xrLayer}):(this.xrLayer=f(),Promise.resolve(this.xrLayer))};a.prototype._addCanvas=function(){var a=this;this._canvas&&this._canvas!==this._engine.getRenderingCanvas()&&document.body.appendChild(this._canvas);this.xrLayer?this._setCanvasSize(!0):this.onXRLayerInitObservable.addOnce(function(e){a._setCanvasSize(!0,e)})};a.prototype._removeCanvas=function(){this._canvas&&document.body.contains(this._canvas)&&this._canvas!==this._engine.getRenderingCanvas()&&document.body.removeChild(this._canvas);
this._setCanvasSize(!1)};a.prototype._setCanvasSize=function(a,g){void 0===a&&(a=!0);void 0===g&&(g=this.xrLayer);this._canvas&&(a?g&&(this._canvas!==this._engine.getRenderingCanvas()?(this._canvas.style.width=g.framebufferWidth+"px",this._canvas.style.height=g.framebufferHeight+"px"):this._engine.setSize(g.framebufferWidth,g.framebufferHeight)):this._originalCanvasSize&&(this._canvas!==this._engine.getRenderingCanvas()?(this._canvas.style.width=this._originalCanvasSize.width+"px",this._canvas.style.height=
this._originalCanvasSize.height+"px"):this._engine.setSize(this._originalCanvasSize.width,this._originalCanvasSize.height)))};a.prototype._setManagedOutputCanvas=function(a){this._removeCanvas();a?(this._originalCanvasSize={width:a.offsetWidth,height:a.offsetHeight},this._canvas=a,this.canvasContext=this._canvas.getContext("webgl2"),this.canvasContext||(this.canvasContext=this._canvas.getContext("webgl"))):this.canvasContext=this._canvas=null};return a}()},Ufda:function(k,f,a){a.d(f,"a",function(){return q});
var n=a("oYeq"),l=a("/SR9"),r=a("ADVu"),p=a("ps+7"),e=a("e2Mr"),g=a("n5HA"),q=function(){function a(a,b){void 0===b&&(b=null);this.state="";this.reservedDataStore=this.metadata=null;this._isDisposed=this._doNotSerialize=!1;this.animations=[];this._ranges={};this.onReady=null;this._isReady=this._isParentEnabled=this._isEnabled=!0;this._childUpdateId=this._parentUpdateId=this._currentRenderId=-1;this._waitingParentId=null;this._cache={};this._children=this._parentNode=null;this._worldMatrix=l.a.Identity();
this._worldMatrixDeterminant=0;this._worldMatrixDeterminantIsDirty=!0;this._sceneRootNodesIndex=-1;this._animationPropertiesOverride=null;this._isNode=!0;this.onDisposeObservable=new p.a;this._onDisposeObserver=null;this._behaviors=[];this.id=this.name=a;this._scene=b||e.a.LastCreatedScene;this.uniqueId=this._scene.getUniqueId();this._initCache()}a.AddNodeConstructor=function(a,b){this._NodeConstructors[a]=b};a.Construct=function(a,b,e,d){return(a=this._NodeConstructors[a])?a(b,e,d):null};Object.defineProperty(a.prototype,
"doNotSerialize",{get:function(){return this._doNotSerialize?!0:this._parentNode?this._parentNode.doNotSerialize:!1},set:function(a){this._doNotSerialize=a},enumerable:!1,configurable:!0});a.prototype.isDisposed=function(){return this._isDisposed};Object.defineProperty(a.prototype,"parent",{get:function(){return this._parentNode},set:function(a){if(this._parentNode!==a){var b=this._parentNode;if(this._parentNode&&void 0!==this._parentNode._children&&null!==this._parentNode._children){var c=this._parentNode._children.indexOf(this);
-1!==c&&this._parentNode._children.splice(c,1);a||this._isDisposed||this._addToSceneRootNodes()}if(this._parentNode=a){if(void 0===this._parentNode._children||null===this._parentNode._children)this._parentNode._children=[];this._parentNode._children.push(this);b||this._removeFromSceneRootNodes()}this._syncParentEnabledState()}},enumerable:!1,configurable:!0});a.prototype._addToSceneRootNodes=function(){-1===this._sceneRootNodesIndex&&(this._sceneRootNodesIndex=this._scene.rootNodes.length,this._scene.rootNodes.push(this))};
a.prototype._removeFromSceneRootNodes=function(){if(-1!==this._sceneRootNodesIndex){var a=this._scene.rootNodes;a[this._sceneRootNodesIndex]=a[a.length-1];a[this._sceneRootNodesIndex]._sceneRootNodesIndex=this._sceneRootNodesIndex;this._scene.rootNodes.pop();this._sceneRootNodesIndex=-1}};Object.defineProperty(a.prototype,"animationPropertiesOverride",{get:function(){return this._animationPropertiesOverride?this._animationPropertiesOverride:this._scene.animationPropertiesOverride},set:function(a){this._animationPropertiesOverride=
a},enumerable:!1,configurable:!0});a.prototype.getClassName=function(){return"Node"};Object.defineProperty(a.prototype,"onDispose",{set:function(a){this._onDisposeObserver&&this.onDisposeObservable.remove(this._onDisposeObserver);this._onDisposeObserver=this.onDisposeObservable.add(a)},enumerable:!1,configurable:!0});a.prototype.getScene=function(){return this._scene};a.prototype.getEngine=function(){return this._scene.getEngine()};a.prototype.addBehavior=function(a,b){var c=this;void 0===b&&(b=!1);
if(-1!==this._behaviors.indexOf(a))return this;a.init();this._scene.isLoading&&!b?this._scene.onDataLoadedObservable.addOnce(function(){a.attach(c)}):a.attach(this);this._behaviors.push(a);return this};a.prototype.removeBehavior=function(a){a=this._behaviors.indexOf(a);if(-1===a)return this;this._behaviors[a].detach();this._behaviors.splice(a,1);return this};Object.defineProperty(a.prototype,"behaviors",{get:function(){return this._behaviors},enumerable:!1,configurable:!0});a.prototype.getBehaviorByName=
function(a){for(var b=0,c=this._behaviors;b<c.length;b++){var d=c[b];if(d.name===a)return d}return null};a.prototype.getWorldMatrix=function(){this._currentRenderId!==this._scene.getRenderId()&&this.computeWorldMatrix();return this._worldMatrix};a.prototype._getWorldMatrixDeterminant=function(){this._worldMatrixDeterminantIsDirty&&(this._worldMatrixDeterminantIsDirty=!1,this._worldMatrixDeterminant=this._worldMatrix.determinant());return this._worldMatrixDeterminant};Object.defineProperty(a.prototype,
"worldMatrixFromCache",{get:function(){return this._worldMatrix},enumerable:!1,configurable:!0});a.prototype._initCache=function(){this._cache={};this._cache.parent=void 0};a.prototype.updateCache=function(a){if(a||!this.isSynchronized())this._cache.parent=this.parent,this._updateCache()};a.prototype._getActionManagerForTrigger=function(a,b){return this.parent?this.parent._getActionManagerForTrigger(a,!1):null};a.prototype._updateCache=function(a){};a.prototype._isSynchronized=function(){return!0};
a.prototype._markSyncedWithParent=function(){this._parentNode&&(this._parentUpdateId=this._parentNode._childUpdateId)};a.prototype.isSynchronizedWithParent=function(){return this._parentNode?this._parentUpdateId!==this._parentNode._childUpdateId?!1:this._parentNode.isSynchronized():!0};a.prototype.isSynchronized=function(){return this._cache.parent!=this._parentNode?(this._cache.parent=this._parentNode,!1):this._parentNode&&!this.isSynchronizedWithParent()?!1:this._isSynchronized()};a.prototype.isReady=
function(a){return this._isReady};a.prototype.isEnabled=function(a){void 0===a&&(a=!0);return!1===a?this._isEnabled:this._isEnabled?this._isParentEnabled:!1};a.prototype._syncParentEnabledState=function(){this._isParentEnabled=this._parentNode?this._parentNode.isEnabled():!0;this._children&&this._children.forEach(function(a){a._syncParentEnabledState()})};a.prototype.setEnabled=function(a){this._isEnabled=a;this._syncParentEnabledState()};a.prototype.isDescendantOf=function(a){return this.parent?
this.parent===a?!0:this.parent.isDescendantOf(a):!1};a.prototype._getDescendants=function(a,b,e){void 0===b&&(b=!1);if(this._children)for(var c=0;c<this._children.length;c++){var m=this._children[c];e&&!e(m)||a.push(m);b||m._getDescendants(a,!1,e)}};a.prototype.getDescendants=function(a,b){var c=[];this._getDescendants(c,a,b);return c};a.prototype.getChildMeshes=function(a,b){var c=[];this._getDescendants(c,a,function(a){return(!b||b(a))&&void 0!==a.cullingStrategy});return c};a.prototype.getChildren=
function(a,b){void 0===b&&(b=!0);return this.getDescendants(b,a)};a.prototype._setReady=function(a){if(a!==this._isReady)if(a){if(this.onReady)this.onReady(this);this._isReady=!0}else this._isReady=!1};a.prototype.getAnimationByName=function(a){for(var b=0;b<this.animations.length;b++){var c=this.animations[b];if(c.name===a)return c}return null};a.prototype.createAnimationRange=function(c,b,e){if(!this._ranges[c]){this._ranges[c]=a._AnimationRangeFactory(c,b,e);for(var d=0,m=this.animations.length;d<
m;d++)this.animations[d]&&this.animations[d].createRange(c,b,e)}};a.prototype.deleteAnimationRange=function(a,b){void 0===b&&(b=!0);for(var c=0,d=this.animations.length;c<d;c++)this.animations[c]&&this.animations[c].deleteRange(a,b);this._ranges[a]=null};a.prototype.getAnimationRange=function(a){return this._ranges[a]||null};a.prototype.getAnimationRanges=function(){var a=[],b;for(b in this._ranges)a.push(this._ranges[b]);return a};a.prototype.beginAnimation=function(a,b,e,d){return(a=this.getAnimationRange(a))?
this._scene.beginAnimation(this,a.from,a.to,b,e,d):null};a.prototype.serializeAnimationRanges=function(){var a=[],b;for(b in this._ranges){var e=this._ranges[b];if(e){var d={};d.name=b;d.from=e.from;d.to=e.to;a.push(d)}}return a};a.prototype.computeWorldMatrix=function(a){this._worldMatrix||(this._worldMatrix=l.a.Identity());return this._worldMatrix};a.prototype.dispose=function(a,b){void 0===b&&(b=!1);this._isDisposed=!0;if(!a)for(var c=0,d=this.getDescendants(!0);c<d.length;c++)d[c].dispose(a,b);
this.parent?this.parent=null:this._removeFromSceneRootNodes();this.onDisposeObservable.notifyObservers(this);this.onDisposeObservable.clear();a=0;for(b=this._behaviors;a<b.length;a++)b[a].detach();this._behaviors=[]};a.ParseAnimationRanges=function(a,b,e){if(b.ranges)for(e=0;e<b.ranges.length;e++){var c=b.ranges[e];a.createAnimationRange(c.name,c.from,c.to)}};a.prototype.getHierarchyBoundingVectors=function(a,b){void 0===a&&(a=!0);void 0===b&&(b=null);this.getScene().incrementRenderId();this.computeWorldMatrix(!0);
if(this.getBoundingInfo&&this.subMeshes){var c=this.getBoundingInfo();var d=c.boundingBox.minimumWorld.clone();c=c.boundingBox.maximumWorld.clone()}else d=new l.e(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),c=new l.e(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);if(a){a=0;for(var e=this.getDescendants(!1);a<e.length;a++){var g=e[a];g.computeWorldMatrix(!0);if((!b||b(g))&&g.getBoundingInfo&&0!==g.getTotalVertices()){g=g.getBoundingInfo().boundingBox;var h=g.maximumWorld;l.e.CheckExtends(g.minimumWorld,
d,c);l.e.CheckExtends(h,d,c)}}}return{min:d,max:c}};a._AnimationRangeFactory=function(a,b,e){throw g.a.WarnImport("AnimationRange");};a._NodeConstructors={};Object(n.c)([Object(r.c)()],a.prototype,"name",void 0);Object(n.c)([Object(r.c)()],a.prototype,"id",void 0);Object(n.c)([Object(r.c)()],a.prototype,"uniqueId",void 0);Object(n.c)([Object(r.c)()],a.prototype,"state",void 0);Object(n.c)([Object(r.c)()],a.prototype,"metadata",void 0);return a}()},Ul6c:function(k,f,a){a.d(f,"a",function(){return n});
a.d(f,"b",function(){return l});var n;(function(a){a[a.ENTERING_XR=0]="ENTERING_XR";a[a.EXITING_XR=1]="EXITING_XR";a[a.IN_XR=2]="IN_XR";a[a.NOT_IN_XR=3]="NOT_IN_XR"})(n||(n={}));var l;(function(a){a[a.NOT_TRACKING=0]="NOT_TRACKING";a[a.TRACKING_LOST=1]="TRACKING_LOST";a[a.TRACKING=2]="TRACKING"})(l||(l={}))},UlYS:function(k,f,a){a.d(f,"a",function(){return l});var n=a("ps+7"),l=function(){function a(a,e,g,f){void 0===g&&(g=-1);void 0===f&&(f=[]);this.id=a;this.type=e;this._buttonIndex=g;this._axesIndices=
f;this._axes={x:0,y:0};this._changes={};this._currentValue=0;this._touched=this._pressed=this._hasChanges=!1;this.onAxisValueChangedObservable=new n.a;this.onButtonStateChangedObservable=new n.a}Object.defineProperty(a.prototype,"axes",{get:function(){return this._axes},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"changes",{get:function(){return this._changes},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"hasChanges",{get:function(){return this._hasChanges},
enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"pressed",{get:function(){return this._pressed},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"touched",{get:function(){return this._touched},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"value",{get:function(){return this._currentValue},enumerable:!1,configurable:!0});a.prototype.dispose=function(){this.onAxisValueChangedObservable.clear();this.onButtonStateChangedObservable.clear()};a.prototype.isAxes=
function(){return 0!==this._axesIndices.length};a.prototype.isButton=function(){return-1!==this._buttonIndex};a.prototype.update=function(a){var e=!1,g=!1;this._hasChanges=!1;this._changes={};if(this.isButton()){var f=a.buttons[this._buttonIndex];if(!f)return;this._currentValue!==f.value&&(this.changes.value={current:f.value,previous:this._currentValue},e=!0,this._currentValue=f.value);this._touched!==f.touched&&(this.changes.touched={current:f.touched,previous:this._touched},e=!0,this._touched=f.touched);
this._pressed!==f.pressed&&(this.changes.pressed={current:f.pressed,previous:this._pressed},e=!0,this._pressed=f.pressed)}this.isAxes()&&(this._axes.x!==a.axes[this._axesIndices[0]]&&(this.changes.axes={current:{x:a.axes[this._axesIndices[0]],y:this._axes.y},previous:{x:this._axes.x,y:this._axes.y}},this._axes.x=a.axes[this._axesIndices[0]],g=!0),this._axes.y!==a.axes[this._axesIndices[1]]&&(this.changes.axes?this.changes.axes.current.y=a.axes[this._axesIndices[1]]:this.changes.axes={current:{x:this._axes.x,
y:a.axes[this._axesIndices[1]]},previous:{x:this._axes.x,y:this._axes.y}},this._axes.y=a.axes[this._axesIndices[1]],g=!0));e&&(this._hasChanges=!0,this.onButtonStateChangedObservable.notifyObservers(this));g&&(this._hasChanges=!0,this.onAxisValueChangedObservable.notifyObservers(this._axes))};a.BUTTON_TYPE="button";a.SQUEEZE_TYPE="squeeze";a.THUMBSTICK_TYPE="thumbstick";a.TOUCHPAD_TYPE="touchpad";a.TRIGGER_TYPE="trigger";return a}()},c6XG:function(k,f,a){a.d(f,"a",function(){return h});var n=a("oYeq"),
l=a("UlYS"),r=a("ps+7"),p=a("uyO6"),e=a("R0D4"),g=a("/SR9"),q=a("wAMR"),h=function(){function a(a,c,d,e,g){var b=this;void 0===g&&(g=!1);this.scene=a;this.layout=c;this.gamepadObject=d;this.handedness=e;this._initComponent=function(a){if(a){var c=b.layout.components[a],d=c.type,e=c.gamepadIndices.button,g=[];void 0!==c.gamepadIndices.xAxis&&void 0!==c.gamepadIndices.yAxis&&g.push(c.gamepadIndices.xAxis,c.gamepadIndices.yAxis);b.components[a]=new l.a(a,d,e,g)}};this._modelReady=!1;this.components=
{};this.disableAnimation=!1;this.onModelLoadedObservable=new r.a;c.components&&Object.keys(c.components).forEach(this._initComponent)}a.prototype.dispose=function(){var a=this;this.getComponentIds().forEach(function(b){return a.getComponent(b).dispose()});this.rootMesh&&this.rootMesh.dispose()};a.prototype.getAllComponentsOfType=function(a){var b=this;return this.getComponentIds().map(function(a){return b.components[a]}).filter(function(b){return b.type===a})};a.prototype.getComponent=function(a){return this.components[a]};
a.prototype.getComponentIds=function(){return Object.keys(this.components)};a.prototype.getComponentOfType=function(a){return this.getAllComponentsOfType(a)[0]||null};a.prototype.getMainComponent=function(){return this.getComponent(this.layout.selectComponentId)};a.prototype.loadModel=function(){return Object(n.b)(this,void 0,void 0,function(){var a,c,d=this;return Object(n.e)(this,function(b){a=!this._getModelLoadingConstraints();c=this._getGenericFilenameAndPath();a?p.a.Warn("Falling back to generic models"):
c=this._getFilenameAndPath();return[2,new Promise(function(b,g){e.a.ImportMesh("",c.path,c.filename,d.scene,function(c){a?d._getGenericParentMesh(c):d._setRootMesh(c);d._processLoadedModel(c);d._modelReady=!0;d.onModelLoadedObservable.notifyObservers(d);b(!0)},null,function(a,b){p.a.Log(b);p.a.Warn("Failed to retrieve controller model of type "+d.profileId+" from the remote server: "+c.path+c.filename);g(b)})})]})})};a.prototype.updateFromXRFrame=function(a){var b=this;this.getComponentIds().forEach(function(a){return b.getComponent(a).update(b.gamepadObject)});
this.updateModel(a)};Object.defineProperty(a.prototype,"handness",{get:function(){return this.handedness},enumerable:!1,configurable:!0});a.prototype.pulse=function(a,c,d){void 0===d&&(d=0);return this.gamepadObject.hapticActuators&&this.gamepadObject.hapticActuators[d]?this.gamepadObject.hapticActuators[d].pulse(a,c):Promise.resolve(!1)};a.prototype._getChildByName=function(a,c){return a.getChildren(function(a){return a.name===c},!1)[0]};a.prototype._getImmediateChildByName=function(a,c){return a.getChildren(function(a){return a.name==
c},!0)[0]};a.prototype._lerpTransform=function(a,c,d){a.minMesh&&a.maxMesh&&a.valueMesh&&a.minMesh.rotationQuaternion&&a.maxMesh.rotationQuaternion&&a.valueMesh.rotationQuaternion&&(c=d?.5*c+.5:c,g.b.SlerpToRef(a.minMesh.rotationQuaternion,a.maxMesh.rotationQuaternion,c,a.valueMesh.rotationQuaternion),g.e.LerpToRef(a.minMesh.position,a.maxMesh.position,c,a.valueMesh.position))};a.prototype.updateModel=function(a){this._modelReady&&this._updateModel(a)};a.prototype._getGenericFilenameAndPath=function(){return{filename:"generic.babylon",
path:"https://controllers.babylonjs.com/generic/"}};a.prototype._getGenericParentMesh=function(a){var b=this;this.rootMesh=new q.a(this.profileId+" "+this.handedness,this.scene);a.forEach(function(a){a.parent||(a.isPickable=!1,a.setParent(b.rootMesh))});this.rootMesh.rotationQuaternion=g.b.FromEulerAngles(0,Math.PI,0)};return a}()},dcOm:function(k,f,a){a.d(f,"a",function(){return l.a});k=a("c6XG");a("UlYS");a("De3F");var n=a("oYeq"),l=a("Klbi"),r=a("wAMR"),p=a("/SR9"),e=a("R0D4"),g=a("uyO6"),q=function(a){function b(b,
c,d){b=a.call(this,b,h["left-right"],c,d)||this;b._mapping={defaultButton:{valueNodeName:"VALUE",unpressedNodeName:"UNPRESSED",pressedNodeName:"PRESSED"},defaultAxis:{valueNodeName:"VALUE",minNodeName:"MIN",maxNodeName:"MAX"},buttons:{"xr-standard-trigger":{rootNodeName:"SELECT",componentProperty:"button",states:["default","touched","pressed"]},"xr-standard-squeeze":{rootNodeName:"GRASP",componentProperty:"state",states:["pressed"]},"xr-standard-touchpad":{rootNodeName:"TOUCHPAD_PRESS",labelAnchorNodeName:"squeeze-label",
touchPointNodeName:"TOUCH"},"xr-standard-thumbstick":{rootNodeName:"THUMBSTICK_PRESS",componentProperty:"state",states:["pressed"]}},axes:{"xr-standard-touchpad":{"x-axis":{rootNodeName:"TOUCHPAD_TOUCH_X"},"y-axis":{rootNodeName:"TOUCHPAD_TOUCH_Y"}},"xr-standard-thumbstick":{"x-axis":{rootNodeName:"THUMBSTICK_X"},"y-axis":{rootNodeName:"THUMBSTICK_Y"}}}};b.profileId="microsoft-mixed-reality";return b}Object(n.d)(b,a);b.prototype._getFilenameAndPath=function(){return{filename:"left"===this.handedness?
b.MODEL_LEFT_FILENAME:b.MODEL_RIGHT_FILENAME,path:b.MODEL_BASE_URL+"default/"}};b.prototype._getModelLoadingConstraints=function(){var a=e.a.IsPluginForExtensionAvailable(".glb");a||g.a.Warn("glTF / glb loaded was not registered, using generic controller instead");return a};b.prototype._processLoadedModel=function(a){var b=this;this.rootMesh&&(this.getComponentIds().forEach(function(a,c){if(!b.disableAnimation&&a&&b.rootMesh){var d=b._mapping.buttons[a],e=d.rootNodeName;e?(c=b._getChildByName(b.rootMesh,
e))?(d.valueMesh=b._getImmediateChildByName(c,b._mapping.defaultButton.valueNodeName),d.pressedMesh=b._getImmediateChildByName(c,b._mapping.defaultButton.pressedNodeName),d.unpressedMesh=b._getImmediateChildByName(c,b._mapping.defaultButton.unpressedNodeName),d.valueMesh&&d.pressedMesh&&d.unpressedMesh?(a=b.getComponent(a))&&a.onButtonStateChangedObservable.add(function(a){b._lerpTransform(d,a.value)},void 0,!0):g.a.Warn("Missing button submesh under mesh with name: "+e)):g.a.Warn("Missing button mesh with name: "+
e):g.a.Log("Skipping unknown button at index: "+c+" with mapped name: "+a)}}),this.getComponentIds().forEach(function(a,c){var d=b.getComponent(a);d.isAxes()&&["x-axis","y-axis"].forEach(function(c){if(b.rootMesh){var e=b._mapping.axes[a][c],f=b._getChildByName(b.rootMesh,e.rootNodeName);f?(e.valueMesh=b._getImmediateChildByName(f,b._mapping.defaultAxis.valueNodeName),e.minMesh=b._getImmediateChildByName(f,b._mapping.defaultAxis.minNodeName),e.maxMesh=b._getImmediateChildByName(f,b._mapping.defaultAxis.maxNodeName),
e.valueMesh&&e.minMesh&&e.maxMesh?d&&d.onAxisValueChangedObservable.add(function(a){b._lerpTransform(e,"x-axis"===c?a.x:a.y,!0)},void 0,!0):g.a.Warn("Missing axis submesh under mesh with name: "+e.rootNodeName)):g.a.Warn("Missing axis mesh with name: "+e.rootNodeName)}})}))};b.prototype._setRootMesh=function(a){this.rootMesh=new r.a(this.profileId+" "+this.handedness,this.scene);this.rootMesh.isPickable=!1;for(var b,c=0;c<a.length;c++){var d=a[c];d.isPickable=!1;d.parent||(b=d)}b&&b.setParent(this.rootMesh);
this.scene.useRightHandedSystem||(this.rootMesh.rotationQuaternion=p.b.FromEulerAngles(0,Math.PI,0))};b.prototype._updateModel=function(){};b.MODEL_BASE_URL="https://controllers.babylonjs.com/microsoft/";b.MODEL_LEFT_FILENAME="left.glb";b.MODEL_RIGHT_FILENAME="right.glb";return b}(k.a);l.a.RegisterController("windows-mixed-reality",function(a,b){return new q(b,a.gamepad,a.handedness)});var h={left:{selectComponentId:"xr-standard-trigger",components:{"xr-standard-trigger":{type:"trigger",gamepadIndices:{button:0},
rootNodeName:"xr_standard_trigger",visualResponses:{xr_standard_trigger_pressed:{componentProperty:"button",states:["default","touched","pressed"],valueNodeProperty:"transform",valueNodeName:"xr_standard_trigger_pressed_value",minNodeName:"xr_standard_trigger_pressed_min",maxNodeName:"xr_standard_trigger_pressed_max"}}},"xr-standard-squeeze":{type:"squeeze",gamepadIndices:{button:1},rootNodeName:"xr_standard_squeeze",visualResponses:{xr_standard_squeeze_pressed:{componentProperty:"button",states:["default",
"touched","pressed"],valueNodeProperty:"transform",valueNodeName:"xr_standard_squeeze_pressed_value",minNodeName:"xr_standard_squeeze_pressed_min",maxNodeName:"xr_standard_squeeze_pressed_max"}}},"xr-standard-touchpad":{type:"touchpad",gamepadIndices:{button:2,xAxis:0,yAxis:1},rootNodeName:"xr_standard_touchpad",visualResponses:{xr_standard_touchpad_pressed:{componentProperty:"button",states:["default","touched","pressed"],valueNodeProperty:"transform",valueNodeName:"xr_standard_touchpad_pressed_value",
minNodeName:"xr_standard_touchpad_pressed_min",maxNodeName:"xr_standard_touchpad_pressed_max"},xr_standard_touchpad_xaxis_pressed:{componentProperty:"xAxis",states:["default","touched","pressed"],valueNodeProperty:"transform",valueNodeName:"xr_standard_touchpad_xaxis_pressed_value",minNodeName:"xr_standard_touchpad_xaxis_pressed_min",maxNodeName:"xr_standard_touchpad_xaxis_pressed_max"},xr_standard_touchpad_yaxis_pressed:{componentProperty:"yAxis",states:["default","touched","pressed"],valueNodeProperty:"transform",
valueNodeName:"xr_standard_touchpad_yaxis_pressed_value",minNodeName:"xr_standard_touchpad_yaxis_pressed_min",maxNodeName:"xr_standard_touchpad_yaxis_pressed_max"},xr_standard_touchpad_xaxis_touched:{componentProperty:"xAxis",states:["default","touched","pressed"],valueNodeProperty:"transform",valueNodeName:"xr_standard_touchpad_xaxis_touched_value",minNodeName:"xr_standard_touchpad_xaxis_touched_min",maxNodeName:"xr_standard_touchpad_xaxis_touched_max"},xr_standard_touchpad_yaxis_touched:{componentProperty:"yAxis",
states:["default","touched","pressed"],valueNodeProperty:"transform",valueNodeName:"xr_standard_touchpad_yaxis_touched_value",minNodeName:"xr_standard_touchpad_yaxis_touched_min",maxNodeName:"xr_standard_touchpad_yaxis_touched_max"},xr_standard_touchpad_axes_touched:{componentProperty:"state",states:["touched","pressed"],valueNodeProperty:"visibility",valueNodeName:"xr_standard_touchpad_axes_touched_value"}},touchPointNodeName:"xr_standard_touchpad_axes_touched_value"},"xr-standard-thumbstick":{type:"thumbstick",
gamepadIndices:{button:3,xAxis:2,yAxis:3},rootNodeName:"xr_standard_thumbstick",visualResponses:{xr_standard_thumbstick_pressed:{componentProperty:"button",states:["default","touched","pressed"],valueNodeProperty:"transform",valueNodeName:"xr_standard_thumbstick_pressed_value",minNodeName:"xr_standard_thumbstick_pressed_min",maxNodeName:"xr_standard_thumbstick_pressed_max"},xr_standard_thumbstick_xaxis_pressed:{componentProperty:"xAxis",states:["default","touched","pressed"],valueNodeProperty:"transform",
valueNodeName:"xr_standard_thumbstick_xaxis_pressed_value",minNodeName:"xr_standard_thumbstick_xaxis_pressed_min",maxNodeName:"xr_standard_thumbstick_xaxis_pressed_max"},xr_standard_thumbstick_yaxis_pressed:{componentProperty:"yAxis",states:["default","touched","pressed"],valueNodeProperty:"transform",valueNodeName:"xr_standard_thumbstick_yaxis_pressed_value",minNodeName:"xr_standard_thumbstick_yaxis_pressed_min",maxNodeName:"xr_standard_thumbstick_yaxis_pressed_max"}}}},gamepadMapping:"xr-standard",
rootNodeName:"microsoft-mixed-reality-left",assetPath:"left.glb"},right:{selectComponentId:"xr-standard-trigger",components:{"xr-standard-trigger":{type:"trigger",gamepadIndices:{button:0},rootNodeName:"xr_standard_trigger",visualResponses:{xr_standard_trigger_pressed:{componentProperty:"button",states:["default","touched","pressed"],valueNodeProperty:"transform",valueNodeName:"xr_standard_trigger_pressed_value",minNodeName:"xr_standard_trigger_pressed_min",maxNodeName:"xr_standard_trigger_pressed_max"}}},
"xr-standard-squeeze":{type:"squeeze",gamepadIndices:{button:1},rootNodeName:"xr_standard_squeeze",visualResponses:{xr_standard_squeeze_pressed:{componentProperty:"button",states:["default","touched","pressed"],valueNodeProperty:"transform",valueNodeName:"xr_standard_squeeze_pressed_value",minNodeName:"xr_standard_squeeze_pressed_min",maxNodeName:"xr_standard_squeeze_pressed_max"}}},"xr-standard-touchpad":{type:"touchpad",gamepadIndices:{button:2,xAxis:0,yAxis:1},rootNodeName:"xr_standard_touchpad",
visualResponses:{xr_standard_touchpad_pressed:{componentProperty:"button",states:["default","touched","pressed"],valueNodeProperty:"transform",valueNodeName:"xr_standard_touchpad_pressed_value",minNodeName:"xr_standard_touchpad_pressed_min",maxNodeName:"xr_standard_touchpad_pressed_max"},xr_standard_touchpad_xaxis_pressed:{componentProperty:"xAxis",states:["default","touched","pressed"],valueNodeProperty:"transform",valueNodeName:"xr_standard_touchpad_xaxis_pressed_value",minNodeName:"xr_standard_touchpad_xaxis_pressed_min",
maxNodeName:"xr_standard_touchpad_xaxis_pressed_max"},xr_standard_touchpad_yaxis_pressed:{componentProperty:"yAxis",states:["default","touched","pressed"],valueNodeProperty:"transform",valueNodeName:"xr_standard_touchpad_yaxis_pressed_value",minNodeName:"xr_standard_touchpad_yaxis_pressed_min",maxNodeName:"xr_standard_touchpad_yaxis_pressed_max"},xr_standard_touchpad_xaxis_touched:{componentProperty:"xAxis",states:["default","touched","pressed"],valueNodeProperty:"transform",valueNodeName:"xr_standard_touchpad_xaxis_touched_value",
minNodeName:"xr_standard_touchpad_xaxis_touched_min",maxNodeName:"xr_standard_touchpad_xaxis_touched_max"},xr_standard_touchpad_yaxis_touched:{componentProperty:"yAxis",states:["default","touched","pressed"],valueNodeProperty:"transform",valueNodeName:"xr_standard_touchpad_yaxis_touched_value",minNodeName:"xr_standard_touchpad_yaxis_touched_min",maxNodeName:"xr_standard_touchpad_yaxis_touched_max"},xr_standard_touchpad_axes_touched:{componentProperty:"state",states:["touched","pressed"],valueNodeProperty:"visibility",
valueNodeName:"xr_standard_touchpad_axes_touched_value"}},touchPointNodeName:"xr_standard_touchpad_axes_touched_value"},"xr-standard-thumbstick":{type:"thumbstick",gamepadIndices:{button:3,xAxis:2,yAxis:3},rootNodeName:"xr_standard_thumbstick",visualResponses:{xr_standard_thumbstick_pressed:{componentProperty:"button",states:["default","touched","pressed"],valueNodeProperty:"transform",valueNodeName:"xr_standard_thumbstick_pressed_value",minNodeName:"xr_standard_thumbstick_pressed_min",maxNodeName:"xr_standard_thumbstick_pressed_max"},
xr_standard_thumbstick_xaxis_pressed:{componentProperty:"xAxis",states:["default","touched","pressed"],valueNodeProperty:"transform",valueNodeName:"xr_standard_thumbstick_xaxis_pressed_value",minNodeName:"xr_standard_thumbstick_xaxis_pressed_min",maxNodeName:"xr_standard_thumbstick_xaxis_pressed_max"},xr_standard_thumbstick_yaxis_pressed:{componentProperty:"yAxis",states:["default","touched","pressed"],valueNodeProperty:"transform",valueNodeName:"xr_standard_thumbstick_yaxis_pressed_value",minNodeName:"xr_standard_thumbstick_yaxis_pressed_min",
maxNodeName:"xr_standard_thumbstick_yaxis_pressed_max"}}}},gamepadMapping:"xr-standard",rootNodeName:"microsoft-mixed-reality-right",assetPath:"right.glb"}},c=function(a){function c(c,d,e,g,f){void 0===f&&(f=!1);c=a.call(this,c,b[e],d,e)||this;c._forceLegacyControllers=f;c.profileId="oculus-touch";return c}Object(n.d)(c,a);c.prototype._getFilenameAndPath=function(){var a="left"===this.handedness?c.MODEL_LEFT_FILENAME:c.MODEL_RIGHT_FILENAME;var b=this._isQuest()?c.QUEST_MODEL_BASE_URL:c.MODEL_BASE_URL;
return{filename:a,path:b}};c.prototype._getModelLoadingConstraints=function(){return!0};c.prototype._processLoadedModel=function(a){var b=this,c=this._isQuest(),d="right"===this.handedness?-1:1;this.getComponentIds().forEach(function(a){var e=a&&b.getComponent(a);e&&e.onButtonStateChangedObservable.add(function(e){if(b.rootMesh&&!b.disableAnimation)switch(a){case "xr-standard-trigger":c||(b._modelRootNode.getChildren()[3].rotation.x=.2*-e.value,b._modelRootNode.getChildren()[3].position.y=.005*-e.value,
b._modelRootNode.getChildren()[3].position.z=.005*-e.value);break;case "xr-standard-squeeze":c||(b._modelRootNode.getChildren()[4].position.x=d*e.value*.0035);break;case "a-button":case "x-button":c||(e.pressed?b._modelRootNode.getChildren()[1].position.y=-.001:b._modelRootNode.getChildren()[1].position.y=0);break;case "b-button":case "y-button":c||(e.pressed?b._modelRootNode.getChildren()[2].position.y=-.001:b._modelRootNode.getChildren()[2].position.y=0)}},void 0,!0)})};c.prototype._setRootMesh=
function(a){this.rootMesh=new r.a(this.profileId+" "+this.handedness,this.scene);this.scene.useRightHandedSystem||(this.rootMesh.rotationQuaternion=p.b.FromEulerAngles(0,Math.PI,0));a.forEach(function(a){a.isPickable=!1});this._isQuest()?this._modelRootNode=a[0]:(this._modelRootNode=a[1],this.rootMesh.position.y=.034,this.rootMesh.position.z=.052);this._modelRootNode.parent=this.rootMesh};c.prototype._updateModel=function(){};c.prototype._isQuest=function(){return!!navigator.userAgent.match(/Quest/gi)&&
!this._forceLegacyControllers};c.MODEL_BASE_URL="https://controllers.babylonjs.com/oculus/";c.MODEL_LEFT_FILENAME="left.babylon";c.MODEL_RIGHT_FILENAME="right.babylon";c.QUEST_MODEL_BASE_URL="https://controllers.babylonjs.com/oculusQuest/";return c}(k.a);l.a.RegisterController("oculus-touch",function(a,b){return new c(b,a.gamepad,a.handedness)});l.a.RegisterController("oculus-touch-legacy",function(a,b){return new c(b,a.gamepad,a.handedness,!0)});var b={left:{selectComponentId:"xr-standard-trigger",
components:{"xr-standard-trigger":{type:"trigger",gamepadIndices:{button:0},rootNodeName:"xr_standard_trigger",visualResponses:{}},"xr-standard-squeeze":{type:"squeeze",gamepadIndices:{button:1},rootNodeName:"xr_standard_squeeze",visualResponses:{}},"xr-standard-thumbstick":{type:"thumbstick",gamepadIndices:{button:3,xAxis:2,yAxis:3},rootNodeName:"xr_standard_thumbstick",visualResponses:{}},"x-button":{type:"button",gamepadIndices:{button:4},rootNodeName:"x_button",visualResponses:{}},"y-button":{type:"button",
gamepadIndices:{button:5},rootNodeName:"y_button",visualResponses:{}},thumbrest:{type:"button",gamepadIndices:{button:6},rootNodeName:"thumbrest",visualResponses:{}}},gamepadMapping:"xr-standard",rootNodeName:"oculus-touch-v2-left",assetPath:"left.glb"},right:{selectComponentId:"xr-standard-trigger",components:{"xr-standard-trigger":{type:"trigger",gamepadIndices:{button:0},rootNodeName:"xr_standard_trigger",visualResponses:{}},"xr-standard-squeeze":{type:"squeeze",gamepadIndices:{button:1},rootNodeName:"xr_standard_squeeze",
visualResponses:{}},"xr-standard-thumbstick":{type:"thumbstick",gamepadIndices:{button:3,xAxis:2,yAxis:3},rootNodeName:"xr_standard_thumbstick",visualResponses:{}},"a-button":{type:"button",gamepadIndices:{button:4},rootNodeName:"a_button",visualResponses:{}},"b-button":{type:"button",gamepadIndices:{button:5},rootNodeName:"b_button",visualResponses:{}},thumbrest:{type:"button",gamepadIndices:{button:6},rootNodeName:"thumbrest",visualResponses:{}}},gamepadMapping:"xr-standard",rootNodeName:"oculus-touch-v2-right",
assetPath:"right.glb"}},m=function(a){function b(b,c,e){b=a.call(this,b,d[e],c,e)||this;b.profileId="htc-vive";return b}Object(n.d)(b,a);b.prototype._getFilenameAndPath=function(){return{filename:b.MODEL_FILENAME,path:b.MODEL_BASE_URL}};b.prototype._getModelLoadingConstraints=function(){return!0};b.prototype._processLoadedModel=function(a){var b=this;this.getComponentIds().forEach(function(a){var c=a&&b.getComponent(a);c&&c.onButtonStateChangedObservable.add(function(c){if(b.rootMesh&&!b.disableAnimation)switch(a){case "xr-standard-trigger":b._modelRootNode.getChildren()[6].rotation.x=
.15*-c.value}},void 0,!0)})};b.prototype._setRootMesh=function(a){this.rootMesh=new r.a(this.profileId+" "+this.handedness,this.scene);a.forEach(function(a){a.isPickable=!1});this._modelRootNode=a[1];this._modelRootNode.parent=this.rootMesh;this.scene.useRightHandedSystem||(this.rootMesh.rotationQuaternion=p.b.FromEulerAngles(0,Math.PI,0))};b.prototype._updateModel=function(){};b.MODEL_BASE_URL="https://controllers.babylonjs.com/vive/";b.MODEL_FILENAME="wand.babylon";return b}(k.a);l.a.RegisterController("htc-vive",
function(a,b){return new m(b,a.gamepad,a.handedness)});var d={left:{selectComponentId:"xr-standard-trigger",components:{"xr-standard-trigger":{type:"trigger",gamepadIndices:{button:0},rootNodeName:"xr_standard_trigger",visualResponses:{}},"xr-standard-squeeze":{type:"squeeze",gamepadIndices:{button:1},rootNodeName:"xr_standard_squeeze",visualResponses:{}},"xr-standard-touchpad":{type:"touchpad",gamepadIndices:{button:2,xAxis:0,yAxis:1},rootNodeName:"xr_standard_touchpad",visualResponses:{}},menu:{type:"button",
gamepadIndices:{button:4},rootNodeName:"menu",visualResponses:{}}},gamepadMapping:"xr-standard",rootNodeName:"htc_vive_none",assetPath:"none.glb"},right:{selectComponentId:"xr-standard-trigger",components:{"xr-standard-trigger":{type:"trigger",gamepadIndices:{button:0},rootNodeName:"xr_standard_trigger",visualResponses:{}},"xr-standard-squeeze":{type:"squeeze",gamepadIndices:{button:1},rootNodeName:"xr_standard_squeeze",visualResponses:{}},"xr-standard-touchpad":{type:"touchpad",gamepadIndices:{button:2,
xAxis:0,yAxis:1},rootNodeName:"xr_standard_touchpad",visualResponses:{}},menu:{type:"button",gamepadIndices:{button:4},rootNodeName:"menu",visualResponses:{}}},gamepadMapping:"xr-standard",rootNodeName:"htc_vive_none",assetPath:"none.glb"},none:{selectComponentId:"xr-standard-trigger",components:{"xr-standard-trigger":{type:"trigger",gamepadIndices:{button:0},rootNodeName:"xr_standard_trigger",visualResponses:{}},"xr-standard-squeeze":{type:"squeeze",gamepadIndices:{button:1},rootNodeName:"xr_standard_squeeze",
visualResponses:{}},"xr-standard-touchpad":{type:"touchpad",gamepadIndices:{button:2,xAxis:0,yAxis:1},rootNodeName:"xr_standard_touchpad",visualResponses:{}},menu:{type:"button",gamepadIndices:{button:4},rootNodeName:"menu",visualResponses:{}}},gamepadMapping:"xr-standard",rootNodeName:"htc-vive-none",assetPath:"none.glb"}};a("M3k4")},oYeq:function(k,f,a){function n(a,c){function b(){this.constructor=a}if("function"!==typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");
g(a,c);a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)}function l(a,c,b,e){var d=arguments.length,g=3>d?c:null===e?e=Object.getOwnPropertyDescriptor(c,b):e,f;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(a,c,b,e);else for(var h=a.length-1;0<=h;h--)if(f=a[h])g=(3>d?f(g):3<d?f(c,b,g):f(c,b))||g;return 3<d&&g&&Object.defineProperty(c,b,g),g}function r(a,c,b,e){function d(a){return a instanceof b?a:new b(function(b){b(a)})}return new (b||(b=
Promise))(function(b,g){function f(a){try{m(e.next(a))}catch(x){g(x)}}function h(a){try{m(e["throw"](a))}catch(x){g(x)}}function m(a){a.done?b(a.value):d(a.value).then(f,h)}m((e=e.apply(a,c||[])).next())})}function p(a,c){function b(a){return function(b){return e([a,b])}}function e(b){if(g)throw new TypeError("Generator is already executing.");for(;d;)try{if(g=1,f&&(h=b[0]&2?f["return"]:b[0]?f["throw"]||((h=f["return"])&&h.call(f),0):f.next)&&!(h=h.call(f,b[1])).done)return h;if(f=0,h)b=[b[0]&2,h.value];
switch(b[0]){case 0:case 1:h=b;break;case 4:return d.label++,{value:b[1],done:!1};case 5:d.label++;f=b[1];b=[0];continue;case 7:b=d.ops.pop();d.trys.pop();continue;default:if(!(h=d.trys,h=0<h.length&&h[h.length-1])&&(6===b[0]||2===b[0])){d=0;continue}if(3===b[0]&&(!h||b[1]>h[0]&&b[1]<h[3]))d.label=b[1];else if(6===b[0]&&d.label<h[1])d.label=h[1],h=b;else if(h&&d.label<h[2])d.label=h[2],d.ops.push(b);else{h[2]&&d.ops.pop();d.trys.pop();continue}}b=c.call(a,d)}catch(y){b=[6,y],f=0}finally{g=h=0}if(b[0]&
5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}var d={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},g,f,h,k;return k={next:b(0),"throw":b(1),"return":b(2)},"function"===typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k}function e(){for(var a=0,c=0,b=arguments.length;c<b;c++)a+=arguments[c].length;a=Array(a);var e=0;for(c=0;c<b;c++)for(var d=arguments[c],g=0,f=d.length;g<f;g++,e++)a[e]=d[g];return a}a.d(f,"d",function(){return n});a.d(f,"a",function(){return q});
a.d(f,"c",function(){return l});a.d(f,"b",function(){return r});a.d(f,"e",function(){return p});a.d(f,"f",function(){return e});var g=function(a,c){g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])};return g(a,c)},q=function(){q=Object.assign||function(a){for(var c,b=1,e=arguments.length;b<e;b++){c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a};
return q.apply(this,arguments)}},v5Mq:function(k,f,a){a("KbzI");var n=a("65ND");a.d(f,"a",function(){return n.a});a.d(f,"g",function(){return n.b});var l=a("UpUr");a.d(f,"b",function(){return l.a});a("FH9a");var r=a("NHRz");a.d(f,"s",function(){return r.a});a("9KDn");a("Y7hS");var p=a("aBOp");a.d(f,"e",function(){return p.a});a("R3GP");var e=a("+dXC");a.d(f,"m",function(){return e.a});a("8y7U");a("VThl");var g=a("JCKn");a.d(f,"f",function(){return g.a});a("0I+z");a("yMjZ");var q=a("hY6D");a.d(f,"i",
function(){return q.a});a("hB0X");a("IpVE");a("odsq");a("YbFH");var h=a("3jZv");a.d(f,"h",function(){return h.a});a.d(f,"q",function(){return h.b});var c=a("Jrc9");a.d(f,"p",function(){return c.a});var b=a("lcUQ");a.d(f,"n",function(){return b.a});a.d(f,"t",function(){return b.b});var m=a("Kbf9");a.d(f,"c",function(){return m.a});a.d(f,"l",function(){return m.b});a.d(f,"v",function(){return m.c});var d=a("9LFu");a.d(f,"j",function(){return d.a});a.d(f,"k",function(){return d.b});a.d(f,"r",function(){return d.c});
a.d(f,"u",function(){return d.d});a.d(f,"w",function(){return d.e});a.d(f,"x",function(){return d.f});a("Gsbi");a("INEg");a("Ufda");var t=a("p5Tv");a.d(f,"d",function(){return t.a});a("zL3h");a("s2B1");a("7PGY");a("4nLD");a("0Mre");var u=a("tVVT");a.d(f,"o",function(){return u.a});a("Yap0");a("eJY2");a("Rz30");a("rct8");var w=a("IBM0");a.d(f,"y",function(){return w.a});a.d(f,"z",function(){return w.b});a("EQcr")},whcN:function(k,f,a){a.d(f,"a",function(){return l});a.d(f,"b",function(){return r});
var n=a("YKqZ"),l=function(){function a(){}a.ANCHOR_SYSTEM="xr-anchor-system";a.BACKGROUND_REMOVER="xr-background-remover";a.HIT_TEST="xr-hit-test";a.PHYSICS_CONTROLLERS="xr-physics-controller";a.PLANE_DETECTION="xr-plane-detection";a.POINTER_SELECTION="xr-controller-pointer-selection";a.TELEPORTATION="xr-controller-teleportation";a.FEATURE_POINTS="xr-feature-points";a.HAND_TRACKING="xr-hand-tracking";return a}(),r=function(){function a(a){var e=this;this._xrSessionManager=a;this._features={};this._xrSessionManager.onXRSessionInit.add(function(){e.getEnabledFeatures().forEach(function(a){var g=
e._features[a];!g.enabled||g.featureImplementation.attached||g.featureImplementation.disableAutoAttach||e.attachFeature(a)})});this._xrSessionManager.onXRSessionEnded.add(function(){e.getEnabledFeatures().forEach(function(a){var g=e._features[a];g.enabled&&g.featureImplementation.attached&&e.detachFeature(a)})})}a.AddWebXRFeature=function(a,g,f,h){void 0===f&&(f=1);void 0===h&&(h=!1);this._AvailableFeatures[a]=this._AvailableFeatures[a]||{latest:f};f>this._AvailableFeatures[a].latest&&(this._AvailableFeatures[a].latest=
f);h&&(this._AvailableFeatures[a].stable=f);this._AvailableFeatures[a][f]=g};a.ConstructFeature=function(a,g,f,h){void 0===g&&(g=1);a=this._AvailableFeatures[a][g];if(!a)throw Error("feature not found");return a(f,h)};a.GetAvailableFeatures=function(){return Object.keys(this._AvailableFeatures)};a.GetAvailableVersions=function(a){return Object.keys(this._AvailableFeatures[a])};a.GetLatestVersionOfFeature=function(a){return this._AvailableFeatures[a]&&this._AvailableFeatures[a].latest||-1};a.GetStableVersionOfFeature=
function(a){return this._AvailableFeatures[a]&&this._AvailableFeatures[a].stable||-1};a.prototype.attachFeature=function(a){(a=this._features[a])&&a.enabled&&!a.featureImplementation.attached&&a.featureImplementation.attach()};a.prototype.detachFeature=function(a){(a=this._features[a])&&a.featureImplementation.attached&&a.featureImplementation.detach()};a.prototype.disableFeature=function(a){a="string"===typeof a?a:a.Name;var e=this._features[a];return e&&e.enabled?(e.enabled=!1,this.detachFeature(a),
e.featureImplementation.dispose(),!0):!1};a.prototype.dispose=function(){var a=this;this.getEnabledFeatures().forEach(function(e){a.disableFeature(e);a._features[e].featureImplementation.dispose()})};a.prototype.enableFeature=function(e,g,f,h,c){var b=this;void 0===g&&(g="latest");void 0===f&&(f={});void 0===h&&(h=!0);void 0===c&&(c=!0);e="string"===typeof e?e:e.Name;var k=0;if("string"===typeof g){if(!g)throw Error("Error in provided version - "+e+" ("+g+")");k="stable"===g?a.GetStableVersionOfFeature(e):
"latest"===g?a.GetLatestVersionOfFeature(e):+g;if(-1===k||isNaN(k))throw Error("feature not found - "+e+" ("+g+")");}else k=g;g=this._features[e];f=a.ConstructFeature(e,k,this._xrSessionManager,f);if(!f)throw Error("feature not found - "+e);g&&this.disableFeature(e);f=f();if(f.dependsOn&&!f.dependsOn.every(function(a){return!!b._features[a]}))throw Error("Dependant features missing. Make sure the following features are enabled - "+f.dependsOn.join(", "));if(f.isCompatible())return this._features[e]=
{featureImplementation:f,enabled:!0,version:k,required:c},h?this._xrSessionManager.session&&!this._features[e].featureImplementation.attached&&this.attachFeature(e):this._features[e].featureImplementation.disableAutoAttach=!0,this._features[e].featureImplementation;if(c)throw Error("required feature not compatible");n.b.Warn("Feature "+e+" not compatible with the current environment/browser and was not enabled.");return f};a.prototype.getEnabledFeature=function(a){return this._features[a]&&this._features[a].featureImplementation};
a.prototype.getEnabledFeatures=function(){return Object.keys(this._features)};a.prototype.extendXRSessionInitObject=function(a){var e=this;this.getEnabledFeatures().forEach(function(f){f=e._features[f];var g=f.featureImplementation.xrNativeFeatureName;g&&(f.required?(a.requiredFeatures=a.requiredFeatures||[],-1===a.requiredFeatures.indexOf(g)&&a.requiredFeatures.push(g)):(a.optionalFeatures=a.optionalFeatures||[],-1===a.optionalFeatures.indexOf(g)&&a.optionalFeatures.push(g)))});return a};a._AvailableFeatures=
{};return a}()}}]);
