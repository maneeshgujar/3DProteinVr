(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"9LFu":function(B,r,d){d.d(r,"e",function(){return v.b});d.d(r,"a",function(){return c.a});d.d(r,"f",function(){return D.a});d.d(r,"b",function(){return n.a});d.d(r,"c",function(){return a.b});d.d(r,"d",function(){return f.a});d("ikaq");var v=d("y4Ty");d("nY5k");var h=d("/SR9"),e=d("C1Wc"),c=d("wAMR"),F=d("Xeau"),x=0,m=function(){function a(b,a,f,c){this.pos=b;this.normal=a;this.uv=f;this.vertColor=c}a.prototype.clone=function(){var b,g;return new a(this.pos.clone(),
this.normal.clone(),null===(b=this.uv)||void 0===b?void 0:b.clone(),null===(g=this.vertColor)||void 0===g?void 0:g.clone())};a.prototype.flip=function(){this.normal=this.normal.scale(-1)};a.prototype.interpolate=function(b,g){return new a(h.e.Lerp(this.pos,b.pos,g),h.e.Lerp(this.normal,b.normal,g),this.uv&&b.uv?h.d.Lerp(this.uv,b.uv,g):void 0,this.vertColor&&b.vertColor?F.b.Lerp(this.vertColor,b.vertColor,g):void 0)};return a}(),k=function(){function a(b,a){this.normal=b;this.w=a}a.FromPoints=function(b,
g,f){f=f.subtract(b);g=g.subtract(b);if(0===f.lengthSquared()||0===g.lengthSquared())return null;g=h.e.Normalize(h.e.Cross(f,g));return new a(g,h.e.Dot(g,b))};a.prototype.clone=function(){return new a(this.normal.clone(),this.w)};a.prototype.flip=function(){this.normal.scaleInPlace(-1);this.w=-this.w};a.prototype.splitPolygon=function(b,g,f,c,t){var e=0,m=[],n;for(n=0;n<b.vertices.length;n++){var l=h.e.Dot(this.normal,b.vertices[n].pos)-this.w;l=l<-a.EPSILON?2:l>a.EPSILON?1:0;e|=l;m.push(l)}switch(e){case 0:(0<
h.e.Dot(this.normal,b.plane.normal)?g:f).push(b);break;case 1:c.push(b);break;case 2:t.push(b);break;case 3:f=[];g=[];for(n=0;n<b.vertices.length;n++){var k=(n+1)%b.vertices.length;l=m[n];var w=m[k];e=b.vertices[n];k=b.vertices[k];2!==l&&f.push(e);1!==l&&g.push(2!==l?e.clone():e);3===(l|w)&&(l=(this.w-h.e.Dot(this.normal,e.pos))/h.e.Dot(this.normal,k.pos.subtract(e.pos)),l=e.interpolate(k,l),f.push(l),g.push(l.clone()))}3<=f.length&&(m=new q(f,b.shared),m.plane&&c.push(m));3<=g.length&&(m=new q(g,
b.shared),m.plane&&t.push(m))}};a.EPSILON=1E-5;return a}(),q=function(){function a(a,g){this.vertices=a;this.shared=g;this.plane=k.FromPoints(a[0].pos,a[1].pos,a[2].pos)}a.prototype.clone=function(){var b=this.vertices.map(function(a){return a.clone()});return new a(b,this.shared)};a.prototype.flip=function(){this.vertices.reverse().map(function(a){a.flip()});this.plane.flip()};return a}(),p=function(){function a(a){this.back=this.front=this.plane=null;this.polygons=[];a&&this.build(a)}a.prototype.clone=
function(){var b=new a;b.plane=this.plane&&this.plane.clone();b.front=this.front&&this.front.clone();b.back=this.back&&this.back.clone();b.polygons=this.polygons.map(function(a){return a.clone()});return b};a.prototype.invert=function(){for(var a=0;a<this.polygons.length;a++)this.polygons[a].flip();this.plane&&this.plane.flip();this.front&&this.front.invert();this.back&&this.back.invert();a=this.front;this.front=this.back;this.back=a};a.prototype.clipPolygons=function(a){if(!this.plane)return a.slice();
for(var b=[],f=[],c=0;c<a.length;c++)this.plane.splitPolygon(a[c],b,f,b,f);this.front&&(b=this.front.clipPolygons(b));f=this.back?this.back.clipPolygons(f):[];return b.concat(f)};a.prototype.clipTo=function(a){this.polygons=a.clipPolygons(this.polygons);this.front&&this.front.clipTo(a);this.back&&this.back.clipTo(a)};a.prototype.allPolygons=function(){var a=this.polygons.slice();this.front&&(a=a.concat(this.front.allPolygons()));this.back&&(a=a.concat(this.back.allPolygons()));return a};a.prototype.build=
function(b){if(b.length){this.plane||(this.plane=b[0].plane.clone());for(var f=[],c=[],t=0;t<b.length;t++)this.plane.splitPolygon(b[t],this.polygons,this.polygons,f,c);f.length&&(this.front||(this.front=new a),this.front.build(f));c.length&&(this.back||(this.back=new a),this.back.build(c))}};return a}();(function(){function a(){this.polygons=[]}a.FromMesh=function(b){var f=void 0,t=void 0,e=[],n=null;if(b instanceof c.a){b.computeWorldMatrix(!0);var k=b.getWorldMatrix();var d=b.position.clone();var p=
b.rotation.clone();b.rotationQuaternion&&(n=b.rotationQuaternion.clone());var K=b.scaling.clone()}else throw"BABYLON.CSG: Wrong Mesh type, must be BABYLON.Mesh";var z=b.getIndices(),D=b.getVerticesData(v.b.PositionKind),r=b.getVerticesData(v.b.NormalKind),O=b.getVerticesData(v.b.UVKind),M=b.getVerticesData(v.b.ColorKind);b=b.subMeshes;for(var I=0,B=b.length;I<B;I++)for(var y=b[I].indexStart,N=b[I].indexCount+b[I].indexStart;y<N;y+=3){var J=[];for(var u=0;3>u;u++){var A=new h.e(r[3*z[y+u]],r[3*z[y+
u]+1],r[3*z[y+u]+2]);O&&(f=new h.d(O[2*z[y+u]],O[2*z[y+u]+1]));M&&(t=new F.b(M[4*z[y+u]],M[4*z[y+u]+1],M[4*z[y+u]+2],M[4*z[y+u]+3]));var E=new h.e(D[3*z[y+u]],D[3*z[y+u]+1],D[3*z[y+u]+2]);E=h.e.TransformCoordinates(E,k);A=h.e.TransformNormal(A,k);E=new m(E,A,f,t);J.push(E)}J=new q(J,{subMeshId:I,meshId:x,materialIndex:b[I].materialIndex});J.plane&&e.push(J)}f=a.FromPolygons(e);f.matrix=k;f.position=d;f.rotation=p;f.scaling=K;f.rotationQuaternion=n;x++;return f};a.FromPolygons=function(b){var f=new a;
f.polygons=b;return f};a.prototype.clone=function(){var b=new a;b.polygons=this.polygons.map(function(a){return a.clone()});b.copyTransformAttributes(this);return b};a.prototype.union=function(b){var f=new p(this.clone().polygons);b=new p(b.clone().polygons);f.clipTo(b);b.clipTo(f);b.invert();b.clipTo(f);b.invert();f.build(b.allPolygons());return a.FromPolygons(f.allPolygons()).copyTransformAttributes(this)};a.prototype.unionInPlace=function(a){var b=new p(this.polygons);a=new p(a.polygons);b.clipTo(a);
a.clipTo(b);a.invert();a.clipTo(b);a.invert();b.build(a.allPolygons());this.polygons=b.allPolygons()};a.prototype.subtract=function(b){var f=new p(this.clone().polygons);b=new p(b.clone().polygons);f.invert();f.clipTo(b);b.clipTo(f);b.invert();b.clipTo(f);b.invert();f.build(b.allPolygons());f.invert();return a.FromPolygons(f.allPolygons()).copyTransformAttributes(this)};a.prototype.subtractInPlace=function(a){var b=new p(this.polygons);a=new p(a.polygons);b.invert();b.clipTo(a);a.clipTo(b);a.invert();
a.clipTo(b);a.invert();b.build(a.allPolygons());b.invert();this.polygons=b.allPolygons()};a.prototype.intersect=function(b){var f=new p(this.clone().polygons);b=new p(b.clone().polygons);f.invert();b.clipTo(f);b.invert();f.clipTo(b);b.clipTo(f);f.build(b.allPolygons());f.invert();return a.FromPolygons(f.allPolygons()).copyTransformAttributes(this)};a.prototype.intersectInPlace=function(a){var b=new p(this.polygons);a=new p(a.polygons);b.invert();a.clipTo(b);a.invert();b.clipTo(a);a.clipTo(b);b.build(a.allPolygons());
b.invert();this.polygons=b.allPolygons()};a.prototype.inverse=function(){var a=this.clone();a.inverseInPlace();return a};a.prototype.inverseInPlace=function(){this.polygons.map(function(a){a.flip()})};a.prototype.copyTransformAttributes=function(a){this.matrix=a.matrix;this.position=a.position;this.rotation=a.rotation;this.scaling=a.scaling;this.rotationQuaternion=a.rotationQuaternion;return this};a.prototype.buildMeshGeometry=function(a,f,t){var b=this.matrix.clone();b.invert();a=new c.a(a,f);var g=
[],m=[],n=[],k=null,d=null,q=h.e.Zero(),x=h.e.Zero(),p=h.d.Zero(),w=new F.b(0,0,0,0),D=this.polygons,r=[0,0,0],B={},y=0;f={};t&&D.sort(function(a,b){return a.shared.meshId===b.shared.meshId?a.shared.subMeshId-b.shared.subMeshId:a.shared.meshId-b.shared.meshId});for(var N=0,J=D.length;N<J;N++){var u=D[N];f[u.shared.meshId]||(f[u.shared.meshId]={});f[u.shared.meshId][u.shared.subMeshId]||(f[u.shared.meshId][u.shared.subMeshId]={indexStart:Infinity,indexEnd:-Infinity,materialIndex:u.shared.materialIndex});
var A=f[u.shared.meshId][u.shared.subMeshId];for(var E=2,T=u.vertices.length;E<T;E++){r[0]=0;r[1]=E-1;r[2]=E;for(var H=0;3>H;H++){q.copyFrom(u.vertices[r[H]].pos);x.copyFrom(u.vertices[r[H]].normal);u.vertices[r[H]].uv&&(k||(k=[]),p.copyFrom(u.vertices[r[H]].uv));u.vertices[r[H]].vertColor&&(d||(d=[]),w.copyFrom(u.vertices[r[H]].vertColor));var G=h.e.TransformCoordinates(q,b),P=h.e.TransformNormal(x,b);var C=B[G.x+","+G.y+","+G.z];var Q=!1;k&&k[2*C]!==p.x&&k[2*C+1]!==p.y&&(Q=!0);var R=!1;d&&d[4*C]!==
w.r&&d[4*C+1]!==w.g&&d[4*C+2]!==w.b&&d[4*C+3]!==w.a&&(R=!0);if("undefined"===typeof C||n[3*C]!==P.x||n[3*C+1]!==P.y||n[3*C+2]!==P.z||Q||R)g.push(G.x,G.y,G.z),k&&k.push(p.x,p.y),n.push(x.x,x.y,x.z),d&&d.push(w.r,w.g,w.b,w.a),C=B[G.x+","+G.y+","+G.z]=g.length/3-1;m.push(C);A.indexStart=Math.min(y,A.indexStart);A.indexEnd=Math.max(y,A.indexEnd);y++}}}a.setVerticesData(v.b.PositionKind,g);a.setVerticesData(v.b.NormalKind,n);k&&a.setVerticesData(v.b.UVKind,k);d&&a.setVerticesData(v.b.ColorKind,d);a.setIndices(m,
null);if(t){t=0;a.subMeshes=[];for(var S in f){b=-1;for(var U in f[S])A=f[S][U],e.a.CreateFromIndices(A.materialIndex+t,A.indexStart,A.indexEnd-A.indexStart+1,a),b=Math.max(A.materialIndex,b);t+=++b}}return a};a.prototype.toMesh=function(a,f,c,t){void 0===f&&(f=null);a=this.buildMeshGeometry(a,c,t);a.material=f;a.position.copyFrom(this.position);a.rotation.copyFrom(this.rotation);this.rotationQuaternion&&(a.rotationQuaternion=this.rotationQuaternion.clone());a.scaling.copyFrom(this.scaling);a.computeWorldMatrix(!0);
return a};return a})();d("yk6c");d("d0Hj");d("mUUE");d("acOv");d("CFrw");var D=d("UtUh"),n=d("PjzG"),a=d("wcHl");d("Ihqv");d("It3q");d("I2E9");var f=d("qVgn");d("y1QB");d("hSZw");d("25bV");d("Z5Kw")},d0Hj:function(B,r,d){d.d(r,"a",function(){return c});var v=d("oYeq"),h=d("/SR9"),e=d("y4Ty");B=d("wAMR");B.a._GroundMeshParser=function(e,d){return c.Parse(e,d)};var c=function(c){function d(e,k){e=c.call(this,e,k)||this;e.generateOctree=!1;return e}Object(v.d)(d,c);d.prototype.getClassName=function(){return"GroundMesh"};
Object.defineProperty(d.prototype,"subdivisions",{get:function(){return Math.min(this._subdivisionsX,this._subdivisionsY)},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"subdivisionsX",{get:function(){return this._subdivisionsX},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"subdivisionsY",{get:function(){return this._subdivisionsY},enumerable:!1,configurable:!0});d.prototype.optimize=function(c,e){void 0===e&&(e=32);this._subdivisionsY=this._subdivisionsX=
c;this.subdivide(c);this.createOrUpdateSubmeshesOctree&&this.createOrUpdateSubmeshesOctree(e)};d.prototype.getHeightAtCoordinates=function(c,e){var m=this.getWorldMatrix(),d=h.c.Matrix[5];m.invertToRef(d);var k=h.c.Vector3[8];h.e.TransformCoordinatesFromFloatsToRef(c,0,e,d,k);c=k.x;e=k.z;if(c<this._minX||c>this._maxX||e<this._minZ||e>this._maxZ)return this.position.y;this._heightQuads&&0!=this._heightQuads.length||(this._initHeightQuads(),this._computeHeightQuads());d=this._getFacetAt(c,e);h.e.TransformCoordinatesFromFloatsToRef(0,
-(d.x*c+d.z*e+d.w)/d.y,0,m,k);return k.y};d.prototype.getNormalAtCoordinates=function(c,e){var m=new h.e(0,1,0);this.getNormalAtCoordinatesToRef(c,e,m);return m};d.prototype.getNormalAtCoordinatesToRef=function(c,e,d){var m=this.getWorldMatrix(),k=h.c.Matrix[5];m.invertToRef(k);var n=h.c.Vector3[8];h.e.TransformCoordinatesFromFloatsToRef(c,0,e,k,n);c=n.x;e=n.z;if(c<this._minX||c>this._maxX||e<this._minZ||e>this._maxZ)return this;this._heightQuads&&0!=this._heightQuads.length||(this._initHeightQuads(),
this._computeHeightQuads());c=this._getFacetAt(c,e);h.e.TransformNormalFromFloatsToRef(c.x,c.y,c.z,m,d);return this};d.prototype.updateCoordinateHeights=function(){this._heightQuads&&0!=this._heightQuads.length||this._initHeightQuads();this._computeHeightQuads();return this};d.prototype._getFacetAt=function(c,e){var d=this._heightQuads[Math.floor(-(e+this._maxZ)*this._subdivisionsY/this._height+this._subdivisionsY)*this._subdivisionsX+Math.floor((c+this._maxX)*this._subdivisionsX/this._width)];return e<
d.slope.x*c+d.slope.y?d.facet1:d.facet2};d.prototype._initHeightQuads=function(){var c=this._subdivisionsX,e=this._subdivisionsY;this._heightQuads=[];for(var d=0;d<e;d++)for(var p=0;p<c;p++){var x={slope:h.d.Zero(),facet1:new h.f(0,0,0,0),facet2:new h.f(0,0,0,0)};this._heightQuads[d*c+p]=x}return this};d.prototype._computeHeightQuads=function(){var c=this.getVerticesData(e.b.PositionKind);if(!c)return this;for(var d=h.c.Vector3[3],q=h.c.Vector3[2],p=h.c.Vector3[1],x=h.c.Vector3[0],n=h.c.Vector3[4],
a=h.c.Vector3[5],f=h.c.Vector3[6],t=h.c.Vector3[7],b=h.c.Vector3[8],g,w,l,F,r=this._subdivisionsX,v=this._subdivisionsY,L=0;L<v;L++)for(var K=0;K<r;K++){g=3*K;w=L*(r+1)*3;l=(L+1)*(r+1)*3;d.x=c[w+g];d.y=c[w+g+1];d.z=c[w+g+2];q.x=c[w+g+3];q.y=c[w+g+4];q.z=c[w+g+5];p.x=c[l+g];p.y=c[l+g+1];p.z=c[l+g+2];x.x=c[l+g+3];x.y=c[l+g+4];x.z=c[l+g+5];g=(x.z-d.z)/(x.x-d.x);w=d.z-g*d.x;q.subtractToRef(d,n);p.subtractToRef(d,a);x.subtractToRef(d,f);h.e.CrossToRef(f,a,t);h.e.CrossToRef(n,f,b);t.normalize();b.normalize();
l=-(t.x*d.x+t.y*d.y+t.z*d.z);F=-(b.x*q.x+b.y*q.y+b.z*q.z);var z=this._heightQuads[L*r+K];z.slope.copyFromFloats(g,w);z.facet1.copyFromFloats(t.x,t.y,t.z,l);z.facet2.copyFromFloats(b.x,b.y,b.z,F)}return this};d.prototype.serialize=function(e){c.prototype.serialize.call(this,e);e.subdivisionsX=this._subdivisionsX;e.subdivisionsY=this._subdivisionsY;e.minX=this._minX;e.maxX=this._maxX;e.minZ=this._minZ;e.maxZ=this._maxZ;e.width=this._width;e.height=this._height};d.Parse=function(c,e){e=new d(c.name,
e);e._subdivisionsX=c.subdivisionsX||1;e._subdivisionsY=c.subdivisionsY||1;e._minX=c.minX;e._maxX=c.maxX;e._minZ=c.minZ;e._maxZ=c.maxZ;e._width=c.width;e._height=c.height;return e};return d}(B.a)},hSZw:function(B,r,d){d.d(r,"a",function(){return v});var v=function(){function d(){this.capacity=this.references=0;this.is32Bits=!1}Object.defineProperty(d.prototype,"underlyingResource",{get:function(){return null},enumerable:!1,configurable:!0});return d}()},y4Ty:function(B,r,d){d.d(r,"a",function(){return v});
d.d(r,"b",function(){return h});var v=function(){function e(c,e,d,m,h,q,p,r){void 0===m&&(m=0);void 0===h&&(h=!1);void 0===q&&(q=!1);void 0===p&&(p=!1);this._isAlreadyOwned=!1;this._engine=c.getScene?c.getScene().getEngine():c;this._updatable=d;this._instanced=q;this._divisor=r||1;this._data=e;this.byteStride=p?m:m*Float32Array.BYTES_PER_ELEMENT;h||this.create()}e.prototype.createVertexBuffer=function(c,e,d,m,k,q,p){void 0===q&&(q=!1);return new h(this._engine,this,c,this._updatable,!0,m?q?m:m*Float32Array.BYTES_PER_ELEMENT:
this.byteStride,void 0===k?this._instanced:k,q?e:e*Float32Array.BYTES_PER_ELEMENT,d,void 0,void 0,!0,this._divisor||p)};e.prototype.isUpdatable=function(){return this._updatable};e.prototype.getData=function(){return this._data};e.prototype.getBuffer=function(){return this._buffer};e.prototype.getStrideSize=function(){return this.byteStride/Float32Array.BYTES_PER_ELEMENT};e.prototype.create=function(c){void 0===c&&(c=null);if(c||!this._buffer)if(c=c||this._data)this._buffer?this._updatable&&(this._engine.updateDynamicVertexBuffer(this._buffer,
c),this._data=c):this._updatable?(this._buffer=this._engine.createDynamicVertexBuffer(c),this._data=c):this._buffer=this._engine.createVertexBuffer(c)};e.prototype._rebuild=function(){this._buffer=null;this.create(this._data)};e.prototype.update=function(c){this.create(c)};e.prototype.updateDirectly=function(c,e,d,m){void 0===m&&(m=!1);this._buffer&&this._updatable&&(this._engine.updateDynamicVertexBuffer(this._buffer,c,m?e:e*Float32Array.BYTES_PER_ELEMENT,d?d*this.byteStride:void 0),this._data=null)};
e.prototype._increaseReferences=function(){this._buffer&&(this._isAlreadyOwned?this._buffer.references++:this._isAlreadyOwned=!0)};e.prototype.dispose=function(){this._buffer&&this._engine._releaseBuffer(this._buffer)&&(this._buffer=null)};return e}(),h=function(){function e(c,d,h,m,k,q,p,r,n,a,f,t,b,g){void 0===f&&(f=!1);void 0===t&&(t=!1);void 0===b&&(b=1);void 0===g&&(g=!1);d instanceof v?(this._buffer=d,(this._ownsBuffer=g)&&this._buffer._increaseReferences()):(this._buffer=new v(c,d,m,q,k,p,
t),this._ownsBuffer=!0);this._kind=h;void 0==a?(c=this.getData(),this.type=e.FLOAT,c instanceof Int8Array?this.type=e.BYTE:c instanceof Uint8Array?this.type=e.UNSIGNED_BYTE:c instanceof Int16Array?this.type=e.SHORT:c instanceof Uint16Array?this.type=e.UNSIGNED_SHORT:c instanceof Int32Array?this.type=e.INT:c instanceof Uint32Array&&(this.type=e.UNSIGNED_INT)):this.type=a;c=e.GetTypeByteLength(this.type);t?(this._size=n||(q?q/c:e.DeduceStride(h)),this.byteStride=q||this._buffer.byteStride||this._size*
c,this.byteOffset=r||0):(this._size=n||q||e.DeduceStride(h),this.byteStride=q?q*c:this._buffer.byteStride||this._size*c,this.byteOffset=(r||0)*c);this.normalized=f;this._instanced=void 0!==p?p:!1;this._instanceDivisor=p?b:0}Object.defineProperty(e.prototype,"instanceDivisor",{get:function(){return this._instanceDivisor},set:function(c){this._instanceDivisor=c;this._instanced=0==c?!1:!0},enumerable:!1,configurable:!0});e.prototype._rebuild=function(){this._buffer&&this._buffer._rebuild()};e.prototype.getKind=
function(){return this._kind};e.prototype.isUpdatable=function(){return this._buffer.isUpdatable()};e.prototype.getData=function(){return this._buffer.getData()};e.prototype.getBuffer=function(){return this._buffer.getBuffer()};e.prototype.getStrideSize=function(){return this.byteStride/e.GetTypeByteLength(this.type)};e.prototype.getOffset=function(){return this.byteOffset/e.GetTypeByteLength(this.type)};e.prototype.getSize=function(){return this._size};e.prototype.getIsInstanced=function(){return this._instanced};
e.prototype.getInstanceDivisor=function(){return this._instanceDivisor};e.prototype.create=function(c){this._buffer.create(c)};e.prototype.update=function(c){this._buffer.update(c)};e.prototype.updateDirectly=function(c,e,d){void 0===d&&(d=!1);this._buffer.updateDirectly(c,e,void 0,d)};e.prototype.dispose=function(){this._ownsBuffer&&this._buffer.dispose()};e.prototype.forEach=function(c,d){e.ForEach(this._buffer.getData(),this.byteOffset,this.byteStride,this._size,this.type,c,this.normalized,d)};
e.DeduceStride=function(c){switch(c){case e.UVKind:case e.UV2Kind:case e.UV3Kind:case e.UV4Kind:case e.UV5Kind:case e.UV6Kind:return 2;case e.NormalKind:case e.PositionKind:return 3;case e.ColorKind:case e.MatricesIndicesKind:case e.MatricesIndicesExtraKind:case e.MatricesWeightsKind:case e.MatricesWeightsExtraKind:case e.TangentKind:return 4;default:throw Error("Invalid kind '"+c+"'");}};e.GetTypeByteLength=function(c){switch(c){case e.BYTE:case e.UNSIGNED_BYTE:return 1;case e.SHORT:case e.UNSIGNED_SHORT:return 2;
case e.INT:case e.UNSIGNED_INT:case e.FLOAT:return 4;default:throw Error("Invalid type '"+c+"'");}};e.ForEach=function(c,d,h,m,k,q,p,r){if(c instanceof Array){d/=4;h/=4;for(var n=0;n<q;n+=m){for(var a=0;a<m;a++)r(c[d+a],n+a);d+=h}}else{c=c instanceof ArrayBuffer?new DataView(c):new DataView(c.buffer,c.byteOffset,c.byteLength);var f=e.GetTypeByteLength(k);for(n=0;n<q;n+=m){var t=d;for(a=0;a<m;a++){var b=e._GetFloatValue(c,k,t,p);r(b,n+a);t+=f}d+=h}}};e._GetFloatValue=function(c,d,h,m){switch(d){case e.BYTE:return c=
c.getInt8(h),m&&(c=Math.max(c/127,-1)),c;case e.UNSIGNED_BYTE:return c=c.getUint8(h),m&&(c/=255),c;case e.SHORT:return c=c.getInt16(h,!0),m&&(c=Math.max(c/32767,-1)),c;case e.UNSIGNED_SHORT:return c=c.getUint16(h,!0),m&&(c/=65535),c;case e.INT:return c.getInt32(h,!0);case e.UNSIGNED_INT:return c.getUint32(h,!0);case e.FLOAT:return c.getFloat32(h,!0);default:throw Error("Invalid component type "+d);}};e.BYTE=5120;e.UNSIGNED_BYTE=5121;e.SHORT=5122;e.UNSIGNED_SHORT=5123;e.INT=5124;e.UNSIGNED_INT=5125;
e.FLOAT=5126;e.PositionKind="position";e.NormalKind="normal";e.TangentKind="tangent";e.UVKind="uv";e.UV2Kind="uv2";e.UV3Kind="uv3";e.UV4Kind="uv4";e.UV5Kind="uv5";e.UV6Kind="uv6";e.ColorKind="color";e.MatricesIndicesKind="matricesIndices";e.MatricesWeightsKind="matricesWeights";e.MatricesIndicesExtraKind="matricesIndicesExtra";e.MatricesWeightsExtraKind="matricesWeightsExtra";return e}()},yk6c:function(B,r,d){d.d(r,"a",function(){return D});var v=d("/SR9"),h=d("Xeau"),e=d("UtUh"),c=d("y4Ty"),F=d("C1Wc"),
x=d("mzcJ"),m=d("T5H4"),k=d("YKqZ"),q=d("cSa5"),p=d("lJNW"),D=function(){function d(a,f,c,b,d){void 0===b&&(b=!1);void 0===d&&(d=null);this._totalVertices=this.delayLoadState=0;this._indexBufferIsUpdatable=this._isDisposed=!1;this._positionsCache=[];this.useBoundingInfoFromGeometry=!1;this.id=a;this.uniqueId=f.getUniqueId();this._engine=f.getEngine();this._meshes=[];this._scene=f;this._vertexBuffers={};this._indices=[];this._updatable=b;c?this.setAllVerticesData(c,b):(this._totalVertices=0,this._indices=
[]);this._engine.getCaps().vertexArrayObject&&(this._vertexArrayObjects={});d&&(this.applyToMesh(d),d.computeWorldMatrix(!0))}Object.defineProperty(d.prototype,"boundingBias",{get:function(){return this._boundingBias},set:function(a){this._boundingBias?this._boundingBias.copyFrom(a):this._boundingBias=a.clone();this._updateBoundingInfo(!0,null)},enumerable:!1,configurable:!0});d.CreateGeometryForMesh=function(a){var f=new d(d.RandomId(),a.getScene());f.applyToMesh(a);return f};Object.defineProperty(d.prototype,
"meshes",{get:function(){return this._meshes},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"extend",{get:function(){return this._extend},enumerable:!1,configurable:!0});d.prototype.getScene=function(){return this._scene};d.prototype.getEngine=function(){return this._engine};d.prototype.isReady=function(){return 1===this.delayLoadState||0===this.delayLoadState};Object.defineProperty(d.prototype,"doNotSerialize",{get:function(){for(var a=0;a<this._meshes.length;a++)if(!this._meshes[a].doNotSerialize)return!1;
return!0},enumerable:!1,configurable:!0});d.prototype._rebuild=function(){this._vertexArrayObjects&&(this._vertexArrayObjects={});0!==this._meshes.length&&this._indices&&(this._indexBuffer=this._engine.createIndexBuffer(this._indices));for(var a in this._vertexBuffers)this._vertexBuffers[a]._rebuild()};d.prototype.setAllVerticesData=function(a,f){a.applyToGeometry(this,f);this.notifyUpdate()};d.prototype.setVerticesData=function(a,f,d,b){void 0===d&&(d=!1);d&&Array.isArray(f)&&(f=new Float32Array(f));
a=new c.b(this._engine,f,a,d,0===this._meshes.length,b);this.setVerticesBuffer(a)};d.prototype.removeVerticesData=function(a){this._vertexBuffers[a]&&(this._vertexBuffers[a].dispose(),delete this._vertexBuffers[a])};d.prototype.setVerticesBuffer=function(a,f){void 0===f&&(f=null);var d=a.getKind();this._vertexBuffers[d]&&this._vertexBuffers[d].dispose();this._vertexBuffers[d]=a;if(d===c.b.PositionKind){var b=a.getData();null!=f?this._totalVertices=f:null!=b&&(this._totalVertices=b.length/(a.byteStride/
4));this._updateExtend(b);this._resetPointsArrayCache();a=this._meshes;f=a.length;for(b=0;b<f;b++){var e=a[b];e._boundingInfo=new m.a(this._extend.minimum,this._extend.maximum);e._createGlobalSubMesh(!1);e.computeWorldMatrix(!0)}}this.notifyUpdate(d);this._vertexArrayObjects&&(this._disposeVertexArrayObjects(),this._vertexArrayObjects={})};d.prototype.updateVerticesDataDirectly=function(a,f,c,b){void 0===b&&(b=!1);var d=this.getVertexBuffer(a);d&&(d.updateDirectly(f,c,b),this.notifyUpdate(a))};d.prototype.updateVerticesData=
function(a,f,d){void 0===d&&(d=!1);var b=this.getVertexBuffer(a);b&&(b.update(f),a===c.b.PositionKind&&this._updateBoundingInfo(d,f),this.notifyUpdate(a))};d.prototype._updateBoundingInfo=function(a,f){a&&this._updateExtend(f);this._resetPointsArrayCache();if(a)for(a=0,f=this._meshes;a<f.length;a++){var c=f[a];c._boundingInfo?c._boundingInfo.reConstruct(this._extend.minimum,this._extend.maximum):c._boundingInfo=new m.a(this._extend.minimum,this._extend.maximum);var b=0;for(c=c.subMeshes;b<c.length;b++)c[b].refreshBoundingInfo()}};
d.prototype._bind=function(a,f){if(a){void 0===f&&(f=this._indexBuffer);var c=this.getVertexBuffers();c&&(f==this._indexBuffer&&this._vertexArrayObjects?(this._vertexArrayObjects[a.key]||(this._vertexArrayObjects[a.key]=this._engine.recordVertexArrayObject(c,f,a)),this._engine.bindVertexArrayObject(this._vertexArrayObjects[a.key],f)):this._engine.bindBuffers(c,f,a))}};d.prototype.getTotalVertices=function(){return this.isReady()?this._totalVertices:0};d.prototype.getVerticesData=function(a,f,d){var b=
this.getVertexBuffer(a);if(!b)return null;a=b.getData();if(!a)return null;var e=b.getSize()*c.b.GetTypeByteLength(b.type),t=this._totalVertices*b.getSize();if(b.type!==c.b.FLOAT||b.byteStride!==e){var h=[];b.forEach(t,function(a){return h.push(a)});return h}if(!(a instanceof Array||a instanceof Float32Array)||0!==b.byteOffset||a.length!==t){if(a instanceof Array)return b=b.byteOffset/4,k.b.Slice(a,b,b+t);if(a instanceof ArrayBuffer)return new Float32Array(a,b.byteOffset,t);b=a.byteOffset+b.byteOffset;
if(d||f&&1!==this._meshes.length)return f=new Float32Array(t),a=new Float32Array(a.buffer,b,t),f.set(a),f;(f=b%4)&&(b=Math.max(0,b-f));return new Float32Array(a.buffer,b,t)}return d||f&&1!==this._meshes.length?k.b.Slice(a):a};d.prototype.isVertexBufferUpdatable=function(a){return(a=this._vertexBuffers[a])?a.isUpdatable():!1};d.prototype.getVertexBuffer=function(a){return this.isReady()?this._vertexBuffers[a]:null};d.prototype.getVertexBuffers=function(){return this.isReady()?this._vertexBuffers:null};
d.prototype.isVerticesDataPresent=function(a){return this._vertexBuffers?void 0!==this._vertexBuffers[a]:this._delayInfo?-1!==this._delayInfo.indexOf(a):!1};d.prototype.getVerticesDataKinds=function(){var a=[],c;if(!this._vertexBuffers&&this._delayInfo)for(c in this._delayInfo)a.push(c);else for(c in this._vertexBuffers)a.push(c);return a};d.prototype.updateIndices=function(a,c,d){void 0===d&&(d=!1);if(this._indexBuffer)if(this._indexBufferIsUpdatable){var b=a.length!==this._indices.length;d||(this._indices=
a.slice());this._engine.updateDynamicIndexBuffer(this._indexBuffer,a,c);if(b)for(a=0,c=this._meshes;a<c.length;a++)c[a]._createGlobalSubMesh(!0)}else this.setIndices(a,null,!0)};d.prototype.setIndices=function(a,c,d){void 0===c&&(c=null);void 0===d&&(d=!1);this._indexBuffer&&this._engine._releaseBuffer(this._indexBuffer);this._disposeVertexArrayObjects();this._indices=a;this._indexBufferIsUpdatable=d;0!==this._meshes.length&&this._indices&&(this._indexBuffer=this._engine.createIndexBuffer(this._indices,
d));void 0!=c&&(this._totalVertices=c);a=0;for(c=this._meshes;a<c.length;a++)c[a]._createGlobalSubMesh(!0);this.notifyUpdate()};d.prototype.getTotalIndices=function(){return this.isReady()?this._indices.length:0};d.prototype.getIndices=function(a,c){if(!this.isReady())return null;var f=this._indices;if(c||a&&1!==this._meshes.length){a=f.length;c=[];for(var b=0;b<a;b++)c.push(f[b]);return c}return f};d.prototype.getIndexBuffer=function(){return this.isReady()?this._indexBuffer:null};d.prototype._releaseVertexArrayObject=
function(a){void 0===a&&(a=null);a&&this._vertexArrayObjects&&this._vertexArrayObjects[a.key]&&(this._engine.releaseVertexArrayObject(this._vertexArrayObjects[a.key]),delete this._vertexArrayObjects[a.key])};d.prototype.releaseForMesh=function(a,c){var f=this._meshes,b=f.indexOf(a);-1!==b&&(f.splice(b,1),a._geometry=null,0===f.length&&c&&this.dispose())};d.prototype.applyToMesh=function(a){if(a._geometry!==this){var c=a._geometry;c&&c.releaseForMesh(a);c=this._meshes;a._geometry=this;this._scene.pushGeometry(this);
c.push(a);this.isReady()?this._applyToMesh(a):a._boundingInfo=this._boundingInfo}};d.prototype._updateExtend=function(a){void 0===a&&(a=null);this.useBoundingInfoFromGeometry&&this._boundingInfo?this._extend={minimum:this._boundingInfo.minimum.clone(),maximum:this._boundingInfo.maximum.clone()}:(a||(a=this.getVerticesData(c.b.PositionKind)),this._extend=Object(p.a)(a,0,this._totalVertices,this.boundingBias,3))};d.prototype._applyToMesh=function(a){var f=this._meshes.length,d;for(d in this._vertexBuffers){1===
f&&this._vertexBuffers[d].create();var b=this._vertexBuffers[d].getBuffer();b&&(b.references=f);d===c.b.PositionKind&&(this._extend||this._updateExtend(),a._boundingInfo=new m.a(this._extend.minimum,this._extend.maximum),a._createGlobalSubMesh(!1),a._updateBoundingInfo())}1===f&&this._indices&&0<this._indices.length&&(this._indexBuffer=this._engine.createIndexBuffer(this._indices));this._indexBuffer&&(this._indexBuffer.references=f);a._syncGeometryWithMorphTargetManager();a.synchronizeInstances()};
d.prototype.notifyUpdate=function(a){if(this.onGeometryUpdated)this.onGeometryUpdated(this,a);a=0;for(var c=this._meshes;a<c.length;a++)c[a]._markSubMeshesAsAttributesDirty()};d.prototype.load=function(a,c){2!==this.delayLoadState&&(this.isReady()?c&&c():(this.delayLoadState=2,this._queueLoad(a,c)))};d.prototype._queueLoad=function(a,c){var d=this;this.delayLoadingFile&&(a._addPendingData(this),a._loadFile(this.delayLoadingFile,function(b){if(d._delayLoadingFunction){d._delayLoadingFunction(JSON.parse(b),
d);d.delayLoadState=1;d._delayInfo=[];a._removePendingData(d);b=d._meshes;for(var f=b.length,e=0;e<f;e++)d._applyToMesh(b[e]);c&&c()}},void 0,!0))};d.prototype.toLeftHanded=function(){var a=this.getIndices(!1);if(null!=a&&0<a.length){for(var d=0;d<a.length;d+=3){var e=a[d+0];a[d+0]=a[d+2];a[d+2]=e}this.setIndices(a)}a=this.getVerticesData(c.b.PositionKind,!1);if(null!=a&&0<a.length){for(d=0;d<a.length;d+=3)a[d+2]=-a[d+2];this.setVerticesData(c.b.PositionKind,a,!1)}a=this.getVerticesData(c.b.NormalKind,
!1);if(null!=a&&0<a.length){for(d=0;d<a.length;d+=3)a[d+2]=-a[d+2];this.setVerticesData(c.b.NormalKind,a,!1)}};d.prototype._resetPointsArrayCache=function(){this._positions=null};d.prototype._generatePointsArray=function(){if(this._positions)return!0;var a=this.getVerticesData(c.b.PositionKind);if(!a||0===a.length)return!1;for(var d=3*this._positionsCache.length,e=this._positionsCache.length;d<a.length;d+=3,++e)this._positionsCache[e]=v.e.FromArray(a,d);for(e=d=0;d<a.length;d+=3,++e)this._positionsCache[e].set(a[0+
d],a[1+d],a[2+d]);this._positionsCache.length=a.length/3;this._positions=this._positionsCache;return!0};d.prototype.isDisposed=function(){return this._isDisposed};d.prototype._disposeVertexArrayObjects=function(){if(this._vertexArrayObjects){for(var a in this._vertexArrayObjects)this._engine.releaseVertexArrayObject(this._vertexArrayObjects[a]);this._vertexArrayObjects={}}};d.prototype.dispose=function(){var a=this._meshes,c=a.length,d;for(d=0;d<c;d++)this.releaseForMesh(a[d]);this._meshes=[];this._disposeVertexArrayObjects();
for(var b in this._vertexBuffers)this._vertexBuffers[b].dispose();this._vertexBuffers={};this._totalVertices=0;this._indexBuffer&&this._engine._releaseBuffer(this._indexBuffer);this._indexBuffer=null;this._indices=[];this.delayLoadState=0;this._delayLoadingFunction=this.delayLoadingFile=null;this._delayInfo=[];this._boundingInfo=null;this._scene.removeGeometry(this);this._isDisposed=!0};d.prototype.copy=function(a){var c=new e.a;c.indices=[];var h=this.getIndices();if(h)for(var b=0;b<h.length;b++)c.indices.push(h[b]);
b=h=!1;for(var g in this._vertexBuffers){var k=this.getVerticesData(g);k&&(k instanceof Float32Array?c.set(new Float32Array(k),g):c.set(k.slice(0),g),!b&&(k=this.getVertexBuffer(g)))&&(h=k.isUpdatable(),b=!h)}a=new d(a,this._scene,c,h);a.delayLoadState=this.delayLoadState;a.delayLoadingFile=this.delayLoadingFile;a._delayLoadingFunction=this._delayLoadingFunction;for(g in this._delayInfo)a._delayInfo=a._delayInfo||[],a._delayInfo.push(g);a._boundingInfo=new m.a(this._extend.minimum,this._extend.maximum);
return a};d.prototype.serialize=function(){var a={};a.id=this.id;a.updatable=this._updatable;q.a&&q.a.HasTags(this)&&(a.tags=q.a.GetTags(this));return a};d.prototype.toNumberArray=function(a){return Array.isArray(a)?a:Array.prototype.slice.call(a)};d.prototype.serializeVerticeData=function(){var a=this.serialize();this.isVerticesDataPresent(c.b.PositionKind)&&(a.positions=this.toNumberArray(this.getVerticesData(c.b.PositionKind)),this.isVertexBufferUpdatable(c.b.PositionKind)&&(a.positions._updatable=
!0));this.isVerticesDataPresent(c.b.NormalKind)&&(a.normals=this.toNumberArray(this.getVerticesData(c.b.NormalKind)),this.isVertexBufferUpdatable(c.b.NormalKind)&&(a.normals._updatable=!0));this.isVerticesDataPresent(c.b.TangentKind)&&(a.tangets=this.toNumberArray(this.getVerticesData(c.b.TangentKind)),this.isVertexBufferUpdatable(c.b.TangentKind)&&(a.tangets._updatable=!0));this.isVerticesDataPresent(c.b.UVKind)&&(a.uvs=this.toNumberArray(this.getVerticesData(c.b.UVKind)),this.isVertexBufferUpdatable(c.b.UVKind)&&
(a.uvs._updatable=!0));this.isVerticesDataPresent(c.b.UV2Kind)&&(a.uv2s=this.toNumberArray(this.getVerticesData(c.b.UV2Kind)),this.isVertexBufferUpdatable(c.b.UV2Kind)&&(a.uv2s._updatable=!0));this.isVerticesDataPresent(c.b.UV3Kind)&&(a.uv3s=this.toNumberArray(this.getVerticesData(c.b.UV3Kind)),this.isVertexBufferUpdatable(c.b.UV3Kind)&&(a.uv3s._updatable=!0));this.isVerticesDataPresent(c.b.UV4Kind)&&(a.uv4s=this.toNumberArray(this.getVerticesData(c.b.UV4Kind)),this.isVertexBufferUpdatable(c.b.UV4Kind)&&
(a.uv4s._updatable=!0));this.isVerticesDataPresent(c.b.UV5Kind)&&(a.uv5s=this.toNumberArray(this.getVerticesData(c.b.UV5Kind)),this.isVertexBufferUpdatable(c.b.UV5Kind)&&(a.uv5s._updatable=!0));this.isVerticesDataPresent(c.b.UV6Kind)&&(a.uv6s=this.toNumberArray(this.getVerticesData(c.b.UV6Kind)),this.isVertexBufferUpdatable(c.b.UV6Kind)&&(a.uv6s._updatable=!0));this.isVerticesDataPresent(c.b.ColorKind)&&(a.colors=this.toNumberArray(this.getVerticesData(c.b.ColorKind)),this.isVertexBufferUpdatable(c.b.ColorKind)&&
(a.colors._updatable=!0));this.isVerticesDataPresent(c.b.MatricesIndicesKind)&&(a.matricesIndices=this.toNumberArray(this.getVerticesData(c.b.MatricesIndicesKind)),a.matricesIndices._isExpanded=!0,this.isVertexBufferUpdatable(c.b.MatricesIndicesKind)&&(a.matricesIndices._updatable=!0));this.isVerticesDataPresent(c.b.MatricesWeightsKind)&&(a.matricesWeights=this.toNumberArray(this.getVerticesData(c.b.MatricesWeightsKind)),this.isVertexBufferUpdatable(c.b.MatricesWeightsKind)&&(a.matricesWeights._updatable=
!0));a.indices=this.toNumberArray(this.getIndices());return a};d.ExtractFromMesh=function(a,c){return(a=a._geometry)?a.copy(c):null};d.RandomId=function(){return k.b.RandomId()};d._ImportGeometry=function(a,f){var e=f.getScene(),b=a.geometryId;if(b)(b=e.getGeometryByID(b))&&b.applyToMesh(f);else if(a instanceof ArrayBuffer){b=f._binaryInfo;if(b.positionsAttrDesc&&0<b.positionsAttrDesc.count){var g=new Float32Array(a,b.positionsAttrDesc.offset,b.positionsAttrDesc.count);f.setVerticesData(c.b.PositionKind,
g,!1)}b.normalsAttrDesc&&0<b.normalsAttrDesc.count&&(g=new Float32Array(a,b.normalsAttrDesc.offset,b.normalsAttrDesc.count),f.setVerticesData(c.b.NormalKind,g,!1));b.tangetsAttrDesc&&0<b.tangetsAttrDesc.count&&(g=new Float32Array(a,b.tangetsAttrDesc.offset,b.tangetsAttrDesc.count),f.setVerticesData(c.b.TangentKind,g,!1));b.uvsAttrDesc&&0<b.uvsAttrDesc.count&&(g=new Float32Array(a,b.uvsAttrDesc.offset,b.uvsAttrDesc.count),f.setVerticesData(c.b.UVKind,g,!1));b.uvs2AttrDesc&&0<b.uvs2AttrDesc.count&&
(g=new Float32Array(a,b.uvs2AttrDesc.offset,b.uvs2AttrDesc.count),f.setVerticesData(c.b.UV2Kind,g,!1));b.uvs3AttrDesc&&0<b.uvs3AttrDesc.count&&(g=new Float32Array(a,b.uvs3AttrDesc.offset,b.uvs3AttrDesc.count),f.setVerticesData(c.b.UV3Kind,g,!1));b.uvs4AttrDesc&&0<b.uvs4AttrDesc.count&&(g=new Float32Array(a,b.uvs4AttrDesc.offset,b.uvs4AttrDesc.count),f.setVerticesData(c.b.UV4Kind,g,!1));b.uvs5AttrDesc&&0<b.uvs5AttrDesc.count&&(g=new Float32Array(a,b.uvs5AttrDesc.offset,b.uvs5AttrDesc.count),f.setVerticesData(c.b.UV5Kind,
g,!1));b.uvs6AttrDesc&&0<b.uvs6AttrDesc.count&&(g=new Float32Array(a,b.uvs6AttrDesc.offset,b.uvs6AttrDesc.count),f.setVerticesData(c.b.UV6Kind,g,!1));b.colorsAttrDesc&&0<b.colorsAttrDesc.count&&(g=new Float32Array(a,b.colorsAttrDesc.offset,b.colorsAttrDesc.count),f.setVerticesData(c.b.ColorKind,g,!1,b.colorsAttrDesc.stride));if(b.matricesIndicesAttrDesc&&0<b.matricesIndicesAttrDesc.count){var m=new Int32Array(a,b.matricesIndicesAttrDesc.offset,b.matricesIndicesAttrDesc.count),l=[];for(g=0;g<m.length;g++){var k=
m[g];l.push(k&255);l.push((k&65280)>>8);l.push((k&16711680)>>16);l.push(k>>24&255)}f.setVerticesData(c.b.MatricesIndicesKind,l,!1)}if(b.matricesIndicesExtraAttrDesc&&0<b.matricesIndicesExtraAttrDesc.count){m=new Int32Array(a,b.matricesIndicesExtraAttrDesc.offset,b.matricesIndicesExtraAttrDesc.count);l=[];for(g=0;g<m.length;g++)k=m[g],l.push(k&255),l.push((k&65280)>>8),l.push((k&16711680)>>16),l.push(k>>24&255);f.setVerticesData(c.b.MatricesIndicesExtraKind,l,!1)}b.matricesWeightsAttrDesc&&0<b.matricesWeightsAttrDesc.count&&
(g=new Float32Array(a,b.matricesWeightsAttrDesc.offset,b.matricesWeightsAttrDesc.count),f.setVerticesData(c.b.MatricesWeightsKind,g,!1));b.indicesAttrDesc&&0<b.indicesAttrDesc.count&&(g=new Int32Array(a,b.indicesAttrDesc.offset,b.indicesAttrDesc.count),f.setIndices(g,null));if(b.subMeshesAttrDesc&&0<b.subMeshesAttrDesc.count)for(l=new Int32Array(a,b.subMeshesAttrDesc.offset,5*b.subMeshesAttrDesc.count),f.subMeshes=[],g=0;g<b.subMeshesAttrDesc.count;g++)F.a.AddToMesh(l[5*g],l[5*g+1],l[5*g+2],l[5*g+
3],l[5*g+4],f)}else if(a.positions&&a.normals&&a.indices){f.setVerticesData(c.b.PositionKind,a.positions,a.positions._updatable);f.setVerticesData(c.b.NormalKind,a.normals,a.normals._updatable);a.tangents&&f.setVerticesData(c.b.TangentKind,a.tangents,a.tangents._updatable);a.uvs&&f.setVerticesData(c.b.UVKind,a.uvs,a.uvs._updatable);a.uvs2&&f.setVerticesData(c.b.UV2Kind,a.uvs2,a.uvs2._updatable);a.uvs3&&f.setVerticesData(c.b.UV3Kind,a.uvs3,a.uvs3._updatable);a.uvs4&&f.setVerticesData(c.b.UV4Kind,a.uvs4,
a.uvs4._updatable);a.uvs5&&f.setVerticesData(c.b.UV5Kind,a.uvs5,a.uvs5._updatable);a.uvs6&&f.setVerticesData(c.b.UV6Kind,a.uvs6,a.uvs6._updatable);a.colors&&f.setVerticesData(c.b.ColorKind,h.b.CheckColors4(a.colors,a.positions.length/3),a.colors._updatable);if(a.matricesIndices)if(a.matricesIndices._isExpanded)delete a.matricesIndices._isExpanded,f.setVerticesData(c.b.MatricesIndicesKind,a.matricesIndices,a.matricesIndices._updatable);else{l=[];for(g=0;g<a.matricesIndices.length;g++)b=a.matricesIndices[g],
l.push(b&255),l.push((b&65280)>>8),l.push((b&16711680)>>16),l.push(b>>24&255);f.setVerticesData(c.b.MatricesIndicesKind,l,a.matricesIndices._updatable)}if(a.matricesIndicesExtra)if(a.matricesIndicesExtra._isExpanded)delete a.matricesIndices._isExpanded,f.setVerticesData(c.b.MatricesIndicesExtraKind,a.matricesIndicesExtra,a.matricesIndicesExtra._updatable);else{l=[];for(g=0;g<a.matricesIndicesExtra.length;g++)b=a.matricesIndicesExtra[g],l.push(b&255),l.push((b&65280)>>8),l.push((b&16711680)>>16),l.push(b>>
24&255);f.setVerticesData(c.b.MatricesIndicesExtraKind,l,a.matricesIndicesExtra._updatable)}a.matricesWeights&&(d._CleanMatricesWeights(a,f),f.setVerticesData(c.b.MatricesWeightsKind,a.matricesWeights,a.matricesWeights._updatable));a.matricesWeightsExtra&&f.setVerticesData(c.b.MatricesWeightsExtraKind,a.matricesWeightsExtra,a.matricesWeights._updatable);f.setIndices(a.indices,null)}if(a.subMeshes)for(f.subMeshes=[],b=0;b<a.subMeshes.length;b++)g=a.subMeshes[b],F.a.AddToMesh(g.materialIndex,g.verticesStart,
g.verticesCount,g.indexStart,g.indexCount,f);f._shouldGenerateFlatShading&&(f.convertToFlatShadedMesh(),f._shouldGenerateFlatShading=!1);f.computeWorldMatrix(!0);e.onMeshImportedObservable.notifyObservers(f)};d._CleanMatricesWeights=function(a,d){if(x.a.CleanBoneMatrixWeights){var e;if(-1<a.skeletonId&&(e=d.getScene().getLastSkeletonByID(a.skeletonId))){e=e.bones.length;for(var b=d.getVerticesData(c.b.MatricesIndicesKind),f=d.getVerticesData(c.b.MatricesIndicesExtraKind),h=a.matricesWeights,l=a.matricesWeightsExtra,
k=a.numBoneInfluencer,m=h.length,p=0;p<m;p+=4){for(var r=0,q=-1,n=0;4>n;n++){var v=h[p+n];r+=v;.001>v&&0>q&&(q=n)}if(l)for(n=0;4>n;n++)v=l[p+n],r+=v,.001>v&&0>q&&(q=n+4);if(0>q||q>k-1)q=k-1;if(.001<r){r=1/r;for(n=0;4>n;n++)h[p+n]*=r;if(l)for(n=0;4>n;n++)l[p+n]*=r}else 4<=q?(l[p+q-4]=1-r,f[p+q-4]=e):(h[p+q]=1-r,b[p+q]=e)}d.setVerticesData(c.b.MatricesIndicesKind,b);a.matricesWeightsExtra&&d.setVerticesData(c.b.MatricesIndicesExtraKind,f)}}};d.Parse=function(a,f,h){if(f.getGeometryByID(a.id))return null;
var b=new d(a.id,f,void 0,a.updatable);q.a&&q.a.AddTagsTo(b,a.tags);a.delayLoadingFile?(b.delayLoadState=4,b.delayLoadingFile=h+a.delayLoadingFile,b._boundingInfo=new m.a(v.e.FromArray(a.boundingBoxMinimum),v.e.FromArray(a.boundingBoxMaximum)),b._delayInfo=[],a.hasUVs&&b._delayInfo.push(c.b.UVKind),a.hasUVs2&&b._delayInfo.push(c.b.UV2Kind),a.hasUVs3&&b._delayInfo.push(c.b.UV3Kind),a.hasUVs4&&b._delayInfo.push(c.b.UV4Kind),a.hasUVs5&&b._delayInfo.push(c.b.UV5Kind),a.hasUVs6&&b._delayInfo.push(c.b.UV6Kind),
a.hasColors&&b._delayInfo.push(c.b.ColorKind),a.hasMatricesIndices&&b._delayInfo.push(c.b.MatricesIndicesKind),a.hasMatricesWeights&&b._delayInfo.push(c.b.MatricesWeightsKind),b._delayLoadingFunction=e.a.ImportVertexData):e.a.ImportVertexData(a,b);f.pushGeometry(b,!0);return b};return d}()}}]);
