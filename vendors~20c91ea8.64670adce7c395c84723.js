(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{IpVE:function(v,z,a){var f=a("waC4");(function(){function a(g){this.engine=g;this._captureGPUFrameTime=!1;this._gpuFrameTime=new f.a;this._captureShaderCompilationTime=!1;this._shaderCompilationTime=new f.a;this._onAfterShaderCompilationObserver=this._onBeforeShaderCompilationObserver=this._onEndFrameObserver=this._onBeginFrameObserver=null}Object.defineProperty(a.prototype,"gpuFrameTimeCounter",{get:function(){return this._gpuFrameTime},enumerable:!1,
configurable:!0});Object.defineProperty(a.prototype,"captureGPUFrameTime",{get:function(){return this._captureGPUFrameTime},set:function(g){var b=this;g!==this._captureGPUFrameTime&&((this._captureGPUFrameTime=g)?(this._onBeginFrameObserver=this.engine.onBeginFrameObservable.add(function(){b._gpuFrameTimeToken||(b._gpuFrameTimeToken=b.engine.startTimeQuery())}),this._onEndFrameObserver=this.engine.onEndFrameObservable.add(function(){if(b._gpuFrameTimeToken){var g=b.engine.endTimeQuery(b._gpuFrameTimeToken);
-1<g&&(b._gpuFrameTimeToken=null,b._gpuFrameTime.fetchNewFrame(),b._gpuFrameTime.addCount(g,!0))}})):(this.engine.onBeginFrameObservable.remove(this._onBeginFrameObserver),this._onBeginFrameObserver=null,this.engine.onEndFrameObservable.remove(this._onEndFrameObserver),this._onEndFrameObserver=null))},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"shaderCompilationTimeCounter",{get:function(){return this._shaderCompilationTime},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,
"captureShaderCompilationTime",{get:function(){return this._captureShaderCompilationTime},set:function(g){var b=this;g!==this._captureShaderCompilationTime&&((this._captureShaderCompilationTime=g)?(this._onBeforeShaderCompilationObserver=this.engine.onBeforeShaderCompilationObservable.add(function(){b._shaderCompilationTime.fetchNewFrame();b._shaderCompilationTime.beginMonitoring()}),this._onAfterShaderCompilationObserver=this.engine.onAfterShaderCompilationObservable.add(function(){b._shaderCompilationTime.endMonitoring()})):
(this.engine.onBeforeShaderCompilationObservable.remove(this._onBeforeShaderCompilationObserver),this._onBeforeShaderCompilationObserver=null,this.engine.onAfterShaderCompilationObservable.remove(this._onAfterShaderCompilationObserver),this._onAfterShaderCompilationObserver=null))},enumerable:!1,configurable:!0});a.prototype.dispose=function(){this.engine.onBeginFrameObservable.remove(this._onBeginFrameObserver);this._onBeginFrameObserver=null;this.engine.onEndFrameObservable.remove(this._onEndFrameObserver);
this._onEndFrameObserver=null;this.engine.onBeforeShaderCompilationObservable.remove(this._onBeforeShaderCompilationObserver);this._onBeforeShaderCompilationObserver=null;this.engine.onAfterShaderCompilationObservable.remove(this._onAfterShaderCompilationObserver);this.engine=this._onAfterShaderCompilationObserver=null};return a})();var n=a("YKqZ");(function(){function a(a){var b=this;this.scene=a;this._captureActiveMeshesEvaluationTime=!1;this._activeMeshesEvaluationTime=new f.a;this._captureRenderTargetsRenderTime=
!1;this._renderTargetsRenderTime=new f.a;this._captureFrameTime=!1;this._frameTime=new f.a;this._captureRenderTime=!1;this._renderTime=new f.a;this._captureInterFrameTime=!1;this._interFrameTime=new f.a;this._captureParticlesRenderTime=!1;this._particlesRenderTime=new f.a;this._captureSpritesRenderTime=!1;this._spritesRenderTime=new f.a;this._capturePhysicsTime=!1;this._physicsTime=new f.a;this._captureAnimationsTime=!1;this._animationsTime=new f.a;this._captureCameraRenderTime=!1;this._cameraRenderTime=
new f.a;this._onAfterCameraRenderObserver=this._onBeforeCameraRenderObserver=this._onAfterAnimationsObserver=this._onAfterPhysicsObserver=this._onBeforePhysicsObserver=this._onAfterSpritesRenderingObserver=this._onBeforeSpritesRenderingObserver=this._onAfterParticlesRenderingObserver=this._onBeforeParticlesRenderingObserver=this._onBeforeAnimationsObserver=this._onAfterDrawPhaseObserver=this._onBeforeDrawPhaseObserver=this._onAfterRenderObserver=this._onAfterRenderTargetsRenderObserver=this._onBeforeRenderTargetsRenderObserver=
this._onAfterActiveMeshesEvaluationObserver=this._onBeforeActiveMeshesEvaluationObserver=null;this._onBeforeAnimationsObserver=a.onBeforeAnimationsObservable.add(function(){b._captureActiveMeshesEvaluationTime&&b._activeMeshesEvaluationTime.fetchNewFrame();b._captureRenderTargetsRenderTime&&b._renderTargetsRenderTime.fetchNewFrame();b._captureFrameTime&&(n.b.StartPerformanceCounter("Scene rendering"),b._frameTime.beginMonitoring());b._captureInterFrameTime&&b._interFrameTime.endMonitoring();b._captureParticlesRenderTime&&
b._particlesRenderTime.fetchNewFrame();b._captureSpritesRenderTime&&b._spritesRenderTime.fetchNewFrame();b._captureAnimationsTime&&b._animationsTime.beginMonitoring();b.scene.getEngine()._drawCalls.fetchNewFrame()});this._onAfterRenderObserver=a.onAfterRenderObservable.add(function(){b._captureFrameTime&&(n.b.EndPerformanceCounter("Scene rendering"),b._frameTime.endMonitoring());b._captureRenderTime&&b._renderTime.endMonitoring(!1);b._captureInterFrameTime&&b._interFrameTime.beginMonitoring()})}Object.defineProperty(a.prototype,
"activeMeshesEvaluationTimeCounter",{get:function(){return this._activeMeshesEvaluationTime},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"captureActiveMeshesEvaluationTime",{get:function(){return this._captureActiveMeshesEvaluationTime},set:function(a){var b=this;a!==this._captureActiveMeshesEvaluationTime&&((this._captureActiveMeshesEvaluationTime=a)?(this._onBeforeActiveMeshesEvaluationObserver=this.scene.onBeforeActiveMeshesEvaluationObservable.add(function(){n.b.StartPerformanceCounter("Active meshes evaluation");
b._activeMeshesEvaluationTime.beginMonitoring()}),this._onAfterActiveMeshesEvaluationObserver=this.scene.onAfterActiveMeshesEvaluationObservable.add(function(){n.b.EndPerformanceCounter("Active meshes evaluation");b._activeMeshesEvaluationTime.endMonitoring()})):(this.scene.onBeforeActiveMeshesEvaluationObservable.remove(this._onBeforeActiveMeshesEvaluationObserver),this._onBeforeActiveMeshesEvaluationObserver=null,this.scene.onAfterActiveMeshesEvaluationObservable.remove(this._onAfterActiveMeshesEvaluationObserver),
this._onAfterActiveMeshesEvaluationObserver=null))},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"renderTargetsRenderTimeCounter",{get:function(){return this._renderTargetsRenderTime},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"captureRenderTargetsRenderTime",{get:function(){return this._captureRenderTargetsRenderTime},set:function(a){var b=this;a!==this._captureRenderTargetsRenderTime&&((this._captureRenderTargetsRenderTime=a)?(this._onBeforeRenderTargetsRenderObserver=
this.scene.onBeforeRenderTargetsRenderObservable.add(function(){n.b.StartPerformanceCounter("Render targets rendering");b._renderTargetsRenderTime.beginMonitoring()}),this._onAfterRenderTargetsRenderObserver=this.scene.onAfterRenderTargetsRenderObservable.add(function(){n.b.EndPerformanceCounter("Render targets rendering");b._renderTargetsRenderTime.endMonitoring(!1)})):(this.scene.onBeforeRenderTargetsRenderObservable.remove(this._onBeforeRenderTargetsRenderObserver),this._onBeforeRenderTargetsRenderObserver=
null,this.scene.onAfterRenderTargetsRenderObservable.remove(this._onAfterRenderTargetsRenderObserver),this._onAfterRenderTargetsRenderObserver=null))},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"particlesRenderTimeCounter",{get:function(){return this._particlesRenderTime},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"captureParticlesRenderTime",{get:function(){return this._captureParticlesRenderTime},set:function(a){var b=this;a!==this._captureParticlesRenderTime&&
((this._captureParticlesRenderTime=a)?(this._onBeforeParticlesRenderingObserver=this.scene.onBeforeParticlesRenderingObservable.add(function(){n.b.StartPerformanceCounter("Particles");b._particlesRenderTime.beginMonitoring()}),this._onAfterParticlesRenderingObserver=this.scene.onAfterParticlesRenderingObservable.add(function(){n.b.EndPerformanceCounter("Particles");b._particlesRenderTime.endMonitoring(!1)})):(this.scene.onBeforeParticlesRenderingObservable.remove(this._onBeforeParticlesRenderingObserver),
this._onBeforeParticlesRenderingObserver=null,this.scene.onAfterParticlesRenderingObservable.remove(this._onAfterParticlesRenderingObserver),this._onAfterParticlesRenderingObserver=null))},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"spritesRenderTimeCounter",{get:function(){return this._spritesRenderTime},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"captureSpritesRenderTime",{get:function(){return this._captureSpritesRenderTime},set:function(a){var b=this;
a!==this._captureSpritesRenderTime&&(this._captureSpritesRenderTime=a,this.scene.spriteManagers&&(a?(this._onBeforeSpritesRenderingObserver=this.scene.onBeforeSpritesRenderingObservable.add(function(){n.b.StartPerformanceCounter("Sprites");b._spritesRenderTime.beginMonitoring()}),this._onAfterSpritesRenderingObserver=this.scene.onAfterSpritesRenderingObservable.add(function(){n.b.EndPerformanceCounter("Sprites");b._spritesRenderTime.endMonitoring(!1)})):(this.scene.onBeforeSpritesRenderingObservable.remove(this._onBeforeSpritesRenderingObserver),
this._onBeforeSpritesRenderingObserver=null,this.scene.onAfterSpritesRenderingObservable.remove(this._onAfterSpritesRenderingObserver),this._onAfterSpritesRenderingObserver=null)))},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"physicsTimeCounter",{get:function(){return this._physicsTime},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"capturePhysicsTime",{get:function(){return this._capturePhysicsTime},set:function(a){var b=this;a!==this._capturePhysicsTime&&
this.scene.onBeforePhysicsObservable&&((this._capturePhysicsTime=a)?(this._onBeforePhysicsObserver=this.scene.onBeforePhysicsObservable.add(function(){n.b.StartPerformanceCounter("Physics");b._physicsTime.beginMonitoring()}),this._onAfterPhysicsObserver=this.scene.onAfterPhysicsObservable.add(function(){n.b.EndPerformanceCounter("Physics");b._physicsTime.endMonitoring()})):(this.scene.onBeforePhysicsObservable.remove(this._onBeforePhysicsObserver),this._onBeforePhysicsObserver=null,this.scene.onAfterPhysicsObservable.remove(this._onAfterPhysicsObserver),
this._onAfterPhysicsObserver=null))},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"animationsTimeCounter",{get:function(){return this._animationsTime},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"captureAnimationsTime",{get:function(){return this._captureAnimationsTime},set:function(a){var b=this;a!==this._captureAnimationsTime&&((this._captureAnimationsTime=a)?this._onAfterAnimationsObserver=this.scene.onAfterAnimationsObservable.add(function(){b._animationsTime.endMonitoring()}):
(this.scene.onAfterAnimationsObservable.remove(this._onAfterAnimationsObserver),this._onAfterAnimationsObserver=null))},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"frameTimeCounter",{get:function(){return this._frameTime},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"captureFrameTime",{get:function(){return this._captureFrameTime},set:function(a){this._captureFrameTime=a},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"interFrameTimeCounter",
{get:function(){return this._interFrameTime},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"captureInterFrameTime",{get:function(){return this._captureInterFrameTime},set:function(a){this._captureInterFrameTime=a},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"renderTimeCounter",{get:function(){return this._renderTime},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"captureRenderTime",{get:function(){return this._captureRenderTime},set:function(a){var b=
this;a!==this._captureRenderTime&&((this._captureRenderTime=a)?(this._onBeforeDrawPhaseObserver=this.scene.onBeforeDrawPhaseObservable.add(function(){b._renderTime.beginMonitoring();n.b.StartPerformanceCounter("Main render")}),this._onAfterDrawPhaseObserver=this.scene.onAfterDrawPhaseObservable.add(function(){b._renderTime.endMonitoring(!1);n.b.EndPerformanceCounter("Main render")})):(this.scene.onBeforeDrawPhaseObservable.remove(this._onBeforeDrawPhaseObserver),this._onBeforeDrawPhaseObserver=null,
this.scene.onAfterDrawPhaseObservable.remove(this._onAfterDrawPhaseObserver),this._onAfterDrawPhaseObserver=null))},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"cameraRenderTimeCounter",{get:function(){return this._cameraRenderTime},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"captureCameraRenderTime",{get:function(){return this._captureCameraRenderTime},set:function(a){var b=this;a!==this._captureCameraRenderTime&&((this._captureCameraRenderTime=a)?(this._onBeforeCameraRenderObserver=
this.scene.onBeforeCameraRenderObservable.add(function(a){b._cameraRenderTime.beginMonitoring();n.b.StartPerformanceCounter("Rendering camera "+a.name)}),this._onAfterCameraRenderObserver=this.scene.onAfterCameraRenderObservable.add(function(a){b._cameraRenderTime.endMonitoring(!1);n.b.EndPerformanceCounter("Rendering camera "+a.name)})):(this.scene.onBeforeCameraRenderObservable.remove(this._onBeforeCameraRenderObserver),this._onBeforeCameraRenderObserver=null,this.scene.onAfterCameraRenderObservable.remove(this._onAfterCameraRenderObserver),
this._onAfterCameraRenderObserver=null))},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"drawCallsCounter",{get:function(){return this.scene.getEngine()._drawCalls},enumerable:!1,configurable:!0});a.prototype.dispose=function(){this.scene.onAfterRenderObservable.remove(this._onAfterRenderObserver);this._onAfterRenderObserver=null;this.scene.onBeforeActiveMeshesEvaluationObservable.remove(this._onBeforeActiveMeshesEvaluationObserver);this._onBeforeActiveMeshesEvaluationObserver=
null;this.scene.onAfterActiveMeshesEvaluationObservable.remove(this._onAfterActiveMeshesEvaluationObserver);this._onAfterActiveMeshesEvaluationObserver=null;this.scene.onBeforeRenderTargetsRenderObservable.remove(this._onBeforeRenderTargetsRenderObserver);this._onBeforeRenderTargetsRenderObserver=null;this.scene.onAfterRenderTargetsRenderObservable.remove(this._onAfterRenderTargetsRenderObserver);this._onAfterRenderTargetsRenderObserver=null;this.scene.onBeforeAnimationsObservable.remove(this._onBeforeAnimationsObserver);
this._onBeforeAnimationsObserver=null;this.scene.onBeforeParticlesRenderingObservable.remove(this._onBeforeParticlesRenderingObserver);this._onBeforeParticlesRenderingObserver=null;this.scene.onAfterParticlesRenderingObservable.remove(this._onAfterParticlesRenderingObserver);this._onAfterParticlesRenderingObserver=null;this._onBeforeSpritesRenderingObserver&&(this.scene.onBeforeSpritesRenderingObservable.remove(this._onBeforeSpritesRenderingObserver),this._onBeforeSpritesRenderingObserver=null);this._onAfterSpritesRenderingObserver&&
(this.scene.onAfterSpritesRenderingObservable.remove(this._onAfterSpritesRenderingObserver),this._onAfterSpritesRenderingObserver=null);this.scene.onBeforeDrawPhaseObservable.remove(this._onBeforeDrawPhaseObserver);this._onBeforeDrawPhaseObserver=null;this.scene.onAfterDrawPhaseObservable.remove(this._onAfterDrawPhaseObserver);this._onAfterDrawPhaseObserver=null;this._onBeforePhysicsObserver&&(this.scene.onBeforePhysicsObservable.remove(this._onBeforePhysicsObserver),this._onBeforePhysicsObserver=
null);this._onAfterPhysicsObserver&&(this.scene.onAfterPhysicsObservable.remove(this._onAfterPhysicsObserver),this._onAfterPhysicsObserver=null);this.scene.onAfterAnimationsObservable.remove(this._onAfterAnimationsObserver);this._onAfterAnimationsObserver=null;this.scene.onBeforeCameraRenderObservable.remove(this._onBeforeCameraRenderObserver);this._onBeforeCameraRenderObserver=null;this.scene.onAfterCameraRenderObservable.remove(this._onAfterCameraRenderObserver);this.scene=this._onAfterCameraRenderObserver=
null};return a})();a("OVZ0")},OVZ0:function(v,z,a){a.d(z,"a",function(){return f});var f=function(){return function(){this._timeElapsedQueryEnded=!1}}()},XdJO:function(v,z,a){a.d(z,"a",function(){return r});var f=a("98Qd"),n=a("fZF6"),x=a("/SR9"),g=a("IIVm"),b=a("YKqZ"),u=a("jSHE"),y=function(){function a(){this._ignore=this._hasSwiped=this._doubleClick=this._singleClick=!1}Object.defineProperty(a.prototype,"singleClick",{get:function(){return this._singleClick},set:function(a){this._singleClick=
a},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"doubleClick",{get:function(){return this._doubleClick},set:function(a){this._doubleClick=a},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"hasSwiped",{get:function(){return this._hasSwiped},set:function(a){this._hasSwiped=a},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"ignore",{get:function(){return this._ignore},set:function(a){this._ignore=a},enumerable:!1,configurable:!0});return a}(),
r=function(){function a(a){this._alreadyAttached=!1;this._wheelEventName="";this._meshPickProceed=!1;this._previousPickResult=this._currentPickResult=null;this._totalPointersPressed=0;this._doubleClickOccured=!1;this._pointerY=this._pointerX=0;this._startingPointerPosition=new x.d(0,0);this._previousStartingPointerPosition=new x.d(0,0);this._previousStartingPointerTime=this._startingPointerTime=0;this._pointerCaptures={};this._meshUnderPointerId=[];this._keyboardIsAttached=!1;this._scene=a}Object.defineProperty(a.prototype,
"meshUnderPointer",{get:function(){return this._pointerOverMesh},enumerable:!1,configurable:!0});a.prototype.getMeshUnderPointerByPointerId=function(a){return this._meshUnderPointerId[a]};Object.defineProperty(a.prototype,"unTranslatedPointer",{get:function(){return new x.d(this._unTranslatedPointerX,this._unTranslatedPointerY)},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"pointerX",{get:function(){return this._pointerX},set:function(a){this._pointerX=a},enumerable:!1,configurable:!0});
Object.defineProperty(a.prototype,"pointerY",{get:function(){return this._pointerY},set:function(a){this._pointerY=a},enumerable:!1,configurable:!0});a.prototype._updatePointerPosition=function(a){var e=this._scene.getEngine().getInputElementClientRect();e&&(this._pointerX=a.clientX-e.left,this._pointerY=a.clientY-e.top,this._unTranslatedPointerX=this._pointerX,this._unTranslatedPointerY=this._pointerY)};a.prototype._processPointerMove=function(a,l){var e=this._scene,b=e.getEngine(),c=b.getInputElement();
if(c){c.tabIndex=b.canvasTabIndex;e.doNotHandleCursors||(c.style.cursor=e.defaultCursor);(b=a&&a.hit&&a.pickedMesh?!0:!1)?(e.setPointerOverMesh(a.pickedMesh,l.pointerId),this._pointerOverMesh&&this._pointerOverMesh.actionManager&&this._pointerOverMesh.actionManager.hasPointerTriggers&&!e.doNotHandleCursors&&(c.style.cursor=this._pointerOverMesh.actionManager.hoverCursor?this._pointerOverMesh.actionManager.hoverCursor:e.hoverCursor)):e.setPointerOverMesh(null,l.pointerId);for(var d=0,g=e._pointerMoveStage;d<
g.length;d++)a=g[d].action(this._unTranslatedPointerX,this._unTranslatedPointerY,a,b,c);if(a){c=l.type===this._wheelEventName?f.a.POINTERWHEEL:f.a.POINTERMOVE;if(e.onPointerMove)e.onPointerMove(l,a,c);e.onPointerObservable.hasObservers()&&(a=new f.b(c,l,a),this._setRayOnPointerInfo(a),e.onPointerObservable.notifyObservers(a,c))}}};a.prototype._setRayOnPointerInfo=function(a){var e=this._scene;!a.pickInfo||a.pickInfo._pickingUnavailable||a.pickInfo.ray||(a.pickInfo.ray=e.createPickingRay(a.event.offsetX,
a.event.offsetY,x.a.Identity(),e.activeCamera))};a.prototype._checkPrePointerObservable=function(a,b,p){var e=this._scene;b=new f.c(p,b,this._unTranslatedPointerX,this._unTranslatedPointerY);a&&(b.ray=a.ray);e.onPrePointerObservable.notifyObservers(b,p);return b.skipOnPointerObservable?!0:!1};a.prototype.simulatePointerMove=function(a,b){b=new PointerEvent("pointermove",b);this._checkPrePointerObservable(a,b,f.a.POINTERMOVE)||this._processPointerMove(a,b)};a.prototype.simulatePointerDown=function(a,
b){b=new PointerEvent("pointerdown",b);this._checkPrePointerObservable(a,b,f.a.POINTERDOWN)||this._processPointerDown(a,b)};a.prototype._processPointerDown=function(b,l){var e=this,h=this._scene;if(b&&b.hit&&b.pickedMesh){this._pickedDownMesh=b.pickedMesh;var c=b.pickedMesh._getActionManagerForTrigger();if(c){if(c.hasPickTriggers)switch(c.processTrigger(5,g.a.CreateNew(b.pickedMesh,l)),l.button){case 0:c.processTrigger(2,g.a.CreateNew(b.pickedMesh,l));break;case 1:c.processTrigger(4,g.a.CreateNew(b.pickedMesh,
l));break;case 2:c.processTrigger(3,g.a.CreateNew(b.pickedMesh,l))}c.hasSpecificTrigger(8)&&window.setTimeout(function(){var b=h.pick(e._unTranslatedPointerX,e._unTranslatedPointerY,function(a){return a.isPickable&&a.isVisible&&a.isReady()&&a.actionManager&&a.actionManager.hasSpecificTrigger(8)&&a==e._pickedDownMesh},!1,h.cameraToUseForPointers);b&&b.hit&&b.pickedMesh&&c&&0!==e._totalPointersPressed&&Date.now()-e._startingPointerTime>a.LongPressDelay&&!e._isPointerSwiping()&&(e._startingPointerTime=
0,c.processTrigger(8,g.a.CreateNew(b.pickedMesh,l)))},a.LongPressDelay)}}else for(var d=0,n=h._pointerDownStage;d<n.length;d++)b=n[d].action(this._unTranslatedPointerX,this._unTranslatedPointerY,b,l);if(b){d=f.a.POINTERDOWN;if(h.onPointerDown)h.onPointerDown(l,b,d);h.onPointerObservable.hasObservers()&&(b=new f.b(d,l,b),this._setRayOnPointerInfo(b),h.onPointerObservable.notifyObservers(b,d))}};a.prototype._isPointerSwiping=function(){return Math.abs(this._startingPointerPosition.x-this._pointerX)>
a.DragMovementThreshold||Math.abs(this._startingPointerPosition.y-this._pointerY)>a.DragMovementThreshold};a.prototype.simulatePointerUp=function(a,b,g){b=new PointerEvent("pointerup",b);var e=new y;g?e.doubleClick=!0:e.singleClick=!0;this._checkPrePointerObservable(a,b,f.a.POINTERUP)||this._processPointerUp(a,b,e)};a.prototype._processPointerUp=function(a,b,p){var e=this._scene;if(a&&a&&a.pickedMesh){this._pickedUpMesh=a.pickedMesh;if(this._pickedDownMesh===this._pickedUpMesh){if(e.onPointerPick)e.onPointerPick(b,
a);if(p.singleClick&&!p.ignore&&e.onPointerObservable.hasObservers()){var c=f.a.POINTERPICK,d=new f.b(c,b,a);this._setRayOnPointerInfo(d);e.onPointerObservable.notifyObservers(d,c)}}(d=a.pickedMesh._getActionManagerForTrigger())&&!p.ignore&&(d.processTrigger(7,g.a.CreateNew(a.pickedMesh,b)),!p.hasSwiped&&p.singleClick&&d.processTrigger(1,g.a.CreateNew(a.pickedMesh,b)),d=a.pickedMesh._getActionManagerForTrigger(6),p.doubleClick&&d&&d.processTrigger(6,g.a.CreateNew(a.pickedMesh,b)))}else if(!p.ignore)for(d=
0,c=e._pointerUpStage;d<c.length;d++)a=c[d].action(this._unTranslatedPointerX,this._unTranslatedPointerY,a,b);this._pickedDownMesh&&this._pickedDownMesh!==this._pickedUpMesh&&(d=this._pickedDownMesh._getActionManagerForTrigger(16))&&d.processTrigger(16,g.a.CreateNew(this._pickedDownMesh,b));c=0;e.onPointerObservable.hasObservers()&&(p.ignore||p.hasSwiped||(p.singleClick&&e.onPointerObservable.hasSpecificMask(f.a.POINTERTAP)?c=f.a.POINTERTAP:p.doubleClick&&e.onPointerObservable.hasSpecificMask(f.a.POINTERDOUBLETAP)&&
(c=f.a.POINTERDOUBLETAP),c&&(d=new f.b(c,b,a),this._setRayOnPointerInfo(d),e.onPointerObservable.notifyObservers(d,c))),p.ignore||(c=f.a.POINTERUP,d=new f.b(c,b,a),this._setRayOnPointerInfo(d),e.onPointerObservable.notifyObservers(d,c)));if(e.onPointerUp&&!p.ignore)e.onPointerUp(b,a,c)};a.prototype.isPointerCaptured=function(a){void 0===a&&(a=0);return this._pointerCaptures[a]};a.prototype.attachControl=function(e,l,p,h){var c=this;void 0===e&&(e=!0);void 0===l&&(l=!0);void 0===p&&(p=!0);void 0===
h&&(h=null);var d=this._scene;h||(h=d.getEngine().getInputElement());if(h){this._alreadyAttached&&this.detachControl();this._alreadyAttachedTo=h;var t=d.getEngine();this._initActionManager=function(a,b){c._meshPickProceed||(b=d.pick(c._unTranslatedPointerX,c._unTranslatedPointerY,d.pointerDownPredicate,!1,d.cameraToUseForPointers),(c._currentPickResult=b)&&(a=b.hit&&b.pickedMesh?b.pickedMesh._getActionManagerForTrigger():null),c._meshPickProceed=!0);return a};this._delayedSimpleClick=function(b,d,
e){if(Date.now()-c._previousStartingPointerTime>a.DoubleClickDelay&&!c._doubleClickOccured||b!==c._previousButtonPressed)c._doubleClickOccured=!1,d.singleClick=!0,d.ignore=!1,e(d,c._currentPickResult)};this._initClickEvent=function(b,d,e,l){var g=new y,h=c._currentPickResult=null,w=b.hasSpecificMask(f.a.POINTERPICK)||d.hasSpecificMask(f.a.POINTERPICK)||b.hasSpecificMask(f.a.POINTERTAP)||d.hasSpecificMask(f.a.POINTERTAP)||b.hasSpecificMask(f.a.POINTERDOUBLETAP)||d.hasSpecificMask(f.a.POINTERDOUBLETAP);
!w&&n.a&&(h=c._initActionManager(h,g))&&(w=h.hasPickTriggers);var q=!1;if(w&&(e=e.button,g.hasSwiped=c._isPointerSwiping(),!g.hasSwiped)){w=!a.ExclusiveDoubleClickMode;w||(w=!b.hasSpecificMask(f.a.POINTERDOUBLETAP)&&!d.hasSpecificMask(f.a.POINTERDOUBLETAP))&&!n.a.HasSpecificTrigger(6)&&(h=c._initActionManager(h,g))&&(w=!h.hasSpecificTrigger(6));if(w){if(Date.now()-c._previousStartingPointerTime>a.DoubleClickDelay||e!==c._previousButtonPressed)g.singleClick=!0,l(g,c._currentPickResult),q=!0}else c._previousDelayedSimpleClickTimeout=
c._delayedSimpleClickTimeout,c._delayedSimpleClickTimeout=window.setTimeout(c._delayedSimpleClick.bind(c,e,g,l),a.DoubleClickDelay);b=b.hasSpecificMask(f.a.POINTERDOUBLETAP)||d.hasSpecificMask(f.a.POINTERDOUBLETAP);!b&&n.a.HasSpecificTrigger(6)&&(h=c._initActionManager(h,g))&&(b=h.hasSpecificTrigger(6));b&&(e===c._previousButtonPressed&&Date.now()-c._previousStartingPointerTime<a.DoubleClickDelay&&!c._doubleClickOccured?(g.hasSwiped||c._isPointerSwiping()?(c._doubleClickOccured=!1,c._previousStartingPointerTime=
c._startingPointerTime,c._previousStartingPointerPosition.x=c._startingPointerPosition.x,c._previousStartingPointerPosition.y=c._startingPointerPosition.y,c._previousButtonPressed=e,a.ExclusiveDoubleClickMode?(c._previousDelayedSimpleClickTimeout&&clearTimeout(c._previousDelayedSimpleClickTimeout),c._previousDelayedSimpleClickTimeout=c._delayedSimpleClickTimeout,l(g,c._previousPickResult)):l(g,c._currentPickResult)):(c._previousStartingPointerTime=0,c._doubleClickOccured=!0,g.doubleClick=!0,g.ignore=
!1,a.ExclusiveDoubleClickMode&&c._previousDelayedSimpleClickTimeout&&clearTimeout(c._previousDelayedSimpleClickTimeout),c._previousDelayedSimpleClickTimeout=c._delayedSimpleClickTimeout,l(g,c._currentPickResult)),q=!0):(c._doubleClickOccured=!1,c._previousStartingPointerTime=c._startingPointerTime,c._previousStartingPointerPosition.x=c._startingPointerPosition.x,c._previousStartingPointerPosition.y=c._startingPointerPosition.y,c._previousButtonPressed=e))}q||l(g,c._currentPickResult)};this._onPointerMove=
function(a){void 0===a.pointerId&&(a.pointerId=0);c._updatePointerPosition(a);if(!c._checkPrePointerObservable(null,a,a.type===c._wheelEventName?f.a.POINTERWHEEL:f.a.POINTERMOVE)&&(d.cameraToUseForPointers||d.activeCamera)){d.pointerMovePredicate||(d.pointerMovePredicate=function(a){return a.isPickable&&a.isVisible&&a.isReady()&&a.isEnabled()&&(a.enablePointerMoveEvents||d.constantlyUpdateMeshUnderPointer||null!=a._getActionManagerForTrigger())&&(!d.cameraToUseForPointers||0!==(d.cameraToUseForPointers.layerMask&
a.layerMask))});var b=d.pick(c._unTranslatedPointerX,c._unTranslatedPointerY,d.pointerMovePredicate,!1,d.cameraToUseForPointers);c._processPointerMove(b,a)}};this._onPointerDown=function(a){c._totalPointersPressed++;c._pickedDownMesh=null;c._meshPickProceed=!1;void 0===a.pointerId&&(a.pointerId=0);c._updatePointerPosition(a);d.preventDefaultOnPointerDown&&h&&(a.preventDefault(),h.focus());c._startingPointerPosition.x=c._pointerX;c._startingPointerPosition.y=c._pointerY;c._startingPointerTime=Date.now();
if(!c._checkPrePointerObservable(null,a,f.a.POINTERDOWN)&&(d.cameraToUseForPointers||d.activeCamera)){c._pointerCaptures[a.pointerId]=!0;d.pointerDownPredicate||(d.pointerDownPredicate=function(a){return a.isPickable&&a.isVisible&&a.isReady()&&a.isEnabled()&&(!d.cameraToUseForPointers||0!==(d.cameraToUseForPointers.layerMask&a.layerMask))});c._pickedDownMesh=null;var b=d.pick(c._unTranslatedPointerX,c._unTranslatedPointerY,d.pointerDownPredicate,!1,d.cameraToUseForPointers);c._processPointerDown(b,
a)}};this._onPointerUp=function(a){0!==c._totalPointersPressed&&(c._totalPointersPressed--,c._pickedUpMesh=null,c._meshPickProceed=!1,void 0===a.pointerId&&(a.pointerId=0),c._updatePointerPosition(a),d.preventDefaultOnPointerUp&&h&&(a.preventDefault(),h.focus()),c._initClickEvent(d.onPrePointerObservable,d.onPointerObservable,a,function(b,e){(!d.onPrePointerObservable.hasObservers()||b.ignore||!(!b.hasSwiped&&(b.singleClick&&d.onPrePointerObservable.hasSpecificMask(f.a.POINTERTAP)&&c._checkPrePointerObservable(null,
a,f.a.POINTERTAP)||b.doubleClick&&d.onPrePointerObservable.hasSpecificMask(f.a.POINTERDOUBLETAP)&&c._checkPrePointerObservable(null,a,f.a.POINTERDOUBLETAP))||c._checkPrePointerObservable(null,a,f.a.POINTERUP)))&&c._pointerCaptures[a.pointerId]&&(c._pointerCaptures[a.pointerId]=!1,d.cameraToUseForPointers||d.activeCamera)&&(d.pointerUpPredicate||(d.pointerUpPredicate=function(a){return a.isPickable&&a.isVisible&&a.isReady()&&a.isEnabled()&&(!d.cameraToUseForPointers||0!==(d.cameraToUseForPointers.layerMask&
a.layerMask))}),!c._meshPickProceed&&(n.a&&n.a.HasTriggers||d.onPointerObservable.hasObservers())&&c._initActionManager(null,b),e||(e=c._currentPickResult),c._processPointerUp(e,a,b),c._previousPickResult=c._currentPickResult)}))};this._onKeyDown=function(a){var b=u.a.KEYDOWN;if(d.onPreKeyboardObservable.hasObservers()){var c=new u.c(b,a);d.onPreKeyboardObservable.notifyObservers(c,b);if(c.skipOnPointerObservable)return}d.onKeyboardObservable.hasObservers()&&(c=new u.b(b,a),d.onKeyboardObservable.notifyObservers(c,
b));d.actionManager&&d.actionManager.processTrigger(14,g.a.CreateNewFromScene(d,a))};this._onKeyUp=function(a){var b=u.a.KEYUP;if(d.onPreKeyboardObservable.hasObservers()){var c=new u.c(b,a);d.onPreKeyboardObservable.notifyObservers(c,b);if(c.skipOnPointerObservable)return}d.onKeyboardObservable.hasObservers()&&(c=new u.b(b,a),d.onKeyboardObservable.notifyObservers(c,b));d.actionManager&&d.actionManager.processTrigger(15,g.a.CreateNewFromScene(d,a))};var r=function(){h&&!c._keyboardIsAttached&&(h.addEventListener("keydown",
c._onKeyDown,!1),h.addEventListener("keyup",c._onKeyUp,!1),c._keyboardIsAttached=!0)};this._onCanvasFocusObserver=t.onCanvasFocusObservable.add(function(){document.activeElement===h&&r();return r}());this._onCanvasBlurObserver=t.onCanvasBlurObservable.add(function(){h&&(h.removeEventListener("keydown",c._onKeyDown),h.removeEventListener("keyup",c._onKeyUp),c._keyboardIsAttached=!1)});r();t=b.b.GetPointerPrefix(t);p&&(h.addEventListener(t+"move",this._onPointerMove,!1),this._wheelEventName="onwheel"in
document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",h.addEventListener(this._wheelEventName,this._onPointerMove,!1));l&&h.addEventListener(t+"down",this._onPointerDown,!1);e&&(e=d.getEngine().getHostWindow())&&e.addEventListener(t+"up",this._onPointerUp,!1);this._alreadyAttached=!0}};a.prototype.detachControl=function(){var a=this._scene.getEngine(),f=b.b.GetPointerPrefix(a);this._alreadyAttachedTo&&this._alreadyAttached&&(this._alreadyAttachedTo.removeEventListener(f+
"move",this._onPointerMove),this._alreadyAttachedTo.removeEventListener(this._wheelEventName,this._onPointerMove),this._alreadyAttachedTo.removeEventListener(f+"down",this._onPointerDown),window.removeEventListener(f+"up",this._onPointerUp),this._onCanvasBlurObserver&&a.onCanvasBlurObservable.remove(this._onCanvasBlurObserver),this._onCanvasFocusObserver&&a.onCanvasFocusObservable.remove(this._onCanvasFocusObserver),this._alreadyAttachedTo.removeEventListener("keydown",this._onKeyDown),this._alreadyAttachedTo.removeEventListener("keyup",
this._onKeyUp),this._scene.doNotHandleCursors||(this._alreadyAttachedTo.style.cursor=this._scene.defaultCursor),this._alreadyAttached=!1)};a.prototype.setPointerOverMesh=function(a,b){void 0===b&&(b=0);0>b&&(b=0);if(this._meshUnderPointerId[b]!==a){var e=this._meshUnderPointerId[b],f;e&&(f=e._getActionManagerForTrigger(10))&&f.processTrigger(10,g.a.CreateNew(e,void 0,{pointerId:b}));this._pointerOverMesh=this._meshUnderPointerId[b]=a;(e=this._meshUnderPointerId[b])&&(f=e._getActionManagerForTrigger(9))&&
f.processTrigger(9,g.a.CreateNew(e,void 0,{pointerId:b}))}};a.prototype.getPointerOverMesh=function(){return this._pointerOverMesh};a.DragMovementThreshold=10;a.LongPressDelay=500;a.DoubleClickDelay=300;a.ExclusiveDoubleClickMode=!1;return a}()},hB0X:function(v,z,a){var f=a("oYeq"),n=a("ps+7"),x=a("VfJ7"),g=a("/SR9"),b=a("Xeau"),u=a("wAMR"),y=a("WIi2"),r=a("aCSs"),A=a("JUU8"),e=a("Z+J3"),l=a("QfA5");a("NNSw");a("HZbn");var p=a("j2cH"),h=function(){function a(b,c){var m=this;this._errorHandler=function(a,
b){m.onErrorObservable.notifyObservers({message:a,exception:b})};this._options=Object(f.a)(Object(f.a)({},a._getDefaultOptions()),b);this._scene=c;this.onErrorObservable=new n.a;this._setupBackground();this._setupImageProcessing()}a._getDefaultOptions=function(){return{createGround:!0,groundSize:15,groundTexture:this._groundTextureCDNUrl,groundColor:(new b.a(.2,.2,.3)).toLinearSpace().scale(3),groundOpacity:.9,enableGroundShadow:!0,groundShadowLevel:.5,enableGroundMirror:!1,groundMirrorSizeRatio:.3,
groundMirrorBlurKernel:64,groundMirrorAmount:1,groundMirrorFresnelWeight:1,groundMirrorFallOffDistance:0,groundMirrorTextureType:0,groundYBias:1E-5,createSkybox:!0,skyboxSize:20,skyboxTexture:this._skyboxTextureCDNUrl,skyboxColor:(new b.a(.2,.2,.3)).toLinearSpace().scale(3),backgroundYRotation:0,sizeAuto:!0,rootPosition:g.e.Zero(),setupImageProcessing:!0,environmentTexture:this._environmentTextureCDNUrl,cameraExposure:.8,cameraContrast:1.2,toneMappingEnabled:!0}};Object.defineProperty(a.prototype,
"rootMesh",{get:function(){return this._rootMesh},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"skybox",{get:function(){return this._skybox},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"skyboxTexture",{get:function(){return this._skyboxTexture},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"skyboxMaterial",{get:function(){return this._skyboxMaterial},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"ground",{get:function(){return this._ground},
enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"groundTexture",{get:function(){return this._groundTexture},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"groundMirror",{get:function(){return this._groundMirror},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"groundMirrorRenderList",{get:function(){return this._groundMirror?this._groundMirror.renderList:null},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"groundMaterial",
{get:function(){return this._groundMaterial},enumerable:!1,configurable:!0});a.prototype.updateOptions=function(a){a=Object(f.a)(Object(f.a)({},this._options),a);this._ground&&!a.createGround&&(this._ground.dispose(),this._ground=null);this._groundMaterial&&!a.createGround&&(this._groundMaterial.dispose(),this._groundMaterial=null);this._groundTexture&&this._options.groundTexture!=a.groundTexture&&(this._groundTexture.dispose(),this._groundTexture=null);this._skybox&&!a.createSkybox&&(this._skybox.dispose(),
this._skybox=null);this._skyboxMaterial&&!a.createSkybox&&(this._skyboxMaterial.dispose(),this._skyboxMaterial=null);this._skyboxTexture&&this._options.skyboxTexture!=a.skyboxTexture&&(this._skyboxTexture.dispose(),this._skyboxTexture=null);this._groundMirror&&!a.enableGroundMirror&&(this._groundMirror.dispose(),this._groundMirror=null);this._scene.environmentTexture&&this._options.environmentTexture!=a.environmentTexture&&this._scene.environmentTexture.dispose();this._options=a;this._setupBackground();
this._setupImageProcessing()};a.prototype.setMainColor=function(a){this.groundMaterial&&(this.groundMaterial.primaryColor=a);this.skyboxMaterial&&(this.skyboxMaterial.primaryColor=a);this.groundMirror&&(this.groundMirror.clearColor=new b.b(a.r,a.g,a.b,1))};a.prototype._setupImageProcessing=function(){this._options.setupImageProcessing&&(this._scene.imageProcessingConfiguration.contrast=this._options.cameraContrast,this._scene.imageProcessingConfiguration.exposure=this._options.cameraExposure,this._scene.imageProcessingConfiguration.toneMappingEnabled=
this._options.toneMappingEnabled,this._setupEnvironmentTexture())};a.prototype._setupEnvironmentTexture=function(){if(!this._scene.environmentTexture)if(this._options.environmentTexture instanceof y.a)this._scene.environmentTexture=this._options.environmentTexture;else{var a=e.a.CreateFromPrefilteredData(this._options.environmentTexture,this._scene);this._scene.environmentTexture=a}};a.prototype._setupBackground=function(){this._rootMesh||(this._rootMesh=new u.a("BackgroundHelper",this._scene));this._rootMesh.rotation.y=
this._options.backgroundYRotation;var a=this._getSceneSize();this._options.createGround&&(this._setupGround(a),this._setupGroundMaterial(),this._setupGroundDiffuseTexture(),this._options.enableGroundMirror&&this._setupGroundMirrorTexture(a),this._setupMirrorInGroundMaterial());this._options.createSkybox&&(this._setupSkybox(a),this._setupSkyboxMaterial(),this._setupSkyboxReflectionTexture());this._rootMesh.position.x=a.rootPosition.x;this._rootMesh.position.z=a.rootPosition.z;this._rootMesh.position.y=
a.rootPosition.y};a.prototype._getSceneSize=function(){var a=this,b=this._options.groundSize,c=this._options.skyboxSize,d=this._options.rootPosition;if(!this._scene.meshes||1===this._scene.meshes.length)return{groundSize:b,skyboxSize:c,rootPosition:d};var e=this._scene.getWorldExtends(function(b){return b!==a._ground&&b!==a._rootMesh&&b!==a._skybox}),f=e.max.subtract(e.min);this._options.sizeAuto&&(this._scene.activeCamera instanceof x.a&&this._scene.activeCamera.upperRadiusLimit&&(c=b=2*this._scene.activeCamera.upperRadiusLimit),
d=f.length(),d>b&&(c=b=2*d),b*=1.1,c*=1.5,d=e.min.add(f.scale(.5)),d.y=e.min.y-this._options.groundYBias);return{groundSize:b,skyboxSize:c,rootPosition:d}};a.prototype._setupGround=function(a){var b=this;if(!this._ground||this._ground.isDisposed())this._ground=u.a.CreatePlane("BackgroundPlane",a.groundSize,this._scene),this._ground.rotation.x=Math.PI/2,this._ground.parent=this._rootMesh,this._ground.onDisposeObservable.add(function(){b._ground=null});this._ground.receiveShadows=this._options.enableGroundShadow};
a.prototype._setupGroundMaterial=function(){this._groundMaterial||(this._groundMaterial=new l.a("BackgroundPlaneMaterial",this._scene));this._groundMaterial.alpha=this._options.groundOpacity;this._groundMaterial.alphaMode=8;this._groundMaterial.shadowLevel=this._options.groundShadowLevel;this._groundMaterial.primaryColor=this._options.groundColor;this._groundMaterial.useRGBColor=!1;this._groundMaterial.enableNoise=!0;this._ground&&(this._ground.material=this._groundMaterial)};a.prototype._setupGroundDiffuseTexture=
function(){this._groundMaterial&&!this._groundTexture&&(this._options.groundTexture instanceof y.a?this._groundMaterial.diffuseTexture=this._options.groundTexture:(this._groundTexture=new r.a(this._options.groundTexture,this._scene,void 0,void 0,void 0,void 0,this._errorHandler),this._groundTexture.gammaSpace=!1,this._groundTexture.hasAlpha=!0,this._groundMaterial.diffuseTexture=this._groundTexture))};a.prototype._setupGroundMirrorTexture=function(a){var c=r.a.CLAMP_ADDRESSMODE;if(!this._groundMirror&&
(this._groundMirror=new A.a("BackgroundPlaneMirrorTexture",{ratio:this._options.groundMirrorSizeRatio},this._scene,!1,this._options.groundMirrorTextureType,r.a.BILINEAR_SAMPLINGMODE,!0),this._groundMirror.mirrorPlane=new p.a(0,-1,0,a.rootPosition.y),this._groundMirror.anisotropicFilteringLevel=1,this._groundMirror.wrapU=c,this._groundMirror.wrapV=c,this._groundMirror.gammaSpace=!1,this._groundMirror.renderList))for(a=0;a<this._scene.meshes.length;a++)c=this._scene.meshes[a],c!==this._ground&&c!==
this._skybox&&c!==this._rootMesh&&this._groundMirror.renderList.push(c);this._groundMirror.clearColor=new b.b(this._options.groundColor.r,this._options.groundColor.g,this._options.groundColor.b,1);this._groundMirror.adaptiveBlurKernel=this._options.groundMirrorBlurKernel};a.prototype._setupMirrorInGroundMaterial=function(){this._groundMaterial&&(this._groundMaterial.reflectionTexture=this._groundMirror,this._groundMaterial.reflectionFresnel=!0,this._groundMaterial.reflectionAmount=this._options.groundMirrorAmount,
this._groundMaterial.reflectionStandardFresnelWeight=this._options.groundMirrorFresnelWeight,this._groundMaterial.reflectionFalloffDistance=this._options.groundMirrorFallOffDistance)};a.prototype._setupSkybox=function(a){var b=this;if(!this._skybox||this._skybox.isDisposed())this._skybox=u.a.CreateBox("BackgroundSkybox",a.skyboxSize,this._scene,void 0,u.a.BACKSIDE),this._skybox.onDisposeObservable.add(function(){b._skybox=null});this._skybox.parent=this._rootMesh};a.prototype._setupSkyboxMaterial=
function(){this._skybox&&(this._skyboxMaterial||(this._skyboxMaterial=new l.a("BackgroundSkyboxMaterial",this._scene)),this._skyboxMaterial.useRGBColor=!1,this._skyboxMaterial.primaryColor=this._options.skyboxColor,this._skyboxMaterial.enableNoise=!0,this._skybox.material=this._skyboxMaterial)};a.prototype._setupSkyboxReflectionTexture=function(){this._skyboxMaterial&&!this._skyboxTexture&&(this._options.skyboxTexture instanceof y.a?this._skyboxMaterial.reflectionTexture=this._options.skyboxTexture:
(this._skyboxTexture=new e.a(this._options.skyboxTexture,this._scene,void 0,void 0,void 0,void 0,this._errorHandler),this._skyboxTexture.coordinatesMode=r.a.SKYBOX_MODE,this._skyboxTexture.gammaSpace=!1,this._skyboxMaterial.reflectionTexture=this._skyboxTexture))};a.prototype.dispose=function(){this._groundMaterial&&this._groundMaterial.dispose(!0,!0);this._skyboxMaterial&&this._skyboxMaterial.dispose(!0,!0);this._rootMesh.dispose(!1)};a._groundTextureCDNUrl="https://assets.babylonjs.com/environments/backgroundGround.png";
a._skyboxTextureCDNUrl="https://assets.babylonjs.com/environments/backgroundSkybox.dds";a._environmentTextureCDNUrl="https://assets.babylonjs.com/environments/environmentSpecular.env";return a}();v=a("qVgn");var c=a("H22S"),d=a("GR64"),t=function(a){function b(e,f,m,q,h){void 0===h&&(h=null);var k=a.call(this,e,q)||this;k.onError=h;k._halfDome=!1;k._crossEye=!1;k._useDirectMapping=!1;k._textureMode=b.MODE_MONOSCOPIC;k._onBeforeCameraRenderObserver=null;k.onLoadErrorObservable=new n.a;q=k.getScene();
e=e||"textureDome";m.resolution=Math.abs(m.resolution)|0||32;m.clickToPlay=!!m.clickToPlay;m.autoPlay=void 0===m.autoPlay?!0:!!m.autoPlay;m.loop=void 0===m.loop?!0:!!m.loop;m.size=Math.abs(m.size)||(q.activeCamera?.48*q.activeCamera.maxZ:1E3);k._useDirectMapping=void 0===m.useDirectMapping?!0:m.useDirectMapping;void 0===m.faceForward&&(m.faceForward=!0);k._setReady(!1);k._mesh=u.a.CreateSphere(e+"_mesh",m.resolution,m.size,q,!1,u.a.BACKSIDE);e=k._material=new l.a(e+"_material",q);e.useEquirectangularFOV=
!0;e.fovMultiplier=1;e.opacityFresnel=!1;f=k._initTexture(f,q,m);k.texture=f;k._mesh.material=e;k._mesh.parent=k;k._halfDomeMask=c.a.CreateSphere("",{slice:.5,diameter:.98*m.size,segments:2*m.resolution,sideOrientation:u.a.BACKSIDE},q);k._halfDomeMask.rotate(d.a.X,-Math.PI/2);k._halfDomeMask.parent=k._mesh;k._halfDome=!!m.halfDomeMode;k._halfDomeMask.setEnabled(k._halfDome);k._crossEye=!!m.crossEyeMode;k._texture.anisotropicFilteringLevel=1;k._texture.onLoadObservable.addOnce(function(){k._setReady(!0)});
m.faceForward&&q.activeCamera&&(q=q.activeCamera,m=g.e.Forward(),q=g.e.TransformNormal(m,q.getViewMatrix()),q.normalize(),k.rotation.y=Math.acos(g.e.Dot(m,q)));k._changeTextureMode(k._textureMode);return k}Object(f.d)(b,a);Object.defineProperty(b.prototype,"texture",{get:function(){return this._texture},set:function(a){this._texture!==a&&(this._texture=a,this._useDirectMapping?(this._texture.wrapU=r.a.CLAMP_ADDRESSMODE,this._texture.wrapV=r.a.CLAMP_ADDRESSMODE,this._material.diffuseTexture=this._texture):
(this._texture.coordinatesMode=r.a.FIXED_EQUIRECTANGULAR_MIRRORED_MODE,this._texture.wrapV=r.a.CLAMP_ADDRESSMODE,this._material.reflectionTexture=this._texture),this._changeTextureMode(this._textureMode))},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"mesh",{get:function(){return this._mesh},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"fovMultiplier",{get:function(){return this._material.fovMultiplier},set:function(a){this._material.fovMultiplier=a},enumerable:!1,
configurable:!0});Object.defineProperty(b.prototype,"textureMode",{get:function(){return this._textureMode},set:function(a){this._textureMode!==a&&this._changeTextureMode(a)},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"halfDome",{get:function(){return this._halfDome},set:function(a){this._halfDome=a;this._halfDomeMask.setEnabled(a)},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"crossEye",{get:function(){return this._crossEye},set:function(a){this._crossEye=
a},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"material",{get:function(){return this._material},enumerable:!1,configurable:!0});b.prototype._changeTextureMode=function(a){var c=this;this._scene.onBeforeCameraRenderObservable.remove(this._onBeforeCameraRenderObserver);this._textureMode=a;this._texture.uScale=1;this._texture.vScale=1;this._texture.uOffset=0;this._texture.vOffset=0;this._texture.vAng=0;switch(a){case b.MODE_MONOSCOPIC:this._halfDome&&(this._texture.uScale=2,this._texture.uOffset=
-1);break;case b.MODE_SIDEBYSIDE:this._texture.uScale=this._halfDome?.99999:.5;var d=this._halfDome?0:.5,e=this._halfDome?-.5:0;this._onBeforeCameraRenderObserver=this._scene.onBeforeCameraRenderObservable.add(function(a){a=a.isRightCamera;c._crossEye&&(a=!a);c._texture.uOffset=a?d:e});break;case b.MODE_TOPBOTTOM:this._texture.vScale=this._halfDome?.99999:.5,this._onBeforeCameraRenderObserver=this._scene.onBeforeCameraRenderObservable.add(function(a){a=a.isRightCamera;c._crossEye&&(a=!a);c._texture.vOffset=
a?.5:0})}};b.prototype.dispose=function(b,c){void 0===c&&(c=!1);this._texture.dispose();this._mesh.dispose();this._material.dispose();this._scene.onBeforeCameraRenderObservable.remove(this._onBeforeCameraRenderObserver);this.onLoadErrorObservable.clear();a.prototype.dispose.call(this,b,c)};b.MODE_MONOSCOPIC=0;b.MODE_TOPBOTTOM=1;b.MODE_SIDEBYSIDE=2;return b}(v.a);(function(a){function b(){return null!==a&&a.apply(this,arguments)||this}Object(f.d)(b,a);Object.defineProperty(b.prototype,"photoTexture",
{get:function(){return this.texture},set:function(a){this.texture=a},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"imageMode",{get:function(){return this.textureMode},set:function(a){this.textureMode=a},enumerable:!1,configurable:!0});b.prototype._initTexture=function(a,b,c){var d=this;return new r.a(a,b,!c.generateMipMaps,!this._useDirectMapping,void 0,void 0,function(a,b){d.onLoadErrorObservable.notifyObservers(a||"Unknown error occured");if(d.onError)d.onError(a,b)})};b.MODE_MONOSCOPIC=
t.MODE_MONOSCOPIC;b.MODE_TOPBOTTOM=t.MODE_TOPBOTTOM;b.MODE_SIDEBYSIDE=t.MODE_SIDEBYSIDE;return b})(t);var B=a("uyO6");v=a("tVVT");var w=a("kdvT"),C=a("oXT7"),D=a("SqLj"),E=a("sdjL"),F=a("Su4L");a("Uh4t");a("obT0");a("5qAZ");var G=a("2+CT");v.a.prototype.createDefaultLight=function(a){void 0===a&&(a=!1);if(a&&this.lights)for(a=0;a<this.lights.length;a++)this.lights[a].dispose();0===this.lights.length&&new D.a("default light",g.e.Up(),this)};v.a.prototype.createDefaultCamera=function(a,b,c){void 0===
a&&(a=!1);void 0===b&&(b=!1);void 0===c&&(c=!1);b&&this.activeCamera&&(this.activeCamera.dispose(),this.activeCamera=null);if(!this.activeCamera){var d=this.getWorldExtends(function(a){return a.isVisible&&a.isEnabled()});b=d.max.subtract(d.min);d=d.min.add(b.scale(.5));b=1.5*b.length();isFinite(b)||(b=1,d.copyFromFloats(0,0,0));a?(a=new x.a("default camera",-(Math.PI/2),Math.PI/2,b,d,this),a.lowerRadiusLimit=.01*b,a.wheelPrecision=100/b):(a=new E.a("default camera",new g.e(d.x,d.y,-b),this),a.setTarget(d));
a.minZ=.01*b;a.maxZ=1E3*b;a.speed=.2*b;this.activeCamera=a;b=this.getEngine().getInputElement();c&&b&&a.attachControl()}};v.a.prototype.createDefaultCameraOrLight=function(a,b,c){void 0===a&&(a=!1);void 0===b&&(b=!1);void 0===c&&(c=!1);this.createDefaultLight(b);this.createDefaultCamera(a,b,c)};v.a.prototype.createDefaultSkybox=function(a,b,c,d,e){void 0===b&&(b=!1);void 0===c&&(c=1E3);void 0===d&&(d=0);void 0===e&&(e=!0);if(!a)return B.a.Warn("Can not create default skybox without environment texture."),
null;e&&a&&(this.environmentTexture=a);c=u.a.CreateBox("hdrSkyBox",c,this);b?(b=new C.a("skyBox",this),b.backFaceCulling=!1,b.reflectionTexture=a.clone(),b.reflectionTexture&&(b.reflectionTexture.coordinatesMode=r.a.SKYBOX_MODE),b.microSurface=1-d,b.disableLighting=!0,b.twoSidedLighting=!0,c.infiniteDistance=!0,c.material=b):(d=new w.a("skyBox",this),d.backFaceCulling=!1,d.reflectionTexture=a.clone(),d.reflectionTexture&&(d.reflectionTexture.coordinatesMode=r.a.SKYBOX_MODE),d.disableLighting=!0,c.infiniteDistance=
!0,c.material=d);c.isPickable=!1;return c};v.a.prototype.createDefaultEnvironment=function(a){return h?new h(a,this):null};v.a.prototype.createDefaultVRExperience=function(a){void 0===a&&(a={});return new F.a(this,a)};v.a.prototype.createDefaultXRExperienceAsync=function(a){void 0===a&&(a={});return G.a.CreateAsync(this,a).then(function(a){return a})};var H=a("c/3c");(function(a){function b(){return null!==a&&a.apply(this,arguments)||this}Object(f.d)(b,a);Object.defineProperty(b.prototype,"videoTexture",
{get:function(){return this._texture},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"videoMode",{get:function(){return this.textureMode},set:function(a){this.textureMode=a},enumerable:!1,configurable:!0});b.prototype._initTexture=function(a,b,c){var d=this;a=new H.a((this.name||"videoDome")+"_texture",a,b,c.generateMipMaps,this._useDirectMapping,r.a.TRILINEAR_SAMPLINGMODE,{loop:c.loop,autoPlay:c.autoPlay,autoUpdateTexture:!0,poster:c.poster});c.clickToPlay&&(b.onPointerUp=function(){d._texture.video.play()});
return a};b.MODE_MONOSCOPIC=t.MODE_MONOSCOPIC;b.MODE_TOPBOTTOM=t.MODE_TOPBOTTOM;b.MODE_SIDEBYSIDE=t.MODE_SIDEBYSIDE;return b})(t)}}]);
