var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(l){var n=0;return function(){return n<l.length?{done:!1,value:l[n++]}:{done:!0}}};$jscomp.arrayIterator=function(l){return{next:$jscomp.arrayIteratorImpl(l)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(l,n,f){l!=Array.prototype&&l!=Object.prototype&&(l[n]=f.value)};$jscomp.getGlobal=function(l){return"undefined"!=typeof window&&window===l?l:"undefined"!=typeof global&&null!=global?global:l};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(l,n){this.$jscomp$symbol$id_=l;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:n})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function l(f){if(this instanceof l)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(f||"")+"_"+n++,f)}var n=0;return l}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var l=$jscomp.global.Symbol.iterator;l||(l=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[l]&&$jscomp.defineProperty(Array.prototype,l,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var l=$jscomp.global.Symbol.asyncIterator;l||(l=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(l){$jscomp.initSymbolIterator();l={next:l};l[$jscomp.global.Symbol.iterator]=function(){return this};return l};
$jscomp.iteratorFromArray=function(l,n){$jscomp.initSymbolIterator();l instanceof String&&(l+="");var f=0,k={next:function(){if(f<l.length){var r=f++;return{value:n(r,l[r]),done:!1}}k.next=function(){return{done:!0,value:void 0}};return k.next()}};k[Symbol.iterator]=function(){return k};return k};
$jscomp.polyfill=function(l,n,f,k){if(n){f=$jscomp.global;l=l.split(".");for(k=0;k<l.length-1;k++){var r=l[k];r in f||(f[r]={});f=f[r]}l=l[l.length-1];k=f[l];n=n(k);n!=k&&null!=n&&$jscomp.defineProperty(f,l,{configurable:!0,writable:!0,value:n})}};$jscomp.polyfill("Array.prototype.keys",function(l){return l?l:function(){return $jscomp.iteratorFromArray(this,function(l){return l})}},"es6","es3");
$jscomp.makeIterator=function(l){var n="undefined"!=typeof Symbol&&Symbol.iterator&&l[Symbol.iterator];return n?n.call(l):$jscomp.arrayIterator(l)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(l){function n(){this.batch_=null}function f(e){return e instanceof r?e:new r(function(p,d){p(e)})}if(l&&!$jscomp.FORCE_POLYFILL_PROMISE)return l;n.prototype.asyncExecute=function(e){if(null==this.batch_){this.batch_=[];var p=this;this.asyncExecuteFunction(function(){p.executeBatch_()})}this.batch_.push(e)};var k=$jscomp.global.setTimeout;n.prototype.asyncExecuteFunction=function(e){k(e,0)};n.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var e=
this.batch_;this.batch_=[];for(var p=0;p<e.length;++p){var d=e[p];e[p]=null;try{d()}catch(a){this.asyncThrow_(a)}}}this.batch_=null};n.prototype.asyncThrow_=function(e){this.asyncExecuteFunction(function(){throw e;})};var r=function(e){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var p=this.createResolveAndReject_();try{e(p.resolve,p.reject)}catch(d){p.reject(d)}};r.prototype.createResolveAndReject_=function(){function e(a){return function(q){d||(d=!0,a.call(p,q))}}var p=this,d=!1;
return{resolve:e(this.resolveTo_),reject:e(this.reject_)}};r.prototype.resolveTo_=function(e){if(e===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof r)this.settleSameAsPromise_(e);else{a:switch(typeof e){case "object":var p=null!=e;break a;case "function":p=!0;break a;default:p=!1}p?this.resolveToNonPromiseObj_(e):this.fulfill_(e)}};r.prototype.resolveToNonPromiseObj_=function(e){var p=void 0;try{p=e.then}catch(d){this.reject_(d);return}"function"==typeof p?
this.settleSameAsThenable_(p,e):this.fulfill_(e)};r.prototype.reject_=function(e){this.settle_(2,e)};r.prototype.fulfill_=function(e){this.settle_(1,e)};r.prototype.settle_=function(e,p){if(0!=this.state_)throw Error("Cannot settle("+e+", "+p+"): Promise already settled in state"+this.state_);this.state_=e;this.result_=p;this.executeOnSettledCallbacks_()};r.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var e=0;e<this.onSettledCallbacks_.length;++e)u.asyncExecute(this.onSettledCallbacks_[e]);
this.onSettledCallbacks_=null}};var u=new n;r.prototype.settleSameAsPromise_=function(e){var p=this.createResolveAndReject_();e.callWhenSettled_(p.resolve,p.reject)};r.prototype.settleSameAsThenable_=function(e,p){var d=this.createResolveAndReject_();try{e.call(p,d.resolve,d.reject)}catch(a){d.reject(a)}};r.prototype.then=function(e,p){function d(c,b){return"function"==typeof c?function(g){try{a(c(g))}catch(m){q(m)}}:b}var a,q,h=new r(function(c,b){a=c;q=b});this.callWhenSettled_(d(e,a),d(p,q));return h};
r.prototype.catch=function(e){return this.then(void 0,e)};r.prototype.callWhenSettled_=function(e,p){function d(){switch(a.state_){case 1:e(a.result_);break;case 2:p(a.result_);break;default:throw Error("Unexpected state: "+a.state_);}}var a=this;null==this.onSettledCallbacks_?u.asyncExecute(d):this.onSettledCallbacks_.push(d)};r.resolve=f;r.reject=function(e){return new r(function(p,d){d(e)})};r.race=function(e){return new r(function(p,d){for(var a=$jscomp.makeIterator(e),q=a.next();!q.done;q=a.next())f(q.value).callWhenSettled_(p,
d)})};r.all=function(e){var p=$jscomp.makeIterator(e),d=p.next();return d.done?f([]):new r(function(a,q){function h(g){return function(m){c[g]=m;b--;0==b&&a(c)}}var c=[],b=0;do c.push(void 0),b++,f(d.value).callWhenSettled_(h(c.length-1),q),d=p.next();while(!d.done)})};return r},"es6","es3");$jscomp.polyfill("Array.prototype.values",function(l){return l?l:function(){return $jscomp.iteratorFromArray(this,function(l,f){return f})}},"es8","es3");
(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{"3adM":function(l,n,f){f.d(n,"a",function(){return u});var k=f("98Qd"),r=f("J2vy"),u=function(){function e(){this._zoomStopsAnimation=!1;this._idleRotationSpeed=.05;this._idleRotationSpinupTime=this._idleRotationWaitTime=2E3;this._isPointerDown=!1;this._lastFrameTime=null;this._lastInteractionTime=-Infinity;this._lastFrameRadius=this._cameraRotationSpeed=0}Object.defineProperty(e.prototype,"name",{get:function(){return"AutoRotation"},enumerable:!1,
configurable:!0});Object.defineProperty(e.prototype,"zoomStopsAnimation",{get:function(){return this._zoomStopsAnimation},set:function(e){this._zoomStopsAnimation=e},enumerable:!1,configurable:!0});Object.defineProperty(e.prototype,"idleRotationSpeed",{get:function(){return this._idleRotationSpeed},set:function(e){this._idleRotationSpeed=e},enumerable:!1,configurable:!0});Object.defineProperty(e.prototype,"idleRotationWaitTime",{get:function(){return this._idleRotationWaitTime},set:function(e){this._idleRotationWaitTime=
e},enumerable:!1,configurable:!0});Object.defineProperty(e.prototype,"idleRotationSpinupTime",{get:function(){return this._idleRotationSpinupTime},set:function(e){this._idleRotationSpinupTime=e},enumerable:!1,configurable:!0});Object.defineProperty(e.prototype,"rotationInProgress",{get:function(){return 0<Math.abs(this._cameraRotationSpeed)},enumerable:!1,configurable:!0});e.prototype.init=function(){};e.prototype.attach=function(e){var d=this;this._attachedCamera=e;this._onPrePointerObservableObserver=
this._attachedCamera.getScene().onPrePointerObservable.add(function(a){a.type===k.a.POINTERDOWN?d._isPointerDown=!0:a.type===k.a.POINTERUP&&(d._isPointerDown=!1)});this._onAfterCheckInputsObserver=e.onAfterCheckInputsObservable.add(function(){var a=r.a.Now,q=0;null!=d._lastFrameTime&&(q=a-d._lastFrameTime);d._lastFrameTime=a;d._applyUserInteraction();d._cameraRotationSpeed=d._idleRotationSpeed*Math.max(Math.min((a-d._lastInteractionTime-d._idleRotationWaitTime)/d._idleRotationSpinupTime,1),0);d._attachedCamera&&
(d._attachedCamera.alpha-=q/1E3*d._cameraRotationSpeed)})};e.prototype.detach=function(){if(this._attachedCamera){var e=this._attachedCamera.getScene();this._onPrePointerObservableObserver&&e.onPrePointerObservable.remove(this._onPrePointerObservableObserver);this._attachedCamera.onAfterCheckInputsObservable.remove(this._onAfterCheckInputsObserver);this._attachedCamera=null}};e.prototype._userIsZooming=function(){return this._attachedCamera?0!==this._attachedCamera.inertialRadiusOffset:!1};e.prototype._shouldAnimationStopForInteraction=
function(){if(!this._attachedCamera)return!1;var e=!1;this._lastFrameRadius===this._attachedCamera.radius&&0!==this._attachedCamera.inertialRadiusOffset&&(e=!0);this._lastFrameRadius=this._attachedCamera.radius;return this._zoomStopsAnimation?e:this._userIsZooming()};e.prototype._applyUserInteraction=function(){this._userIsMoving()&&!this._shouldAnimationStopForInteraction()&&(this._lastInteractionTime=r.a.Now)};e.prototype._userIsMoving=function(){return this._attachedCamera?0!==this._attachedCamera.inertialAlphaOffset||
0!==this._attachedCamera.inertialBetaOffset||0!==this._attachedCamera.inertialRadiusOffset||0!==this._attachedCamera.inertialPanningX||0!==this._attachedCamera.inertialPanningY||this._isPointerDown:!1};return e}()},"4SJX":function(l,n,f){f.d(n,"c",function(){return u});f.d(n,"b",function(){return e});f.d(n,"a",function(){return p});f.d(n,"d",function(){return d});f.d(n,"e",function(){return a});var k=f("oYeq"),r=f("Gldd"),u=function(){function a(){this._easingMode=a.EASINGMODE_EASEIN}a.prototype.setEasingMode=
function(a){this._easingMode=Math.min(Math.max(a,0),2)};a.prototype.getEasingMode=function(){return this._easingMode};a.prototype.easeInCore=function(a){throw Error("You must implement this method");};a.prototype.ease=function(h){switch(this._easingMode){case a.EASINGMODE_EASEIN:return this.easeInCore(h);case a.EASINGMODE_EASEOUT:return 1-this.easeInCore(1-h)}return.5<=h?.5*(1-this.easeInCore(2*(1-h)))+.5:.5*this.easeInCore(2*h)};a.EASINGMODE_EASEIN=0;a.EASINGMODE_EASEOUT=1;a.EASINGMODE_EASEINOUT=
2;return a}(),e=function(a){function h(){return null!==a&&a.apply(this,arguments)||this}Object(k.d)(h,a);h.prototype.easeInCore=function(c){c=Math.max(0,Math.min(1,c));return 1-Math.sqrt(1-c*c)};return h}(u),p=function(a){function h(c){void 0===c&&(c=1);var b=a.call(this)||this;b.amplitude=c;return b}Object(k.d)(h,a);h.prototype.easeInCore=function(c){return Math.pow(c,3)-c*Math.max(0,this.amplitude)*Math.sin(3.141592653589793*c)};return h}(u);(function(a){function h(c,b){void 0===c&&(c=3);void 0===
b&&(b=2);var g=a.call(this)||this;g.bounces=c;g.bounciness=b;return g}Object(k.d)(h,a);h.prototype.easeInCore=function(c){var b=Math.max(0,this.bounces),g=this.bounciness;1>=g&&(g=1.001);var m=Math.pow(g,b),a=1-g,h=(1-m)/a+.5*m;m=Math.floor(Math.log(-(c*h)*(1-g)+1)/Math.log(g));var q=(1-Math.pow(g,m))/(a*h);a=.5*(q+(1-Math.pow(g,m+1))/(a*h));c-=a;q=a-q;return-Math.pow(1/g,b-m)/(q*q)*(c-q)*(c+q)};return h})(u);(function(a){function h(){return null!==a&&a.apply(this,arguments)||this}Object(k.d)(h,a);
h.prototype.easeInCore=function(c){return c*c*c};return h})(u);(function(a){function h(c,b){void 0===c&&(c=3);void 0===b&&(b=3);var g=a.call(this)||this;g.oscillations=c;g.springiness=b;return g}Object(k.d)(h,a);h.prototype.easeInCore=function(c){var b=Math.max(0,this.springiness);return(0==b?c:(Math.exp(b*c)-1)/(Math.exp(b)-1))*Math.sin((6.283185307179586*Math.max(0,this.oscillations)+1.5707963267948966)*c)};return h})(u);var d=function(a){function h(c){void 0===c&&(c=2);var b=a.call(this)||this;
b.exponent=c;return b}Object(k.d)(h,a);h.prototype.easeInCore=function(c){return 0>=this.exponent?c:(Math.exp(this.exponent*c)-1)/(Math.exp(this.exponent)-1)};return h}(u);(function(a){function h(c){void 0===c&&(c=2);var b=a.call(this)||this;b.power=c;return b}Object(k.d)(h,a);h.prototype.easeInCore=function(c){return Math.pow(c,Math.max(0,this.power))};return h})(u);(function(a){function h(){return null!==a&&a.apply(this,arguments)||this}Object(k.d)(h,a);h.prototype.easeInCore=function(c){return c*
c};return h})(u);(function(a){function h(){return null!==a&&a.apply(this,arguments)||this}Object(k.d)(h,a);h.prototype.easeInCore=function(c){return c*c*c*c};return h})(u);(function(a){function h(){return null!==a&&a.apply(this,arguments)||this}Object(k.d)(h,a);h.prototype.easeInCore=function(c){return c*c*c*c*c};return h})(u);var a=function(a){function h(){return null!==a&&a.apply(this,arguments)||this}Object(k.d)(h,a);h.prototype.easeInCore=function(c){return 1-Math.sin(1.5707963267948966*(1-c))};
return h}(u);(function(a){function h(c,b,g,m){void 0===c&&(c=0);void 0===b&&(b=0);void 0===g&&(g=1);void 0===m&&(m=1);var h=a.call(this)||this;h.x1=c;h.y1=b;h.x2=g;h.y2=m;return h}Object(k.d)(h,a);h.prototype.easeInCore=function(c){return r.a.Interpolate(c,this.x1,this.y1,this.x2,this.y2)};return h})(u)},"65ND":function(l,n,f){f.d(n,"a",function(){return r.a});f.d(n,"b",function(){return u.b});f("fZF6");var k=f("bDcY");f("IIVm");var r=f("ZXSw");f("JDGr");var u=f("u8y2"),e=f("oYeq");l=f("WHS4");(function(c){function b(g,
b,a){g=c.call(this,g,a)||this;g._sound=b;return g}Object(e.d)(b,c);b.prototype._prepare=function(){};b.prototype.execute=function(){void 0!==this._sound&&this._sound.play()};b.prototype.serialize=function(g){return c.prototype._serialize.call(this,{name:"PlaySoundAction",properties:[{name:"sound",value:this._sound.name}]},g)};return b})(k.a);n=function(c){function b(g,b,a){g=c.call(this,g,a)||this;g._sound=b;return g}Object(e.d)(b,c);b.prototype._prepare=function(){};b.prototype.execute=function(){void 0!==
this._sound&&this._sound.stop()};b.prototype.serialize=function(g){return c.prototype._serialize.call(this,{name:"StopSoundAction",properties:[{name:"sound",value:this._sound.name}]},g)};return b}(k.a);l.a.RegisteredTypes["BABYLON.PlaySoundAction"]=n;l.a.RegisteredTypes["BABYLON.StopSoundAction"]=n;var p=f("uyO6"),d=f("ps+7"),a=f("Xeau"),q=f("/SR9"),h=f("mBE3");f=function(c){function b(g,b,a,h,q,e,f,p){void 0===q&&(q=1E3);g=c.call(this,g,e)||this;g.duration=1E3;g.onInterpolationDoneObservable=new d.a;
g.propertyPath=a;g.value=h;g.duration=q;g.stopOtherAnimations=f;g.onInterpolationDone=p;g._target=g._effectiveTarget=b;return g}Object(e.d)(b,c);b.prototype._prepare=function(){this._effectiveTarget=this._getEffectiveTarget(this._effectiveTarget,this.propertyPath);this._property=this._getProperty(this.propertyPath)};b.prototype.execute=function(){var g=this,b=this._actionManager.getScene(),c=[{frame:0,value:this._effectiveTarget[this._property]},{frame:100,value:this.value}];if("number"===typeof this.value)var d=
h.a.ANIMATIONTYPE_FLOAT;else if(this.value instanceof a.a)d=h.a.ANIMATIONTYPE_COLOR3;else if(this.value instanceof q.e)d=h.a.ANIMATIONTYPE_VECTOR3;else if(this.value instanceof q.a)d=h.a.ANIMATIONTYPE_MATRIX;else if(this.value instanceof q.b)d=h.a.ANIMATIONTYPE_QUATERNION;else{p.a.Warn("InterpolateValueAction: Unsupported type ("+typeof this.value+")");return}d=new h.a("InterpolateValueAction",this._property,1E3/this.duration*100,d,h.a.ANIMATIONLOOPMODE_CONSTANT);d.setKeys(c);this.stopOtherAnimations&&
b.stopAnimation(this._effectiveTarget);b.beginDirectAnimation(this._effectiveTarget,[d],0,100,!1,1,function(){g.onInterpolationDoneObservable.notifyObservers(g);if(g.onInterpolationDone)g.onInterpolationDone()})};b.prototype.serialize=function(g){return c.prototype._serialize.call(this,{name:"InterpolateValueAction",properties:[k.a._GetTargetProperty(this._target),{name:"propertyPath",value:this.propertyPath},{name:"value",value:k.a._SerializeValueAsString(this.value)},{name:"duration",value:k.a._SerializeValueAsString(this.duration)},
{name:"stopOtherAnimations",value:k.a._SerializeValueAsString(this.stopOtherAnimations)||!1}]},g)};return b}(k.a);l.a.RegisteredTypes["BABYLON.InterpolateValueAction"]=f},"6BCH":function(l,n,f){f.d(n,"a",function(){return q});var k=f("wAMR"),r=f("tVVT"),u=f("ps+7"),e=f("/SR9"),p=f("98Qd"),d=f("2/Cc"),a=f("l/Gj");f("NNSw");var q=function(){function h(c){this._useAlternatePickedPointAboveMaxDragAngleDragSpeed=-1.1;this.maxDragAngle=0;this._useAlternatePickedPointAboveMaxDragAngle=!1;this.currentDraggingPointerID=
-1;this.dragging=!1;this.dragDeltaRatio=.2;this.updateDragPlane=!0;this._moving=this._debugMode=!1;this.onDragObservable=new u.a;this.onDragStartObservable=new u.a;this.onDragEndObservable=new u.a;this.useObjectOrientationForDragging=this.detachCameraControls=this.startAndReleaseDragOnPointerEvents=this.enabled=this.moveAttached=!0;this.validateDrag=function(b){return!0};this._tmpVector=new e.e(0,0,0);this._alternatePickedPoint=new e.e(0,0,0);this._worldDragAxis=new e.e(0,0,0);this._targetPosition=
new e.e(0,0,0);this._attachedToElement=!1;this._startDragRay=new d.a(new e.e,new e.e);this._lastPointerRay={};this._dragDelta=new e.e;this._pointA=new e.e(0,0,0);this._pointC=new e.e(0,0,0);this._localAxis=new e.e(0,0,0);this._lookAt=new e.e(0,0,0);this._options=c?c:{};c=0;this._options.dragAxis&&c++;this._options.dragPlaneNormal&&c++;if(1<c)throw"Multiple drag modes specified in dragBehavior options. Only one expected";}Object.defineProperty(h.prototype,"options",{get:function(){return this._options},
set:function(c){this._options=c},enumerable:!1,configurable:!0});Object.defineProperty(h.prototype,"name",{get:function(){return"PointerDrag"},enumerable:!1,configurable:!0});h.prototype.init=function(){};h.prototype.attach=function(c,b){var g=this;this._scene=c.getScene();this.attachedNode=c;h._planeScene||(this._debugMode?h._planeScene=this._scene:(h._planeScene=new r.a(this._scene.getEngine(),{virtual:!0}),h._planeScene.detachControl(),this._scene.onDisposeObservable.addOnce(function(){h._planeScene.dispose();
h._planeScene=null})));this._dragPlane=k.a.CreatePlane("pointerDragPlane",this._debugMode?1:1E4,h._planeScene,!1,k.a.DOUBLESIDE);this.lastDragPosition=new e.e(0,0,0);var m=b?b:function(b){return g.attachedNode==b||b.isDescendantOf(g.attachedNode)};this._pointerObserver=this._scene.onPointerObservable.add(function(b,c){if(g.enabled)if(b.type==p.a.POINTERDOWN)g.startAndReleaseDragOnPointerEvents&&!g.dragging&&b.pickInfo&&b.pickInfo.hit&&b.pickInfo.pickedMesh&&b.pickInfo.pickedPoint&&b.pickInfo.ray&&
m(b.pickInfo.pickedMesh)&&g._startDrag(b.event.pointerId,b.pickInfo.ray,b.pickInfo.pickedPoint);else if(b.type==p.a.POINTERUP)g.startAndReleaseDragOnPointerEvents&&g.currentDraggingPointerID==b.event.pointerId&&g.releaseDrag();else if(b.type==p.a.POINTERMOVE){c=b.event.pointerId;if(g.currentDraggingPointerID===h._AnyMouseID&&c!==h._AnyMouseID){var a=b.event;if("mouse"===a.pointerType||!g._scene.getEngine().hostInformation.isMobile&&a instanceof MouseEvent)g._lastPointerRay[g.currentDraggingPointerID]&&
(g._lastPointerRay[c]=g._lastPointerRay[g.currentDraggingPointerID],delete g._lastPointerRay[g.currentDraggingPointerID]),g.currentDraggingPointerID=c}g._lastPointerRay[c]||(g._lastPointerRay[c]=new d.a(new e.e,new e.e));b.pickInfo&&b.pickInfo.ray&&(g._lastPointerRay[c].origin.copyFrom(b.pickInfo.ray.origin),g._lastPointerRay[c].direction.copyFrom(b.pickInfo.ray.direction),g.currentDraggingPointerID==c&&g.dragging&&g._moveDrag(b.pickInfo.ray))}});this._beforeRenderObserver=this._scene.onBeforeRenderObservable.add(function(){g._moving&&
g.moveAttached&&(a.a._RemoveAndStorePivotPoint(g.attachedNode),g._targetPosition.subtractToRef(g.attachedNode.absolutePosition,g._tmpVector),g._tmpVector.scaleInPlace(g.dragDeltaRatio),g.attachedNode.getAbsolutePosition().addToRef(g._tmpVector,g._tmpVector),g.validateDrag(g._tmpVector)&&g.attachedNode.setAbsolutePosition(g._tmpVector),a.a._RestorePivotPoint(g.attachedNode))})};h.prototype.releaseDrag=function(){this.dragging&&(this.dragging=!1,this.onDragEndObservable.notifyObservers({dragPlanePoint:this.lastDragPosition,
pointerId:this.currentDraggingPointerID}));this.currentDraggingPointerID=-1;this._moving=!1;if(this.detachCameraControls&&this._attachedToElement&&this._scene.activeCamera&&!this._scene.activeCamera.leftCamera){if("ArcRotateCamera"===this._scene.activeCamera.getClassName()){var c=this._scene.activeCamera;c.attachControl(c.inputs?c.inputs.noPreventDefault:!0,c._useCtrlForPanning,c._panningMouseButton)}else this._scene.activeCamera.attachControl(this._scene.activeCamera.inputs?this._scene.activeCamera.inputs.noPreventDefault:
!0);this._attachedToElement=!1}};h.prototype.startDrag=function(c,b,g){void 0===c&&(c=h._AnyMouseID);this._startDrag(c,b,g);b=this._lastPointerRay[c];c===h._AnyMouseID&&(b=this._lastPointerRay[Object.keys(this._lastPointerRay)[0]]);b&&this._moveDrag(b)};h.prototype._startDrag=function(c,b,g){if(this._scene.activeCamera&&!this.dragging&&this.attachedNode){a.a._RemoveAndStorePivotPoint(this.attachedNode);b?(this._startDragRay.direction.copyFrom(b.direction),this._startDragRay.origin.copyFrom(b.origin)):
(this._startDragRay.origin.copyFrom(this._scene.activeCamera.position),this.attachedNode.getWorldMatrix().getTranslationToRef(this._tmpVector),this._tmpVector.subtractToRef(this._scene.activeCamera.position,this._startDragRay.direction));this._updateDragPlanePosition(this._startDragRay,g?g:this._tmpVector);if(b=this._pickWithRayOnDragPlane(this._startDragRay))this.dragging=!0,this.currentDraggingPointerID=c,this.lastDragPosition.copyFrom(b),this.onDragStartObservable.notifyObservers({dragPlanePoint:b,
pointerId:this.currentDraggingPointerID}),this._targetPosition.copyFrom(this.attachedNode.absolutePosition),this.detachCameraControls&&this._scene.activeCamera&&this._scene.activeCamera.inputs&&!this._scene.activeCamera.leftCamera&&(this._scene.activeCamera.inputs.attachedToElement?(this._scene.activeCamera.detachControl(),this._attachedToElement=!0):this._attachedToElement=!1);a.a._RestorePivotPoint(this.attachedNode)}};h.prototype._moveDrag=function(c){this._moving=!0;var b=this._pickWithRayOnDragPlane(c);
b&&(this.updateDragPlane&&this._updateDragPlanePosition(c,b),this._options.dragAxis?(this.useObjectOrientationForDragging?e.e.TransformCoordinatesToRef(this._options.dragAxis,this.attachedNode.getWorldMatrix().getRotationMatrix(),this._worldDragAxis):this._worldDragAxis.copyFrom(this._options.dragAxis),b.subtractToRef(this.lastDragPosition,this._tmpVector),c=e.e.Dot(this._tmpVector,this._worldDragAxis),this._worldDragAxis.scaleToRef(c,this._dragDelta)):(c=this._dragDelta.length(),b.subtractToRef(this.lastDragPosition,
this._dragDelta)),this._targetPosition.addInPlace(this._dragDelta),this.onDragObservable.notifyObservers({dragDistance:c,delta:this._dragDelta,dragPlanePoint:b,dragPlaneNormal:this._dragPlane.forward,pointerId:this.currentDraggingPointerID}),this.lastDragPosition.copyFrom(b))};h.prototype._pickWithRayOnDragPlane=function(c){var b=this;if(!c)return null;var g=Math.acos(e.e.Dot(this._dragPlane.forward,c.direction));g>Math.PI/2&&(g=Math.PI-g);return 0<this.maxDragAngle&&g>this.maxDragAngle?this._useAlternatePickedPointAboveMaxDragAngle?
(this._tmpVector.copyFrom(c.direction),this.attachedNode.absolutePosition.subtractToRef(c.origin,this._alternatePickedPoint),this._alternatePickedPoint.normalize(),this._alternatePickedPoint.scaleInPlace(this._useAlternatePickedPointAboveMaxDragAngleDragSpeed*e.e.Dot(this._alternatePickedPoint,this._tmpVector)),this._tmpVector.addInPlace(this._alternatePickedPoint),c=e.e.Dot(this._dragPlane.forward,this._tmpVector),this._dragPlane.forward.scaleToRef(-c,this._alternatePickedPoint),this._alternatePickedPoint.addInPlace(this._tmpVector),
this._alternatePickedPoint.addInPlace(this.attachedNode.absolutePosition),this._alternatePickedPoint):null:(c=h._planeScene.pickWithRay(c,function(g){return g==b._dragPlane}))&&c.hit&&c.pickedMesh&&c.pickedPoint?c.pickedPoint:null};h.prototype._updateDragPlanePosition=function(c,b){this._pointA.copyFrom(b);this._options.dragAxis?(this.useObjectOrientationForDragging?e.e.TransformCoordinatesToRef(this._options.dragAxis,this.attachedNode.getWorldMatrix().getRotationMatrix(),this._localAxis):this._localAxis.copyFrom(this._options.dragAxis),
c.origin.subtractToRef(this._pointA,this._pointC),this._pointC.normalize(),.999<Math.abs(e.e.Dot(this._localAxis,this._pointC))?.999<Math.abs(e.e.Dot(e.e.UpReadOnly,this._pointC))?this._lookAt.copyFrom(e.e.Right()):this._lookAt.copyFrom(e.e.UpReadOnly):(e.e.CrossToRef(this._localAxis,this._pointC,this._lookAt),e.e.CrossToRef(this._localAxis,this._lookAt,this._lookAt),this._lookAt.normalize()),this._dragPlane.position.copyFrom(this._pointA),this._pointA.addToRef(this._lookAt,this._lookAt),this._dragPlane.lookAt(this._lookAt)):
this._options.dragPlaneNormal?(this.useObjectOrientationForDragging?e.e.TransformCoordinatesToRef(this._options.dragPlaneNormal,this.attachedNode.getWorldMatrix().getRotationMatrix(),this._localAxis):this._localAxis.copyFrom(this._options.dragPlaneNormal),this._dragPlane.position.copyFrom(this._pointA),this._pointA.addToRef(this._localAxis,this._lookAt),this._dragPlane.lookAt(this._lookAt)):(this._dragPlane.position.copyFrom(this._pointA),this._dragPlane.lookAt(c.origin));this._dragPlane.position.copyFrom(this.attachedNode.absolutePosition);
this._dragPlane.computeWorldMatrix(!0)};h.prototype.detach=function(){this._pointerObserver&&this._scene.onPointerObservable.remove(this._pointerObserver);this._beforeRenderObserver&&this._scene.onBeforeRenderObservable.remove(this._beforeRenderObserver);this.releaseDrag()};h._AnyMouseID=-2;return h}()},"8dKw":function(l,n,f){var k=f("mBE3"),r=f("eS5o"),u=f("ps+7");l=f("tVVT");var e=f("/SR9"),p=f("J2vy");f=f("5WzX");var d=function(){function a(a,h,c,b,g,m,d,e,x,f){void 0===c&&(c=0);void 0===b&&(b=
100);void 0===g&&(g=!1);void 0===m&&(m=1);void 0===f&&(f=!1);this.target=h;this.fromFrame=c;this.toFrame=b;this.loopAnimation=g;this.onAnimationEnd=d;this.onAnimationLoop=x;this.isAdditive=f;this._pausedDelay=this._localDelayOffset=null;this._runtimeAnimations=[];this._paused=!1;this._speedRatio=1;this._weight=-1;this._syncRoot=null;this.disposeOnEnd=!0;this.animationStarted=!1;this.onAnimationEndObservable=new u.a;this.onAnimationLoopObservable=new u.a;this._scene=a;e&&this.appendAnimations(h,e);
this._speedRatio=m;a._activeAnimatables.push(this)}Object.defineProperty(a.prototype,"syncRoot",{get:function(){return this._syncRoot},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"masterFrame",{get:function(){return 0===this._runtimeAnimations.length?0:this._runtimeAnimations[0].currentFrame},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"weight",{get:function(){return this._weight},set:function(a){this._weight=-1===a?-1:Math.min(Math.max(a,0),1)},enumerable:!1,
configurable:!0});Object.defineProperty(a.prototype,"speedRatio",{get:function(){return this._speedRatio},set:function(a){for(var h=0;h<this._runtimeAnimations.length;h++)this._runtimeAnimations[h]._prepareForSpeedRatioChange(a);this._speedRatio=a},enumerable:!1,configurable:!0});a.prototype.syncWith=function(a){if(this._syncRoot=a)a=this._scene._activeAnimatables.indexOf(this),-1<a&&(this._scene._activeAnimatables.splice(a,1),this._scene._activeAnimatables.push(this));return this};a.prototype.getAnimations=
function(){return this._runtimeAnimations};a.prototype.appendAnimations=function(a,h){for(var c=this,b=0;b<h.length;b++){var g=new r.a(a,h[b],this._scene,this);g._onLoop=function(){c.onAnimationLoopObservable.notifyObservers(c);if(c.onAnimationLoop)c.onAnimationLoop()};this._runtimeAnimations.push(g)}};a.prototype.getAnimationByTargetProperty=function(a){for(var h=this._runtimeAnimations,c=0;c<h.length;c++)if(h[c].animation.targetProperty===a)return h[c].animation;return null};a.prototype.getRuntimeAnimationByTargetProperty=
function(a){for(var h=this._runtimeAnimations,c=0;c<h.length;c++)if(h[c].animation.targetProperty===a)return h[c];return null};a.prototype.reset=function(){for(var a=this._runtimeAnimations,h=0;h<a.length;h++)a[h].reset(!0);this._pausedDelay=this._localDelayOffset=null};a.prototype.enableBlending=function(a){for(var h=this._runtimeAnimations,c=0;c<h.length;c++)h[c].animation.enableBlending=!0,h[c].animation.blendingSpeed=a};a.prototype.disableBlending=function(){for(var a=this._runtimeAnimations,
h=0;h<a.length;h++)a[h].animation.enableBlending=!1};a.prototype.goToFrame=function(a){var h=this._runtimeAnimations;if(h[0]){var c=h[0].animation.framePerSecond,b=h[0].currentFrame;c=0===this.speedRatio?0:(a-b)/c*1E3/this.speedRatio;null===this._localDelayOffset&&(this._localDelayOffset=0);this._localDelayOffset-=c}for(c=0;c<h.length;c++)h[c].goToFrame(a)};a.prototype.pause=function(){this._paused||(this._paused=!0)};a.prototype.restart=function(){this._paused=!1};a.prototype._raiseOnAnimationEnd=
function(){if(this.onAnimationEnd)this.onAnimationEnd();this.onAnimationEndObservable.notifyObservers(this)};a.prototype.stop=function(a,h){if(a||h){var c=this._scene._activeAnimatables.indexOf(this);if(-1<c){for(var b=this._runtimeAnimations,g=b.length-1;0<=g;g--){var m=b[g];if(!a||m.animation.name==a)if(!h||h(m.target))m.dispose(),b.splice(g,1)}0==b.length&&(this._scene._activeAnimatables.splice(c,1),this._raiseOnAnimationEnd())}}else if(g=this._scene._activeAnimatables.indexOf(this),-1<g){this._scene._activeAnimatables.splice(g,
1);b=this._runtimeAnimations;for(g=0;g<b.length;g++)b[g].dispose();this._raiseOnAnimationEnd()}};a.prototype.waitAsync=function(){var a=this;return new Promise(function(h,c){a.onAnimationEndObservable.add(function(){h(a)},void 0,void 0,a,!0)})};a.prototype._animate=function(a){if(this._paused)return this.animationStarted=!1,null===this._pausedDelay&&(this._pausedDelay=a),!0;null===this._localDelayOffset?(this._localDelayOffset=a,this._pausedDelay=null):null!==this._pausedDelay&&(this._localDelayOffset+=
a-this._pausedDelay,this._pausedDelay=null);if(0===this._weight)return!0;var h=!1,c=this._runtimeAnimations,b;for(b=0;b<c.length;b++){var g=c[b].animate(a-this._localDelayOffset,this.fromFrame,this.toFrame,this.loopAnimation,this._speedRatio,this._weight);h=h||g}this.animationStarted=h;if(!h){if(this.disposeOnEnd)for(b=this._scene._activeAnimatables.indexOf(this),this._scene._activeAnimatables.splice(b,1),b=0;b<c.length;b++)c[b].dispose();this._raiseOnAnimationEnd();this.disposeOnEnd&&(this.onAnimationLoop=
this.onAnimationEnd=null,this.onAnimationLoopObservable.clear(),this.onAnimationEndObservable.clear())}return h};return a}();l.a.prototype._animate=function(){if(this.animationsEnabled){var a=p.a.Now;if(!this._animationTimeLast){if(0<this._pendingData.length)return;this._animationTimeLast=a}this.deltaTime=this.useConstantAnimationDeltaTime?16:(a-this._animationTimeLast)*this.animationTimeScale;this._animationTimeLast=a;a=this._activeAnimatables;if(0!==a.length){for(var d=this._animationTime+=this.deltaTime,
h=0;h<a.length;h++){var c=a[h];!c._animate(d)&&c.disposeOnEnd&&h--}this._processLateAnimationBindings()}}};l.a.prototype.beginWeightedAnimation=function(a,d,h,c,b,g,m,t,e,x,f){void 0===c&&(c=1);void 0===g&&(g=1);void 0===f&&(f=!1);a=this.beginAnimation(a,d,h,b,g,m,t,!1,e,x,f);a.weight=c;return a};l.a.prototype.beginAnimation=function(a,e,h,c,b,g,m,t,v,x,f){void 0===b&&(b=1);void 0===t&&(t=!0);void 0===f&&(f=!1);e>h&&0<b&&(b*=-1);t&&this.stopAnimation(a,void 0,v);m||(m=new d(this,a,e,h,c,b,g,void 0,
x,f));f=v?v(a):!0;a.animations&&f&&m.appendAnimations(a,a.animations);if(a.getAnimatables)for(a=a.getAnimatables(),f=0;f<a.length;f++)this.beginAnimation(a[f],e,h,c,b,g,m,t,v,x);m.reset();return m};l.a.prototype.beginHierarchyAnimation=function(a,d,h,c,b,g,m,t,e,x,f,p){void 0===g&&(g=1);void 0===e&&(e=!0);void 0===p&&(p=!1);d=a.getDescendants(d);f=[];f.push(this.beginAnimation(a,h,c,b,g,m,t,e,x,void 0,p));for(a=0;a<d.length;a++)f.push(this.beginAnimation(d[a],h,c,b,g,m,t,e,x,void 0,p));return f};
l.a.prototype.beginDirectAnimation=function(a,e,h,c,b,g,m,t,v){void 0===v&&(v=!1);void 0===g&&(g=1);h>c&&0<g&&(g*=-1);return new d(this,a,h,c,b,g,m,e,t,v)};l.a.prototype.beginDirectHierarchyAnimation=function(a,d,h,c,b,g,m,e,v,x){void 0===x&&(x=!1);d=a.getDescendants(d);var t=[];t.push(this.beginDirectAnimation(a,h,c,b,g,m,e,v,x));for(a=0;a<d.length;a++)t.push(this.beginDirectAnimation(d[a],h,c,b,g,m,e,v,x));return t};l.a.prototype.getAnimatableByTarget=function(a){for(var d=0;d<this._activeAnimatables.length;d++)if(this._activeAnimatables[d].target===
a)return this._activeAnimatables[d];return null};l.a.prototype.getAllAnimatablesByTarget=function(a){for(var d=[],h=0;h<this._activeAnimatables.length;h++)this._activeAnimatables[h].target===a&&d.push(this._activeAnimatables[h]);return d};l.a.prototype.stopAnimation=function(a,d,h){var c=0;for(a=this.getAllAnimatablesByTarget(a);c<a.length;c++)a[c].stop(d,h)};l.a.prototype.stopAllAnimations=function(){if(this._activeAnimatables){for(var a=0;a<this._activeAnimatables.length;a++)this._activeAnimatables[a].stop();
this._activeAnimatables=[]}a=0;for(var d=this.animationGroups;a<d.length;a++)d[a].stop()};l.a.prototype._registerTargetForLateAnimationBinding=function(a,d){var h=a.target;this._registeredForLateAnimationBindings.pushNoDuplicate(h);h._lateAnimationHolders||(h._lateAnimationHolders={});h._lateAnimationHolders[a.targetPath]||(h._lateAnimationHolders[a.targetPath]={totalWeight:0,totalAdditiveWeight:0,animations:[],additiveAnimations:[],originalValue:d});a.isAdditive?(h._lateAnimationHolders[a.targetPath].additiveAnimations.push(a),
h._lateAnimationHolders[a.targetPath].totalAdditiveWeight+=a.weight):(h._lateAnimationHolders[a.targetPath].animations.push(a),h._lateAnimationHolders[a.targetPath].totalWeight+=a.weight)};l.a.prototype._processLateAnimationBindingsForMatrices=function(a){if(0===a.totalWeight&&0===a.totalAdditiveWeight)return a.originalValue;var d=1,h=e.c.Vector3[0],c=e.c.Vector3[1],b=e.c.Quaternion[0],g=0,m=a.animations[0],t=a.originalValue,v=!1;if(1>a.totalWeight){var x=1-a.totalWeight;t.decompose(c,b,h)}else{g=
1;d=a.totalWeight;x=m.weight/d;if(1==x)if(a.totalAdditiveWeight)v=!0;else return m.currentValue;m.currentValue.decompose(c,b,h)}if(!v){c.scaleInPlace(x);h.scaleInPlace(x);b.scaleInPlace(x);for(var f=g;f<a.animations.length;f++)if(g=a.animations[f],0!==g.weight){x=g.weight/d;t=e.c.Vector3[2];v=e.c.Vector3[3];var p=e.c.Quaternion[1];g.currentValue.decompose(v,p,t);v.scaleAndAddToRef(x,c);p.scaleAndAddToRef(x,b);t.scaleAndAddToRef(x,h)}}for(d=0;d<a.additiveAnimations.length;d++)g=a.additiveAnimations[d],
0!==g.weight&&(t=e.c.Vector3[2],v=e.c.Vector3[3],p=e.c.Quaternion[1],g.currentValue.decompose(v,p,t),v.multiplyToRef(c,v),e.e.LerpToRef(c,v,g.weight,c),b.multiplyToRef(p,p),e.b.SlerpToRef(b,p,g.weight,b),t.scaleAndAddToRef(g.weight,h));a=m?m._animationState.workValue:e.c.Matrix[0].clone();e.a.ComposeToRef(c,b,h,a);return a};l.a.prototype._processLateAnimationBindingsForQuaternions=function(a,d){if(0===a.totalWeight&&0===a.totalAdditiveWeight)return d;var h=a.animations[0],c=a.originalValue,b=d;if(0===
a.totalWeight&&0<a.totalAdditiveWeight)b.copyFrom(c);else if(1===a.animations.length){if(e.b.SlerpToRef(c,h.currentValue,Math.min(1,a.totalWeight),b),0===a.totalAdditiveWeight)return b}else if(1<a.animations.length){var g=1;if(1>a.totalWeight){var m=1-a.totalWeight;h=[];var t=[];h.push(c);t.push(m)}else{if(2===a.animations.length&&(e.b.SlerpToRef(a.animations[0].currentValue,a.animations[1].currentValue,a.animations[1].weight/a.totalWeight,d),0===a.totalAdditiveWeight))return d;h=[];t=[];g=a.totalWeight}for(m=
0;m<a.animations.length;m++)c=a.animations[m],h.push(c.currentValue),t.push(c.weight/g);for(c=g=0;c<h.length;)c?(g+=t[c],e.b.SlerpToRef(b,h[c],t[c]/g,b),c++):(e.b.SlerpToRef(h[c],h[c+1],t[c+1]/(t[c]+t[c+1]),d),b=d,g=t[c]+t[c+1],c+=2)}for(d=0;d<a.additiveAnimations.length;d++)c=a.additiveAnimations[d],0!==c.weight&&(b.multiplyToRef(c.currentValue,e.c.Quaternion[0]),e.b.SlerpToRef(b,e.c.Quaternion[0],c.weight,b));return b};l.a.prototype._processLateAnimationBindings=function(){if(this._registeredForLateAnimationBindings.length){for(var a=
0;a<this._registeredForLateAnimationBindings.length;a++){var d=this._registeredForLateAnimationBindings.data[a],h;for(h in d._lateAnimationHolders){var c=d._lateAnimationHolders[h],b=c.animations[0],g=c.originalValue,m=d[h];if(k.a.AllowMatrixDecomposeForInterpolation&&g.m)m=this._processLateAnimationBindingsForMatrices(c);else if(void 0!==g.w)m=this._processLateAnimationBindingsForQuaternions(c,m||e.b.Identity());else{var t=0,v=1;1>c.totalWeight?m=b&&g.scale?g.scale(1-c.totalWeight):b?g*(1-c.totalWeight):
g.clone?g.clone():g:b&&(v=c.totalWeight,m=b.weight/v,m=1!==m?b.currentValue.scale?b.currentValue.scale(m):b.currentValue*m:b.currentValue,t=1);for(;t<c.animations.length;t++)b=c.animations[t],(g=b.weight/v)&&(b.currentValue.scaleAndAddToRef?b.currentValue.scaleAndAddToRef(g,m):m+=b.currentValue*g);for(v=0;v<c.additiveAnimations.length;v++)b=c.additiveAnimations[v],(g=b.weight)&&(b.currentValue.scaleAndAddToRef?b.currentValue.scaleAndAddToRef(g,m):m+=b.currentValue*g)}d[h]=m}d._lateAnimationHolders=
{}}this._registeredForLateAnimationBindings.reset()}};f.a.prototype.copyAnimationRange=function(a,d,h,c,b){void 0===c&&(c=!1);void 0===b&&(b=null);0===this.animations.length&&(this.animations.push(new k.a(this.name,"_matrix",a.animations[0].framePerSecond,k.a.ANIMATIONTYPE_MATRIX,0)),this.animations[0].setKeys([]));var g=a.animations[0].getRange(d);if(!g)return!1;var m=g.from;g=g.to;var e=a.animations[0].getKeys(),v=a.length;a=a.getParent();var q=this.getParent();a=(v=c&&a&&v&&this.length&&v!==this.length)&&
q&&a?q.length/a.length:1;q=c&&!q&&b&&(1!==b.x||1!==b.y||1!==b.z);for(var f=this.animations[0].getKeys(),p,r,u,l=0,n=e.length;l<n;l++)p=e[l],p.frame>=m&&p.frame<=g&&(c?(u=p.value.clone(),v?(r=u.getTranslation(),u.setTranslation(r.scaleInPlace(a))):q&&b?(r=u.getTranslation(),u.setTranslation(r.multiplyInPlace(b))):u=p.value):u=p.value,f.push({frame:p.frame+h,value:u}));this.animations[0].createRange(d,m+h,g+h);return!0}},"9KDn":function(l,n,f){f("3adM");f("r2Xo");f("GhKI");var k=f("/SR9"),r=function(){return function(e,
f,d,a){void 0===f&&(f=new k.e);void 0===d&&(d=0);void 0===a&&(a=!1);this.direction=e;this.rotatedDirection=f;this.diff=d;this.ignore=a}}();(function(){function e(e){this.ui=e;this.name="AttachToBoxBehavior";this.distanceAwayFromBottomOfFace=this.distanceAwayFromFace=.15;this._faceVectors=[new r(k.e.Up()),new r(k.e.Down()),new r(k.e.Left()),new r(k.e.Right()),new r(k.e.Forward()),new r(k.e.Forward().scaleInPlace(-1))];this._tmpMatrix=new k.a;this._tmpVector=new k.e;this._zeroVector=k.e.Zero();this._lookAtTmpMatrix=
new k.a}e.prototype.init=function(){};e.prototype._closestFace=function(e){var d=this;this._faceVectors.forEach(function(a){d._target.rotationQuaternion||(d._target.rotationQuaternion=k.b.RotationYawPitchRoll(d._target.rotation.y,d._target.rotation.x,d._target.rotation.z));d._target.rotationQuaternion.toRotationMatrix(d._tmpMatrix);k.e.TransformCoordinatesToRef(a.direction,d._tmpMatrix,a.rotatedDirection);a.diff=k.e.GetAngleBetweenVectors(a.rotatedDirection,e,k.e.Cross(a.rotatedDirection,e))});return this._faceVectors.reduce(function(a,
d){return a.ignore?d:d.ignore?a:a.diff<d.diff?a:d},this._faceVectors[0])};e.prototype._lookAtToRef=function(e,d,a){void 0===d&&(d=new k.e(0,1,0));k.a.LookAtLHToRef(this._zeroVector,e,d,this._lookAtTmpMatrix);this._lookAtTmpMatrix.invert();k.b.FromRotationMatrixToRef(this._lookAtTmpMatrix,a)};e.prototype.attach=function(e){var d=this;this._target=e;this._scene=this._target.getScene();this._onRenderObserver=this._scene.onBeforeRenderObservable.add(function(){if(d._scene.activeCamera){var a=d._scene.activeCamera.position;
d._scene.activeCamera.devicePosition&&(a=d._scene.activeCamera.devicePosition);var q=d._closestFace(a.subtract(e.position));d._scene.activeCamera.leftCamera?d._scene.activeCamera.leftCamera.computeWorldMatrix().getRotationMatrixToRef(d._tmpMatrix):d._scene.activeCamera.computeWorldMatrix().getRotationMatrixToRef(d._tmpMatrix);k.e.TransformCoordinatesToRef(k.e.Up(),d._tmpMatrix,d._tmpVector);d._faceVectors.forEach(function(a){q.direction.x&&a.direction.x&&(a.ignore=!0);q.direction.y&&a.direction.y&&
(a.ignore=!0);q.direction.z&&a.direction.z&&(a.ignore=!0)});a=d._closestFace(d._tmpVector);d._faceVectors.forEach(function(a){a.ignore=!1});d.ui.position.copyFrom(e.position);q.direction.x&&(q.rotatedDirection.scaleToRef(e.scaling.x/2+d.distanceAwayFromFace,d._tmpVector),d.ui.position.addInPlace(d._tmpVector));q.direction.y&&(q.rotatedDirection.scaleToRef(e.scaling.y/2+d.distanceAwayFromFace,d._tmpVector),d.ui.position.addInPlace(d._tmpVector));q.direction.z&&(q.rotatedDirection.scaleToRef(e.scaling.z/
2+d.distanceAwayFromFace,d._tmpVector),d.ui.position.addInPlace(d._tmpVector));d.ui.rotationQuaternion||(d.ui.rotationQuaternion=k.b.RotationYawPitchRoll(d.ui.rotation.y,d.ui.rotation.x,d.ui.rotation.z));q.rotatedDirection.scaleToRef(-1,d._tmpVector);d._lookAtToRef(d._tmpVector,a.rotatedDirection,d.ui.rotationQuaternion);a.direction.x&&d.ui.up.scaleToRef(d.distanceAwayFromBottomOfFace-e.scaling.x/2,d._tmpVector);a.direction.y&&d.ui.up.scaleToRef(d.distanceAwayFromBottomOfFace-e.scaling.y/2,d._tmpVector);
a.direction.z&&d.ui.up.scaleToRef(d.distanceAwayFromBottomOfFace-e.scaling.z/2,d._tmpVector);d.ui.position.addInPlace(d._tmpVector)}})};e.prototype.detach=function(){this._scene.onBeforeRenderObservable.remove(this._onRenderObserver)};return e})();f("TRuC");var u=f("6BCH");(function(){function e(){this._startDistance=0;this._initialScale=new k.e(0,0,0);this._targetScale=new k.e(0,0,0);this._sceneRenderObserver=null;this._dragBehaviorA=new u.a({});this._dragBehaviorA.moveAttached=!1;this._dragBehaviorB=
new u.a({});this._dragBehaviorB.moveAttached=!1}Object.defineProperty(e.prototype,"name",{get:function(){return"MultiPointerScale"},enumerable:!1,configurable:!0});e.prototype.init=function(){};e.prototype._getCurrentDistance=function(){return this._dragBehaviorA.lastDragPosition.subtract(this._dragBehaviorB.lastDragPosition).length()};e.prototype.attach=function(e){var d=this;this._ownerNode=e;this._dragBehaviorA.onDragStartObservable.add(function(a){d._dragBehaviorA.dragging&&d._dragBehaviorB.dragging&&
(d._dragBehaviorA.currentDraggingPointerID==d._dragBehaviorB.currentDraggingPointerID?d._dragBehaviorA.releaseDrag():(d._initialScale.copyFrom(e.scaling),d._startDistance=d._getCurrentDistance()))});this._dragBehaviorB.onDragStartObservable.add(function(a){d._dragBehaviorA.dragging&&d._dragBehaviorB.dragging&&(d._dragBehaviorA.currentDraggingPointerID==d._dragBehaviorB.currentDraggingPointerID?d._dragBehaviorB.releaseDrag():(d._initialScale.copyFrom(e.scaling),d._startDistance=d._getCurrentDistance()))});
[this._dragBehaviorA,this._dragBehaviorB].forEach(function(a){a.onDragObservable.add(function(){if(d._dragBehaviorA.dragging&&d._dragBehaviorB.dragging){var a=d._getCurrentDistance()/d._startDistance;d._initialScale.scaleToRef(a,d._targetScale)}})});e.addBehavior(this._dragBehaviorA);e.addBehavior(this._dragBehaviorB);this._sceneRenderObserver=e.getScene().onBeforeRenderObservable.add(function(){if(d._dragBehaviorA.dragging&&d._dragBehaviorB.dragging){var a=d._targetScale.subtract(e.scaling).scaleInPlace(.1);
.01<a.length()&&e.scaling.addInPlace(a)}})};e.prototype.detach=function(){var e=this;this._ownerNode.getScene().onBeforeRenderObservable.remove(this._sceneRenderObserver);[this._dragBehaviorA,this._dragBehaviorB].forEach(function(d){d.onDragStartObservable.clear();d.onDragObservable.clear();e._ownerNode.removeBehavior(d)})};return e})();f("HL0w")},CkZi:function(l,n,f){f.d(n,"a",function(){return k});var k=function(){function f(f,e,p){this.frame=f;this.action=e;this.onlyOnce=p;this.isDone=!1}f.prototype._clone=
function(){return new f(this.frame,this.action,this.onlyOnce)};return f}()},DP2o:function(l,n,f){f.d(n,"a",function(){return r});var k=f("uyO6"),r=function(){function f(e,f,d){var a=this;this.loop=!1;this._coneOuterAngle=this._coneInnerAngle=360;this._volume=1;this.isPaused=this.isPlaying=!1;this._sounds=[];this._weights=[];if(f.length!==d.length)throw Error("Sounds length does not equal weights length");this.loop=e;this._weights=d;for(var q=e=0;q<d.length;q++)e+=d[q];d=0<e?1/e:0;for(e=0;e<this._weights.length;e++)this._weights[e]*=
d;this._sounds=f;f=0;for(d=this._sounds;f<d.length;f++)d[f].onEndedObservable.add(function(){a._onended()})}Object.defineProperty(f.prototype,"directionalConeInnerAngle",{get:function(){return this._coneInnerAngle},set:function(e){if(e!==this._coneInnerAngle)if(this._coneOuterAngle<e)k.a.Error("directionalConeInnerAngle: outer angle of the cone must be superior or equal to the inner angle.");else{this._coneInnerAngle=e;for(var f=0,d=this._sounds;f<d.length;f++)d[f].directionalConeInnerAngle=e}},enumerable:!1,
configurable:!0});Object.defineProperty(f.prototype,"directionalConeOuterAngle",{get:function(){return this._coneOuterAngle},set:function(e){if(e!==this._coneOuterAngle)if(e<this._coneInnerAngle)k.a.Error("directionalConeOuterAngle: outer angle of the cone must be superior or equal to the inner angle.");else{this._coneOuterAngle=e;for(var f=0,d=this._sounds;f<d.length;f++)d[f].directionalConeOuterAngle=e}},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"volume",{get:function(){return this._volume},
set:function(e){if(e!==this._volume)for(var f=0,d=this._sounds;f<d.length;f++)d[f].setVolume(e)},enumerable:!1,configurable:!0});f.prototype._onended=function(){void 0!==this._currentIndex&&(this._sounds[this._currentIndex].autoplay=!1);this.loop&&this.isPlaying?this.play():this.isPlaying=!1};f.prototype.pause=function(){this.isPaused=!0;void 0!==this._currentIndex&&this._sounds[this._currentIndex].pause()};f.prototype.stop=function(){this.isPlaying=!1;void 0!==this._currentIndex&&this._sounds[this._currentIndex].stop()};
f.prototype.play=function(e){if(!this.isPaused){this.stop();for(var f=Math.random(),d=0,a=0;a<this._weights.length;a++)if(d+=this._weights[a],f<=d){this._currentIndex=a;break}}f=this._sounds[this._currentIndex];f.isReady()?f.play(0,this.isPaused?void 0:e):f.autoplay=!0;this.isPlaying=!0;this.isPaused=!1};return f}()},E2tu:function(l,n,f){f.d(n,"a",function(){return k});var k=function(){function f(f,e,k){this.name=f;this.from=e;this.to=k}f.prototype.clone=function(){return new f(this.name,this.from,
this.to)};return f}()},GhKI:function(l,n,f){f.d(n,"a",function(){return d});var k=f("4SJX"),r=f("98Qd"),u=f("J2vy"),e=f("/SR9"),p=f("mBE3"),d=function(){function a(){this._mode=a.FitFrustumSidesMode;this._radiusScale=1;this._positionScale=.5;this._defaultElevation=.3;this._elevationReturnTime=1500;this._elevationReturnWaitTime=1E3;this._zoomStopsAnimation=!1;this._framingTime=1500;this.autoCorrectCameraLimitsAndSensibility=!0;this._isPointerDown=!1;this._lastInteractionTime=-Infinity;this._animatables=
[];this._betaIsAnimating=!1}Object.defineProperty(a.prototype,"name",{get:function(){return"Framing"},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"mode",{get:function(){return this._mode},set:function(a){this._mode=a},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"radiusScale",{get:function(){return this._radiusScale},set:function(a){this._radiusScale=a},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"positionScale",{get:function(){return this._positionScale},
set:function(a){this._positionScale=a},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"defaultElevation",{get:function(){return this._defaultElevation},set:function(a){this._defaultElevation=a},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"elevationReturnTime",{get:function(){return this._elevationReturnTime},set:function(a){this._elevationReturnTime=a},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"elevationReturnWaitTime",{get:function(){return this._elevationReturnWaitTime},
set:function(a){this._elevationReturnWaitTime=a},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"zoomStopsAnimation",{get:function(){return this._zoomStopsAnimation},set:function(a){this._zoomStopsAnimation=a},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"framingTime",{get:function(){return this._framingTime},set:function(a){this._framingTime=a},enumerable:!1,configurable:!0});a.prototype.init=function(){};a.prototype.attach=function(d){var h=this;this._attachedCamera=
d;var c=this._attachedCamera.getScene();a.EasingFunction.setEasingMode(a.EasingMode);this._onPrePointerObservableObserver=c.onPrePointerObservable.add(function(b){b.type===r.a.POINTERDOWN?h._isPointerDown=!0:b.type===r.a.POINTERUP&&(h._isPointerDown=!1)});this._onMeshTargetChangedObserver=d.onMeshTargetChangedObservable.add(function(b){b&&h.zoomOnMesh(b)});this._onAfterCheckInputsObserver=d.onAfterCheckInputsObservable.add(function(){h._applyUserInteraction();h._maintainCameraAboveGround()})};a.prototype.detach=
function(){if(this._attachedCamera){var a=this._attachedCamera.getScene();this._onPrePointerObservableObserver&&a.onPrePointerObservable.remove(this._onPrePointerObservableObserver);this._onAfterCheckInputsObserver&&this._attachedCamera.onAfterCheckInputsObservable.remove(this._onAfterCheckInputsObserver);this._onMeshTargetChangedObserver&&this._attachedCamera.onMeshTargetChangedObservable.remove(this._onMeshTargetChangedObserver);this._attachedCamera=null}};a.prototype.zoomOnMesh=function(a,h,c){void 0===
h&&(h=!1);void 0===c&&(c=null);a.computeWorldMatrix(!0);a=a.getBoundingInfo().boundingBox;this.zoomOnBoundingInfo(a.minimumWorld,a.maximumWorld,h,c)};a.prototype.zoomOnMeshHierarchy=function(a,h,c){void 0===h&&(h=!1);void 0===c&&(c=null);a.computeWorldMatrix(!0);a=a.getHierarchyBoundingVectors(!0);this.zoomOnBoundingInfo(a.min,a.max,h,c)};a.prototype.zoomOnMeshesHierarchy=function(a,h,c){void 0===h&&(h=!1);void 0===c&&(c=null);for(var b=new e.e(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),
g=new e.e(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),m=0;m<a.length;m++){var d=a[m].getHierarchyBoundingVectors(!0);e.e.CheckExtends(d.min,b,g);e.e.CheckExtends(d.max,b,g)}this.zoomOnBoundingInfo(b,g,h,c)};a.prototype.zoomOnBoundingInfo=function(d,h,c,b){var g=this;void 0===c&&(c=!1);void 0===b&&(b=null);if(this._attachedCamera){var m=d.y,t=m+(h.y-m)*this._positionScale;m=h.subtract(d).scale(.5);c?c=new e.e(0,t,0):(c=d.add(m),c=new e.e(c.x,t,c.z));this._vectorTransition||(this._vectorTransition=
p.a.CreateAnimation("target",p.a.ANIMATIONTYPE_VECTOR3,60,a.EasingFunction));this._betaIsAnimating=!0;(c=p.a.TransitionTo("target",c,this._attachedCamera,this._attachedCamera.getScene(),60,this._vectorTransition,this._framingTime))&&this._animatables.push(c);c=0;this._mode===a.FitFrustumSidesMode?(c=this._calculateLowerRadiusFromModelBoundingSphere(d,h),this.autoCorrectCameraLimitsAndSensibility&&(this._attachedCamera.lowerRadiusLimit=m.length()+this._attachedCamera.minZ)):this._mode===a.IgnoreBoundsSizeMode&&
(c=this._calculateLowerRadiusFromModelBoundingSphere(d,h),this.autoCorrectCameraLimitsAndSensibility&&null===this._attachedCamera.lowerRadiusLimit&&(this._attachedCamera.lowerRadiusLimit=this._attachedCamera.minZ));this.autoCorrectCameraLimitsAndSensibility&&(d=h.subtract(d).length(),this._attachedCamera.panningSensibility=5E3/d,this._attachedCamera.wheelPrecision=100/c);this._radiusTransition||(this._radiusTransition=p.a.CreateAnimation("radius",p.a.ANIMATIONTYPE_FLOAT,60,a.EasingFunction));(c=p.a.TransitionTo("radius",
c,this._attachedCamera,this._attachedCamera.getScene(),60,this._radiusTransition,this._framingTime,function(){g.stopAllAnimations();b&&b();g._attachedCamera&&g._attachedCamera.useInputToRestoreState&&g._attachedCamera.storeState()}))&&this._animatables.push(c)}};a.prototype._calculateLowerRadiusFromModelBoundingSphere=function(d,h){h=h.subtract(d).length();d=this._getFrustumSlope();h=.5*h*this._radiusScale;d=Math.max(h*Math.sqrt(1+1/(d.x*d.x)),h*Math.sqrt(1+1/(d.y*d.y)));h=this._attachedCamera;if(!h)return 0;
h.lowerRadiusLimit&&this._mode===a.IgnoreBoundsSizeMode&&(d=d<h.lowerRadiusLimit?h.lowerRadiusLimit:d);h.upperRadiusLimit&&(d=d>h.upperRadiusLimit?h.upperRadiusLimit:d);return d};a.prototype._maintainCameraAboveGround=function(){var d=this;if(!(0>this._elevationReturnTime)){var h=u.a.Now-this._lastInteractionTime,c=.5*Math.PI-this._defaultElevation,b=.5*Math.PI;this._attachedCamera&&!this._betaIsAnimating&&this._attachedCamera.beta>b&&h>=this._elevationReturnWaitTime&&(this._betaIsAnimating=!0,this.stopAllAnimations(),
this._betaTransition||(this._betaTransition=p.a.CreateAnimation("beta",p.a.ANIMATIONTYPE_FLOAT,60,a.EasingFunction)),(h=p.a.TransitionTo("beta",c,this._attachedCamera,this._attachedCamera.getScene(),60,this._betaTransition,this._elevationReturnTime,function(){d._clearAnimationLocks();d.stopAllAnimations()}))&&this._animatables.push(h))}};a.prototype._getFrustumSlope=function(){var a=this._attachedCamera;if(!a)return e.d.Zero();var d=a.getScene().getEngine().getAspectRatio(a);a=Math.tan(a.fov/2);return new e.d(a*
d,a)};a.prototype._clearAnimationLocks=function(){this._betaIsAnimating=!1};a.prototype._applyUserInteraction=function(){this.isUserIsMoving&&(this._lastInteractionTime=u.a.Now,this.stopAllAnimations(),this._clearAnimationLocks())};a.prototype.stopAllAnimations=function(){this._attachedCamera&&(this._attachedCamera.animations=[]);for(;this._animatables.length;)this._animatables[0]&&(this._animatables[0].onAnimationEnd=null,this._animatables[0].stop()),this._animatables.shift()};Object.defineProperty(a.prototype,
"isUserIsMoving",{get:function(){return this._attachedCamera?0!==this._attachedCamera.inertialAlphaOffset||0!==this._attachedCamera.inertialBetaOffset||0!==this._attachedCamera.inertialRadiusOffset||0!==this._attachedCamera.inertialPanningX||0!==this._attachedCamera.inertialPanningY||this._isPointerDown:!1},enumerable:!1,configurable:!0});a.EasingFunction=new k.d;a.EasingMode=k.c.EASINGMODE_EASEINOUT;a.IgnoreBoundsSizeMode=0;a.FitFrustumSidesMode=1;return a}()},HL0w:function(l,n,f){f.d(n,"a",function(){return q});
var k=f("ikaq"),r=f("tVVT"),u=f("98Qd"),e=f("/SR9"),p=f("ps+7"),d=f("CAkI"),a=f("l/Gj"),q=function(){function h(){this._sceneRenderObserver=null;this._targetPosition=new e.e(0,0,0);this._moving=!1;this._startingOrientation=new e.b;this._attachedToElement=!1;this.zDragFactor=3;this.rotateDraggedObject=!0;this.dragging=!1;this.dragDeltaRatio=.2;this.currentDraggingPointerID=-1;this.detachCameraControls=!0;this.onDragStartObservable=new p.a;this.onDragObservable=new p.a;this.onDragEndObservable=new p.a}
Object.defineProperty(h.prototype,"name",{get:function(){return"SixDofDrag"},enumerable:!1,configurable:!0});h.prototype.init=function(){};Object.defineProperty(h.prototype,"_pointerCamera",{get:function(){return this._scene.cameraToUseForPointers?this._scene.cameraToUseForPointers:this._scene.activeCamera},enumerable:!1,configurable:!0});h.prototype.attach=function(c){var b=this;this._ownerNode=c;this._scene=this._ownerNode.getScene();h._virtualScene||(h._virtualScene=new r.a(this._scene.getEngine(),
{virtual:!0}),h._virtualScene.detachControl(),this._scene.getEngine().scenes.pop());var g=null,m=new e.e(0,0,0);this._virtualOriginMesh=new k.a("",h._virtualScene);this._virtualOriginMesh.rotationQuaternion=new e.b;this._virtualDragMesh=new k.a("",h._virtualScene);this._virtualDragMesh.rotationQuaternion=new e.b;this._pointerObserver=this._scene.onPointerObservable.add(function(c,h){if(c.type==u.a.POINTERDOWN){if(h=!b.dragging&&c.pickInfo&&c.pickInfo.hit&&c.pickInfo.pickedMesh&&c.pickInfo.ray)h=c.pickInfo.pickedMesh,
h=b._ownerNode==h||h.isDescendantOf(b._ownerNode);h&&(b._pointerCamera&&b._pointerCamera.cameraRigMode==d.a.RIG_MODE_NONE&&c.pickInfo.ray.origin.copyFrom(b._pointerCamera.globalPosition),g=b._ownerNode,a.a._RemoveAndStorePivotPoint(g),m.copyFrom(c.pickInfo.ray.origin),b._virtualOriginMesh.position.copyFrom(c.pickInfo.ray.origin),b._virtualOriginMesh.lookAt(c.pickInfo.ray.origin.add(c.pickInfo.ray.direction)),b._virtualOriginMesh.removeChild(b._virtualDragMesh),g.computeWorldMatrix(),b._virtualDragMesh.position.copyFrom(g.absolutePosition),
g.rotationQuaternion||(g.rotationQuaternion=e.b.RotationYawPitchRoll(g.rotation.y,g.rotation.x,g.rotation.z)),h=g.parent,g.setParent(null),b._virtualDragMesh.rotationQuaternion.copyFrom(g.rotationQuaternion),g.setParent(h),b._virtualOriginMesh.addChild(b._virtualDragMesh),b._targetPosition.copyFrom(b._virtualDragMesh.absolutePosition),b.dragging=!0,b.currentDraggingPointerID=c.event.pointerId,b.detachCameraControls&&b._pointerCamera&&!b._pointerCamera.leftCamera&&(b._pointerCamera.inputs.attachedToElement?
(b._pointerCamera.detachControl(),b._attachedToElement=!0):b._attachedToElement=!1),a.a._RestorePivotPoint(g),b.onDragStartObservable.notifyObservers({}))}else if(c.type==u.a.POINTERUP||c.type==u.a.POINTERDOUBLETAP)b.currentDraggingPointerID==c.event.pointerId&&(b.dragging=!1,b._moving=!1,b.currentDraggingPointerID=-1,g=null,b._virtualOriginMesh.removeChild(b._virtualDragMesh),b.detachCameraControls&&b._attachedToElement&&b._pointerCamera&&!b._pointerCamera.leftCamera&&(b._pointerCamera.attachControl(!0),
b._attachedToElement=!1),b.onDragEndObservable.notifyObservers({}));else if(c.type==u.a.POINTERMOVE&&b.currentDraggingPointerID==c.event.pointerId&&b.dragging&&c.pickInfo&&c.pickInfo.ray&&g){h=b.zDragFactor;b._pointerCamera&&b._pointerCamera.cameraRigMode==d.a.RIG_MODE_NONE&&(c.pickInfo.ray.origin.copyFrom(b._pointerCamera.globalPosition),h=0);var t=c.pickInfo.ray.origin.subtract(m);m.copyFrom(c.pickInfo.ray.origin);t=-e.e.Dot(t,c.pickInfo.ray.direction);b._virtualOriginMesh.addChild(b._virtualDragMesh);
b._virtualDragMesh.position.z-=1>b._virtualDragMesh.position.z?t*b.zDragFactor:t*h*b._virtualDragMesh.position.z;0>b._virtualDragMesh.position.z&&(b._virtualDragMesh.position.z=0);b._virtualOriginMesh.position.copyFrom(c.pickInfo.ray.origin);b._virtualOriginMesh.lookAt(c.pickInfo.ray.origin.add(c.pickInfo.ray.direction));b._virtualOriginMesh.removeChild(b._virtualDragMesh);b._targetPosition.copyFrom(b._virtualDragMesh.absolutePosition);g.parent&&e.e.TransformCoordinatesToRef(b._targetPosition,e.a.Invert(g.parent.getWorldMatrix()),
b._targetPosition);b._moving||b._startingOrientation.copyFrom(b._virtualDragMesh.rotationQuaternion);b._moving=!0}});var t=new e.b;this._sceneRenderObserver=c.getScene().onBeforeRenderObservable.add(function(){if(b.dragging&&b._moving&&g){a.a._RemoveAndStorePivotPoint(g);g.position.addInPlace(b._targetPosition.subtract(g.position).scale(b.dragDeltaRatio));if(b.rotateDraggedObject){t.copyFrom(b._startingOrientation);t.x=-t.x;t.y=-t.y;t.z=-t.z;b._virtualDragMesh.rotationQuaternion.multiplyToRef(t,t);
e.b.RotationYawPitchRollToRef(t.toEulerAngles("xyz").y,0,0,t);t.multiplyToRef(b._startingOrientation,t);var c=g.parent;if(!c||c.scaling&&!c.scaling.isNonUniformWithinEpsilon(.001))g.setParent(null),e.b.SlerpToRef(g.rotationQuaternion,t,b.dragDeltaRatio,g.rotationQuaternion),g.setParent(c)}a.a._RestorePivotPoint(g);b.onDragObservable.notifyObservers()}})};h.prototype.detach=function(){this._scene&&(this.detachCameraControls&&this._attachedToElement&&this._pointerCamera&&!this._pointerCamera.leftCamera&&
(this._pointerCamera.attachControl(!0),this._attachedToElement=!1),this._scene.onPointerObservable.remove(this._pointerObserver));this._ownerNode&&this._ownerNode.getScene().onBeforeRenderObservable.remove(this._sceneRenderObserver);this._virtualOriginMesh&&this._virtualOriginMesh.dispose();this._virtualDragMesh&&this._virtualDragMesh.dispose();this.onDragEndObservable.clear();this.onDragObservable.clear();this.onDragStartObservable.clear()};return h}()},IIVm:function(l,n,f){f.d(n,"a",function(){return k});
var k=function(){function f(f,e,k,d,a,q){this.source=f;this.pointerX=e;this.pointerY=k;this.meshUnderPointer=d;this.sourceEvent=a;this.additionalData=q}f.CreateNew=function(k,e,p){var d=k.getScene();return new f(k,d.pointerX,d.pointerY,d.meshUnderPointer||k,e,p)};f.CreateNewFromSprite=function(k,e,p,d){return new f(k,e.pointerX,e.pointerY,e.meshUnderPointer,p,d)};f.CreateNewFromScene=function(k,e){return new f(null,k.pointerX,k.pointerY,k.meshUnderPointer,e)};f.CreateNewFromPrimitive=function(k,e,
p,d){return new f(k,e.x,e.y,null,p,d)};return f}()},JDGr:function(l,n,f){f.d(n,"a",function(){return u});f.d(n,"b",function(){return e});var k=f("oYeq"),r=f("bDcY");l=f("WHS4");var u=function(){function e(d){this._actionManager=d}e.prototype.isValid=function(){return!0};e.prototype._getProperty=function(d){return this._actionManager._getProperty(d)};e.prototype._getEffectiveTarget=function(d,a){return this._actionManager._getEffectiveTarget(d,a)};e.prototype.serialize=function(){};e.prototype._serialize=
function(d){return{type:2,children:[],name:d.name,properties:d.properties}};return e}(),e=function(e){function d(a,f,h,c,b){void 0===b&&(b=d.IsEqual);a=e.call(this,a)||this;a.propertyPath=h;a.value=c;a.operator=b;a._target=f;a._effectiveTarget=a._getEffectiveTarget(f,a.propertyPath);a._property=a._getProperty(a.propertyPath);return a}Object(k.d)(d,e);Object.defineProperty(d,"IsEqual",{get:function(){return d._IsEqual},enumerable:!1,configurable:!0});Object.defineProperty(d,"IsDifferent",{get:function(){return d._IsDifferent},
enumerable:!1,configurable:!0});Object.defineProperty(d,"IsGreater",{get:function(){return d._IsGreater},enumerable:!1,configurable:!0});Object.defineProperty(d,"IsLesser",{get:function(){return d._IsLesser},enumerable:!1,configurable:!0});d.prototype.isValid=function(){switch(this.operator){case d.IsGreater:return this._effectiveTarget[this._property]>this.value;case d.IsLesser:return this._effectiveTarget[this._property]<this.value;case d.IsEqual:case d.IsDifferent:var a=this.value.equals?this.value.equals(this._effectiveTarget[this._property]):
this.value===this._effectiveTarget[this._property];return this.operator===d.IsEqual?a:!a}return!1};d.prototype.serialize=function(){return this._serialize({name:"ValueCondition",properties:[r.a._GetTargetProperty(this._target),{name:"propertyPath",value:this.propertyPath},{name:"value",value:r.a._SerializeValueAsString(this.value)},{name:"operator",value:d.GetOperatorName(this.operator)}]})};d.GetOperatorName=function(a){switch(a){case d._IsEqual:return"IsEqual";case d._IsDifferent:return"IsDifferent";
case d._IsGreater:return"IsGreater";case d._IsLesser:return"IsLesser";default:return""}};d._IsEqual=0;d._IsDifferent=1;d._IsGreater=2;d._IsLesser=3;return d}(u);n=function(e){function d(a,d){a=e.call(this,a)||this;a.predicate=d;return a}Object(k.d)(d,e);d.prototype.isValid=function(){return this.predicate()};return d}(u);f=function(e){function d(a,d,h){a=e.call(this,a)||this;a.value=h;a._target=d;return a}Object(k.d)(d,e);d.prototype.isValid=function(){return this._target.state===this.value};d.prototype.serialize=
function(){return this._serialize({name:"StateCondition",properties:[r.a._GetTargetProperty(this._target),{name:"value",value:this.value}]})};return d}(u);l.a.RegisteredTypes["BABYLON.ValueCondition"]=e;l.a.RegisteredTypes["BABYLON.PredicateCondition"]=n;l.a.RegisteredTypes["BABYLON.StateCondition"]=f},K0AZ:function(l,n,f){f.d(n,"a",function(){return a});var k=f("YKqZ"),r=f("ps+7"),u=f("/SR9"),e=f("qUIE"),p=f("uyO6"),d=f("n5HA"),a=function(){function a(d,c,b,g,m){var h=this;void 0===g&&(g=null);var f,
x,q,l;this.spatialSound=this.isPaused=this.isPlaying=this.useCustomAttenuation=this.loop=this.autoplay=!1;this.rolloffFactor=this.refDistance=1;this.maxDistance=100;this.distanceModel="linear";this.metadata=null;this.onEndedObservable=new r.a;this._panningModel="equalpower";this._playbackRate=1;this._streaming=!1;this._startOffset=this._startTime=0;this._position=u.e.Zero();this._positionInEmitterSpace=!1;this._localDirection=new u.e(1,0,0);this._volume=1;this._isDirectional=this._isReadyToPlay=!1;
this._coneOuterAngle=this._coneInnerAngle=360;this._coneOuterGain=0;this._isOutputConnected=!1;this._urlType="Unknown";this.name=d;this._scene=b;a._SceneComponentInitialization(b);this._readyToPlayCallback=g;this._customAttenuationFunction=function(b,g,c,a,m){return g<c?b*(1-g/c):0};m&&(this.autoplay=m.autoplay||!1,this.loop=m.loop||!1,void 0!==m.volume&&(this._volume=m.volume),this.spatialSound=null!==(f=m.spatialSound)&&void 0!==f?f:!1,this.maxDistance=null!==(x=m.maxDistance)&&void 0!==x?x:100,
this.useCustomAttenuation=null!==(q=m.useCustomAttenuation)&&void 0!==q?q:!1,this.rolloffFactor=m.rolloffFactor||1,this.refDistance=m.refDistance||1,this.distanceModel=m.distanceModel||"linear",this._playbackRate=m.playbackRate||1,this._streaming=null!==(l=m.streaming)&&void 0!==l?l:!1,this._length=m.length,this._offset=m.offset);if(e.a.audioEngine.canUseWebAudio&&e.a.audioEngine.audioContext){if(this._soundGain=e.a.audioEngine.audioContext.createGain(),this._soundGain.gain.value=this._volume,this._outputAudioNode=
this._inputAudioNode=this._soundGain,this.spatialSound&&this._createSpatialParameters(),this._scene.mainSoundTrack.addSound(this),d=!0,c)try{"string"===typeof c?this._urlType="String":c instanceof ArrayBuffer?this._urlType="ArrayBuffer":c instanceof MediaStream?this._urlType="MediaStream":Array.isArray(c)&&(this._urlType="Array");b=[];g=!1;switch(this._urlType){case "MediaStream":this._isReadyToPlay=this._streaming=!0;this._streamingSource=e.a.audioEngine.audioContext.createMediaStreamSource(c);this.autoplay&&
this.play(0,this._offset,this._length);this._readyToPlayCallback&&this._readyToPlayCallback();break;case "ArrayBuffer":0<c.byteLength&&(g=!0,this._soundLoaded(c));break;case "String":b.push(c);case "Array":0===b.length&&(b=c);for(c=0;c<b.length;c++){var n=b[c];if(g=m&&m.skipCodecCheck||-1!==n.indexOf(".mp3",n.length-4)&&e.a.audioEngine.isMP3supported||-1!==n.indexOf(".ogg",n.length-4)&&e.a.audioEngine.isOGGsupported||-1!==n.indexOf(".wav",n.length-4)||-1!==n.indexOf(".m4a",n.length-4)||-1!==n.indexOf("blob:")){this._streaming?
(this._htmlAudioElement=new Audio(n),this._htmlAudioElement.controls=!1,this._htmlAudioElement.loop=this.loop,k.b.SetCorsBehavior(n,this._htmlAudioElement),this._htmlAudioElement.preload="auto",this._htmlAudioElement.addEventListener("canplaythrough",function(){h._isReadyToPlay=!0;h.autoplay&&h.play(0,h._offset,h._length);h._readyToPlayCallback&&h._readyToPlayCallback()}),document.body.appendChild(this._htmlAudioElement),this._htmlAudioElement.load()):this._scene._loadFile(n,function(b){h._soundLoaded(b)},
void 0,!0,!0,function(b){b&&p.a.Error("XHR "+b.status+" error on: "+n+".");p.a.Error("Sound creation aborted.");h._scene.mainSoundTrack.removeSound(h)});break}}break;default:d=!1}d?g||(this._isReadyToPlay=!0,this._readyToPlayCallback&&window.setTimeout(function(){h._readyToPlayCallback&&h._readyToPlayCallback()},1E3)):p.a.Error("Parameter must be a URL to the sound, an Array of URLs (.mp3 & .ogg) or an ArrayBuffer of the sound.")}catch(F){p.a.Error("Unexpected error. Sound creation aborted."),this._scene.mainSoundTrack.removeSound(this)}}else this._scene.mainSoundTrack.addSound(this),
e.a.audioEngine.WarnedWebAudioUnsupported||(p.a.Error("Web Audio is not supported by your browser."),e.a.audioEngine.WarnedWebAudioUnsupported=!0),this._readyToPlayCallback&&window.setTimeout(function(){h._readyToPlayCallback&&h._readyToPlayCallback()},1E3)}Object.defineProperty(a.prototype,"currentTime",{get:function(){if(this._htmlAudioElement)return this._htmlAudioElement.currentTime;var a=this._startOffset;this.isPlaying&&e.a.audioEngine.audioContext&&(a+=e.a.audioEngine.audioContext.currentTime-
this._startTime);return a},enumerable:!1,configurable:!0});a.prototype.dispose=function(){e.a.audioEngine.canUseWebAudio&&(this.isPlaying&&this.stop(),this._isReadyToPlay=!1,-1===this.soundTrackId?this._scene.mainSoundTrack.removeSound(this):this._scene.soundTracks&&this._scene.soundTracks[this.soundTrackId].removeSound(this),this._soundGain&&(this._soundGain.disconnect(),this._soundGain=null),this._soundPanner&&(this._soundPanner.disconnect(),this._soundPanner=null),this._soundSource&&(this._soundSource.disconnect(),
this._soundSource=null),this._audioBuffer=null,this._htmlAudioElement&&(this._htmlAudioElement.pause(),this._htmlAudioElement.src="",document.body.removeChild(this._htmlAudioElement)),this._streamingSource&&this._streamingSource.disconnect(),this._connectedTransformNode&&this._registerFunc&&(this._connectedTransformNode.unregisterAfterWorldMatrixUpdate(this._registerFunc),this._connectedTransformNode=null))};a.prototype.isReady=function(){return this._isReadyToPlay};a.prototype._soundLoaded=function(a){var c=
this;e.a.audioEngine.audioContext&&e.a.audioEngine.audioContext.decodeAudioData(a,function(b){c._audioBuffer=b;c._isReadyToPlay=!0;c.autoplay&&c.play(0,c._offset,c._length);c._readyToPlayCallback&&c._readyToPlayCallback()},function(b){p.a.Error("Error while decoding audio data for: "+c.name+" / Error: "+b)})};a.prototype.setAudioBuffer=function(a){e.a.audioEngine.canUseWebAudio&&(this._audioBuffer=a,this._isReadyToPlay=!0)};a.prototype.updateOptions=function(a){var c,b,g,m,d,h,e,f,k;a&&(this.loop=
null!==(c=a.loop)&&void 0!==c?c:this.loop,this.maxDistance=null!==(b=a.maxDistance)&&void 0!==b?b:this.maxDistance,this.useCustomAttenuation=null!==(g=a.useCustomAttenuation)&&void 0!==g?g:this.useCustomAttenuation,this.rolloffFactor=null!==(m=a.rolloffFactor)&&void 0!==m?m:this.rolloffFactor,this.refDistance=null!==(d=a.refDistance)&&void 0!==d?d:this.refDistance,this.distanceModel=null!==(h=a.distanceModel)&&void 0!==h?h:this.distanceModel,this._playbackRate=null!==(e=a.playbackRate)&&void 0!==
e?e:this._playbackRate,this._length=null!==(f=a.length)&&void 0!==f?f:void 0,this._offset=null!==(k=a.offset)&&void 0!==k?k:void 0,this._updateSpatialParameters(),this.isPlaying&&(this._streaming&&this._htmlAudioElement?(this._htmlAudioElement.playbackRate=this._playbackRate,this._htmlAudioElement.loop!==this.loop&&(this._htmlAudioElement.loop=this.loop)):this._soundSource&&(this._soundSource.playbackRate.value=this._playbackRate,this._soundSource.loop!==this.loop&&(this._soundSource.loop=this.loop),
void 0!==this._offset&&this._soundSource.loopStart!==this._offset&&(this._soundSource.loopStart=this._offset),void 0!==this._length&&this._length!==this._soundSource.loopEnd&&(this._soundSource.loopEnd=(this._offset|0)+this._length))))};a.prototype._createSpatialParameters=function(){e.a.audioEngine.canUseWebAudio&&e.a.audioEngine.audioContext&&(this._scene.headphone&&(this._panningModel="HRTF"),(this._soundPanner=e.a.audioEngine.audioContext.createPanner())&&this._outputAudioNode&&(this._updateSpatialParameters(),
this._soundPanner.connect(this._outputAudioNode),this._inputAudioNode=this._soundPanner))};a.prototype._updateSpatialParameters=function(){this.spatialSound&&this._soundPanner&&(this.useCustomAttenuation?(this._soundPanner.distanceModel="linear",this._soundPanner.maxDistance=Number.MAX_VALUE,this._soundPanner.refDistance=1,this._soundPanner.rolloffFactor=1):(this._soundPanner.distanceModel=this.distanceModel,this._soundPanner.maxDistance=this.maxDistance,this._soundPanner.refDistance=this.refDistance,
this._soundPanner.rolloffFactor=this.rolloffFactor),this._soundPanner.panningModel=this._panningModel)};a.prototype.switchPanningModelToHRTF=function(){this._panningModel="HRTF";this._switchPanningModel()};a.prototype.switchPanningModelToEqualPower=function(){this._panningModel="equalpower";this._switchPanningModel()};a.prototype._switchPanningModel=function(){e.a.audioEngine.canUseWebAudio&&this.spatialSound&&this._soundPanner&&(this._soundPanner.panningModel=this._panningModel)};a.prototype.connectToSoundTrackAudioNode=
function(a){e.a.audioEngine.canUseWebAudio&&this._outputAudioNode&&(this._isOutputConnected&&this._outputAudioNode.disconnect(),this._outputAudioNode.connect(a),this._isOutputConnected=!0)};a.prototype.setDirectionalCone=function(a,c,b){c<a?p.a.Error("setDirectionalCone(): outer angle of the cone must be superior or equal to the inner angle."):(this._coneInnerAngle=a,this._coneOuterAngle=c,this._coneOuterGain=b,this._isDirectional=!0,this.isPlaying&&this.loop&&(this.stop(),this.play(0,this._offset,
this._length)))};Object.defineProperty(a.prototype,"directionalConeInnerAngle",{get:function(){return this._coneInnerAngle},set:function(a){a!=this._coneInnerAngle&&(this._coneOuterAngle<a?p.a.Error("directionalConeInnerAngle: outer angle of the cone must be superior or equal to the inner angle."):(this._coneInnerAngle=a,e.a.audioEngine.canUseWebAudio&&this.spatialSound&&this._soundPanner&&(this._soundPanner.coneInnerAngle=this._coneInnerAngle)))},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,
"directionalConeOuterAngle",{get:function(){return this._coneOuterAngle},set:function(a){a!=this._coneOuterAngle&&(a<this._coneInnerAngle?p.a.Error("directionalConeOuterAngle: outer angle of the cone must be superior or equal to the inner angle."):(this._coneOuterAngle=a,e.a.audioEngine.canUseWebAudio&&this.spatialSound&&this._soundPanner&&(this._soundPanner.coneOuterAngle=this._coneOuterAngle)))},enumerable:!1,configurable:!0});a.prototype.setPosition=function(a){this._position=a;e.a.audioEngine.canUseWebAudio&&
this.spatialSound&&this._soundPanner&&!isNaN(this._position.x)&&!isNaN(this._position.y)&&!isNaN(this._position.z)&&this._soundPanner.setPosition(this._position.x,this._position.y,this._position.z)};a.prototype.setLocalDirectionToMesh=function(a){this._localDirection=a;e.a.audioEngine.canUseWebAudio&&this._connectedTransformNode&&this.isPlaying&&this._updateDirection()};a.prototype._updateDirection=function(){if(this._connectedTransformNode&&this._soundPanner){var a=this._connectedTransformNode.getWorldMatrix();
a=u.e.TransformNormal(this._localDirection,a);a.normalize();this._soundPanner.setOrientation(a.x,a.y,a.z)}};a.prototype.updateDistanceFromListener=function(){if(e.a.audioEngine.canUseWebAudio&&this._connectedTransformNode&&this.useCustomAttenuation&&this._soundGain&&this._scene.activeCamera){var a=this._connectedTransformNode.getDistanceToCamera(this._scene.activeCamera);this._soundGain.gain.value=this._customAttenuationFunction(this._volume,a,this.maxDistance,this.refDistance,this.rolloffFactor)}};
a.prototype.setAttenuationFunction=function(a){this._customAttenuationFunction=a};a.prototype.play=function(a,c,b){var g=this;if(this._isReadyToPlay&&this._scene.audioEnabled&&e.a.audioEngine.audioContext)try{0>this._startOffset&&(a=-this._startOffset,this._startOffset=0);var m=a?e.a.audioEngine.audioContext.currentTime+a:e.a.audioEngine.audioContext.currentTime;this._soundSource&&this._streamingSource||!this.spatialSound||!this._soundPanner||(isNaN(this._position.x)||isNaN(this._position.y)||isNaN(this._position.z)||
this._soundPanner.setPosition(this._position.x,this._position.y,this._position.z),this._isDirectional&&(this._soundPanner.coneInnerAngle=this._coneInnerAngle,this._soundPanner.coneOuterAngle=this._coneOuterAngle,this._soundPanner.coneOuterGain=this._coneOuterGain,this._connectedTransformNode?this._updateDirection():this._soundPanner.setOrientation(this._localDirection.x,this._localDirection.y,this._localDirection.z)));if(this._streaming){if(this._streamingSource||(this._streamingSource=e.a.audioEngine.audioContext.createMediaElementSource(this._htmlAudioElement),
this._htmlAudioElement.onended=function(){g._onended()},this._htmlAudioElement.playbackRate=this._playbackRate),this._streamingSource.disconnect(),this._inputAudioNode&&this._streamingSource.connect(this._inputAudioNode),this._htmlAudioElement){var d=function(){if(e.a.audioEngine.unlocked){var b=g._htmlAudioElement.play();void 0!==b&&b.catch(function(b){e.a.audioEngine.lock();(g.loop||g.autoplay)&&e.a.audioEngine.onAudioUnlockedObservable.addOnce(function(){d()})})}else(g.loop||g.autoplay)&&e.a.audioEngine.onAudioUnlockedObservable.addOnce(function(){d()})};
d()}}else d=function(){if(e.a.audioEngine.audioContext){b=b||g._length;c=c||g._offset;if(g._soundSource){var d=g._soundSource;d.onended=function(){d.disconnect()}}g._soundSource=e.a.audioEngine.audioContext.createBufferSource();g._soundSource&&g._inputAudioNode&&(g._soundSource.buffer=g._audioBuffer,g._soundSource.connect(g._inputAudioNode),g._soundSource.loop=g.loop,void 0!==c&&(g._soundSource.loopStart=c),void 0!==b&&(g._soundSource.loopEnd=(c|0)+b),g._soundSource.playbackRate.value=g._playbackRate,
g._soundSource.onended=function(){g._onended()},m=a?e.a.audioEngine.audioContext.currentTime+a:e.a.audioEngine.audioContext.currentTime,g._soundSource.start(m,g.isPaused?g._startOffset%g._soundSource.buffer.duration:c?c:0,g.loop?void 0:b))}},"suspended"===e.a.audioEngine.audioContext.state?setTimeout(function(){"suspended"===e.a.audioEngine.audioContext.state?(e.a.audioEngine.lock(),(g.loop||g.autoplay)&&e.a.audioEngine.onAudioUnlockedObservable.addOnce(function(){d()})):d()},500):d();this._startTime=
m;this.isPlaying=!0;this.isPaused=!1}catch(v){p.a.Error("Error while trying to play audio: "+this.name+", "+v.message)}};a.prototype._onended=function(){this.isPlaying=!1;this._startOffset=0;if(this.onended)this.onended();this.onEndedObservable.notifyObservers(this)};a.prototype.stop=function(a){var c=this;this.isPlaying&&(this._streaming?(this._htmlAudioElement?(this._htmlAudioElement.pause(),0<this._htmlAudioElement.currentTime&&(this._htmlAudioElement.currentTime=0)):this._streamingSource.disconnect(),
this.isPlaying=!1):e.a.audioEngine.audioContext&&this._soundSource&&(this._soundSource.stop(a?e.a.audioEngine.audioContext.currentTime+a:e.a.audioEngine.audioContext.currentTime),this._soundSource.onended=function(){c.isPlaying=!1},this.isPaused||(this._startOffset=0)))};a.prototype.pause=function(){this.isPlaying&&(this.isPaused=!0,this._streaming?this._htmlAudioElement?this._htmlAudioElement.pause():this._streamingSource.disconnect():e.a.audioEngine.audioContext&&(this.stop(0),this._startOffset+=
e.a.audioEngine.audioContext.currentTime-this._startTime))};a.prototype.setVolume=function(a,c){e.a.audioEngine.canUseWebAudio&&this._soundGain&&(c&&e.a.audioEngine.audioContext?(this._soundGain.gain.cancelScheduledValues(e.a.audioEngine.audioContext.currentTime),this._soundGain.gain.setValueAtTime(this._soundGain.gain.value,e.a.audioEngine.audioContext.currentTime),this._soundGain.gain.linearRampToValueAtTime(a,e.a.audioEngine.audioContext.currentTime+c)):this._soundGain.gain.value=a);this._volume=
a};a.prototype.setPlaybackRate=function(a){this._playbackRate=a;this.isPlaying&&(this._streaming&&this._htmlAudioElement?this._htmlAudioElement.playbackRate=this._playbackRate:this._soundSource&&(this._soundSource.playbackRate.value=this._playbackRate))};a.prototype.getVolume=function(){return this._volume};a.prototype.attachToMesh=function(a){var c=this;this._connectedTransformNode&&this._registerFunc&&(this._connectedTransformNode.unregisterAfterWorldMatrixUpdate(this._registerFunc),this._registerFunc=
null);this._connectedTransformNode=a;this.spatialSound||(this.spatialSound=!0,this._createSpatialParameters(),this.isPlaying&&this.loop&&(this.stop(),this.play(0,this._offset,this._length)));this._onRegisterAfterWorldMatrixUpdate(this._connectedTransformNode);this._registerFunc=function(b){return c._onRegisterAfterWorldMatrixUpdate(b)};this._connectedTransformNode.registerAfterWorldMatrixUpdate(this._registerFunc)};a.prototype.detachFromMesh=function(){this._connectedTransformNode&&this._registerFunc&&
(this._connectedTransformNode.unregisterAfterWorldMatrixUpdate(this._registerFunc),this._connectedTransformNode=this._registerFunc=null)};a.prototype._onRegisterAfterWorldMatrixUpdate=function(a){this._positionInEmitterSpace?(a.worldMatrixFromCache.invertToRef(u.c.Matrix[0]),this.setPosition(u.c.Matrix[0].getTranslation())):a.getBoundingInfo?(a=a.getBoundingInfo(),this.setPosition(a.boundingSphere.centerWorld)):this.setPosition(a.absolutePosition);e.a.audioEngine.canUseWebAudio&&this._isDirectional&&
this.isPlaying&&this._updateDirection()};a.prototype.clone=function(){var d=this;if(this._streaming)return null;var c=function(){d._isReadyToPlay?(g._audioBuffer=d.getAudioBuffer(),g._isReadyToPlay=!0,g.autoplay&&g.play(0,d._offset,d._length)):window.setTimeout(c,300)},b={autoplay:this.autoplay,loop:this.loop,volume:this._volume,spatialSound:this.spatialSound,maxDistance:this.maxDistance,useCustomAttenuation:this.useCustomAttenuation,rolloffFactor:this.rolloffFactor,refDistance:this.refDistance,distanceModel:this.distanceModel},
g=new a(this.name+"_cloned",new ArrayBuffer(0),this._scene,null,b);this.useCustomAttenuation&&g.setAttenuationFunction(this._customAttenuationFunction);g.setPosition(this._position);g.setPlaybackRate(this._playbackRate);c();return g};a.prototype.getAudioBuffer=function(){return this._audioBuffer};a.prototype.getSoundSource=function(){return this._soundSource};a.prototype.getSoundGain=function(){return this._soundGain};a.prototype.serialize=function(){var a={name:this.name,url:this.name,autoplay:this.autoplay,
loop:this.loop,volume:this._volume,spatialSound:this.spatialSound,maxDistance:this.maxDistance,rolloffFactor:this.rolloffFactor,refDistance:this.refDistance,distanceModel:this.distanceModel,playbackRate:this._playbackRate,panningModel:this._panningModel,soundTrackId:this.soundTrackId,metadata:this.metadata};this.spatialSound&&(this._connectedTransformNode&&(a.connectedMeshId=this._connectedTransformNode.id),a.position=this._position.asArray(),a.refDistance=this.refDistance,a.distanceModel=this.distanceModel,
a.isDirectional=this._isDirectional,a.localDirectionToMesh=this._localDirection.asArray(),a.coneInnerAngle=this._coneInnerAngle,a.coneOuterAngle=this._coneOuterAngle,a.coneOuterGain=this._coneOuterGain);return a};a.Parse=function(d,c,b,g){var m=d.name;b=d.url?b+d.url:b+m;var e={autoplay:d.autoplay,loop:d.loop,volume:d.volume,spatialSound:d.spatialSound,maxDistance:d.maxDistance,rolloffFactor:d.rolloffFactor,refDistance:d.refDistance,distanceModel:d.distanceModel,playbackRate:d.playbackRate};if(g){var h=
function(){g._isReadyToPlay?(f._audioBuffer=g.getAudioBuffer(),f._isReadyToPlay=!0,f.autoplay&&f.play(0,f._offset,f._length)):window.setTimeout(h,300)};var f=new a(m,new ArrayBuffer(0),c,null,e);h()}else f=new a(m,b,c,function(){c._removePendingData(f)},e),c._addPendingData(f);d.position&&(m=u.e.FromArray(d.position),f.setPosition(m));d.isDirectional&&(f.setDirectionalCone(d.coneInnerAngle||360,d.coneOuterAngle||360,d.coneOuterGain||0),d.localDirectionToMesh&&(m=u.e.FromArray(d.localDirectionToMesh),
f.setLocalDirectionToMesh(m)));d.connectedMeshId&&(m=c.getMeshByID(d.connectedMeshId))&&f.attachToMesh(m);d.metadata&&(f.metadata=d.metadata);return f};a._SceneComponentInitialization=function(a){throw d.a.WarnImport("AudioSceneComponent");};return a}()},NHRz:function(l,n,f){f.d(n,"a",function(){return p.a});var k=f("qUIE");(function(){function b(b){this.SMOOTHING=.75;this.FFT_SIZE=512;this.BARGRAPHAMPLITUDE=256;this.DEBUGCANVASPOS={x:20,y:20};this.DEBUGCANVASSIZE={width:320,height:200};this._scene=
b;this._audioEngine=k.a.audioEngine;this._audioEngine.canUseWebAudio&&this._audioEngine.audioContext&&(this._webAudioAnalyser=this._audioEngine.audioContext.createAnalyser(),this._webAudioAnalyser.minDecibels=-140,this._webAudioAnalyser.maxDecibels=0,this._byteFreqs=new Uint8Array(this._webAudioAnalyser.frequencyBinCount),this._byteTime=new Uint8Array(this._webAudioAnalyser.frequencyBinCount),this._floatFreqs=new Float32Array(this._webAudioAnalyser.frequencyBinCount))}b.prototype.getFrequencyBinCount=
function(){return this._audioEngine.canUseWebAudio?this._webAudioAnalyser.frequencyBinCount:0};b.prototype.getByteFrequencyData=function(){this._audioEngine.canUseWebAudio&&(this._webAudioAnalyser.smoothingTimeConstant=this.SMOOTHING,this._webAudioAnalyser.fftSize=this.FFT_SIZE,this._webAudioAnalyser.getByteFrequencyData(this._byteFreqs));return this._byteFreqs};b.prototype.getByteTimeDomainData=function(){this._audioEngine.canUseWebAudio&&(this._webAudioAnalyser.smoothingTimeConstant=this.SMOOTHING,
this._webAudioAnalyser.fftSize=this.FFT_SIZE,this._webAudioAnalyser.getByteTimeDomainData(this._byteTime));return this._byteTime};b.prototype.getFloatFrequencyData=function(){this._audioEngine.canUseWebAudio&&(this._webAudioAnalyser.smoothingTimeConstant=this.SMOOTHING,this._webAudioAnalyser.fftSize=this.FFT_SIZE,this._webAudioAnalyser.getFloatFrequencyData(this._floatFreqs));return this._floatFreqs};b.prototype.drawDebugCanvas=function(){var b=this;if(this._audioEngine.canUseWebAudio&&(this._debugCanvas||
(this._debugCanvas=document.createElement("canvas"),this._debugCanvas.width=this.DEBUGCANVASSIZE.width,this._debugCanvas.height=this.DEBUGCANVASSIZE.height,this._debugCanvas.style.position="absolute",this._debugCanvas.style.top=this.DEBUGCANVASPOS.y+"px",this._debugCanvas.style.left=this.DEBUGCANVASPOS.x+"px",this._debugCanvasContext=this._debugCanvas.getContext("2d"),document.body.appendChild(this._debugCanvas),this._registerFunc=function(){b.drawDebugCanvas()},this._scene.registerBeforeRender(this._registerFunc)),
this._registerFunc&&this._debugCanvasContext)){var a=this.getByteFrequencyData();this._debugCanvasContext.fillStyle="rgb(0, 0, 0)";this._debugCanvasContext.fillRect(0,0,this.DEBUGCANVASSIZE.width,this.DEBUGCANVASSIZE.height);for(var c=0;c<this.getFrequencyBinCount();c++){var d=a[c]/this.BARGRAPHAMPLITUDE*this.DEBUGCANVASSIZE.height,e=this.DEBUGCANVASSIZE.height-d-1,h=this.DEBUGCANVASSIZE.width/this.getFrequencyBinCount(),f=c/this.getFrequencyBinCount()*360;this._debugCanvasContext.fillStyle="hsl("+
f+", 100%, 50%)";this._debugCanvasContext.fillRect(c*h,e,h,d)}}};b.prototype.stopDebugCanvas=function(){this._debugCanvas&&(this._registerFunc&&(this._scene.unregisterBeforeRender(this._registerFunc),this._registerFunc=null),document.body.removeChild(this._debugCanvas),this._debugCanvasContext=this._debugCanvas=null)};b.prototype.connectAudioNodes=function(b,a){this._audioEngine.canUseWebAudio&&(b.connect(this._webAudioAnalyser),this._webAudioAnalyser.connect(a))};b.prototype.dispose=function(){this._audioEngine.canUseWebAudio&&
this._webAudioAnalyser.disconnect()};return b})();var r=f("ps+7"),u=f("uyO6");k.a.AudioEngineFactory=function(b){return new e(b)};var e=function(){function b(b){var a=this;void 0===b&&(b=null);this._audioContext=null;this._audioContextInitialized=!1;this._muteButton=null;this.isOGGsupported=this.isMP3supported=this.WarnedWebAudioUnsupported=this.canUseWebAudio=!1;this.unlocked=!0;this.useCustomUnlockedButton=!1;this.onAudioUnlockedObservable=new r.a;this.onAudioLockedObservable=new r.a;this._tryToRun=
!1;this._onResize=function(){a._moveButtonToTopLeft()};if("undefined"!==typeof window.AudioContext||"undefined"!==typeof window.webkitAudioContext)window.AudioContext=window.AudioContext||window.webkitAudioContext,this.canUseWebAudio=!0;var g=document.createElement("audio");this._hostElement=b;try{g&&g.canPlayType&&(g.canPlayType('audio/mpeg; codecs="mp3"').replace(/^no$/,"")||g.canPlayType("audio/mp3").replace(/^no$/,""))&&(this.isMP3supported=!0)}catch(v){}try{g&&g.canPlayType&&g.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,
"")&&(this.isOGGsupported=!0)}catch(v){}}Object.defineProperty(b.prototype,"audioContext",{get:function(){this._audioContextInitialized?this.unlocked||this._muteButton||this._displayMuteButton():this._initializeAudioContext();return this._audioContext},enumerable:!1,configurable:!0});b.prototype.lock=function(){this._triggerSuspendedState()};b.prototype.unlock=function(){this._triggerRunningState()};b.prototype._resumeAudioContext=function(){var b;void 0!==this._audioContext.resume&&(b=this._audioContext.resume());
return b||Promise.resolve()};b.prototype._initializeAudioContext=function(){try{this.canUseWebAudio&&(this._audioContext=new AudioContext,this.masterGain=this._audioContext.createGain(),this.masterGain.gain.value=1,this.masterGain.connect(this._audioContext.destination),this._audioContextInitialized=!0,"running"===this._audioContext.state&&this._triggerRunningState())}catch(g){this.canUseWebAudio=!1,u.a.Error("Web Audio: "+g.message)}};b.prototype._triggerRunningState=function(){var b=this;this._tryToRun||
(this._tryToRun=!0,this._resumeAudioContext().then(function(){b._tryToRun=!1;b._muteButton&&b._hideMuteButton();b.unlocked=!0;b.onAudioUnlockedObservable.notifyObservers(b)}).catch(function(){b._tryToRun=!1;b.unlocked=!1}))};b.prototype._triggerSuspendedState=function(){this.unlocked=!1;this.onAudioLockedObservable.notifyObservers(this);this._displayMuteButton()};b.prototype._displayMuteButton=function(){var b=this;if(!this.useCustomUnlockedButton&&!this._muteButton){this._muteButton=document.createElement("BUTTON");
this._muteButton.className="babylonUnmuteIcon";this._muteButton.id="babylonUnmuteIconBtn";this._muteButton.title="Unmute";var a=".babylonUnmuteIcon { position: absolute; left: 20px; top: 20px; height: 40px; width: 60px; background-color: rgba(51,51,51,0.7); background-image: url("+(window.SVGSVGElement?"data:image/svg+xml;charset=UTF-8,%3Csvg%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2239%22%20height%3D%2232%22%20viewBox%3D%220%200%2039%2032%22%3E%3Cpath%20fill%3D%22white%22%20d%3D%22M9.625%2018.938l-0.031%200.016h-4.953q-0.016%200-0.031-0.016v-12.453q0-0.016%200.031-0.016h4.953q0.031%200%200.031%200.016v12.453zM12.125%207.688l8.719-8.703v27.453l-8.719-8.719-0.016-0.047v-9.938zM23.359%207.875l1.406-1.406%204.219%204.203%204.203-4.203%201.422%201.406-4.219%204.219%204.219%204.203-1.484%201.359-4.141-4.156-4.219%204.219-1.406-1.422%204.219-4.203z%22%3E%3C%2Fpath%3E%3C%2Fsvg%3E":
"https://cdn.babylonjs.com/Assets/audio.png")+");  background-size: 80%; background-repeat:no-repeat; background-position: center; background-position-y: 4px; border: none; outline: none; transition: transform 0.125s ease-out; cursor: pointer; z-index: 9999; } .babylonUnmuteIcon:hover { transform: scale(1.05) } .babylonUnmuteIcon:active { background-color: rgba(51,51,51,1) }",c=document.createElement("style");c.appendChild(document.createTextNode(a));document.getElementsByTagName("head")[0].appendChild(c);
document.body.appendChild(this._muteButton);this._moveButtonToTopLeft();this._muteButton.addEventListener("touchend",function(){b._triggerRunningState()},!0);this._muteButton.addEventListener("click",function(){b._triggerRunningState()},!0);window.addEventListener("resize",this._onResize)}};b.prototype._moveButtonToTopLeft=function(){this._hostElement&&this._muteButton&&(this._muteButton.style.top=this._hostElement.offsetTop+20+"px",this._muteButton.style.left=this._hostElement.offsetLeft+20+"px")};
b.prototype._hideMuteButton=function(){this._muteButton&&(document.body.removeChild(this._muteButton),this._muteButton=null)};b.prototype.dispose=function(){this.canUseWebAudio&&this._audioContextInitialized&&(this._connectedAnalyser&&this._audioContext&&(this._connectedAnalyser.stopDebugCanvas(),this._connectedAnalyser.dispose(),this.masterGain.disconnect(),this.masterGain.connect(this._audioContext.destination),this._connectedAnalyser=null),this.masterGain.gain.value=1);this.WarnedWebAudioUnsupported=
!1;this._hideMuteButton();window.removeEventListener("resize",this._onResize);this.onAudioUnlockedObservable.clear();this.onAudioLockedObservable.clear()};b.prototype.getGlobalVolume=function(){return this.canUseWebAudio&&this._audioContextInitialized?this.masterGain.gain.value:-1};b.prototype.setGlobalVolume=function(b){this.canUseWebAudio&&this._audioContextInitialized&&(this.masterGain.gain.value=b)};b.prototype.connectToAnalyser=function(b){this._connectedAnalyser&&this._connectedAnalyser.stopDebugCanvas();
this.canUseWebAudio&&this._audioContextInitialized&&this._audioContext&&(this._connectedAnalyser=b,this.masterGain.disconnect(),this._connectedAnalyser.connectAudioNodes(this.masterGain,this._audioContext.destination))};return b}(),p=f("K0AZ"),d=function(){function b(b,a){void 0===a&&(a={});this.id=-1;this._isInitialized=!1;this._scene=b;this.soundCollection=[];this._options=a;!this._options.mainTrack&&this._scene.soundTracks&&(this._scene.soundTracks.push(this),this.id=this._scene.soundTracks.length-
1)}b.prototype._initializeSoundTrackAudioGraph=function(){k.a.audioEngine.canUseWebAudio&&k.a.audioEngine.audioContext&&(this._outputAudioNode=k.a.audioEngine.audioContext.createGain(),this._outputAudioNode.connect(k.a.audioEngine.masterGain),this._options&&this._options.volume&&(this._outputAudioNode.gain.value=this._options.volume),this._isInitialized=!0)};b.prototype.dispose=function(){if(k.a.audioEngine&&k.a.audioEngine.canUseWebAudio){for(this._connectedAnalyser&&this._connectedAnalyser.stopDebugCanvas();this.soundCollection.length;)this.soundCollection[0].dispose();
this._outputAudioNode&&this._outputAudioNode.disconnect();this._outputAudioNode=null}};b.prototype.addSound=function(b){this._isInitialized||this._initializeSoundTrackAudioGraph();k.a.audioEngine.canUseWebAudio&&this._outputAudioNode&&b.connectToSoundTrackAudioNode(this._outputAudioNode);b.soundTrackId&&(-1===b.soundTrackId?this._scene.mainSoundTrack.removeSound(b):this._scene.soundTracks&&this._scene.soundTracks[b.soundTrackId].removeSound(b));this.soundCollection.push(b);b.soundTrackId=this.id};
b.prototype.removeSound=function(b){b=this.soundCollection.indexOf(b);-1!==b&&this.soundCollection.splice(b,1)};b.prototype.setVolume=function(b){k.a.audioEngine.canUseWebAudio&&this._outputAudioNode&&(this._outputAudioNode.gain.value=b)};b.prototype.switchPanningModelToHRTF=function(){if(k.a.audioEngine.canUseWebAudio)for(var b=0;b<this.soundCollection.length;b++)this.soundCollection[b].switchPanningModelToHRTF()};b.prototype.switchPanningModelToEqualPower=function(){if(k.a.audioEngine.canUseWebAudio)for(var b=
0;b<this.soundCollection.length;b++)this.soundCollection[b].switchPanningModelToEqualPower()};b.prototype.connectToAnalyser=function(b){this._connectedAnalyser&&this._connectedAnalyser.stopDebugCanvas();this._connectedAnalyser=b;k.a.audioEngine.canUseWebAudio&&this._outputAudioNode&&(this._outputAudioNode.disconnect(),this._connectedAnalyser.connectAudioNodes(this._outputAudioNode,k.a.audioEngine.masterGain))};return b}(),a=f("/SR9"),q=f("Yap0");l=f("tVVT");n=f("KbzI");var h=f("J2vy");n.a.AddParser(q.a.NAME_AUDIO,
function(b,a,c,d){var g=[];c.sounds=c.sounds||[];if(void 0!==b.sounds&&null!==b.sounds)for(var m=0,e=b.sounds.length;m<e;m++){var h=b.sounds[m];if(k.a.audioEngine.canUseWebAudio)if(h.url||(h.url=h.name),g[h.url])c.sounds.push(p.a.Parse(h,a,d,g[h.url]));else{var f=p.a.Parse(h,a,d);g[h.url]=f;c.sounds.push(f)}else c.sounds.push(new p.a(h.name,null,a))}});Object.defineProperty(l.a.prototype,"mainSoundTrack",{get:function(){var b=this._getComponent(q.a.NAME_AUDIO);b||(b=new c(this),this._addComponent(b));
this._mainSoundTrack||(this._mainSoundTrack=new d(this,{mainTrack:!0}));return this._mainSoundTrack},enumerable:!0,configurable:!0});l.a.prototype.getSoundByName=function(b){var a;for(a=0;a<this.mainSoundTrack.soundCollection.length;a++)if(this.mainSoundTrack.soundCollection[a].name===b)return this.mainSoundTrack.soundCollection[a];if(this.soundTracks)for(var c=0;c<this.soundTracks.length;c++)for(a=0;a<this.soundTracks[c].soundCollection.length;a++)if(this.soundTracks[c].soundCollection[a].name===
b)return this.soundTracks[c].soundCollection[a];return null};Object.defineProperty(l.a.prototype,"audioEnabled",{get:function(){var b=this._getComponent(q.a.NAME_AUDIO);b||(b=new c(this),this._addComponent(b));return b.audioEnabled},set:function(b){var a=this._getComponent(q.a.NAME_AUDIO);a||(a=new c(this),this._addComponent(a));b?a.enableAudio():a.disableAudio()},enumerable:!0,configurable:!0});Object.defineProperty(l.a.prototype,"headphone",{get:function(){var b=this._getComponent(q.a.NAME_AUDIO);
b||(b=new c(this),this._addComponent(b));return b.headphone},set:function(b){var a=this._getComponent(q.a.NAME_AUDIO);a||(a=new c(this),this._addComponent(a));b?a.switchAudioModeForHeadphones():a.switchAudioModeForNormalSpeakers()},enumerable:!0,configurable:!0});Object.defineProperty(l.a.prototype,"audioListenerPositionProvider",{get:function(){var b=this._getComponent(q.a.NAME_AUDIO);b||(b=new c(this),this._addComponent(b));return b.audioListenerPositionProvider},set:function(b){var a=this._getComponent(q.a.NAME_AUDIO);
a||(a=new c(this),this._addComponent(a));if("function"!==typeof b)throw Error("The value passed to [Scene.audioListenerPositionProvider] must be a function that returns a Vector3");a.audioListenerPositionProvider=b},enumerable:!0,configurable:!0});Object.defineProperty(l.a.prototype,"audioPositioningRefreshRate",{get:function(){var b=this._getComponent(q.a.NAME_AUDIO);b||(b=new c(this),this._addComponent(b));return b.audioPositioningRefreshRate},set:function(b){var a=this._getComponent(q.a.NAME_AUDIO);
a||(a=new c(this),this._addComponent(a));a.audioPositioningRefreshRate=b},enumerable:!0,configurable:!0});var c=function(){function b(b){this.name=q.a.NAME_AUDIO;this._audioEnabled=!0;this._headphone=!1;this.audioPositioningRefreshRate=500;this._audioListenerPositionProvider=null;this._cachedCameraDirection=new a.e;this._cachedCameraPosition=new a.e;this._lastCheck=0;this.scene=b;b.soundTracks=[];b.sounds=[]}Object.defineProperty(b.prototype,"audioEnabled",{get:function(){return this._audioEnabled},
enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"headphone",{get:function(){return this._headphone},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"audioListenerPositionProvider",{get:function(){return this._audioListenerPositionProvider},set:function(b){this._audioListenerPositionProvider=b},enumerable:!1,configurable:!0});b.prototype.register=function(){this.scene._afterRenderStage.registerStep(q.a.STEP_AFTERRENDER_AUDIO,this,this._afterRender)};b.prototype.rebuild=
function(){};b.prototype.serialize=function(b){b.sounds=[];if(this.scene.soundTracks)for(var a=0;a<this.scene.soundTracks.length;a++)for(var c=this.scene.soundTracks[a],g=0;g<c.soundCollection.length;g++)b.sounds.push(c.soundCollection[g].serialize())};b.prototype.addFromContainer=function(b){var a=this;b.sounds&&b.sounds.forEach(function(b){b.play();b.autoplay=!0;a.scene.mainSoundTrack.addSound(b)})};b.prototype.removeFromContainer=function(b,a){var c=this;void 0===a&&(a=!1);b.sounds&&b.sounds.forEach(function(b){b.stop();
b.autoplay=!1;c.scene.mainSoundTrack.removeSound(b);a&&b.dispose()})};b.prototype.dispose=function(){var b=this.scene;b._mainSoundTrack&&b.mainSoundTrack.dispose();if(b.soundTracks)for(var a=0;a<b.soundTracks.length;a++)b.soundTracks[a].dispose()};b.prototype.disableAudio=function(){var b=this.scene;this._audioEnabled=!1;k.a.audioEngine&&k.a.audioEngine.audioContext&&k.a.audioEngine.audioContext.suspend();var a;for(a=0;a<b.mainSoundTrack.soundCollection.length;a++)b.mainSoundTrack.soundCollection[a].pause();
if(b.soundTracks)for(a=0;a<b.soundTracks.length;a++)for(var c=0;c<b.soundTracks[a].soundCollection.length;c++)b.soundTracks[a].soundCollection[c].pause()};b.prototype.enableAudio=function(){var b=this.scene;this._audioEnabled=!0;k.a.audioEngine&&k.a.audioEngine.audioContext&&k.a.audioEngine.audioContext.resume();var a;for(a=0;a<b.mainSoundTrack.soundCollection.length;a++)b.mainSoundTrack.soundCollection[a].isPaused&&b.mainSoundTrack.soundCollection[a].play();if(b.soundTracks)for(a=0;a<b.soundTracks.length;a++)for(var c=
0;c<b.soundTracks[a].soundCollection.length;c++)b.soundTracks[a].soundCollection[c].isPaused&&b.soundTracks[a].soundCollection[c].play()};b.prototype.switchAudioModeForHeadphones=function(){var b=this.scene;this._headphone=!0;b.mainSoundTrack.switchPanningModelToHRTF();if(b.soundTracks)for(var a=0;a<b.soundTracks.length;a++)b.soundTracks[a].switchPanningModelToHRTF()};b.prototype.switchAudioModeForNormalSpeakers=function(){var b=this.scene;this._headphone=!1;b.mainSoundTrack.switchPanningModelToEqualPower();
if(b.soundTracks)for(var a=0;a<b.soundTracks.length;a++)b.soundTracks[a].switchPanningModelToEqualPower()};b.prototype._afterRender=function(){var c=h.a.Now;if(!(this._lastCheck&&c-this._lastCheck<this.audioPositioningRefreshRate)&&(this._lastCheck=c,c=this.scene,this._audioEnabled&&c._mainSoundTrack&&c.soundTracks&&(0!==c._mainSoundTrack.soundCollection.length||1!==c.soundTracks.length))){var d=k.a.audioEngine;if(d&&d.audioContext){if(this._audioListenerPositionProvider){var e=this._audioListenerPositionProvider();
e.x=e.x||0;e.y=e.y||0;e.z=e.z||0;d.audioContext.listener.setPosition(e.x,e.y,e.z)}else(e=c.activeCameras&&0<c.activeCameras.length?c.activeCameras[0]:c.activeCamera)?(this._cachedCameraPosition.equals(e.globalPosition)||(this._cachedCameraPosition.copyFrom(e.globalPosition),d.audioContext.listener.setPosition(e.globalPosition.x,e.globalPosition.y,e.globalPosition.z)),e.rigCameras&&0<e.rigCameras.length&&(e=e.rigCameras[0]),e=a.a.Invert(e.getViewMatrix()),e=a.e.TransformNormal(c.useRightHandedSystem?
b._CameraDirectionRH:b._CameraDirectionLH,e),e.normalize(),isNaN(e.x)||isNaN(e.y)||isNaN(e.z)||this._cachedCameraDirection.equals(e)||(this._cachedCameraDirection.copyFrom(e),d.audioContext.listener.setOrientation(e.x,e.y,e.z,0,1,0))):d.audioContext.listener.setPosition(0,0,0);for(d=0;d<c.mainSoundTrack.soundCollection.length;d++)e=c.mainSoundTrack.soundCollection[d],e.useCustomAttenuation&&e.updateDistanceFromListener();if(c.soundTracks)for(d=0;d<c.soundTracks.length;d++)for(var f=0;f<c.soundTracks[d].soundCollection.length;f++)e=
c.soundTracks[d].soundCollection[f],e.useCustomAttenuation&&e.updateDistanceFromListener()}}};b._CameraDirectionLH=new a.e(0,0,-1);b._CameraDirectionRH=new a.e(0,0,1);return b}();p.a._SceneComponentInitialization=function(b){var a=b._getComponent(q.a.NAME_AUDIO);a||(a=new c(b),b._addComponent(a))};f("DP2o")},Ql7q:function(l,n,f){f.d(n,"a",function(){return k});var k;(function(f){f[f.STEP=1]="STEP"})(k||(k={}))},TRuC:function(l,n,f){f.d(n,"a",function(){return k});var k=function(){function f(){var f=
this;this.delay=0;this.fadeInTime=300;this._millisecondsPerFrame=1E3/60;this._hovered=!1;this._hoverValue=0;this._ownerNode=null;this._update=function(){if(f._ownerNode)if(f._hoverValue+=f._hovered?f._millisecondsPerFrame:-f._millisecondsPerFrame,f._setAllVisibility(f._ownerNode,(f._hoverValue-f.delay)/f.fadeInTime),1<f._ownerNode.visibility)f._setAllVisibility(f._ownerNode,1),f._hoverValue=f.fadeInTime+f.delay;else{if(0>f._ownerNode.visibility&&(f._setAllVisibility(f._ownerNode,0),0>f._hoverValue)){f._hoverValue=
0;return}setTimeout(f._update,f._millisecondsPerFrame)}}}Object.defineProperty(f.prototype,"name",{get:function(){return"FadeInOut"},enumerable:!1,configurable:!0});f.prototype.init=function(){};f.prototype.attach=function(f){this._ownerNode=f;this._setAllVisibility(this._ownerNode,0)};f.prototype.detach=function(){this._ownerNode=null};f.prototype.fadeIn=function(f){this._hovered=f;this._update()};f.prototype._setAllVisibility=function(f,e){var k=this;f.visibility=e;f.getChildMeshes().forEach(function(d){k._setAllVisibility(d,
e)})};return f}()},UpUr:function(l,n,f){f.d(n,"a",function(){return k.a});f("8dKw");var k=f("mBE3");f("ks95");(function(){return function(){this.enableBlending=!1;this.blendingSpeed=.01;this.loopMode=k.a.ANIMATIONLOOPMODE_CYCLE}})();f("4SJX");f("eS5o");f("CkZi");f("Ql7q");f("E2tu")},ZXSw:function(l,n,f){f.d(n,"a",function(){return b});var k=f("oYeq"),r=f("/SR9"),u=f("Xeau"),e=f("JDGr"),p=f("bDcY"),d=f("u8y2"),a=f("e2Mr"),q=f("uyO6"),h=f("Dc3z"),c=f("WHS4"),b=function(b){function g(c){var g=b.call(this)||
this;g._scene=c||a.a.LastCreatedScene;c.actionManagers.push(g);return g}Object(k.d)(g,b);g.prototype.dispose=function(){for(var b=this._scene.actionManagers.indexOf(this),a=0;a<this.actions.length;a++){var c=this.actions[a];g.Triggers[c.trigger]--;0===g.Triggers[c.trigger]&&delete g.Triggers[c.trigger]}-1<b&&this._scene.actionManagers.splice(b,1)};g.prototype.getScene=function(){return this._scene};g.prototype.hasSpecificTriggers=function(b){for(var a=0;a<this.actions.length;a++)if(-1<b.indexOf(this.actions[a].trigger))return!0;
return!1};g.prototype.hasSpecificTriggers2=function(b,a){for(var c=0;c<this.actions.length;c++){var g=this.actions[c];if(b==g.trigger||a==g.trigger)return!0}return!1};g.prototype.hasSpecificTrigger=function(b,a){for(var c=0;c<this.actions.length;c++){var g=this.actions[c];if(g.trigger===b)if(a){if(a(g.getTriggerParameter()))return!0}else return!0}return!1};Object.defineProperty(g.prototype,"hasPointerTriggers",{get:function(){for(var b=0;b<this.actions.length;b++){var a=this.actions[b];if(a.trigger>=
g.OnPickTrigger&&a.trigger<=g.OnPointerOutTrigger)return!0}return!1},enumerable:!1,configurable:!0});Object.defineProperty(g.prototype,"hasPickTriggers",{get:function(){for(var b=0;b<this.actions.length;b++){var a=this.actions[b];if(a.trigger>=g.OnPickTrigger&&a.trigger<=g.OnPickUpTrigger)return!0}return!1},enumerable:!1,configurable:!0});g.prototype.registerAction=function(b){if(b.trigger===g.OnEveryFrameTrigger&&this.getScene().actionManager!==this)return q.a.Warn("OnEveryFrameTrigger can only be used with scene.actionManager"),
null;this.actions.push(b);g.Triggers[b.trigger]?g.Triggers[b.trigger]++:g.Triggers[b.trigger]=1;b._actionManager=this;b._prepare();return b};g.prototype.unregisterAction=function(b){var a=this.actions.indexOf(b);return-1!==a?(this.actions.splice(a,1),--g.Triggers[b.trigger],0===g.Triggers[b.trigger]&&delete g.Triggers[b.trigger],b._actionManager=null,!0):!1};g.prototype.processTrigger=function(b,a){for(var c=0;c<this.actions.length;c++){var d=this.actions[c];if(d.trigger===b){if(a&&(b===g.OnKeyUpTrigger||
b===g.OnKeyDownTrigger)){var e=d.getTriggerParameter();if(e&&e!==a.sourceEvent.keyCode){if(!e.toLowerCase)continue;e=e.toLowerCase();if(e!==a.sourceEvent.key&&String.fromCharCode(a.sourceEvent.charCode?a.sourceEvent.charCode:a.sourceEvent.keyCode).toLowerCase()!==e)continue}}d._executeCurrent(a)}}};g.prototype._getEffectiveTarget=function(b,a){a=a.split(".");for(var c=0;c<a.length-1;c++)b=b[a[c]];return b};g.prototype._getProperty=function(b){b=b.split(".");return b[b.length-1]};g.prototype.serialize=
function(b){b={children:[],name:b,type:3,properties:[]};for(var a=0;a<this.actions.length;a++){var c={type:0,children:[],name:g.GetTriggerName(this.actions[a].trigger),properties:[]},d=this.actions[a].triggerOptions;if(d&&"number"!==typeof d)if(d.parameter instanceof Node)c.properties.push(p.a._GetTargetProperty(d.parameter));else{var e={};h.a.DeepCopy(d.parameter,e,["mesh"]);d.parameter&&d.parameter.mesh&&(e._meshId=d.parameter.mesh.id);c.properties.push({name:"parameter",targetType:null,value:e})}this.actions[a].serialize(c);
b.children.push(c)}return b};g.Parse=function(b,a,h){var f=new g(h);null===a?h.actionManager=f:a.actionManager=f;var m=function(b,a,k,t,v){void 0===v&&(v=null);if(!b.detached){var q=[],x=null,p=null,l=b.combine&&0<b.combine.length;2===b.type?q.push(f):q.push(a);if(l){x=[];for(p=0;p<b.combine.length;p++)m(b.combine[p],g.NothingTrigger,k,t,x);q.push(x)}else for(l=0;l<b.properties.length;l++){var n=b.properties[l].value,y=b.properties[l].name,z=b.properties[l].targetType;if("target"===y)n=null!==z&&
"SceneProperties"===z?x=h:x=h.getNodeByName(n);else if("parent"===y)n=h.getNodeByName(n);else if("sound"===y)h.getSoundByName&&(n=h.getSoundByName(n));else if("propertyPath"!==y)if(2===b.type&&"operator"===y)n=e.b[n];else if(z=n,n=x,y="value"===y?p:null,null===y)n=parseFloat(z),n="true"===z||"false"===z?"true"===z:isNaN(n)?z:n;else{y=y.split(".");z=z.split(",");for(var B=0;B<y.length;B++)n=n[y[B]];if("boolean"===typeof n)n="true"===z[0];else if("string"===typeof n)n=z[0];else{y=[];for(B=0;B<z.length;B++)y.push(parseFloat(z[B]));
n=n instanceof r.e?r.e.FromArray(y):n instanceof r.f?r.f.FromArray(y):n instanceof u.a?u.a.FromArray(y):n instanceof u.b?u.b.FromArray(y):parseFloat(z[0])}}else p=n;q.push(n)}null===v?q.push(k):q.push(null);"InterpolateValueAction"===b.name&&(q[q.length-1]=q[q.length-2],q[q.length-2]=k);(x=c.a.GetClass("BABYLON."+b.name))?(x=Object.create(x.prototype),x.constructor.apply(x,q),q=x):q=void 0;q instanceof e.a&&null!==k&&(x=new d.a(a,k),t?t.then(x):f.registerAction(x),t=x);null===v?q instanceof e.a?(k=
q,q=t):(k=null,t?t.then(q):f.registerAction(q)):v.push(q);for(l=0;l<b.children.length;l++)m(b.children[l],a,k,q,null)}};for(a=0;a<b.children.length;a++){var k=b.children[a];if(0<k.properties.length){var t=k.properties[0].value;t=null===k.properties[0].targetType?t:h.getMeshByName(t);t._meshId&&(t.mesh=h.getMeshByID(t._meshId));t={trigger:g[k.name],parameter:t}}else t=g[k.name];for(var v=0;v<k.children.length;v++)k.detached||m(k.children[v],t,null,null)}};g.GetTriggerName=function(b){switch(b){case 0:return"NothingTrigger";
case 1:return"OnPickTrigger";case 2:return"OnLeftPickTrigger";case 3:return"OnRightPickTrigger";case 4:return"OnCenterPickTrigger";case 5:return"OnPickDownTrigger";case 6:return"OnPickUpTrigger";case 7:return"OnLongPressTrigger";case 8:return"OnPointerOverTrigger";case 9:return"OnPointerOutTrigger";case 10:return"OnEveryFrameTrigger";case 11:return"OnIntersectionEnterTrigger";case 12:return"OnIntersectionExitTrigger";case 13:return"OnKeyDownTrigger";case 14:return"OnKeyUpTrigger";case 15:return"OnPickOutTrigger";
default:return""}};g.NothingTrigger=0;g.OnPickTrigger=1;g.OnLeftPickTrigger=2;g.OnRightPickTrigger=3;g.OnCenterPickTrigger=4;g.OnPickDownTrigger=5;g.OnDoublePickTrigger=6;g.OnPickUpTrigger=7;g.OnPickOutTrigger=16;g.OnLongPressTrigger=8;g.OnPointerOverTrigger=9;g.OnPointerOutTrigger=10;g.OnEveryFrameTrigger=11;g.OnIntersectionEnterTrigger=12;g.OnIntersectionExitTrigger=13;g.OnKeyDownTrigger=14;g.OnKeyUpTrigger=15;return g}(f("fZF6").a)},bDcY:function(l,n,f){f.d(n,"a",function(){return e});var k=f("ps+7"),
r=f("/SR9"),u=f("Xeau");l=f("WHS4");var e=function(){function e(d,a){this.triggerOptions=d;this.onBeforeExecuteObservable=new k.a;d.parameter?(this.trigger=d.trigger,this._triggerParameter=d.parameter):this.trigger=d.trigger?d.trigger:d;this._nextActiveAction=this;this._condition=a}e.prototype._prepare=function(){};e.prototype.getTriggerParameter=function(){return this._triggerParameter};e.prototype._executeCurrent=function(d){if(this._nextActiveAction._condition){var a=this._nextActiveAction._condition,
e=this._actionManager.getScene().getRenderId();if(a._evaluationId===e){if(!a._currentResult)return}else{a._evaluationId=e;if(!a.isValid()){a._currentResult=!1;return}a._currentResult=!0}}this.onBeforeExecuteObservable.notifyObservers(this);this._nextActiveAction.execute(d);this.skipToNextActiveAction()};e.prototype.execute=function(d){};e.prototype.skipToNextActiveAction=function(){this._nextActiveAction._child?(this._nextActiveAction._child._actionManager||(this._nextActiveAction._child._actionManager=
this._actionManager),this._nextActiveAction=this._nextActiveAction._child):this._nextActiveAction=this};e.prototype.then=function(d){this._child=d;d._actionManager=this._actionManager;d._prepare();return d};e.prototype._getProperty=function(d){return this._actionManager._getProperty(d)};e.prototype._getEffectiveTarget=function(d,a){return this._actionManager._getEffectiveTarget(d,a)};e.prototype.serialize=function(d){};e.prototype._serialize=function(d,a){d={type:1,children:[],name:d.name,properties:d.properties||
[]};this._child&&this._child.serialize(d);if(this._condition){var e=this._condition.serialize();e.children.push(d);a&&a.children.push(e);return e}a&&a.children.push(d);return d};e._SerializeValueAsString=function(d){return"number"===typeof d?d.toString():"boolean"===typeof d?d?"true":"false":d instanceof r.d?d.x+", "+d.y:d instanceof r.e?d.x+", "+d.y+", "+d.z:d instanceof u.a?d.r+", "+d.g+", "+d.b:d instanceof u.b?d.r+", "+d.g+", "+d.b+", "+d.a:d};e._GetTargetProperty=function(d){return{name:"target",
targetType:d._isMesh?"MeshProperties":d._isLight?"LightProperties":d._isCamera?"CameraProperties":"SceneProperties",value:d._isScene?"Scene":d.name}};return e}();l.a.RegisteredTypes["BABYLON.Action"]=e},eS5o:function(l,n,f){f.d(n,"a",function(){return q});var k=f("/SR9");l=f("Xeau");var r=f("mBE3");f=f("/sJ5");var u=Object.freeze(new k.b(0,0,0,0)),e=Object.freeze(k.e.Zero()),p=Object.freeze(k.d.Zero()),d=Object.freeze(f.a.Zero()),a=Object.freeze(l.a.Black()),q=function(){function h(a,b,g,d){var c=
this;this._events=[];this._currentFrame=0;this._originalValue=[];this._originalBlendValue=null;this._offsetsCache={};this._highLimitsCache={};this._stopped=!1;this._blendingFactor=0;this._directTarget=this._currentActiveTarget=this._currentValue=null;this._targetPath="";this._weight=1;this._previousRatio=this._previousDelay=this._ratioOffset=0;this._targetIsArray=!1;this._animation=b;this._target=a;this._scene=g;this._host=d;this._activeTargets=[];b._runtimeAnimations.push(this);this._animationState=
{key:0,repeatCount:0,loopMode:this._getCorrectLoopMode()};this._animation.dataType===r.a.ANIMATIONTYPE_MATRIX&&(this._animationState.workValue=k.a.Zero());this._keys=this._animation.getKeys();this._minFrame=this._keys[0].frame;this._maxFrame=this._keys[this._keys.length-1].frame;this._minValue=this._keys[0].value;this._maxValue=this._keys[this._keys.length-1].value;0!==this._minFrame&&this._keys.splice(0,0,{frame:0,value:this._minValue});if(this._target instanceof Array){d=g=0;for(var e=this._target;d<
e.length;d++)this._preparePath(e[d],g),this._getOriginalValues(g),g++;this._targetIsArray=!0}else this._preparePath(this._target),this._getOriginalValues(),this._targetIsArray=!1,this._directTarget=this._activeTargets[0];(b=b.getEvents())&&0<b.length&&b.forEach(function(b){c._events.push(b._clone())});this._enableBlending=a&&a.animationPropertiesOverride?a.animationPropertiesOverride.enableBlending:this._animation.enableBlending}Object.defineProperty(h.prototype,"currentFrame",{get:function(){return this._currentFrame},
enumerable:!1,configurable:!0});Object.defineProperty(h.prototype,"weight",{get:function(){return this._weight},enumerable:!1,configurable:!0});Object.defineProperty(h.prototype,"currentValue",{get:function(){return this._currentValue},enumerable:!1,configurable:!0});Object.defineProperty(h.prototype,"targetPath",{get:function(){return this._targetPath},enumerable:!1,configurable:!0});Object.defineProperty(h.prototype,"target",{get:function(){return this._currentActiveTarget},enumerable:!1,configurable:!0});
Object.defineProperty(h.prototype,"isAdditive",{get:function(){return this._host&&this._host.isAdditive},enumerable:!1,configurable:!0});h.prototype._preparePath=function(a,b){void 0===b&&(b=0);var c=this._animation.targetPropertyPath;if(1<c.length){a=a[c[0]];for(var d=1;d<c.length-1;d++)a=a[c[d]];this._targetPath=c[c.length-1];this._activeTargets[b]=a}else this._targetPath=c[0],this._activeTargets[b]=a};Object.defineProperty(h.prototype,"animation",{get:function(){return this._animation},enumerable:!1,
configurable:!0});h.prototype.reset=function(a){void 0===a&&(a=!1);if(a)if(this._target instanceof Array)for(var b=a=0,c=this._target;b<c.length;b++){var d=c[b];void 0!==this._originalValue[a]&&this._setValue(d,this._activeTargets[a],this._originalValue[a],-1,a);a++}else void 0!==this._originalValue[0]&&this._setValue(this._target,this._directTarget,this._originalValue[0],-1,0);this._offsetsCache={};this._highLimitsCache={};for(a=this._blendingFactor=this._currentFrame=0;a<this._events.length;a++)this._events[a].isDone=
!1};h.prototype.isStopped=function(){return this._stopped};h.prototype.dispose=function(){var a=this._animation.runtimeAnimations.indexOf(this);-1<a&&this._animation.runtimeAnimations.splice(a,1)};h.prototype.setValue=function(a,b){if(this._targetIsArray)for(var c=0;c<this._target.length;c++)this._setValue(this._target[c],this._activeTargets[c],a,b,c);else this._setValue(this._target,this._directTarget,a,b,0)};h.prototype._getOriginalValues=function(a){void 0===a&&(a=0);var b=this._activeTargets[a];
b=b.getRestPose&&"_matrix"===this._targetPath?b.getRestPose():b[this._targetPath];this._originalValue[a]=b&&b.clone?b.clone():b};h.prototype._setValue=function(a,b,g,d,e){this._currentActiveTarget=b;this._weight=d;if(this._enableBlending&&1>=this._blendingFactor){if(!this._originalBlendValue){var c=b[this._targetPath];this._originalBlendValue=c.clone?c.clone():c}this._originalBlendValue.m?r.a.AllowMatrixDecomposeForInterpolation?this._currentValue?k.a.DecomposeLerpToRef(this._originalBlendValue,g,
this._blendingFactor,this._currentValue):this._currentValue=k.a.DecomposeLerp(this._originalBlendValue,g,this._blendingFactor):this._currentValue?k.a.LerpToRef(this._originalBlendValue,g,this._blendingFactor,this._currentValue):this._currentValue=k.a.Lerp(this._originalBlendValue,g,this._blendingFactor):this._currentValue=r.a._UniversalLerp(this._originalBlendValue,g,this._blendingFactor);this._blendingFactor+=a&&a.animationPropertiesOverride?a.animationPropertiesOverride.blendingSpeed:this._animation.blendingSpeed}else this._currentValue=
g;-1!==d?this._scene._registerTargetForLateAnimationBinding(this,this._originalValue[e]):b[this._targetPath]=this._currentValue;a.markAsDirty&&a.markAsDirty(this._animation.targetProperty)};h.prototype._getCorrectLoopMode=function(){return this._target&&this._target.animationPropertiesOverride?this._target.animationPropertiesOverride.loopMode:this._animation.loopMode};h.prototype.goToFrame=function(a){var b=this._animation.getKeys();a<b[0].frame?a=b[0].frame:a>b[b.length-1].frame&&(a=b[b.length-1].frame);
b=this._events;if(b.length)for(var c=0;c<b.length;c++)b[c].onlyOnce||(b[c].isDone=b[c].frame<a);this._currentFrame=a;a=this._animation._interpolate(a,this._animationState);this.setValue(a,-1)};h.prototype._prepareForSpeedRatioChange=function(a){this._ratioOffset=this._previousRatio-this._previousDelay*this._animation.framePerSecond*a/1E3};h.prototype.animate=function(c,b,g,h,f,k){void 0===k&&(k=-1);var m=this._animation,t=m.targetPropertyPath;if(!t||1>t.length)return this._stopped=!0,!1;t=!0;if(b<
this._minFrame||b>this._maxFrame)b=this._minFrame;if(g<this._minFrame||g>this._maxFrame)g=this._maxFrame;var q=g-b;f=c*m.framePerSecond*f/1E3+this._ratioOffset;var v=0;this._previousDelay=c;this._previousRatio=f;if(!h&&g>=b&&f>=q)t=!1,v=m._getKeyValue(this._maxValue);else if(!h&&b>=g&&f<=q)t=!1,v=m._getKeyValue(this._minValue);else if(this._animationState.loopMode!==r.a.ANIMATIONLOOPMODE_CYCLE){var l=g.toString()+b.toString();if(!this._offsetsCache[l]){this._animationState.repeatCount=0;this._animationState.loopMode=
r.a.ANIMATIONLOOPMODE_CYCLE;v=m._interpolate(b,this._animationState);c=m._interpolate(g,this._animationState);this._animationState.loopMode=this._getCorrectLoopMode();switch(m.dataType){case r.a.ANIMATIONTYPE_FLOAT:this._offsetsCache[l]=c-v;break;case r.a.ANIMATIONTYPE_QUATERNION:this._offsetsCache[l]=c.subtract(v);break;case r.a.ANIMATIONTYPE_VECTOR3:this._offsetsCache[l]=c.subtract(v);case r.a.ANIMATIONTYPE_VECTOR2:this._offsetsCache[l]=c.subtract(v);case r.a.ANIMATIONTYPE_SIZE:this._offsetsCache[l]=
c.subtract(v);case r.a.ANIMATIONTYPE_COLOR3:this._offsetsCache[l]=c.subtract(v)}this._highLimitsCache[l]=c}v=this._highLimitsCache[l];l=this._offsetsCache[l]}if(void 0===l)switch(m.dataType){case r.a.ANIMATIONTYPE_FLOAT:l=0;break;case r.a.ANIMATIONTYPE_QUATERNION:l=u;break;case r.a.ANIMATIONTYPE_VECTOR3:l=e;break;case r.a.ANIMATIONTYPE_VECTOR2:l=p;break;case r.a.ANIMATIONTYPE_SIZE:l=d;break;case r.a.ANIMATIONTYPE_COLOR3:l=a}this._host&&this._host.syncRoot?(c=this._host.syncRoot,g=b+(c.masterFrame-
c.fromFrame)/(c.toFrame-c.fromFrame)*(g-b)):g=t&&0!==q?b+f%q:g;c=this._events;if(0<q&&this.currentFrame>g||0>q&&this.currentFrame<g)if(this._onLoop(),c.length)for(h=0;h<c.length;h++)c[h].onlyOnce||(c[h].isDone=!1);this._currentFrame=g;this._animationState.repeatCount=0===q?0:f/q>>0;this._animationState.highLimitValue=v;this._animationState.offsetValue=l;m=m._interpolate(g,this._animationState);this.setValue(m,k);if(c.length)for(h=0;h<c.length;h++)if(0<q&&g>=c[h].frame&&c[h].frame>=b||0>q&&g<=c[h].frame&&
c[h].frame<=b)k=c[h],k.isDone||(k.onlyOnce&&(c.splice(h,1),h--),k.isDone=!0,k.action(g));t||(this._stopped=!0);return t};return h}()},fZF6:function(l,n,f){f.d(n,"a",function(){return k});var k=function(){function f(){this.hoverCursor="";this.actions=[];this.isRecursive=!1}Object.defineProperty(f,"HasTriggers",{get:function(){for(var k in f.Triggers)if(f.Triggers.hasOwnProperty(k))return!0;return!1},enumerable:!1,configurable:!0});Object.defineProperty(f,"HasPickTriggers",{get:function(){for(var k in f.Triggers)if(f.Triggers.hasOwnProperty(k)){var e=
parseInt(k);if(1<=e&&7>=e)return!0}return!1},enumerable:!1,configurable:!0});f.HasSpecificTrigger=function(k){for(var e in f.Triggers)if(f.Triggers.hasOwnProperty(e)&&parseInt(e)===k)return!0;return!1};f.Triggers={};return f}()},ks95:function(l,n,f){f.d(n,"a",function(){return p});var k=f("mBE3"),r=f("ps+7"),u=f("e2Mr");f("8dKw");var e=function(){function d(){}d.prototype.getClassName=function(){return"TargetedAnimation"};d.prototype.serialize=function(){var a={};a.animation=this.animation.serialize();
a.targetId=this.target.id;return a};return d}(),p=function(){function d(a,d){void 0===d&&(d=null);this.name=a;this._targetedAnimations=[];this._animatables=[];this._from=Number.MAX_VALUE;this._to=-Number.MAX_VALUE;this._speedRatio=1;this._isAdditive=this._loopAnimation=!1;this.onAnimationEndObservable=new r.a;this.onAnimationLoopObservable=new r.a;this.onAnimationGroupLoopObservable=new r.a;this.onAnimationGroupEndObservable=new r.a;this.onAnimationGroupPauseObservable=new r.a;this.onAnimationGroupPlayObservable=
new r.a;this._scene=d||u.a.LastCreatedScene;this.uniqueId=this._scene.getUniqueId();this._scene.addAnimationGroup(this)}Object.defineProperty(d.prototype,"from",{get:function(){return this._from},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"to",{get:function(){return this._to},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"isStarted",{get:function(){return this._isStarted},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"isPlaying",{get:function(){return this._isStarted&&
!this._isPaused},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"speedRatio",{get:function(){return this._speedRatio},set:function(a){if(this._speedRatio!==a)for(this._speedRatio=a,a=0;a<this._animatables.length;a++)this._animatables[a].speedRatio=this._speedRatio},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"loopAnimation",{get:function(){return this._loopAnimation},set:function(a){if(this._loopAnimation!==a)for(this._loopAnimation=a,a=0;a<this._animatables.length;a++)this._animatables[a].loopAnimation=
this._loopAnimation},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"isAdditive",{get:function(){return this._isAdditive},set:function(a){if(this._isAdditive!==a)for(this._isAdditive=a,a=0;a<this._animatables.length;a++)this._animatables[a].isAdditive=this._isAdditive},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"targetedAnimations",{get:function(){return this._targetedAnimations},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"animatables",
{get:function(){return this._animatables},enumerable:!1,configurable:!0});Object.defineProperty(d.prototype,"children",{get:function(){return this._targetedAnimations},enumerable:!1,configurable:!0});d.prototype.addTargetedAnimation=function(a,d){var h=new e;h.animation=a;h.target=d;a=a.getKeys();this._from>a[0].frame&&(this._from=a[0].frame);this._to<a[a.length-1].frame&&(this._to=a[a.length-1].frame);this._targetedAnimations.push(h);return h};d.prototype.normalize=function(a,d){void 0===a&&(a=null);
void 0===d&&(d=null);null==a&&(a=this._from);null==d&&(d=this._to);for(var e=0;e<this._targetedAnimations.length;e++){var c=this._targetedAnimations[e].animation.getKeys(),b=c[0],g=c[c.length-1];b.frame>a&&(b={frame:a,value:b.value,inTangent:b.inTangent,outTangent:b.outTangent,interpolation:b.interpolation},c.splice(0,0,b));g.frame<d&&(b={frame:d,value:g.value,inTangent:g.inTangent,outTangent:g.outTangent,interpolation:g.interpolation},c.push(b))}this._from=a;this._to=d;return this};d.prototype._processLoop=
function(a,d,e){var c=this;a.onAnimationLoop=function(){c.onAnimationLoopObservable.notifyObservers(d);c._animationLoopFlags[e]||(c._animationLoopFlags[e]=!0,c._animationLoopCount++,c._animationLoopCount===c._targetedAnimations.length&&(c.onAnimationGroupLoopObservable.notifyObservers(c),c._animationLoopCount=0,c._animationLoopFlags=[]))}};d.prototype.start=function(a,d,e,c,b){var g=this;void 0===a&&(a=!1);void 0===d&&(d=1);if(this._isStarted||0===this._targetedAnimations.length)return this;this._loopAnimation=
a;this._animationLoopCount=0;this._animationLoopFlags=[];for(var f=function(){var f=h._targetedAnimations[k],m=h._scene.beginDirectAnimation(f.target,[f.animation],void 0!==e?e:h._from,void 0!==c?c:h._to,a,d,void 0,void 0,void 0!==b?b:h._isAdditive);m.onAnimationEnd=function(){g.onAnimationEndObservable.notifyObservers(f);g._checkAnimationGroupEnded(m)};h._processLoop(m,f,k);h._animatables.push(m)},h=this,k=0;k<this._targetedAnimations.length;k++)f();this._speedRatio=d;void 0!==e&&void 0!==c&&(e<
c&&0>this._speedRatio?(f=c,c=e,e=f):e>c&&0<this._speedRatio&&(this._speedRatio=-d));this._isStarted=!0;this._isPaused=!1;this.onAnimationGroupPlayObservable.notifyObservers(this);return this};d.prototype.pause=function(){if(!this._isStarted)return this;this._isPaused=!0;for(var a=0;a<this._animatables.length;a++)this._animatables[a].pause();this.onAnimationGroupPauseObservable.notifyObservers(this);return this};d.prototype.play=function(a){this.isStarted&&this._animatables.length===this._targetedAnimations.length?
(void 0!==a&&(this.loopAnimation=a),this.restart()):(this.stop(),this.start(a,this._speedRatio));this._isPaused=!1;return this};d.prototype.reset=function(){if(!this._isStarted)return this.play(),this.goToFrame(0),this.stop(),this;for(var a=0;a<this._animatables.length;a++)this._animatables[a].reset();return this};d.prototype.restart=function(){if(!this._isStarted)return this;for(var a=0;a<this._animatables.length;a++)this._animatables[a].restart();this.onAnimationGroupPlayObservable.notifyObservers(this);
return this};d.prototype.stop=function(){if(!this._isStarted)return this;for(var a=this._animatables.slice(),d=0;d<a.length;d++)a[d].stop();this._isStarted=!1;return this};d.prototype.setWeightForAllAnimatables=function(a){for(var d=0;d<this._animatables.length;d++)this._animatables[d].weight=a;return this};d.prototype.syncAllAnimationsWith=function(a){for(var d=0;d<this._animatables.length;d++)this._animatables[d].syncWith(a);return this};d.prototype.goToFrame=function(a){if(!this._isStarted)return this;
for(var d=0;d<this._animatables.length;d++)this._animatables[d].goToFrame(a);return this};d.prototype.dispose=function(){this._targetedAnimations=[];this._animatables=[];var a=this._scene.animationGroups.indexOf(this);-1<a&&this._scene.animationGroups.splice(a,1);this.onAnimationEndObservable.clear();this.onAnimationGroupEndObservable.clear();this.onAnimationGroupPauseObservable.clear();this.onAnimationGroupPlayObservable.clear();this.onAnimationLoopObservable.clear();this.onAnimationGroupLoopObservable.clear()};
d.prototype._checkAnimationGroupEnded=function(a){a=this._animatables.indexOf(a);-1<a&&this._animatables.splice(a,1);0===this._animatables.length&&(this._isStarted=!1,this.onAnimationGroupEndObservable.notifyObservers(this))};d.prototype.clone=function(a,e){a=new d(a||this.name,this._scene);for(var f=0,c=this._targetedAnimations;f<c.length;f++){var b=c[f];a.addTargetedAnimation(b.animation.clone(),e?e(b.target):b.target)}return a};d.prototype.serialize=function(){var a={};a.name=this.name;a.from=
this.from;a.to=this.to;a.targetedAnimations=[];for(var d=0;d<this.targetedAnimations.length;d++)a.targetedAnimations[d]=this.targetedAnimations[d].serialize();return a};d.Parse=function(a,e){for(var f=new d(a.name,e),c=0;c<a.targetedAnimations.length;c++){var b=a.targetedAnimations[c],g=k.a.Parse(b.animation),m=b.targetId;"influence"===b.animation.property?(b=e.getMorphTargetById(m))&&f.addTargetedAnimation(g,b):(b=e.getNodeByID(m),null!=b&&f.addTargetedAnimation(g,b))}null!==a.from&&null!==a.to&&
f.normalize(a.from,a.to);return f};d.MakeAnimationAdditive=function(a,d,e,c,b){void 0===d&&(d=0);void 0===c&&(c=!1);var g=a;c&&(g=a.clone(b||g.name));a=g.targetedAnimations;for(c=0;c<a.length;c++)k.a.MakeAnimationAdditive(a[c].animation,d,e);g.isAdditive=!0;return g};d.prototype.getClassName=function(){return"AnimationGroup"};d.prototype.toString=function(a){var d="Name: "+this.name;d+=", type: "+this.getClassName();a&&(d+=", from: "+this._from,d+=", to: "+this._to,d+=", isStarted: "+this._isStarted,
d+=", speedRatio: "+this._speedRatio,d+=", targetedAnimations length: "+this._targetedAnimations.length,d+=", animatables length: "+this._animatables);return d};return d}()},mBE3:function(l,n,f){f.d(n,"a",function(){return h});var k=f("/SR9"),r=f("Xeau"),u=f("sH6m"),e=f("ADVu");l=f("WHS4");var p=f("Ql7q"),d=f("E2tu");n=f("Ufda");var a=f("/sJ5"),q=f("Ksm9");(function(){return function(){}})();var h=function(){function c(b,a,d,e,f,h){this.name=b;this.targetProperty=a;this.framePerSecond=d;this.dataType=
e;this.loopMode=f;this.enableBlending=h;this._runtimeAnimations=[];this._events=[];this.blendingSpeed=.01;this._ranges={};this.targetPropertyPath=a.split(".");this.dataType=e;this.loopMode=void 0===f?c.ANIMATIONLOOPMODE_CYCLE:f}c._PrepareAnimation=function(b,g,d,e,f,h,l,p){var m=void 0;!isNaN(parseFloat(f))&&isFinite(f)?m=c.ANIMATIONTYPE_FLOAT:f instanceof k.b?m=c.ANIMATIONTYPE_QUATERNION:f instanceof k.e?m=c.ANIMATIONTYPE_VECTOR3:f instanceof k.d?m=c.ANIMATIONTYPE_VECTOR2:f instanceof r.a?m=c.ANIMATIONTYPE_COLOR3:
f instanceof r.b?m=c.ANIMATIONTYPE_COLOR4:f instanceof a.a&&(m=c.ANIMATIONTYPE_SIZE);if(void 0==m)return null;b=new c(b,g,d,m,l);b.setKeys([{frame:0,value:f},{frame:e,value:h}]);void 0!==p&&b.setEasingFunction(p);return b};c.CreateAnimation=function(a,g,d,e){a=new c(a+"Animation",a,d,g,c.ANIMATIONLOOPMODE_CONSTANT);a.setEasingFunction(e);return a};c.CreateAndStartAnimation=function(a,g,d,e,f,h,k,l,p,n){return(a=c._PrepareAnimation(a,d,e,f,h,k,l,p))?g.getScene().beginDirectAnimation(g,[a],0,f,1===
a.loopMode,1,n):null};c.CreateAndStartHierarchyAnimation=function(a,g,d,e,f,h,k,l,p,n,q){return(a=c._PrepareAnimation(a,e,f,h,k,l,p,n))?g.getScene().beginDirectHierarchyAnimation(g,d,[a],0,h,1===a.loopMode,1,q):null};c.CreateMergeAndStartAnimation=function(a,d,e,f,h,k,l,p,n,q){a=c._PrepareAnimation(a,e,f,h,k,l,p,n);if(!a)return null;d.animations.push(a);return d.getScene().beginAnimation(d,0,h,1===a.loopMode,1,q)};c.MakeAnimationAdditive=function(a,d,e,f,h){void 0===d&&(d=0);void 0===f&&(f=!1);var b=
a;f&&(b=a.clone(),b.name=h||b.name);if(!b._keys.length)return b;d=0<=d?d:0;a=0;f=b._keys[0];h=b._keys.length-1;var g=b._keys[h],m=f.value,l=k.c.Vector3[0],t=k.c.Quaternion[0],p=k.c.Vector3[1],v=k.c.Vector3[2],n=k.c.Quaternion[1],q=k.c.Vector3[3],r=!1,u=f.frame,A=g.frame;e&&(e=b.getRange(e))&&(u=e.from,A=e.to);e=f.frame===u;var E=g.frame===A;if(1===b._keys.length){var w=b._getKeyValue(b._keys[0]);m=w.clone?w.clone():w;r=!0}else d<=f.frame?(w=b._getKeyValue(f.value),m=w.clone?w.clone():w,r=!0):d>=g.frame&&
(w=b._getKeyValue(g.value),m=w.clone?w.clone():w,r=!0);for(g=0;!r||!e||!E&&g<b._keys.length-1;){var C=b._keys[g],D=b._keys[g+1];!r&&d>=C.frame&&d<=D.frame&&(d===C.frame?w=b._getKeyValue(C.value):d===D.frame?w=b._getKeyValue(D.value):(w={key:g,repeatCount:0,loopMode:this.ANIMATIONLOOPMODE_CONSTANT},w=b._interpolate(d,w)),m=w.clone?w.clone():w,r=!0);!e&&u>=C.frame&&u<=D.frame&&(u===C.frame?a=g:(u!==D.frame&&(w={key:g,repeatCount:0,loopMode:this.ANIMATIONLOOPMODE_CONSTANT},w=b._interpolate(u,w),w={frame:u,
value:w.clone?w.clone():w},b._keys.splice(g+1,0,w)),a=g+1),e=!0);!E&&A>=C.frame&&A<=D.frame&&(A===C.frame?h=g:(A!==D.frame&&(w={key:g,repeatCount:0,loopMode:this.ANIMATIONLOOPMODE_CONSTANT},w=b._interpolate(A,w),w={frame:A,value:w.clone?w.clone():w},b._keys.splice(g+1,0,w)),h=g+1),E=!0);g++}b.dataType===c.ANIMATIONTYPE_QUATERNION?m.normalize().conjugateInPlace():b.dataType===c.ANIMATIONTYPE_MATRIX&&(m.decompose(p,t,l),t.normalize().conjugateInPlace());for(g=a;g<=h;g++)if(w=b._keys[g],!g||b.dataType===
c.ANIMATIONTYPE_FLOAT||w.value!==f.value)switch(b.dataType){case c.ANIMATIONTYPE_MATRIX:w.value.decompose(q,n,v);v.subtractInPlace(l);q.divideInPlace(p);t.multiplyToRef(n,n);k.a.ComposeToRef(q,n,v,w.value);break;case c.ANIMATIONTYPE_QUATERNION:m.multiplyToRef(w.value,w.value);break;case c.ANIMATIONTYPE_VECTOR2:case c.ANIMATIONTYPE_VECTOR3:case c.ANIMATIONTYPE_COLOR3:case c.ANIMATIONTYPE_COLOR4:w.value.subtractToRef(m,w.value);break;case c.ANIMATIONTYPE_SIZE:w.value.width-=m.width;w.value.height-=
m.height;break;default:w.value-=m}return b};c.TransitionTo=function(a,c,d,e,f,h,k,l){void 0===l&&(l=null);if(0>=k)return d[a]=c,l&&l(),null;f*=k/1E3;h.setKeys([{frame:0,value:d[a].clone?d[a].clone():d[a]},{frame:f,value:c}]);d.animations||(d.animations=[]);d.animations.push(h);a=e.beginAnimation(d,0,f,!1);a.onAnimationEnd=l;return a};Object.defineProperty(c.prototype,"runtimeAnimations",{get:function(){return this._runtimeAnimations},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,
"hasRunningRuntimeAnimations",{get:function(){for(var a=0,c=this._runtimeAnimations;a<c.length;a++)if(!c[a].isStopped)return!0;return!1},enumerable:!1,configurable:!0});c.prototype.toString=function(a){var b="Name: "+this.name+", property: "+this.targetProperty;b+=", datatype: "+"Float Vector3 Quaternion Matrix Color3 Vector2".split(" ")[this.dataType];b+=", nKeys: "+(this._keys?this._keys.length:"none");b+=", nRanges: "+(this._ranges?Object.keys(this._ranges).length:"none");if(a){b+=", Ranges: {";
a=!0;for(var c in this._ranges)a&&(b+=", ",a=!1),b+=c;b+="}"}return b};c.prototype.addEvent=function(a){this._events.push(a);this._events.sort(function(a,b){return a.frame-b.frame})};c.prototype.removeEvents=function(a){for(var b=0;b<this._events.length;b++)this._events[b].frame===a&&(this._events.splice(b,1),b--)};c.prototype.getEvents=function(){return this._events};c.prototype.createRange=function(a,c,e){this._ranges[a]||(this._ranges[a]=new d.a(a,c,e))};c.prototype.deleteRange=function(a,c){void 0===
c&&(c=!0);var b=this._ranges[a];if(b){if(c){c=b.from;b=b.to;for(var d=this._keys.length-1;0<=d;d--)this._keys[d].frame>=c&&this._keys[d].frame<=b&&this._keys.splice(d,1)}this._ranges[a]=null}};c.prototype.getRange=function(a){return this._ranges[a]};c.prototype.getKeys=function(){return this._keys};c.prototype.getHighestFrame=function(){for(var a=0,c=0,d=this._keys.length;c<d;c++)a<this._keys[c].frame&&(a=this._keys[c].frame);return a};c.prototype.getEasingFunction=function(){return this._easingFunction};
c.prototype.setEasingFunction=function(a){this._easingFunction=a};c.prototype.floatInterpolateFunction=function(a,c,d){return u.a.Lerp(a,c,d)};c.prototype.floatInterpolateFunctionWithTangents=function(a,c,d,e,f){return u.a.Hermite(a,c,d,e,f)};c.prototype.quaternionInterpolateFunction=function(a,c,d){return k.b.Slerp(a,c,d)};c.prototype.quaternionInterpolateFunctionWithTangents=function(a,c,d,e,f){return k.b.Hermite(a,c,d,e,f).normalize()};c.prototype.vector3InterpolateFunction=function(a,c,d){return k.e.Lerp(a,
c,d)};c.prototype.vector3InterpolateFunctionWithTangents=function(a,c,d,e,f){return k.e.Hermite(a,c,d,e,f)};c.prototype.vector2InterpolateFunction=function(a,c,d){return k.d.Lerp(a,c,d)};c.prototype.vector2InterpolateFunctionWithTangents=function(a,c,d,e,f){return k.d.Hermite(a,c,d,e,f)};c.prototype.sizeInterpolateFunction=function(b,c,d){return a.a.Lerp(b,c,d)};c.prototype.color3InterpolateFunction=function(a,c,d){return r.a.Lerp(a,c,d)};c.prototype.color4InterpolateFunction=function(a,c,d){return r.b.Lerp(a,
c,d)};c.prototype._getKeyValue=function(a){return"function"===typeof a?a():a};c.prototype._interpolate=function(a,d){if(d.loopMode===c.ANIMATIONLOOPMODE_CONSTANT&&0<d.repeatCount)return d.highLimitValue.clone?d.highLimitValue.clone():d.highLimitValue;var b=this._keys;if(1===b.length)return this._getKeyValue(b[0].value);var e=d.key;if(b[e].frame>=a)for(;0<=e-1&&b[e].frame>=a;)e--;for(var g=e;g<b.length;g++)if(e=b[g+1],e.frame>=a){d.key=g;var f=b[g];g=this._getKeyValue(f.value);if(f.interpolation===
p.a.STEP)return g;var h=this._getKeyValue(e.value),k=void 0!==f.outTangent&&void 0!==e.inTangent,l=e.frame-f.frame;a=(a-f.frame)/l;var n=this.getEasingFunction();null!=n&&(a=n.ease(a));switch(this.dataType){case c.ANIMATIONTYPE_FLOAT:e=k?this.floatInterpolateFunctionWithTangents(g,f.outTangent*l,h,e.inTangent*l,a):this.floatInterpolateFunction(g,h,a);switch(d.loopMode){case c.ANIMATIONLOOPMODE_CYCLE:case c.ANIMATIONLOOPMODE_CONSTANT:return e;case c.ANIMATIONLOOPMODE_RELATIVE:return d.offsetValue*
d.repeatCount+e}break;case c.ANIMATIONTYPE_QUATERNION:b=k?this.quaternionInterpolateFunctionWithTangents(g,f.outTangent.scale(l),h,e.inTangent.scale(l),a):this.quaternionInterpolateFunction(g,h,a);switch(d.loopMode){case c.ANIMATIONLOOPMODE_RELATIVE:return b.addInPlace(d.offsetValue.scale(d.repeatCount))}return b;case c.ANIMATIONTYPE_VECTOR3:switch(n=k?this.vector3InterpolateFunctionWithTangents(g,f.outTangent.scale(l),h,e.inTangent.scale(l),a):this.vector3InterpolateFunction(g,h,a),d.loopMode){case c.ANIMATIONLOOPMODE_CYCLE:case c.ANIMATIONLOOPMODE_CONSTANT:return n;
case c.ANIMATIONLOOPMODE_RELATIVE:return n.add(d.offsetValue.scale(d.repeatCount))}case c.ANIMATIONTYPE_VECTOR2:switch(e=k?this.vector2InterpolateFunctionWithTangents(g,f.outTangent.scale(l),h,e.inTangent.scale(l),a):this.vector2InterpolateFunction(g,h,a),d.loopMode){case c.ANIMATIONLOOPMODE_CYCLE:case c.ANIMATIONLOOPMODE_CONSTANT:return e;case c.ANIMATIONLOOPMODE_RELATIVE:return e.add(d.offsetValue.scale(d.repeatCount))}case c.ANIMATIONTYPE_SIZE:switch(d.loopMode){case c.ANIMATIONLOOPMODE_CYCLE:case c.ANIMATIONLOOPMODE_CONSTANT:return this.sizeInterpolateFunction(g,
h,a);case c.ANIMATIONLOOPMODE_RELATIVE:return this.sizeInterpolateFunction(g,h,a).add(d.offsetValue.scale(d.repeatCount))}case c.ANIMATIONTYPE_COLOR3:switch(d.loopMode){case c.ANIMATIONLOOPMODE_CYCLE:case c.ANIMATIONLOOPMODE_CONSTANT:return this.color3InterpolateFunction(g,h,a);case c.ANIMATIONLOOPMODE_RELATIVE:return this.color3InterpolateFunction(g,h,a).add(d.offsetValue.scale(d.repeatCount))}case c.ANIMATIONTYPE_COLOR4:switch(d.loopMode){case c.ANIMATIONLOOPMODE_CYCLE:case c.ANIMATIONLOOPMODE_CONSTANT:return this.color4InterpolateFunction(g,
h,a);case c.ANIMATIONLOOPMODE_RELATIVE:return this.color4InterpolateFunction(g,h,a).add(d.offsetValue.scale(d.repeatCount))}case c.ANIMATIONTYPE_MATRIX:switch(d.loopMode){case c.ANIMATIONLOOPMODE_CYCLE:case c.ANIMATIONLOOPMODE_CONSTANT:if(c.AllowMatricesInterpolation)return this.matrixInterpolateFunction(g,h,a,d.workValue);case c.ANIMATIONLOOPMODE_RELATIVE:return g}}break}return this._getKeyValue(b[b.length-1].value)};c.prototype.matrixInterpolateFunction=function(a,d,e,f){return c.AllowMatrixDecomposeForInterpolation?
f?(k.a.DecomposeLerpToRef(a,d,e,f),f):k.a.DecomposeLerp(a,d,e):f?(k.a.LerpToRef(a,d,e,f),f):k.a.Lerp(a,d,e)};c.prototype.clone=function(){var a=new c(this.name,this.targetPropertyPath.join("."),this.framePerSecond,this.dataType,this.loopMode);a.enableBlending=this.enableBlending;a.blendingSpeed=this.blendingSpeed;this._keys&&a.setKeys(this._keys);if(this._ranges){a._ranges={};for(var d in this._ranges){var e=this._ranges[d];e&&(a._ranges[d]=e.clone())}}return a};c.prototype.setKeys=function(a){this._keys=
a.slice(0)};c.prototype.serialize=function(){var a={};a.name=this.name;a.property=this.targetProperty;a.framePerSecond=this.framePerSecond;a.dataType=this.dataType;a.loopBehavior=this.loopMode;a.enableBlending=this.enableBlending;a.blendingSpeed=this.blendingSpeed;var d=this.dataType;a.keys=[];for(var e=this.getKeys(),f=0;f<e.length;f++){var h=e[f],k={};k.frame=h.frame;switch(d){case c.ANIMATIONTYPE_FLOAT:k.values=[h.value];void 0!==h.inTangent&&k.values.push(h.inTangent);void 0!==h.outTangent&&(void 0===
h.inTangent&&k.values.push(void 0),k.values.push(h.outTangent));break;case c.ANIMATIONTYPE_QUATERNION:case c.ANIMATIONTYPE_MATRIX:case c.ANIMATIONTYPE_VECTOR3:case c.ANIMATIONTYPE_COLOR3:case c.ANIMATIONTYPE_COLOR4:k.values=h.value.asArray(),void 0!=h.inTangent&&k.values.push(h.inTangent.asArray()),void 0!=h.outTangent&&(void 0===h.inTangent&&k.values.push(void 0),k.values.push(h.outTangent.asArray()))}a.keys.push(k)}a.ranges=[];for(var l in this._ranges)if(d=this._ranges[l])e={},e.name=l,e.from=
d.from,e.to=d.to,a.ranges.push(e);return a};c._UniversalLerp=function(a,c,d){var b=a.constructor;return b.Lerp?b.Lerp(a,c,d):b.Slerp?b.Slerp(a,c,d):a.toFixed?a*(1-d)+d*c:c};c.Parse=function(a){var b=new c(a.name,a.property,a.framePerSecond,a.dataType,a.loopBehavior),d=a.dataType,e=[],f;a.enableBlending&&(b.enableBlending=a.enableBlending);a.blendingSpeed&&(b.blendingSpeed=a.blendingSpeed);for(f=0;f<a.keys.length;f++){var h=a.keys[f],l,n;switch(d){case c.ANIMATIONTYPE_FLOAT:var p=h.values[0];1<=h.values.length&&
(l=h.values[1]);2<=h.values.length&&(n=h.values[2]);break;case c.ANIMATIONTYPE_QUATERNION:p=k.b.FromArray(h.values);if(8<=h.values.length){var q=k.b.FromArray(h.values.slice(4,8));q.equals(k.b.Zero())||(l=q)}12<=h.values.length&&(q=k.b.FromArray(h.values.slice(8,12)),q.equals(k.b.Zero())||(n=q));break;case c.ANIMATIONTYPE_MATRIX:p=k.a.FromArray(h.values);break;case c.ANIMATIONTYPE_COLOR3:p=r.a.FromArray(h.values);break;case c.ANIMATIONTYPE_COLOR4:p=r.b.FromArray(h.values);break;default:p=k.e.FromArray(h.values)}q=
{};q.frame=h.frame;q.value=p;void 0!=l&&(q.inTangent=l);void 0!=n&&(q.outTangent=n);e.push(q)}b.setKeys(e);if(a.ranges)for(f=0;f<a.ranges.length;f++)p=a.ranges[f],b.createRange(p.name,p.from,p.to);return b};c.AppendSerializedAnimations=function(a,c){e.a.AppendSerializedAnimations(a,c)};c.ParseFromFileAsync=function(a,c){var b=this;return new Promise(function(d,e){var g=new q.a;g.addEventListener("readystatechange",function(){if(4==g.readyState)if(200==g.status){var c=JSON.parse(g.responseText);if(c.length)for(var f=
[],h=0;h<c.length;h++)f.push(b.Parse(c[h]));else f=b.Parse(c),a&&(f.name=a);d(f)}else e("Unable to load the animation")});g.open("GET",c);g.send()})};c.CreateFromSnippetAsync=function(a){var b=this;return new Promise(function(c,d){var e=new q.a;e.addEventListener("readystatechange",function(){if(4==e.readyState)if(200==e.status){var g=JSON.parse(JSON.parse(e.responseText).jsonPayload);if(g.animations){var f=JSON.parse(g.animations);g=[];for(var h=0;h<f.length;h++)g.push(b.Parse(f[h]))}else f=JSON.parse(g.animation),
g=b.Parse(f),g.snippetId=a;c(g)}else d("Unable to load the snippet "+a)});e.open("GET",b.SnippetUrl+"/"+a.replace(/#/g,"/"));e.send()})};c.AllowMatricesInterpolation=!1;c.AllowMatrixDecomposeForInterpolation=!0;c.SnippetUrl="https://snippet.babylonjs.com";c.ANIMATIONTYPE_FLOAT=0;c.ANIMATIONTYPE_VECTOR3=1;c.ANIMATIONTYPE_QUATERNION=2;c.ANIMATIONTYPE_MATRIX=3;c.ANIMATIONTYPE_COLOR3=4;c.ANIMATIONTYPE_COLOR4=7;c.ANIMATIONTYPE_VECTOR2=5;c.ANIMATIONTYPE_SIZE=6;c.ANIMATIONLOOPMODE_RELATIVE=0;c.ANIMATIONLOOPMODE_CYCLE=
1;c.ANIMATIONLOOPMODE_CONSTANT=2;return c}();l.a.RegisteredTypes["BABYLON.Animation"]=h;n.a._AnimationRangeFactory=function(a,b,e){return new d.a(a,b,e)}},r2Xo:function(l,n,f){f.d(n,"a",function(){return u});var k=f("4SJX"),r=f("mBE3"),u=function(){function e(){this.transitionDuration=450;this.lowerRadiusTransitionRange=2;this.upperRadiusTransitionRange=-2;this._radiusIsAnimating=this._autoTransitionRange=!1;this._radiusBounceTransition=null;this._animatables=[]}Object.defineProperty(e.prototype,
"name",{get:function(){return"Bouncing"},enumerable:!1,configurable:!0});Object.defineProperty(e.prototype,"autoTransitionRange",{get:function(){return this._autoTransitionRange},set:function(e){var d=this;if(this._autoTransitionRange!==e){this._autoTransitionRange=e;var a=this._attachedCamera;a&&(e?this._onMeshTargetChangedObserver=a.onMeshTargetChangedObservable.add(function(a){a&&(a.computeWorldMatrix(!0),a=a.getBoundingInfo().diagonalLength,d.lowerRadiusTransitionRange=.05*a,d.upperRadiusTransitionRange=
.05*a)}):this._onMeshTargetChangedObserver&&a.onMeshTargetChangedObservable.remove(this._onMeshTargetChangedObserver))}},enumerable:!1,configurable:!0});e.prototype.init=function(){};e.prototype.attach=function(e){var d=this;this._attachedCamera=e;this._onAfterCheckInputsObserver=e.onAfterCheckInputsObservable.add(function(){d._attachedCamera&&(d._isRadiusAtLimit(d._attachedCamera.lowerRadiusLimit)&&d._applyBoundRadiusAnimation(d.lowerRadiusTransitionRange),d._isRadiusAtLimit(d._attachedCamera.upperRadiusLimit)&&
d._applyBoundRadiusAnimation(d.upperRadiusTransitionRange))})};e.prototype.detach=function(){this._attachedCamera&&(this._onAfterCheckInputsObserver&&this._attachedCamera.onAfterCheckInputsObservable.remove(this._onAfterCheckInputsObserver),this._onMeshTargetChangedObserver&&this._attachedCamera.onMeshTargetChangedObservable.remove(this._onMeshTargetChangedObserver),this._attachedCamera=null)};e.prototype._isRadiusAtLimit=function(e){return this._attachedCamera?this._attachedCamera.radius!==e||this._radiusIsAnimating?
!1:!0:!1};e.prototype._applyBoundRadiusAnimation=function(f){var d=this;this._attachedCamera&&(this._radiusBounceTransition||(e.EasingFunction.setEasingMode(e.EasingMode),this._radiusBounceTransition=r.a.CreateAnimation("radius",r.a.ANIMATIONTYPE_FLOAT,60,e.EasingFunction)),this._cachedWheelPrecision=this._attachedCamera.wheelPrecision,this._attachedCamera.wheelPrecision=Infinity,this._attachedCamera.inertialRadiusOffset=0,this.stopAllAnimations(),this._radiusIsAnimating=!0,(f=r.a.TransitionTo("radius",
this._attachedCamera.radius+f,this._attachedCamera,this._attachedCamera.getScene(),60,this._radiusBounceTransition,this.transitionDuration,function(){return d._clearAnimationLocks()}))&&this._animatables.push(f))};e.prototype._clearAnimationLocks=function(){this._radiusIsAnimating=!1;this._attachedCamera&&(this._attachedCamera.wheelPrecision=this._cachedWheelPrecision)};e.prototype.stopAllAnimations=function(){this._attachedCamera&&(this._attachedCamera.animations=[]);for(;this._animatables.length;)this._animatables[0].onAnimationEnd=
null,this._animatables[0].stop(),this._animatables.shift()};e.EasingFunction=new k.a(.3);e.EasingMode=k.c.EASINGMODE_EASEOUT;return e}()},u8y2:function(l,n,f){f.d(n,"a",function(){return q});f.d(n,"b",function(){return h});var k=f("oYeq"),r=f("uyO6"),u=f("/SR9"),e=f("bDcY");l=f("WHS4");(function(a){function b(b,c,d,e){b=a.call(this,b,e)||this;b.propertyPath=d;b._target=b._effectiveTarget=c;return b}Object(k.d)(b,a);b.prototype._prepare=function(){this._effectiveTarget=this._getEffectiveTarget(this._effectiveTarget,
this.propertyPath);this._property=this._getProperty(this.propertyPath)};b.prototype.execute=function(){this._effectiveTarget[this._property]=!this._effectiveTarget[this._property]};b.prototype.serialize=function(b){return a.prototype._serialize.call(this,{name:"SwitchBooleanAction",properties:[e.a._GetTargetProperty(this._target),{name:"propertyPath",value:this.propertyPath}]},b)};return b})(e.a);n=function(a){function b(b,c,d,e){b=a.call(this,b,e)||this;b.value=d;b._target=c;return b}Object(k.d)(b,
a);b.prototype.execute=function(){this._target.state=this.value};b.prototype.serialize=function(b){return a.prototype._serialize.call(this,{name:"SetStateAction",properties:[e.a._GetTargetProperty(this._target),{name:"value",value:this.value}]},b)};return b}(e.a);f=function(a){function b(b,c,d,e,g){b=a.call(this,b,g)||this;b.propertyPath=d;b.value=e;b._target=b._effectiveTarget=c;return b}Object(k.d)(b,a);b.prototype._prepare=function(){this._effectiveTarget=this._getEffectiveTarget(this._effectiveTarget,
this.propertyPath);this._property=this._getProperty(this.propertyPath)};b.prototype.execute=function(){this._effectiveTarget[this._property]=this.value;this._target.markAsDirty&&this._target.markAsDirty(this._property)};b.prototype.serialize=function(b){return a.prototype._serialize.call(this,{name:"SetValueAction",properties:[e.a._GetTargetProperty(this._target),{name:"propertyPath",value:this.propertyPath},{name:"value",value:e.a._SerializeValueAsString(this.value)}]},b)};return b}(e.a);var p=function(a){function b(b,
c,d,e,g){b=a.call(this,b,g)||this;b.propertyPath=d;b.value=e;b._target=b._effectiveTarget=c;return b}Object(k.d)(b,a);b.prototype._prepare=function(){this._effectiveTarget=this._getEffectiveTarget(this._effectiveTarget,this.propertyPath);this._property=this._getProperty(this.propertyPath);"number"!==typeof this._effectiveTarget[this._property]&&r.a.Warn("Warning: IncrementValueAction can only be used with number values")};b.prototype.execute=function(){this._effectiveTarget[this._property]+=this.value;
this._target.markAsDirty&&this._target.markAsDirty(this._property)};b.prototype.serialize=function(b){return a.prototype._serialize.call(this,{name:"IncrementValueAction",properties:[e.a._GetTargetProperty(this._target),{name:"propertyPath",value:this.propertyPath},{name:"value",value:e.a._SerializeValueAsString(this.value)}]},b)};return b}(e.a),d=function(a){function b(b,c,d,e,g,f){b=a.call(this,b,f)||this;b.from=d;b.to=e;b.loop=g;b._target=c;return b}Object(k.d)(b,a);b.prototype._prepare=function(){};
b.prototype.execute=function(){this._actionManager.getScene().beginAnimation(this._target,this.from,this.to,this.loop)};b.prototype.serialize=function(b){return a.prototype._serialize.call(this,{name:"PlayAnimationAction",properties:[e.a._GetTargetProperty(this._target),{name:"from",value:String(this.from)},{name:"to",value:String(this.to)},{name:"loop",value:e.a._SerializeValueAsString(this.loop)||!1}]},b)};return b}(e.a),a=function(a){function b(b,c,d){b=a.call(this,b,d)||this;b._target=c;return b}
Object(k.d)(b,a);b.prototype._prepare=function(){};b.prototype.execute=function(){this._actionManager.getScene().stopAnimation(this._target)};b.prototype.serialize=function(b){return a.prototype._serialize.call(this,{name:"StopAnimationAction",properties:[e.a._GetTargetProperty(this._target)]},b)};return b}(e.a),q=function(a){function b(b,c){void 0===b&&(b=0);return a.call(this,b,c)||this}Object(k.d)(b,a);b.prototype.execute=function(){};b.prototype.serialize=function(b){return a.prototype._serialize.call(this,
{name:"DoNothingAction",properties:[]},b)};return b}(e.a);(function(a){function b(b,c,d){b=a.call(this,b,d)||this;b.children=c;return b}Object(k.d)(b,a);b.prototype._prepare=function(){for(var a=0;a<this.children.length;a++)this.children[a]._actionManager=this._actionManager,this.children[a]._prepare()};b.prototype.execute=function(a){for(var b=0;b<this.children.length;b++)this.children[b].execute(a)};b.prototype.serialize=function(b){b=a.prototype._serialize.call(this,{name:"CombineAction",properties:[],
combine:[]},b);for(var c=0;c<this.children.length;c++)b.combine.push(this.children[c].serialize(null));return b};return b})(e.a);var h=function(a){function b(b,c,d){b=a.call(this,b,d)||this;b.func=c;return b}Object(k.d)(b,a);b.prototype.execute=function(a){this.func(a)};return b}(e.a),c=function(a){function b(b,c,d,e){b=a.call(this,b,e)||this;b._target=c;b._parent=d;return b}Object(k.d)(b,a);b.prototype._prepare=function(){};b.prototype.execute=function(){if(this._target.parent!==this._parent){var a=
this._parent.getWorldMatrix().clone();a.invert();this._target.position=u.e.TransformCoordinates(this._target.position,a);this._target.parent=this._parent}};b.prototype.serialize=function(b){return a.prototype._serialize.call(this,{name:"SetParentAction",properties:[e.a._GetTargetProperty(this._target),e.a._GetTargetProperty(this._parent)]},b)};return b}(e.a);l.a.RegisteredTypes["BABYLON.SetParentAction"]=c;l.a.RegisteredTypes["BABYLON.ExecuteCodeAction"]=h;l.a.RegisteredTypes["BABYLON.DoNothingAction"]=
q;l.a.RegisteredTypes["BABYLON.StopAnimationAction"]=a;l.a.RegisteredTypes["BABYLON.PlayAnimationAction"]=d;l.a.RegisteredTypes["BABYLON.IncrementValueAction"]=p;l.a.RegisteredTypes["BABYLON.SetValueAction"]=f;l.a.RegisteredTypes["BABYLON.SetStateAction"]=n;l.a.RegisteredTypes["BABYLON.SetParentAction"]=c}}]);
