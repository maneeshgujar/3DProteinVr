var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(k){var h=0;return function(){return h<k.length?{done:!1,value:k[h++]}:{done:!0}}};$jscomp.arrayIterator=function(k){return{next:$jscomp.arrayIteratorImpl(k)}};$jscomp.makeIterator=function(k){var h="undefined"!=typeof Symbol&&Symbol.iterator&&k[Symbol.iterator];return h?h.call(k):$jscomp.arrayIterator(k)};
$jscomp.getGlobal=function(k){return"undefined"!=typeof window&&window===k?k:"undefined"!=typeof global&&null!=global?global:k};$jscomp.global=$jscomp.getGlobal(this);$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(k,h,d){k!=Array.prototype&&k!=Object.prototype&&(k[h]=d.value)};
$jscomp.polyfill=function(k,h,d,l){if(h){d=$jscomp.global;k=k.split(".");for(l=0;l<k.length-1;l++){var e=k[l];e in d||(d[e]={});d=d[e]}k=k[k.length-1];l=d[k];h=h(l);h!=l&&null!=h&&$jscomp.defineProperty(d,k,{configurable:!0,writable:!0,value:h})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(k){function h(){this.batch_=null}function d(b){return b instanceof e?b:new e(function(a,f){a(b)})}if(k&&!$jscomp.FORCE_POLYFILL_PROMISE)return k;h.prototype.asyncExecute=function(b){if(null==this.batch_){this.batch_=[];var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})}this.batch_.push(b)};var l=$jscomp.global.setTimeout;h.prototype.asyncExecuteFunction=function(b){l(b,0)};h.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var b=
this.batch_;this.batch_=[];for(var a=0;a<b.length;++a){var f=b[a];b[a]=null;try{f()}catch(g){this.asyncThrow_(g)}}}this.batch_=null};h.prototype.asyncThrow_=function(b){this.asyncExecuteFunction(function(){throw b;})};var e=function(b){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var a=this.createResolveAndReject_();try{b(a.resolve,a.reject)}catch(f){a.reject(f)}};e.prototype.createResolveAndReject_=function(){function b(b){return function(g){f||(f=!0,b.call(a,g))}}var a=this,f=!1;
return{resolve:b(this.resolveTo_),reject:b(this.reject_)}};e.prototype.resolveTo_=function(b){if(b===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(b instanceof e)this.settleSameAsPromise_(b);else{a:switch(typeof b){case "object":var a=null!=b;break a;case "function":a=!0;break a;default:a=!1}a?this.resolveToNonPromiseObj_(b):this.fulfill_(b)}};e.prototype.resolveToNonPromiseObj_=function(b){var a=void 0;try{a=b.then}catch(f){this.reject_(f);return}"function"==typeof a?
this.settleSameAsThenable_(a,b):this.fulfill_(b)};e.prototype.reject_=function(b){this.settle_(2,b)};e.prototype.fulfill_=function(b){this.settle_(1,b)};e.prototype.settle_=function(b,a){if(0!=this.state_)throw Error("Cannot settle("+b+", "+a+"): Promise already settled in state"+this.state_);this.state_=b;this.result_=a;this.executeOnSettledCallbacks_()};e.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var b=0;b<this.onSettledCallbacks_.length;++b)c.asyncExecute(this.onSettledCallbacks_[b]);
this.onSettledCallbacks_=null}};var c=new h;e.prototype.settleSameAsPromise_=function(b){var a=this.createResolveAndReject_();b.callWhenSettled_(a.resolve,a.reject)};e.prototype.settleSameAsThenable_=function(b,a){var f=this.createResolveAndReject_();try{b.call(a,f.resolve,f.reject)}catch(g){f.reject(g)}};e.prototype.then=function(b,a){function f(a,f){return"function"==typeof a?function(f){try{g(a(f))}catch(q){c(q)}}:f}var g,c,d=new e(function(a,f){g=a;c=f});this.callWhenSettled_(f(b,g),f(a,c));return d};
e.prototype.catch=function(b){return this.then(void 0,b)};e.prototype.callWhenSettled_=function(b,a){function f(){switch(g.state_){case 1:b(g.result_);break;case 2:a(g.result_);break;default:throw Error("Unexpected state: "+g.state_);}}var g=this;null==this.onSettledCallbacks_?c.asyncExecute(f):this.onSettledCallbacks_.push(f)};e.resolve=d;e.reject=function(b){return new e(function(a,f){f(b)})};e.race=function(b){return new e(function(a,f){for(var g=$jscomp.makeIterator(b),c=g.next();!c.done;c=g.next())d(c.value).callWhenSettled_(a,
f)})};e.all=function(b){var a=$jscomp.makeIterator(b),f=a.next();return f.done?d([]):new e(function(b,c){function g(a){return function(f){e[a]=f;y--;0==y&&b(e)}}var e=[],y=0;do e.push(void 0),y++,d(f.value).callWhenSettled_(g(e.length-1),c),f=a.next();while(!f.done)})};return e},"es6","es3");$jscomp.checkEs6ConformanceViaProxy=function(){try{var k={},h=Object.create(new $jscomp.global.Proxy(k,{get:function(d,l,e){return d==k&&"q"==l&&e==h}}));return!0===h.q}catch(d){return!1}};
$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(k,h){this.$jscomp$symbol$id_=k;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:h})};
$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function k(d){if(this instanceof k)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(d||"")+"_"+h++,d)}var h=0;return k}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var k=$jscomp.global.Symbol.iterator;k||(k=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[k]&&$jscomp.defineProperty(Array.prototype,k,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var k=$jscomp.global.Symbol.asyncIterator;k||(k=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(k){$jscomp.initSymbolIterator();k={next:k};k[$jscomp.global.Symbol.iterator]=function(){return this};return k};$jscomp.owns=function(k,h){return Object.prototype.hasOwnProperty.call(k,h)};
$jscomp.polyfill("WeakMap",function(k){function h(){if(!k||!Object.seal)return!1;try{var a=Object.seal({}),b=Object.seal({}),c=new k([[a,2],[b,3]]);if(2!=c.get(a)||3!=c.get(b))return!1;c.delete(a);c.set(b,4);return!c.has(a)&&4==c.get(b)}catch(t){return!1}}function d(){}function l(a){if(!$jscomp.owns(a,c)){var f=new d;$jscomp.defineProperty(a,c,{value:f})}}function e(a){var f=Object[a];f&&(Object[a]=function(a){if(a instanceof d)return a;l(a);return f(a)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(k&&
$jscomp.ES6_CONFORMANCE)return k}else if(h())return k;var c="$jscomp_hidden_"+Math.random();e("freeze");e("preventExtensions");e("seal");var b=0,a=function(a){this.id_=(b+=Math.random()+1).toString();if(a){a=$jscomp.makeIterator(a);for(var f;!(f=a.next()).done;)f=f.value,this.set(f[0],f[1])}};a.prototype.set=function(a,b){l(a);if(!$jscomp.owns(a,c))throw Error("WeakMap key fail: "+a);a[c][this.id_]=b;return this};a.prototype.get=function(a){return $jscomp.owns(a,c)?a[c][this.id_]:void 0};a.prototype.has=
function(a){return $jscomp.owns(a,c)&&$jscomp.owns(a[c],this.id_)};a.prototype.delete=function(a){return $jscomp.owns(a,c)&&$jscomp.owns(a[c],this.id_)?delete a[c][this.id_]:!1};return a},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(k){function h(){if($jscomp.ASSUME_NO_NATIVE_MAP||!k||"function"!=typeof k||!k.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),b=new k($jscomp.makeIterator([[a,"s"]]));if("s"!=b.get(a)||1!=b.size||b.get({x:4})||b.set({x:4},"t")!=b||2!=b.size)return!1;var c=b.entries(),e=c.next();if(e.done||e.value[0]!=a||"s"!=e.value[1])return!1;e=c.next();return e.done||4!=e.value[0].x||"t"!=e.value[1]||!c.next().done?!1:!0}catch(u){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(k&&$jscomp.ES6_CONFORMANCE)return k}else if(h())return k;$jscomp.initSymbolIterator();var d=new WeakMap,l=function(a){this.data_={};this.head_=b();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var f;!(f=a.next()).done;)f=f.value,this.set(f[0],f[1])}};l.prototype.set=function(a,b){a=0===a?0:a;var f=e(this,a);f.list||(f.list=this.data_[f.id]=[]);f.entry?f.entry.value=b:(f.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,
value:b},f.list.push(f.entry),this.head_.previous.next=f.entry,this.head_.previous=f.entry,this.size++);return this};l.prototype.delete=function(a){a=e(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};l.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=b();this.size=0};l.prototype.has=function(a){return!!e(this,a).entry};
l.prototype.get=function(a){return(a=e(this,a).entry)&&a.value};l.prototype.entries=function(){return c(this,function(a){return[a.key,a.value]})};l.prototype.keys=function(){return c(this,function(a){return a.key})};l.prototype.values=function(){return c(this,function(a){return a.value})};l.prototype.forEach=function(a,b){for(var f=this.entries(),g;!(g=f.next()).done;)g=g.value,a.call(b,g[1],g[0],this)};l.prototype[Symbol.iterator]=l.prototype.entries;var e=function(b,g){var f=g&&typeof g;"object"==
f||"function"==f?d.has(g)?f=d.get(g):(f=""+ ++a,d.set(g,f)):f="p_"+g;var c=b.data_[f];if(c&&$jscomp.owns(b.data_,f))for(b=0;b<c.length;b++){var e=c[b];if(g!==g&&e.key!==e.key||g===e.key)return{id:f,list:c,index:b,entry:e}}return{id:f,list:c,index:-1,entry:void 0}},c=function(a,b){var f=a.head_;return $jscomp.iteratorPrototype(function(){if(f){for(;f.head!=a.head_;)f=f.previous;for(;f.next!=f.head;)return f=f.next,{done:!1,value:b(f)};f=null}return{done:!0,value:void 0}})},b=function(){var a={};return a.previous=
a.next=a.head=a},a=0;return l},"es6","es3");
(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{"2Z9k":function(k,h,d){function l(b){var a,f=0,g=Date.now();b.observableParameters=null!==(a=b.observableParameters)&&void 0!==a?a:{};var c=b.contextObservable.add(function(a){var e=Date.now();f=e-g;a={startTime:g,currentTime:e,deltaTime:f,completeRate:f/b.timeout,payload:a};b.onTick&&b.onTick(a);b.breakCondition&&b.breakCondition()&&(b.contextObservable.remove(c),b.onAborted&&b.onAborted(a));f>=b.timeout&&(b.contextObservable.remove(c),b.onEnded&&
b.onEnded(a))},b.observableParameters.mask,b.observableParameters.insertFirst,b.observableParameters.scope);return c}d.d(h,"a",function(){return l});var e=d("ps+7"),c;(function(b){b[b.INIT=0]="INIT";b[b.STARTED=1]="STARTED";b[b.ENDED=2]="ENDED"})(c||(c={}));(function(){function b(a){var b=this,g,d;this.onEachCountObservable=new e.a;this.onTimerAbortedObservable=new e.a;this.onTimerEndedObservable=new e.a;this.onStateChangedObservable=new e.a;this._observer=null;this._breakOnNextTick=!1;this._tick=
function(a){var f=Date.now();b._timer=f-b._startTime;a={startTime:b._startTime,currentTime:f,deltaTime:b._timer,completeRate:b._timer/b._timeToEnd,payload:a};(f=b._breakOnNextTick||b._breakCondition(a))||b._timer>=b._timeToEnd?b._stop(a,f):b.onEachCountObservable.notifyObservers(a)};this._setState(c.INIT);this._contextObservable=a.contextObservable;this._observableParameters=null!==(g=a.observableParameters)&&void 0!==g?g:{};this._breakCondition=null!==(d=a.breakCondition)&&void 0!==d?d:function(){return!1};
a.onEnded&&this.onTimerEndedObservable.add(a.onEnded);a.onTick&&this.onEachCountObservable.add(a.onTick);a.onAborted&&this.onTimerAbortedObservable.add(a.onAborted)}Object.defineProperty(b.prototype,"breakCondition",{set:function(a){this._breakCondition=a},enumerable:!1,configurable:!0});b.prototype.clearObservables=function(){this.onEachCountObservable.clear();this.onTimerAbortedObservable.clear();this.onTimerEndedObservable.clear();this.onStateChangedObservable.clear()};b.prototype.start=function(a){void 0===
a&&(a=this._timeToEnd);if(this._state===c.STARTED)throw Error("Timer already started. Please stop it before starting again");this._timeToEnd=a;this._startTime=Date.now();this._timer=0;this._observer=this._contextObservable.add(this._tick,this._observableParameters.mask,this._observableParameters.insertFirst,this._observableParameters.scope);this._setState(c.STARTED)};b.prototype.stop=function(){this._state===c.STARTED&&(this._breakOnNextTick=!0)};b.prototype.dispose=function(){this._observer&&this._contextObservable.remove(this._observer);
this.clearObservables()};b.prototype._setState=function(a){this._state=a;this.onStateChangedObservable.notifyObservers(this._state)};b.prototype._stop=function(a,b){void 0===b&&(b=!1);this._contextObservable.remove(this._observer);this._setState(c.ENDED);b?this.onTimerAbortedObservable.notifyObservers(a):this.onTimerEndedObservable.notifyObservers(a)};return b})()},"4HJg":function(k,h,d){d.d(h,"a",function(){return c});var l=d("uyO6"),e=d("WHS4"),c=function(){function b(){}b.Instantiate=function(a){if(this.RegisteredExternalClasses&&
this.RegisteredExternalClasses[a])return this.RegisteredExternalClasses[a];var b=e.a.GetClass(a);if(b)return b;l.a.Warn(a+" not found, you may have missed an import.");a=a.split(".");b=window||this;for(var g=0,c=a.length;g<c;g++)b=b[a[g]];return"function"!==typeof b?null:b};b.RegisteredExternalClasses={};return b}()},"6SkX":function(k,h,d){d.d(h,"a",function(){return b});var l;(function(a){a[a.Pending=0]="Pending";a[a.Fulfilled=1]="Fulfilled";a[a.Rejected=2]="Rejected"})(l||(l={}));var e=function(){return function(){this.target=
this.count=0;this.results=[]}}(),c=function(){function a(a){var b=this;this._state=l.Pending;this._children=[];this._rejectWasConsumed=!1;if(a)try{a(function(a){b._resolve(a)},function(a){b._reject(a)})}catch(y){this._reject(y)}}Object.defineProperty(a.prototype,"_result",{get:function(){return this._resultValue},set:function(a){this._resultValue=a;this._parent&&void 0===this._parent._result&&(this._parent._result=a)},enumerable:!1,configurable:!0});a.prototype.catch=function(a){return this.then(void 0,
a)};a.prototype.then=function(b,c){var f=this,g=new a;g._onFulfilled=b;g._onRejected=c;this._children.push(g);g._parent=this;this._state!==l.Pending&&setTimeout(function(){if(f._state===l.Fulfilled||f._rejectWasConsumed){var a=g._resolve(f._result);void 0!==a&&null!==a&&(void 0!==a._state?(g._children.push(a),a._parent=g,g=a):g._result=a)}else g._reject(f._reason)});return g};a.prototype._moveChildren=function(a){var b,f=this;(b=this._children).push.apply(b,a.splice(0,a.length));this._children.forEach(function(a){a._parent=
f});if(this._state===l.Fulfilled){b=0;for(var c=this._children;b<c.length;b++)a=c[b],a._resolve(this._result)}else if(this._state===l.Rejected)for(b=0,c=this._children;b<c.length;b++)a=c[b],a._reject(this._reason)};a.prototype._resolve=function(a){try{this._state=l.Fulfilled;var b=null;this._onFulfilled&&(b=this._onFulfilled(a));void 0!==b&&null!==b&&(void 0!==b._state?(b._parent=this,b._moveChildren(this._children),a=b._result):a=b);this._result=a;b=0;for(var f=this._children;b<f.length;b++)f[b]._resolve(a);
this._children.length=0;delete this._onFulfilled;delete this._onRejected}catch(t){this._reject(t,!0)}};a.prototype._reject=function(a,b){void 0===b&&(b=!1);this._state=l.Rejected;this._reason=a;if(this._onRejected&&!b)try{this._onRejected(a),this._rejectWasConsumed=!0}catch(u){a=u}b=0;for(var f=this._children;b<f.length;b++){var c=f[b];this._rejectWasConsumed?c._resolve(null):c._reject(a)}this._children.length=0;delete this._onFulfilled;delete this._onRejected};a.resolve=function(b){var f=new a;f._resolve(b);
return f};a._RegisterForFulfillment=function(a,b,c){a.then(function(a){b.results[c]=a;b.count++;b.count===b.target&&b.rootPromise._resolve(b.results);return null},function(a){b.rootPromise._state!==l.Rejected&&b.rootPromise._reject(a)})};a.all=function(b){var f=new a,c=new e;c.target=b.length;c.rootPromise=f;if(b.length)for(var d=0;d<b.length;d++)a._RegisterForFulfillment(b[d],c,d);else f._resolve([]);return f};a.race=function(b){var f=new a;if(b.length)for(var c=0;c<b.length;c++)b[c].then(function(a){f&&
(f._resolve(a),f=null);return null},function(a){f&&(f._reject(a),f=null)});return f};return a}(),b=function(){function a(){}a.Apply=function(a){void 0===a&&(a=!1);if(a||"undefined"===typeof Promise)window.Promise=c};return a}()},ADVu:function(k,h,d){function l(a){var b=a.getClassName();if(A[b])return A[b];A[b]={};for(var f=A[b];b;){var c=D[b],g;for(g in c)f[g]=c[g];var m=!1;do{c=Object.getPrototypeOf(a);if(!c.getClassName){m=!0;break}if(c.getClassName()!==b)break;a=c}while(c);if(m)break;b=c.getClassName();
a=c}return f}function e(a,b){return function(f,c){f=f.getClassName();D[f]||(D[f]={});f=D[f];f[c]||(f[c]={type:a,sourceName:b})}}function c(a,b){void 0===b&&(b=null);return function(f,c){var g=b||"_"+c;Object.defineProperty(f,c,{get:function(){return this[g]},set:function(b){this[g]!==b&&(this[g]=b,f[a].apply(this))},enumerable:!0,configurable:!0})}}function b(a,b){void 0===b&&(b=null);return c(a,b)}function a(a){return e(0,a)}function f(a){return e(1,a)}function g(a){return e(2,a)}function y(a){return e(3,
a)}function t(a){return e(4,a)}function u(a){return e(5,a)}function v(a){return e(6,a)}function n(a){return e(7,a)}function q(a){return e(8,a)}function r(a){return e(9,a)}function p(a){return e(10,a)}function m(a){return e(12,a)}function C(a){return e(11,a)}d.d(h,"b",function(){return b});d.d(h,"c",function(){return a});d.d(h,"m",function(){return f});d.d(h,"e",function(){return g});d.d(h,"h",function(){return y});d.d(h,"n",function(){return t});d.d(h,"o",function(){return u});d.d(h,"k",function(){return v});
d.d(h,"g",function(){return n});d.d(h,"f",function(){return q});d.d(h,"i",function(){return r});d.d(h,"l",function(){return p});d.d(h,"j",function(){return m});d.d(h,"d",function(){return C});d.d(h,"a",function(){return H});var B=d("cSa5"),I=d("/SR9"),J=d("n5HA"),K=d("Xeau"),D={},A={},F=function(a,b,f){a=a();B.a&&B.a.AddTagsTo(a,b.tags);var c=l(a),g;for(g in c){var m=b[g],e=c[g].type;if(void 0!==m&&null!==m&&"uniqueId"!==g)switch(e){case 0:case 6:case 11:a[g]=m;break;case 1:a[g]=f||m.isRenderTarget?
m:m.clone();break;case 2:case 3:case 4:case 5:case 7:case 10:case 12:a[g]=f?m:m.clone()}}return a},H=function(){function a(){}a.AppendSerializedAnimations=function(a,b){if(a.animations){b.animations=[];for(var f=0;f<a.animations.length;f++)b.animations.push(a.animations[f].serialize())}};a.Serialize=function(a,b){b||(b={});B.a&&(b.tags=B.a.GetTags(a));var f=l(a),c;for(c in f){var g=f[c],m=g.sourceName||c;g=g.type;var e=a[c];if(void 0!==e&&null!==e&&"uniqueId"!==c)switch(g){case 0:b[m]=e;break;case 1:b[m]=
e.serialize();break;case 2:b[m]=e.asArray();break;case 3:b[m]=e.serialize();break;case 4:b[m]=e.asArray();break;case 5:b[m]=e.asArray();break;case 6:b[m]=e.id;break;case 7:b[m]=e.serialize();break;case 8:b[m]=e.asArray();break;case 9:b[m]=e.serialize();break;case 10:b[m]=e.asArray();break;case 11:b[m]=e.id;case 12:b[m]=e.asArray()}}return b};a.Parse=function(b,f,c,g){void 0===g&&(g=null);b=b();g||(g="");B.a&&B.a.AddTagsTo(b,f.tags);var m=l(b),e;for(e in m){var p=m[e],d=f[p.sourceName||e];p=p.type;
if(void 0!==d&&null!==d&&"uniqueId"!==e){var r=b;switch(p){case 0:r[e]=d;break;case 1:c&&(r[e]=a._TextureParser(d,c,g));break;case 2:r[e]=K.a.FromArray(d);break;case 3:r[e]=a._FresnelParametersParser(d);break;case 4:r[e]=I.d.FromArray(d);break;case 5:r[e]=I.e.FromArray(d);break;case 6:c&&(r[e]=c.getLastMeshByID(d));break;case 7:r[e]=a._ColorCurvesParser(d);break;case 8:r[e]=K.b.FromArray(d);break;case 9:r[e]=a._ImageProcessingConfigurationParser(d);break;case 10:r[e]=I.b.FromArray(d);break;case 11:c&&
(r[e]=c.getCameraByID(d));case 12:r[e]=I.a.FromArray(d)}}}return b};a.Clone=function(a,b){return F(a,b,!1)};a.Instanciate=function(a,b){return F(a,b,!0)};a._ImageProcessingConfigurationParser=function(a){throw J.a.WarnImport("ImageProcessingConfiguration");};a._FresnelParametersParser=function(a){throw J.a.WarnImport("FresnelParameters");};a._ColorCurvesParser=function(a){throw J.a.WarnImport("ColorCurves");};a._TextureParser=function(a,b,f){throw J.a.WarnImport("Texture");};return a}()},AOHV:function(k,
h,d){d.d(h,"a",function(){return b});var l=d("aCSs"),e=d("srWW"),c=d("qjwu"),b=function(){function a(){}a.CreateResizedCopy=function(a,b,d,t){void 0===t&&(t=!0);var f=a.getScene(),g=f.getEngine(),n=new e.a("resized"+a.name,{width:b,height:d},f,!a.noMipmap,!0,a._texture.type,!1,a.samplingMode,!1);n.wrapU=a.wrapU;n.wrapV=a.wrapV;n.uOffset=a.uOffset;n.vOffset=a.vOffset;n.uScale=a.uScale;n.vScale=a.vScale;n.uAng=a.uAng;n.vAng=a.vAng;n.wAng=a.wAng;n.coordinatesIndex=a.coordinatesIndex;n.level=a.level;
n.anisotropicFilteringLevel=a.anisotropicFilteringLevel;n._texture.isReady=!1;a.wrapU=l.a.CLAMP_ADDRESSMODE;a.wrapV=l.a.CLAMP_ADDRESSMODE;var q=new c.a("pass",1,null,t?l.a.BILINEAR_SAMPLINGMODE:l.a.NEAREST_SAMPLINGMODE,g,!1,0);q.getEffect().executeWhenCompiled(function(){q.onApply=function(b){b.setTexture("textureSampler",a)};var b=n.getInternalTexture();b&&(f.postProcessManager.directRender([q],b),g.unBindFramebuffer(b),n.disposeFramebufferObjects(),q.dispose(),b.isReady=!0)});return n};return a}()},
Bfey:function(k,h,d){d.d(h,"a",function(){return e});d.d(h,"b",function(){return c});var l=d("oYeq"),e=function(){function b(a){this.length=0;this.data=Array(a);this._id=b._GlobalId++}b.prototype.push=function(a){this.data[this.length++]=a;this.length>this.data.length&&(this.data.length*=2)};b.prototype.forEach=function(a){for(var b=0;b<this.length;b++)a(this.data[b])};b.prototype.sort=function(a){this.data.sort(a)};b.prototype.reset=function(){this.length=0};b.prototype.dispose=function(){this.reset();
this.data&&(this.data.length=0,this.data=[])};b.prototype.concat=function(a){if(0!==a.length){this.length+a.length>this.data.length&&(this.data.length=2*(this.length+a.length));for(var b=0;b<a.length;b++)this.data[this.length++]=(a.data||a)[b]}};b.prototype.indexOf=function(a){a=this.data.indexOf(a);return a>=this.length?-1:a};b.prototype.contains=function(a){return-1!==this.indexOf(a)};b._GlobalId=0;return b}(),c=function(b){function a(){var a=null!==b&&b.apply(this,arguments)||this;a._duplicateId=
0;return a}Object(l.d)(a,b);a.prototype.push=function(a){b.prototype.push.call(this,a);a.__smartArrayFlags||(a.__smartArrayFlags={});a.__smartArrayFlags[this._id]=this._duplicateId};a.prototype.pushNoDuplicate=function(a){if(a.__smartArrayFlags&&a.__smartArrayFlags[this._id]===this._duplicateId)return!1;this.push(a);return!0};a.prototype.reset=function(){b.prototype.reset.call(this);this._duplicateId++};a.prototype.concatWithNoDuplicate=function(a){if(0!==a.length){this.length+a.length>this.data.length&&
(this.data.length=2*(this.length+a.length));for(var b=0;b<a.length;b++)this.pushNoDuplicate((a.data||a)[b])}};return a}(e)},Dc3z:function(k,h,d){function l(a){var b=[];do Object.getOwnPropertyNames(a).forEach(function(a){-1===b.indexOf(a)&&b.push(a)});while(a=Object.getPrototypeOf(a));return b}d.d(h,"a",function(){return a});var e=d("X2Ve"),c=d("uyO6"),b=function(a,b){return!a||a.getClassName&&"Mesh"===a.getClassName()?null:a.getClassName&&"SubMesh"===a.getClassName()?a.clone(b):a.clone?a.clone():
null},a=function(){function a(){}a.DeepCopy=function(a,f,d,h){for(var g=0,n=l(a);g<n.length;g++){var q=n[g];if(("_"!==q[0]||h&&-1!==h.indexOf(q))&&!(e.a.EndsWith(q,"Observable")||d&&-1!==d.indexOf(q))){var r=a[q],p=typeof r;if("function"!==p)try{if("object"===p)if(r instanceof Array){if(f[q]=[],0<r.length)if("object"==typeof r[0])for(p=0;p<r.length;p++){var m=b(r[p],f);-1===f[q].indexOf(m)&&f[q].push(m)}else f[q]=r.slice(0)}else f[q]=b(r,f);else f[q]=r}catch(C){c.a.Warn(C.message)}}}};return a}()},
Ef72:function(k,h,d){d.d(h,"a",function(){return b});var l=d("OJ6t"),e=d("WnUc"),c=d("ps+7");d("ryL8");var b=function(){function a(a){this.onAfterReductionPerformed=new c.a;this._forceFullscreenViewport=!0;this._activated=!1;this._camera=a;this._postProcessManager=new e.a(a.getScene())}Object.defineProperty(a.prototype,"sourceTexture",{get:function(){return this._sourceTexture},enumerable:!1,configurable:!0});a.prototype.setSourceTexture=function(a,b,c,e){var f=this;void 0===c&&(c=2);void 0===e&&
(e=!0);if(a!==this._sourceTexture){this.dispose(!1);this._sourceTexture=a;this._reductionSteps=[];this._forceFullscreenViewport=e;var g=this._camera.getScene(),d=new l.a("Initial reduction phase","minmaxRedux",["texSize"],["sourceTexture"],1,null,1,g.getEngine(),!1,"#define INITIAL"+(b?"\n#define DEPTH_REDUX":""),c,void 0,void 0,void 0,7);d.autoClear=!1;d.forceFullscreenViewport=e;a=this._sourceTexture.getRenderWidth();b=this._sourceTexture.getRenderHeight();d.onApply=function(a,b){return function(c){c.setTexture("sourceTexture",
f._sourceTexture);c.setFloatArray2("texSize",new Float32Array([a,b]))}}(a,b);this._reductionSteps.push(d);for(d=1;1<a||1<b;){a=Math.max(Math.round(a/2),1);b=Math.max(Math.round(b/2),1);var q=new l.a("Reduction phase "+d,"minmaxRedux",["texSize"],null,{width:a,height:b},null,1,g.getEngine(),!1,"#define "+(1==a&&1==b?"LAST":1==a||1==b?"ONEBEFORELAST":"MAIN"),c,void 0,void 0,void 0,7);q.autoClear=!1;q.forceFullscreenViewport=e;q.onApply=function(a,b){return function(c){1==a||1==b?c.setIntArray2("texSize",
new Int32Array([a,b])):c.setFloatArray2("texSize",new Float32Array([a,b]))}}(a,b);this._reductionSteps.push(q);d++;1==a&&1==b&&q.onAfterRenderObservable.add(function(a,b,c){var e=new Float32Array(4*a*b),m={min:0,max:0};return function(){g.getEngine()._readTexturePixels(c.inputTexture,a,b,-1,0,e);m.min=e[0];m.max=e[1];f.onAfterReductionPerformed.notifyObservers(m)}}(a,b,q))}}};Object.defineProperty(a.prototype,"refreshRate",{get:function(){return this._sourceTexture?this._sourceTexture.refreshRate:
-1},set:function(a){this._sourceTexture&&(this._sourceTexture.refreshRate=a)},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"activated",{get:function(){return this._activated},enumerable:!1,configurable:!0});a.prototype.activate=function(){var a=this;!this._onAfterUnbindObserver&&this._sourceTexture&&(this._onAfterUnbindObserver=this._sourceTexture.onAfterUnbindObservable.add(function(){a._reductionSteps[0].activate(a._camera);a._postProcessManager.directRender(a._reductionSteps,
a._reductionSteps[0].inputTexture,a._forceFullscreenViewport);a._camera.getScene().getEngine().unBindFramebuffer(a._reductionSteps[0].inputTexture,!1)}),this._activated=!0)};a.prototype.deactivate=function(){this._onAfterUnbindObserver&&this._sourceTexture&&(this._sourceTexture.onAfterUnbindObservable.remove(this._onAfterUnbindObserver),this._onAfterUnbindObserver=null,this._activated=!1)};a.prototype.dispose=function(a){void 0===a&&(a=!0);a&&this.onAfterReductionPerformed.clear();this.deactivate();
if(this._reductionSteps){for(var b=0;b<this._reductionSteps.length;++b)this._reductionSteps[b].dispose();this._reductionSteps=null}this._postProcessManager&&a&&this._postProcessManager.dispose();this._sourceTexture=null};return a}()},FQ8M:function(k,h,d){d.d(h,"a",function(){return l});var l=function(){function e(){}e.RandomId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var b=16*Math.random()|0;return("x"===c?b:b&3|8).toString(16)})};return e}()},GFqQ:function(k,
h,d){function l(){var b;onmessage=function(a){switch(a.data.action){case "init":a=a.data.urls;importScripts(a.jsDecoderModule);null!==a.wasmUASTCToASTC&&(KTX2DECODER.LiteTranscoder_UASTC_ASTC.WasmModuleURL=a.wasmUASTCToASTC);null!==a.wasmUASTCToBC7&&(KTX2DECODER.LiteTranscoder_UASTC_BC7.WasmModuleURL=a.wasmUASTCToBC7);null!==a.wasmUASTCToRGBA_UNORM&&(KTX2DECODER.LiteTranscoder_UASTC_RGBA_UNORM.WasmModuleURL=a.wasmUASTCToRGBA_UNORM);null!==a.wasmUASTCToRGBA_SRGB&&(KTX2DECODER.LiteTranscoder_UASTC_RGBA_SRGB.WasmModuleURL=
a.wasmUASTCToRGBA_SRGB);null!==a.jsMSCTranscoder&&(KTX2DECODER.MSCTranscoder.JSModuleURL=a.jsMSCTranscoder);null!==a.wasmMSCTranscoder&&(KTX2DECODER.MSCTranscoder.WasmModuleURL=a.wasmMSCTranscoder);b=new KTX2DECODER.KTX2Decoder;postMessage({action:"init"});break;case "decode":b.decode(a.data.data,a.data.caps,a.data.options).then(function(a){for(var b=[],c=0;c<a.mipmaps.length;++c){var f=a.mipmaps[c];f&&f.data&&b.push(f.data.buffer)}postMessage({action:"decoded",success:!0,decodedData:a},b)}).catch(function(a){postMessage({action:"decoded",
success:!1,msg:a})})}}}d.d(h,"a",function(){return c});var e=d("yiEH"),c=function(){function b(a,c){void 0===c&&(c=b.DefaultNumWorkers);this._engine=a;b._Initialized||b._CreateWorkerPool(c)}b.GetDefaultNumWorkers=function(){return"object"===typeof navigator&&navigator.hardwareConcurrency?Math.min(Math.floor(.5*navigator.hardwareConcurrency),4):1};b._CreateWorkerPool=function(a){this._Initialized=!0;a&&"function"===typeof Worker?b._WorkerPoolPromise=new Promise(function(c){for(var f=URL.createObjectURL(new Blob(["("+
l+")()"],{type:"application/javascript"})),d=Array(a),t=0;t<d.length;t++)d[t]=new Promise(function(a,c){var e=new Worker(f),g=function(a){e.removeEventListener("error",g);e.removeEventListener("message",d);c(a)},d=function(b){"init"===b.data.action&&(e.removeEventListener("error",g),e.removeEventListener("message",d),a(e))};e.addEventListener("error",g);e.addEventListener("message",d);e.postMessage({action:"init",urls:b.URLConfig})});Promise.all(d).then(function(a){c(new e.a(a))})}):(KTX2DECODER.MSCTranscoder.UseFromWorkerThread=
!1,KTX2DECODER.WASMMemoryManager.LoadBinariesFromCurrentThread=!0)};b.prototype.uploadAsync=function(a,c,e){var f=this,d=this._engine.getCaps(),g={astc:!!d.astc,bptc:!!d.bptc,s3tc:!!d.s3tc,pvrtc:!!d.pvrtc,etc2:!!d.etc2,etc1:!!d.etc1};return b._WorkerPoolPromise?b._WorkerPoolPromise.then(function(b){return new Promise(function(d,q){b.push(function(b,p){var m=function(a){b.removeEventListener("error",m);b.removeEventListener("message",r);q(a);p()},r=function(a){if("decoded"===a.data.action){b.removeEventListener("error",
m);b.removeEventListener("message",r);if(a.data.success)try{f._createTexture(a.data.decodedData,c,e),d()}catch(I){q({message:I})}else q({message:a.data.msg});p()}};b.addEventListener("error",m);b.addEventListener("message",r);b.postMessage({action:"decode",data:a,caps:g,options:e})})})}):new Promise(function(e,g){b._Ktx2Decoder||(b._Ktx2Decoder=new KTX2DECODER.KTX2Decoder);b._Ktx2Decoder.decode(a,d).then(function(a){f._createTexture(a,c);e()}).catch(function(a){g({message:a})})})};b.prototype.dispose=
function(){b._WorkerPoolPromise&&b._WorkerPoolPromise.then(function(a){a.dispose()});delete b._WorkerPoolPromise};b.prototype._createTexture=function(a,b,c){this._engine._bindTextureDirectly(this._engine._gl.TEXTURE_2D,b);c&&(c.transcodedFormat=a.transcodedFormat,c.isInGammaSpace=a.isInGammaSpace,c.transcoderName=a.transcoderName);32856===a.transcodedFormat?(b.type=0,b.format=5):b.format=a.transcodedFormat;b._gammaSpace=a.isInGammaSpace;if(a.errors)throw Error("KTX2 container - could not transcode the data. "+
a.errors);for(c=0;c<a.mipmaps.length;++c){var f=a.mipmaps[c];if(!f||!f.data)throw Error("KTX2 container - could not transcode one of the image");32856===a.transcodedFormat?(b.width=f.width,b.height=f.height,this._engine._uploadDataToTextureDirectly(b,f.data,0,c,void 0,!0)):this._engine._uploadCompressedDataToTextureDirectly(b,a.transcodedFormat,f.width,f.height,f.data,0,c)}b.width=a.mipmaps[0].width;b.height=a.mipmaps[0].height;b.generateMipMaps=1<a.mipmaps.length;b.isReady=!0;this._engine._bindTextureDirectly(this._engine._gl.TEXTURE_2D,
null)};b.IsValid=function(a){return 12<=a.byteLength&&(a=new Uint8Array(a.buffer,a.byteOffset,12),171===a[0]&&75===a[1]&&84===a[2]&&88===a[3]&&32===a[4]&&50===a[5]&&48===a[6]&&187===a[7]&&13===a[8]&&10===a[9]&&26===a[10]&&10===a[11])?!0:!1};b.URLConfig={jsDecoderModule:"https://preview.babylonjs.com/babylon.ktx2Decoder.js",wasmUASTCToASTC:null,wasmUASTCToBC7:null,wasmUASTCToRGBA_UNORM:null,wasmUASTCToRGBA_SRGB:null,jsMSCTranscoder:null,wasmMSCTranscoder:null};b.DefaultNumWorkers=b.GetDefaultNumWorkers();
return b}()},J2vy:function(k,h,d){d.d(h,"a",function(){return e});var l=d("h87I"),e=function(){function c(){}Object.defineProperty(c,"Now",{get:function(){return l.a.IsWindowObjectExist()&&window.performance&&window.performance.now?window.performance.now():Date.now()},enumerable:!1,configurable:!0});return c}()},Pro5:function(k,h,d){d.d(h,"a",function(){return e});var l=d("uyO6"),e=function(){function c(){}c.GetTGAHeader=function(b){var a=0;return{id_length:b[a++],colormap_type:b[a++],image_type:b[a++],
colormap_index:b[a++]|b[a++]<<8,colormap_length:b[a++]|b[a++]<<8,colormap_size:b[a++],origin:[b[a++]|b[a++]<<8,b[a++]|b[a++]<<8],width:b[a++]|b[a++]<<8,height:b[a++]|b[a++]<<8,pixel_size:b[a++],flags:b[a++]}};c.UploadContent=function(b,a){if(19>a.length)l.a.Error("Unable to load TGA file - Not enough data to contain header");else{var f=18,e=c.GetTGAHeader(a);if(e.id_length+f>a.length)l.a.Error("Unable to load TGA file - Not enough data");else{f+=e.id_length;var d=!1,h=!1,k=!1;switch(e.image_type){case c._TYPE_RLE_INDEXED:d=
!0;case c._TYPE_INDEXED:h=!0;break;case c._TYPE_RLE_RGB:d=!0;case c._TYPE_RGB:break;case c._TYPE_RLE_GREY:d=!0;case c._TYPE_GREY:k=!0}var v=e.pixel_size>>3,n=e.width*e.height*v,q;h&&(q=a.subarray(f,f+=e.colormap_length*(e.colormap_size>>3)));if(d){d=new Uint8Array(n);for(var r,p=0,m=new Uint8Array(v);f<n&&p<n;)if(r=a[f++],h=(r&127)+1,r&128){for(r=0;r<v;++r)m[r]=a[f++];for(r=0;r<h;++r)d.set(m,p+r*v);p+=v*h}else{h*=v;for(r=0;r<h;++r)d[p+r]=a[f++];p+=h}}else d=a.subarray(f,f+(h?e.width*e.height:n));
switch((e.flags&c._ORIGIN_MASK)>>c._ORIGIN_SHIFT){default:case c._ORIGIN_UL:a=0;v=1;p=e.width;f=0;n=1;h=e.height;break;case c._ORIGIN_BL:a=0;v=1;p=e.width;f=e.height-1;h=n=-1;break;case c._ORIGIN_UR:a=e.width-1;p=v=-1;f=0;n=1;h=e.height;break;case c._ORIGIN_BR:a=e.width-1,p=v=-1,f=e.height-1,h=n=-1}e=c["_getImageData"+(k?"Grey":"")+e.pixel_size+"bits"](e,q,d,f,n,h,a,v,p);b.getEngine()._uploadDataToTextureDirectly(b,e)}}};c._getImageData8bits=function(b,a,c,e,d,h,l,k,n){var f=b.width,g=0,p,m;b=new Uint8Array(f*
b.height*4);for(m=e;m!==h;m+=d)for(p=l;p!==n;p+=k,g++)e=c[g],b[4*(p+f*m)+3]=255,b[4*(p+f*m)+2]=a[3*e],b[4*(p+f*m)+1]=a[3*e+1],b[4*(p+f*m)]=a[3*e+2];return b};c._getImageData16bits=function(b,a,c,e,d,h,l,k,n){a=b.width;var f=0,g,p;b=new Uint8Array(a*b.height*4);for(p=e;p!==h;p+=d)for(g=l;g!==n;g+=k,f+=2){e=c[f+0]+(c[f+1]<<8);var m=255*((e&992)>>5)/31|0,C=255*(e&31)/31|0;b[4*(g+a*p)]=255*((e&31744)>>10)/31|0;b[4*(g+a*p)+1]=m;b[4*(g+a*p)+2]=C;b[4*(g+a*p)+3]=e&32768?0:255}return b};c._getImageData24bits=
function(b,a,c,e,d,h,l,k,n){a=b.width;var f=0,g;b=new Uint8Array(a*b.height*4);for(g=e;g!==h;g+=d)for(e=l;e!==n;e+=k,f+=3)b[4*(e+a*g)+3]=255,b[4*(e+a*g)+2]=c[f+0],b[4*(e+a*g)+1]=c[f+1],b[4*(e+a*g)]=c[f+2];return b};c._getImageData32bits=function(b,a,c,e,d,h,l,k,n){a=b.width;var f=0,g;b=new Uint8Array(a*b.height*4);for(g=e;g!==h;g+=d)for(e=l;e!==n;e+=k,f+=4)b[4*(e+a*g)+2]=c[f+0],b[4*(e+a*g)+1]=c[f+1],b[4*(e+a*g)]=c[f+2],b[4*(e+a*g)+3]=c[f+3];return b};c._getImageDataGrey8bits=function(b,a,c,e,d,h,
l,k,n){a=b.width;var f=0,g,p;b=new Uint8Array(a*b.height*4);for(p=e;p!==h;p+=d)for(g=l;g!==n;g+=k,f++)e=c[f],b[4*(g+a*p)]=e,b[4*(g+a*p)+1]=e,b[4*(g+a*p)+2]=e,b[4*(g+a*p)+3]=255;return b};c._getImageDataGrey16bits=function(b,a,c,e,d,h,l,k,n){a=b.width;var f=0,g;b=new Uint8Array(a*b.height*4);for(g=e;g!==h;g+=d)for(e=l;e!==n;e+=k,f+=2)b[4*(e+a*g)]=c[f+0],b[4*(e+a*g)+1]=c[f+0],b[4*(e+a*g)+2]=c[f+0],b[4*(e+a*g)+3]=c[f+1];return b};c._TYPE_INDEXED=1;c._TYPE_RGB=2;c._TYPE_GREY=3;c._TYPE_RLE_INDEXED=9;c._TYPE_RLE_RGB=
10;c._TYPE_RLE_GREY=11;c._ORIGIN_MASK=48;c._ORIGIN_SHIFT=4;c._ORIGIN_BL=0;c._ORIGIN_BR=1;c._ORIGIN_UL=2;c._ORIGIN_UR=3;return c}()},SLoj:function(k,h,d){d.d(h,"a",function(){return l});var l=function(){function e(){}e.FilesToLoad={};return e}()},SNd0:function(k,h,d){d.d(h,"a",function(){return l});var l=function(){function e(){}e.ExponentialBackoff=function(c,b){void 0===c&&(c=3);void 0===b&&(b=500);return function(a,e,d){return 0!==e.status||d>=c||-1!==a.indexOf("file:")?-1:Math.pow(2,d)*b}};return e}()},
TFEU:function(k,h,d){d.d(h,"b",function(){return t});d.d(h,"a",function(){return n});var l=d("oYeq"),e=d("Ksm9"),c=d("h87I"),b=d("ps+7"),a=d("SLoj"),f=d("SNd0"),g=d("+FKn"),y=d("X2Ve");k=d("h13i");d=d("E6EV");var t=function(a){function b(c,f){c=a.call(this,c)||this;c.name="LoadFileError";g.a._setPrototypeOf(c,b.prototype);f instanceof e.a?c.request=f:c.file=f;return c}Object(l.d)(b,a);return b}(g.a),u=function(a){function b(c,e){c=a.call(this,c)||this;c.request=e;c.name="RequestFileError";g.a._setPrototypeOf(c,
b.prototype);return c}Object(l.d)(b,a);return b}(g.a),v=function(a){function b(c,e){c=a.call(this,c)||this;c.file=e;c.name="ReadFileError";g.a._setPrototypeOf(c,b.prototype);return c}Object(l.d)(b,a);return b}(g.a),n=function(){function d(){}d._CleanUrl=function(a){return a=a.replace(/#/mg,"%23")};d.SetCorsBehavior=function(a,b){if((!a||0!==a.indexOf("data:"))&&d.CorsBehavior)if("string"===typeof d.CorsBehavior||this.CorsBehavior instanceof String)b.crossOrigin=d.CorsBehavior;else if(a=d.CorsBehavior(a))b.crossOrigin=
a};d.LoadImage=function(b,c,e,f,g){void 0===g&&(g="");var m=!1;if(b instanceof ArrayBuffer||ArrayBuffer.isView(b))if("undefined"!==typeof Blob){var p=URL.createObjectURL(new Blob([b],{type:g}));m=!0}else p="data:"+g+";base64,"+y.a.EncodeArrayBufferToBase64(b);else b instanceof Blob?(p=URL.createObjectURL(b),m=!0):(p=d._CleanUrl(b),p=d.PreprocessUrl(b));if("undefined"===typeof Image)return d.LoadFile(p,function(a){createImageBitmap(new Blob([a],{type:g})).then(function(a){c(a);m&&URL.revokeObjectURL(p)}).catch(function(a){e&&
e("Error while trying to load image: "+b,a)})},void 0,f||void 0,!0,function(a,c){e&&e("Error while trying to load image: "+b,c)}),null;var n=new Image;d.SetCorsBehavior(p,n);var C=function(){n.removeEventListener("load",C);n.removeEventListener("error",h);c(n);m&&n.src&&URL.revokeObjectURL(n.src)},h=function(a){n.removeEventListener("load",C);n.removeEventListener("error",h);if(e){var c=b.toString();e("Error while trying to load image: "+(32>c.length?c:c.slice(0,32)+"..."),a)}m&&n.src&&URL.revokeObjectURL(n.src)};
n.addEventListener("load",C);n.addEventListener("error",h);var l=function(){n.src=p},k=function(){f&&f.loadImage(p,n)};if("data:"!==p.substr(0,5)&&f&&f.enableTexturesOffline)f.open(k,l);else{if(-1!==p.indexOf("file:")&&(k=decodeURIComponent(p.substring(5).toLowerCase()),a.a.FilesToLoad[k])){try{try{var B=URL.createObjectURL(a.a.FilesToLoad[k])}catch(G){B=URL.createObjectURL(a.a.FilesToLoad[k])}n.src=B;m=!0}catch(G){n.src=""}return n}l()}return n};d.ReadFile=function(a,c,e,f,d){var m=new FileReader,
g={onCompleteObservable:new b.a,abort:function(){return m.abort()}};m.onloadend=function(a){return g.onCompleteObservable.notifyObservers(g)};d&&(m.onerror=function(b){d(new v("Unable to read "+a.name,a))});m.onload=function(a){c(a.target.result)};e&&(m.onprogress=e);f?m.readAsArrayBuffer(a):m.readAsText(a);return g};d.LoadFile=function(b,c,e,f,g,n){if(-1!==b.indexOf("file:")){var m=decodeURIComponent(b.substring(5).toLowerCase());0===m.indexOf("./")&&(m=m.substring(2));if(m=a.a.FilesToLoad[m])return d.ReadFile(m,
c,e,g,n?function(a){return n(void 0,new t(a.message,a.file))}:void 0)}return d.RequestFile(b,function(a,b){c(a,b?b.responseURL:void 0)},e,f,g,n?function(a){n(a.request,new t(a.message,a.request))}:void 0)};d.RequestFile=function(a,f,m,g,n,h,k){a=d._CleanUrl(a);a=d.PreprocessUrl(a);var p=d.BaseUrl+a,C=!1,l={onCompleteObservable:new b.a,abort:function(){return C=!0}},B=function(){var a=new e.a,b=null;l.abort=function(){C=!0;a.readyState!==(XMLHttpRequest.DONE||4)&&a.abort();null!==b&&(clearTimeout(b),
b=null)};var g=function(B){a.open("GET",p);k&&k(a);n&&(a.responseType="arraybuffer");m&&a.addEventListener("progress",m);var q=function(){a.removeEventListener("loadend",q);l.onCompleteObservable.notifyObservers(l);l.onCompleteObservable.clear()};a.addEventListener("loadend",q);var r=function(){if(!C&&a.readyState===(XMLHttpRequest.DONE||4))if(a.removeEventListener("readystatechange",r),200<=a.status&&300>a.status||0===a.status&&(!c.a.IsWindowObjectExist()||d.IsFileURL()))f(n?a.response:a.responseText,
a);else{var m=d.DefaultRetryStrategy;if(m&&(m=m(p,a,B),-1!==m)){a.removeEventListener("loadend",q);a=new e.a;b=setTimeout(function(){return g(B+1)},m);return}m=new u("Error status: "+a.status+" "+a.statusText+" - Unable to load "+p,a);h&&h(m)}};a.addEventListener("readystatechange",r);a.send()};g(0)};if(g&&g.enableSceneOffline){var q=function(a){a&&400<a.status?h&&h(a):B()};g.open(function(){g&&g.loadFile(d.BaseUrl+a,function(a){C||f(a);l.onCompleteObservable.notifyObservers(l)},m?function(a){C||
m(a)}:void 0,q,n)},q)}else B();return l};d.IsFileURL=function(){return"undefined"!==typeof location&&"file:"===location.protocol};d.DefaultRetryStrategy=f.a.ExponentialBackoff();d.BaseUrl="";d.CorsBehavior="anonymous";d.PreprocessUrl=function(a){return a};return d}();k.a._FileToolsLoadImage=n.LoadImage.bind(n);k.a._FileToolsLoadFile=n.LoadFile.bind(n);d.a._FileToolsLoadFile=n.LoadFile.bind(n)},U2MC:function(k,h,d){d.d(h,"a",function(){return l});var l=function(){function e(){var c=this;this.promise=
new Promise(function(b,a){c._resolve=b;c._reject=a})}Object.defineProperty(e.prototype,"resolve",{get:function(){return this._resolve},enumerable:!1,configurable:!0});Object.defineProperty(e.prototype,"reject",{get:function(){return this._reject},enumerable:!1,configurable:!0});return e}()},"W+I9":function(k,h,d){d.d(h,"a",function(){return e});var l=d("J2vy"),e=function(){function b(a){void 0===a&&(a=30);this._enabled=!0;this._rollingFrameTime=new c(a)}b.prototype.sampleFrame=function(a){void 0===
a&&(a=l.a.Now);this._enabled&&(null!=this._lastFrameTimeMs&&this._rollingFrameTime.add(a-this._lastFrameTimeMs),this._lastFrameTimeMs=a)};Object.defineProperty(b.prototype,"averageFrameTime",{get:function(){return this._rollingFrameTime.average},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"averageFrameTimeVariance",{get:function(){return this._rollingFrameTime.variance},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"instantaneousFrameTime",{get:function(){return this._rollingFrameTime.history(0)},
enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"averageFPS",{get:function(){return 1E3/this._rollingFrameTime.average},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"instantaneousFPS",{get:function(){var a=this._rollingFrameTime.history(0);return 0===a?0:1E3/a},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"isSaturated",{get:function(){return this._rollingFrameTime.isSaturated()},enumerable:!1,configurable:!0});b.prototype.enable=function(){this._enabled=
!0};b.prototype.disable=function(){this._enabled=!1;this._lastFrameTimeMs=null};Object.defineProperty(b.prototype,"isEnabled",{get:function(){return this._enabled},enumerable:!1,configurable:!0});b.prototype.reset=function(){this._lastFrameTimeMs=null;this._rollingFrameTime.reset()};return b}(),c=function(){function b(a){this._samples=Array(a);this.reset()}b.prototype.add=function(a){if(this.isSaturated()){var b=this._samples[this._pos];var c=b-this.average;this.average-=c/(this._sampleCount-1);this._m2-=
c*(b-this.average)}else this._sampleCount++;c=a-this.average;this.average+=c/this._sampleCount;this._m2+=c*(a-this.average);this.variance=this._m2/(this._sampleCount-1);this._samples[this._pos]=a;this._pos++;this._pos%=this._samples.length};b.prototype.history=function(a){if(a>=this._sampleCount||a>=this._samples.length)return 0;var b=this._wrapPosition(this._pos-1);return this._samples[this._wrapPosition(b-a)]};b.prototype.isSaturated=function(){return this._sampleCount>=this._samples.length};b.prototype.reset=
function(){this._m2=this._pos=this._sampleCount=this.variance=this.average=0};b.prototype._wrapPosition=function(a){var b=this._samples.length;return(a%b+b)%b};return b}()},WHS4:function(k,h,d){d.d(h,"a",function(){return l});var l=function(){function e(){}e.GetClass=function(c){return this.RegisteredTypes&&this.RegisteredTypes[c]?this.RegisteredTypes[c]:null};e.RegisteredTypes={};return e}()},X2Ve:function(k,h,d){d.d(h,"a",function(){return l});var l=function(){function e(){}e.EndsWith=function(c,
b){return-1!==c.indexOf(b,c.length-b.length)};e.StartsWith=function(c,b){return c?0===c.indexOf(b):!1};e.Decode=function(c){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(c);for(var b="",a=0;a<c.byteLength;a++)b+=String.fromCharCode(c[a]);return b};e.EncodeArrayBufferToBase64=function(c){for(var b="",a,e,d,h,l,k=0,v=ArrayBuffer.isView(c)?new Uint8Array(c.buffer,c.byteOffset,c.byteLength):new Uint8Array(c);k<v.length;)a=v[k++],c=k<v.length?v[k++]:Number.NaN,e=k<v.length?v[k++]:
Number.NaN,d=a>>2,a=(a&3)<<4|c>>4,h=(c&15)<<2|e>>6,l=e&63,isNaN(c)?h=l=64:isNaN(e)&&(l=64),b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(h)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(l);return b};e.PadNumber=function(c,b){for(c=String(c);c.length<b;)c="0"+c;return c};return e}()},
YKqZ:function(k,h,d){d.d(h,"b",function(){return q});d.d(h,"a",function(){return r});var l=d("ps+7"),e=d("h87I"),c=d("uyO6"),b=d("Dc3z"),a=d("J2vy"),f=d("n5HA"),g=d("Ksm9"),y=d("e2Mr"),t=d("TFEU");k=d("6SkX");var u=d("vYHP"),v=d("4HJg"),n=d("FQ8M"),q=function(){function d(){}Object.defineProperty(d,"BaseUrl",{get:function(){return t.a.BaseUrl},set:function(a){t.a.BaseUrl=a},enumerable:!1,configurable:!0});Object.defineProperty(d,"DefaultRetryStrategy",{get:function(){return t.a.DefaultRetryStrategy},
set:function(a){t.a.DefaultRetryStrategy=a},enumerable:!1,configurable:!0});Object.defineProperty(d,"CorsBehavior",{get:function(){return t.a.CorsBehavior},set:function(a){t.a.CorsBehavior=a},enumerable:!1,configurable:!0});Object.defineProperty(d,"UseFallbackTexture",{get:function(){return y.a.UseFallbackTexture},set:function(a){y.a.UseFallbackTexture=a},enumerable:!1,configurable:!0});Object.defineProperty(d,"RegisteredExternalClasses",{get:function(){return v.a.RegisteredExternalClasses},set:function(a){v.a.RegisteredExternalClasses=
a},enumerable:!1,configurable:!0});Object.defineProperty(d,"fallbackTexture",{get:function(){return y.a.FallbackTexture},set:function(a){y.a.FallbackTexture=a},enumerable:!1,configurable:!0});d.FetchToRef=function(a,b,c,d,e,f){a=4*((Math.abs(a)*c%c|0)+(Math.abs(b)*d%d|0)*c);f.r=e[a]/255;f.g=e[a+1]/255;f.b=e[a+2]/255;f.a=e[a+3]/255};d.Mix=function(a,b,c){return a*(1-c)+b*c};d.Instantiate=function(a){return v.a.Instantiate(a)};d.Slice=function(a,b,c){return a.slice?a.slice(b,c):Array.prototype.slice.call(a,
b,c)};d.SliceToArray=function(a,b,c){return Array.isArray(a)?a.slice(b,c):Array.prototype.slice.call(a,b,c)};d.SetImmediate=function(a){u.a.SetImmediate(a)};d.IsExponentOfTwo=function(a){var b=1;do b*=2;while(b<a);return b===a};d.FloatRound=function(a){return Math.fround?Math.fround(a):d._tmpFloatArray[0]=a};d.GetFilename=function(a){var b=a.lastIndexOf("/");return 0>b?a:a.substring(b+1)};d.GetFolderPath=function(a,b){void 0===b&&(b=!1);var c=a.lastIndexOf("/");return 0>c?b?a:"":a.substring(0,c+1)};
d.ToDegrees=function(a){return 180*a/Math.PI};d.ToRadians=function(a){return a*Math.PI/180};d.MakeArray=function(a,b){return!0===b||void 0!==a&&null!=a?Array.isArray(a)?a:[a]:null};d.GetPointerPrefix=function(a){var b="pointer";e.a.IsWindowObjectExist()&&!window.PointerEvent&&e.a.IsNavigatorAvailable()&&!navigator.pointerEnabled&&(b="mouse");!a._badDesktopOS||a._badOS||document&&"ontouchend"in document||(b="mouse");return b};d.SetCorsBehavior=function(a,b){t.a.SetCorsBehavior(a,b)};d.CleanUrl=function(a){return a=
a.replace(/#/gm,"%23")};Object.defineProperty(d,"PreprocessUrl",{get:function(){return t.a.PreprocessUrl},set:function(a){t.a.PreprocessUrl=a},enumerable:!1,configurable:!0});d.LoadImage=function(a,b,c,d,e){return t.a.LoadImage(a,b,c,d,e)};d.LoadFile=function(a,b,c,d,e,f){return t.a.LoadFile(a,b,c,d,e,f)};d.LoadFileAsync=function(a,b){void 0===b&&(b=!0);return new Promise(function(c,d){t.a.LoadFile(a,function(a){c(a)},void 0,void 0,b,function(a,b){d(b)})})};d.LoadScript=function(a,b,c,d){if(e.a.IsWindowObjectExist()){var f=
document.getElementsByTagName("head")[0],g=document.createElement("script");g.setAttribute("type","text/javascript");g.setAttribute("src",a);d&&(g.id=d);g.onload=function(){b&&b()};g.onerror=function(b){c&&c("Unable to load script '"+a+"'",b)};f.appendChild(g)}};d.LoadScriptAsync=function(a,b){var c=this;return new Promise(function(b,d){c.LoadScript(a,function(){b()},function(a,b){d(b)})})};d.ReadFileAsDataURL=function(a,b,c){var d=new FileReader,e={onCompleteObservable:new l.a,abort:function(){return d.abort()}};
d.onloadend=function(a){e.onCompleteObservable.notifyObservers(e)};d.onload=function(a){b(a.target.result)};d.onprogress=c;d.readAsDataURL(a);return e};d.ReadFile=function(a,b,c,d,e){return t.a.ReadFile(a,b,c,d,e)};d.FileAsURL=function(a){a=new Blob([a]);return(window.URL||window.webkitURL).createObjectURL(a)};d.Format=function(a,b){void 0===b&&(b=2);return a.toFixed(b)};d.DeepCopy=function(a,c,d,e){b.a.DeepCopy(a,c,d,e)};d.IsEmpty=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0};
d.RegisterTopRootEvents=function(a,b){for(var c=0;c<b.length;c++){var d=b[c];a.addEventListener(d.name,d.handler,!1);try{window.parent&&window.parent.addEventListener(d.name,d.handler,!1)}catch(J){}}};d.UnregisterTopRootEvents=function(a,b){for(var c=0;c<b.length;c++){var d=b[c];a.removeEventListener(d.name,d.handler);try{a.parent&&a.parent.removeEventListener(d.name,d.handler)}catch(J){}}};d.DumpFramebuffer=function(a,b,c,e,f,g){void 0===f&&(f="image/png");var m=4*a,n=b/2;c=c.readPixels(0,0,a,b);
for(var h=0;h<n;h++)for(var l=0;l<m;l++){var k=l+h*m,p=l+(b-h-1)*m,q=c[k];c[k]=c[p];c[p]=q}d._ScreenshotCanvas||(d._ScreenshotCanvas=document.createElement("canvas"));d._ScreenshotCanvas.width=a;d._ScreenshotCanvas.height=b;if(m=d._ScreenshotCanvas.getContext("2d"))a=m.createImageData(a,b),a.data.set(c),m.putImageData(a,0,0),d.EncodeScreenshotCanvasData(e,f,g)};d.ToBlob=function(a,b,c){void 0===c&&(c="image/png");a.toBlob||(a.toBlob=function(a,b,c){var d=this;setTimeout(function(){for(var e=atob(d.toDataURL(b,
c).split(",")[1]),f=e.length,g=new Uint8Array(f),m=0;m<f;m++)g[m]=e.charCodeAt(m);a(new Blob([g]))})});a.toBlob(function(a){b(a)},c)};d.EncodeScreenshotCanvasData=function(a,b,c){void 0===b&&(b="image/png");a?(b=d._ScreenshotCanvas.toDataURL(b),a(b)):this.ToBlob(d._ScreenshotCanvas,function(a){if("download"in document.createElement("a")){if(!c){var b=new Date;c="screenshot_"+((b.getFullYear()+"-"+(b.getMonth()+1)).slice(2)+"-"+b.getDate()+"_"+b.getHours()+"-"+("0"+b.getMinutes()).slice(-2))+".png"}d.Download(a,
c)}else{var e=URL.createObjectURL(a);if(a=window.open(""))b=a.document.createElement("img"),b.onload=function(){URL.revokeObjectURL(e)},b.src=e,a.document.body.appendChild(b)}},b)};d.Download=function(a,b){if(navigator&&navigator.msSaveBlob)navigator.msSaveBlob(a,b);else{a=window.URL.createObjectURL(a);var c=document.createElement("a");document.body.appendChild(c);c.style.display="none";c.href=a;c.download=b;c.addEventListener("click",function(){c.parentElement&&c.parentElement.removeChild(c)});c.click();
window.URL.revokeObjectURL(a)}};d.BackCompatCameraNoPreventDefault=function(a){return"boolean"===typeof a[0]?a[0]:"boolean"===typeof a[1]?a[1]:!1};d.CreateScreenshot=function(a,b,c,d,e){throw f.a.WarnImport("ScreenshotTools");};d.CreateScreenshotAsync=function(a,b,c,d){throw f.a.WarnImport("ScreenshotTools");};d.CreateScreenshotUsingRenderTarget=function(a,b,c,d,e,g,n,h){throw f.a.WarnImport("ScreenshotTools");};d.CreateScreenshotUsingRenderTargetAsync=function(a,b,c,d,e,g,n){throw f.a.WarnImport("ScreenshotTools");
};d.RandomId=function(){return n.a.RandomId()};d.IsBase64=function(a){return 5>a.length?!1:"data:"===a.substr(0,5)};d.DecodeBase64=function(a){a=atob(a.split(",")[1]);for(var b=a.length,c=new Uint8Array(new ArrayBuffer(b)),d=0;d<b;d++)c[d]=a.charCodeAt(d);return c.buffer};d.GetAbsoluteUrl=function(a){var b=document.createElement("a");b.href=a;return b.href};Object.defineProperty(d,"errorsCount",{get:function(){return c.a.errorsCount},enumerable:!1,configurable:!0});d.Log=function(a){c.a.Log(a)};d.Warn=
function(a){c.a.Warn(a)};d.Error=function(a){c.a.Error(a)};Object.defineProperty(d,"LogCache",{get:function(){return c.a.LogCache},enumerable:!1,configurable:!0});d.ClearLogCache=function(){c.a.ClearLogCache()};Object.defineProperty(d,"LogLevels",{set:function(a){c.a.LogLevels=a},enumerable:!1,configurable:!0});Object.defineProperty(d,"PerformanceLogLevel",{set:function(a){(a&d.PerformanceUserMarkLogLevel)===d.PerformanceUserMarkLogLevel?(d.StartPerformanceCounter=d._StartUserMark,d.EndPerformanceCounter=
d._EndUserMark):(a&d.PerformanceConsoleLogLevel)===d.PerformanceConsoleLogLevel?(d.StartPerformanceCounter=d._StartPerformanceConsole,d.EndPerformanceCounter=d._EndPerformanceConsole):(d.StartPerformanceCounter=d._StartPerformanceCounterDisabled,d.EndPerformanceCounter=d._EndPerformanceCounterDisabled)},enumerable:!1,configurable:!0});d._StartPerformanceCounterDisabled=function(a,b){};d._EndPerformanceCounterDisabled=function(a,b){};d._StartUserMark=function(a,b){void 0===b&&(b=!0);if(!d._performance){if(!e.a.IsWindowObjectExist())return;
d._performance=window.performance}b&&d._performance.mark&&d._performance.mark(a+"-Begin")};d._EndUserMark=function(a,b){void 0===b&&(b=!0);b&&d._performance.mark&&(d._performance.mark(a+"-End"),d._performance.measure(a,a+"-Begin",a+"-End"))};d._StartPerformanceConsole=function(a,b){void 0===b&&(b=!0);b&&(d._StartUserMark(a,b),console.time&&console.time(a))};d._EndPerformanceConsole=function(a,b){void 0===b&&(b=!0);b&&(d._EndUserMark(a,b),console.timeEnd(a))};Object.defineProperty(d,"Now",{get:function(){return a.a.Now},
enumerable:!1,configurable:!0});d.GetClassName=function(a,b){void 0===b&&(b=!1);var c=null;!b&&a.getClassName?c=a.getClassName():(a instanceof Object&&(c=(b?a:Object.getPrototypeOf(a)).constructor.__bjsclassName__),c||(c=typeof a));return c};d.First=function(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(b(d))return d}return null};d.getFullClassName=function(a,b){void 0===b&&(b=!1);var c=null,d=null;!b&&a.getClassName?c=a.getClassName():(a instanceof Object&&(b=b?a:Object.getPrototypeOf(a),c=b.constructor.__bjsclassName__,
d=b.constructor.__bjsmoduleName__),c||(c=typeof a));return c?(null!=d?d+".":"")+c:null};d.DelayAsync=function(a){return new Promise(function(b){setTimeout(function(){b()},a)})};d.IsSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)};d.UseCustomRequestHeaders=!1;d.CustomRequestHeaders=g.a.CustomRequestHeaders;d._tmpFloatArray=new Float32Array(1);d.GetDOMTextContent=e.a.GetDOMTextContent;d.NoneLogLevel=c.a.NoneLogLevel;d.MessageLogLevel=c.a.MessageLogLevel;d.WarningLogLevel=
c.a.WarningLogLevel;d.ErrorLogLevel=c.a.ErrorLogLevel;d.AllLogLevel=c.a.AllLogLevel;d.IsWindowObjectExist=e.a.IsWindowObjectExist;d.PerformanceNoneLogLevel=0;d.PerformanceUserMarkLogLevel=1;d.PerformanceConsoleLogLevel=2;d.StartPerformanceCounter=d._StartPerformanceCounterDisabled;d.EndPerformanceCounter=d._EndPerformanceCounterDisabled;return d}(),r=function(){function a(a,b,c,d){void 0===d&&(d=0);this.iterations=a;this.index=d-1;this._done=!1;this._fn=b;this._successCallback=c}a.prototype.executeNext=
function(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())};a.prototype.breakLoop=function(){this._done=!0;this._successCallback()};a.Run=function(b,c,d,e){void 0===e&&(e=0);b=new a(b,c,d,e);b.executeNext();return b};a.SyncAsyncForLoop=function(b,c,d,e,f,g){void 0===g&&(g=0);return a.Run(Math.ceil(b/c),function(a){f&&f()?a.breakLoop():setTimeout(function(){for(var e=0;e<c;++e){var g=a.index*c+e;if(g>=b)break;d(g);if(f&&f()){a.breakLoop();break}}a.executeNext()},
g)},e)};return a}();y.a.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z";
k.a.Apply()},cSa5:function(k,h,d){d.d(h,"a",function(){return e});var l=d("X8br"),e=function(){function c(){}c.EnableFor=function(b){b._tags=b._tags||{};b.hasTags=function(){return c.HasTags(b)};b.addTags=function(a){return c.AddTagsTo(b,a)};b.removeTags=function(a){return c.RemoveTagsFrom(b,a)};b.matchesTagsQuery=function(a){return c.MatchesQuery(b,a)}};c.DisableFor=function(b){delete b._tags;delete b.hasTags;delete b.addTags;delete b.removeTags;delete b.matchesTagsQuery};c.HasTags=function(b){if(!b._tags)return!1;
b=b._tags;for(var a in b)if(b.hasOwnProperty(a))return!0;return!1};c.GetTags=function(b,a){void 0===a&&(a=!0);if(!b._tags)return null;if(a){a=[];for(var c in b._tags)b._tags.hasOwnProperty(c)&&!0===b._tags[c]&&a.push(c);return a.join(" ")}return b._tags};c.AddTagsTo=function(b,a){a&&"string"===typeof a&&a.split(" ").forEach(function(a,d,e){c._AddTagTo(b,a)})};c._AddTagTo=function(b,a){a=a.trim();""===a||"true"===a||"false"===a||a.match(/[\s]/)||a.match(/^([!]|([|]|[&]){2})/)||(c.EnableFor(b),b._tags[a]=
!0)};c.RemoveTagsFrom=function(b,a){if(c.HasTags(b)){a=a.split(" ");for(var d in a)c._RemoveTagFrom(b,a[d])}};c._RemoveTagFrom=function(b,a){delete b._tags[a]};c.MatchesQuery=function(b,a){return void 0===a?!0:""===a?c.HasTags(b):l.a.Eval(a,function(a){return c.HasTags(b)&&b._tags[a]})};return c}()},dLGY:function(k,h,d){d.d(h,"b",function(){return e});d.d(h,"a",function(){return c});d.d(h,"c",function(){return b});d.d(h,"d",function(){return a});var l=d("Xeau"),e=function(){function a(a,b,c){this.gradient=
a;this.color1=b;this.color2=c}a.prototype.getColorToRef=function(a){this.color2?l.b.LerpToRef(this.color1,this.color2,Math.random(),a):a.copyFrom(this.color1)};return a}(),c=function(){return function(a,b){this.gradient=a;this.color=b}}(),b=function(){function a(a,b,c){this.gradient=a;this.factor1=b;this.factor2=c}a.prototype.getFactor=function(){return void 0===this.factor2||this.factor2===this.factor1?this.factor1:this.factor1+(this.factor2-this.factor1)*Math.random()};return a}(),a=function(){function a(){}
a.GetCurrentGradient=function(a,b,c){if(b[0].gradient>a)c(b[0],b[0],1);else{for(var d=0;d<b.length-1;d++){var e=b[d],f=b[d+1];if(a>=e.gradient&&a<=f.gradient){c(e,f,(a-e.gradient)/(f.gradient-e.gradient));return}}a=b.length-1;c(b[a],b[a],1)}};return a}()},h87I:function(k,h,d){d.d(h,"a",function(){return l});var l=function(){function d(){}d.IsWindowObjectExist=function(){return"undefined"!==typeof window};d.IsNavigatorAvailable=function(){return"undefined"!==typeof navigator};d.IsDocumentAvailable=
function(){return"undefined"!==typeof document};d.GetDOMTextContent=function(c){var b="";for(c=c.firstChild;c;)3===c.nodeType&&(b+=c.textContent),c=c.nextSibling;return b};return d}()},"l/Gj":function(k,h,d){d.d(h,"a",function(){return e});var l=d("/SR9"),e=function(){function c(){}c._RemoveAndStorePivotPoint=function(b){b&&0===c._PivotCached&&(b.getPivotPointToRef(c._OldPivotPoint),c._PivotPostMultiplyPivotMatrix=b._postMultiplyPivotMatrix,c._OldPivotPoint.equalsToFloats(0,0,0)||(b.setPivotMatrix(l.a.IdentityReadOnly),
c._OldPivotPoint.subtractToRef(b.getPivotPoint(),c._PivotTranslation),c._PivotTmpVector.copyFromFloats(1,1,1),c._PivotTmpVector.subtractInPlace(b.scaling),c._PivotTmpVector.multiplyInPlace(c._PivotTranslation),b.position.addInPlace(c._PivotTmpVector)));c._PivotCached++};c._RestorePivotPoint=function(b){b&&!c._OldPivotPoint.equalsToFloats(0,0,0)&&1===c._PivotCached&&(b.setPivotPoint(c._OldPivotPoint),b._postMultiplyPivotMatrix=c._PivotPostMultiplyPivotMatrix,c._PivotTmpVector.copyFromFloats(1,1,1),
c._PivotTmpVector.subtractInPlace(b.scaling),c._PivotTmpVector.multiplyInPlace(c._PivotTranslation),b.position.subtractInPlace(c._PivotTmpVector));this._PivotCached--};c._PivotCached=0;c._OldPivotPoint=new l.e;c._PivotTranslation=new l.e;c._PivotTmpVector=new l.e;c._PivotPostMultiplyPivotMatrix=!1;return c}()},n5HA:function(k,h,d){d.d(h,"a",function(){return l});var l=function(){function d(){}d.WarnImport=function(c){return c+" needs to be imported before as it contains a side-effect required by your code."};
return d}()},nTJO:function(k,h,d){d.d(h,"a",function(){return u});var l=d("YKqZ"),e=d("/SR9"),c=d("sH6m"),b=d("TUvE"),a=d("k2R8"),f=d("WIi2"),g=d("tVVT"),y=d("OJ6t"),t=d("uyO6");d("3XS9");d("s+Kb");d("OFzk");d("F+cX");d("XGuI");var u=function(){function d(){}d.GetEnvInfo=function(a){for(var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c=a=0;c<d._MagicBytes.length;c++)if(b.getUint8(a++)!==d._MagicBytes[c])return t.a.Error("Not a babylon environment map"),null;c="";for(var e;e=b.getUint8(a++);)c+=
String.fromCharCode(e);b=JSON.parse(c);b.specular&&(b.specular.specularDataPosition=a,b.specular.lodGenerationScale=b.specular.lodGenerationScale||.8);return b};d.CreateEnvTextureAsync=function(a){var b=this,e=a.getInternalTexture();if(!e)return Promise.reject("The cube texture is invalid.");var f=e.getEngine();if(f&&f.premultipliedAlpha)return Promise.reject("Env texture can only be created when the engine is created with the premultipliedAlpha option set to false.");if(0===a.textureType)return Promise.reject("The cube texture should allow HDR (Full Float or Half Float).");
var n=f.getRenderingCanvas();if(!n)return Promise.reject("Env texture can only be created when the engine is associated to a canvas.");var h=1;if(!f.getCaps().textureFloatRender&&(h=2,!f.getCaps().textureHalfFloatRender))return Promise.reject("Env texture can only be created when the browser supports half float or full float rendering.");var k=e.width,t=new g.a(f),v={},u=[],D=c.a.Log2(e.width);D=Math.round(D);e=function(b){for(var c=Math.pow(2,D-b),d=function(d){var e=a.readPixels(d,b),g=f.createRawTexture(e,
c,c,5,!1,!1,1,null,h);e=new Promise(function(a,e){var h=new y.a("rgbdEncode","rgbdEncode",null,null,1,null,1,f,!1,void 0,0,void 0,null,!1);h.getEffect().executeWhenCompiled(function(){h.onApply=function(a){a._bindTexture("textureSampler",g)};var e=f.getRenderWidth(),k=f.getRenderHeight();f.setSize(c,c);t.postProcessManager.directRender([h],null);l.b.ToBlob(n,function(c){var e=new FileReader;e.onload=function(c){v[6*b+d]=c.target.result;a()};e.readAsArrayBuffer(c)});f.setSize(e,k)})});u.push(e)},e=
0;6>e;e++)d(e)};for(var A=0;A<=D;A++)e(A);return Promise.all(u).then(function(){t.dispose();for(var c={version:1,width:k,irradiance:b._CreateEnvTextureIrradiance(a),specular:{mipmaps:[],lodGenerationScale:a.lodGenerationScale}},e=0,f=0;f<=D;f++)for(var g=0;6>g;g++){var n=v[6*f+g].byteLength;c.specular.mipmaps.push({length:n,position:e});e+=n}c=JSON.stringify(c);g=new ArrayBuffer(c.length+1);n=new Uint8Array(g);f=0;for(var h=c.length;f<h;f++)n[f]=c.charCodeAt(f);n[c.length]=0;e=new ArrayBuffer(d._MagicBytes.length+
e+g.byteLength);c=new Uint8Array(e);h=new DataView(e);for(f=n=0;f<d._MagicBytes.length;f++)h.setUint8(n++,d._MagicBytes[f]);c.set(new Uint8Array(g),n);n+=g.byteLength;for(f=0;f<=D;f++)for(g=0;6>g;g++)h=v[6*f+g],c.set(new Uint8Array(h),n),n+=h.byteLength;return e})};d._CreateEnvTextureIrradiance=function(a){a=a.sphericalPolynomial;return null==a?null:{x:[a.x.x,a.x.y,a.x.z],y:[a.y.x,a.y.y,a.y.z],z:[a.z.x,a.z.y,a.z.z],xx:[a.xx.x,a.xx.y,a.xx.z],yy:[a.yy.x,a.yy.y,a.yy.z],zz:[a.zz.x,a.zz.y,a.zz.z],yz:[a.yz.x,
a.yz.y,a.yz.z],zx:[a.zx.x,a.zx.y,a.zx.z],xy:[a.xy.x,a.xy.y,a.xy.z]}};d.CreateImageDataArrayBufferViews=function(a,b){if(1!==b.version)throw Error('Unsupported babylon environment map version "'+b.version+'"');var d=b.specular;b=c.a.Log2(b.width);b=Math.round(b)+1;if(d.mipmaps.length!==6*b)throw Error('Unsupported specular mipmaps number "'+d.mipmaps.length+'"');for(var e=Array(b),f=0;f<b;f++){e[f]=Array(6);for(var g=0;6>g;g++){var h=d.mipmaps[6*f+g];e[f][g]=new Uint8Array(a.buffer,a.byteOffset+d.specularDataPosition+
h.position,h.length)}}return e};d.UploadEnvLevelsAsync=function(a,b,c){if(1!==c.version)throw Error('Unsupported babylon environment map version "'+c.version+'"');var e=c.specular;if(!e)return Promise.resolve();a._lodGenerationScale=e.lodGenerationScale;b=d.CreateImageDataArrayBufferViews(b,c);return d.UploadLevelsAsync(a,b)};d._OnImageReadyAsync=function(a,b,c,d,e,f,g,h,k,l,t){return new Promise(function(n,m){if(c){var q=b.createTexture(null,!0,!0,null,1,null,function(a){m(a)},a);d.getEffect().executeWhenCompiled(function(){d.onApply=
function(a){a._bindTexture("textureSampler",q);a.setFloat2("scale",1,1)};b.scenes[0].postProcessManager.directRender([d],l,!0,f,g);b.restoreDefaultFramebuffer();q.dispose();URL.revokeObjectURL(e);n()})}else{b._uploadImageToTexture(t,a,f,g);if(h){var p=k[g];p&&b._uploadImageToTexture(p._texture,a,f,0)}n()}})};d.UploadLevelsAsync=function(b,d){var e=this;if(!l.b.IsExponentOfTwo(b.width))throw Error("Texture size must be a power of two");var g=Math.round(c.a.Log2(b.width))+1,h=b.getEngine(),k=!1,n=!1,
t=null,q=null,v=null,u=h.getCaps();b.format=5;b.type=0;b.generateMipMaps=!0;b._cachedAnisotropicFilteringLevel=null;h.updateTextureSamplingMode(3,b);u.textureLOD?2>h.webGLVersion?k=!1:u.textureHalfFloatRender&&u.textureHalfFloatLinearFiltering?(k=!0,b.type=2):u.textureFloatRender&&u.textureFloatLinearFiltering&&(k=!0,b.type=1):(k=!1,n=!0,v={});if(k)t=new y.a("rgbdDecode","rgbdDecode",null,null,1,null,3,h,!1,void 0,b.type,void 0,null,!1),b._isRGBD=!1,b.invertY=!1,q=h.createRenderTargetCubeTexture(b.width,
{generateDepthBuffer:!1,generateMipMaps:!0,generateStencilBuffer:!1,samplingMode:3,type:b.type,format:5});else if(b._isRGBD=!0,b.invertY=!0,n){var A=b._lodGenerationScale,F=b._lodGenerationOffset;for(u=0;3>u;u++){var H=F,z=(g-1)*A+F;H=Math.round(Math.min(Math.max(H+(z-H)*(1-u/2),0),z));z=new a.a(h,a.b.Temp);z.isCube=!0;z.invertY=!0;z.generateMipMaps=!1;h.updateTextureSamplingMode(2,z);var G=new f.a(null);G.isCube=!0;G._texture=z;v[H]=G;switch(u){case 0:b._lodTextureLow=G;break;case 1:b._lodTextureMid=
G;break;case 2:b._lodTextureHigh=G}}}var N=[];A=function(a){for(var c=function(c){var f=new Blob([d[a][c]],{type:"image/png"}),g=URL.createObjectURL(f),l=void 0;if("undefined"===typeof Image)l=createImageBitmap(f).then(function(d){return e._OnImageReadyAsync(d,h,k,t,g,c,a,n,v,q,b)});else{var m=new Image;m.src=g;l=new Promise(function(d,f){m.onload=function(){e._OnImageReadyAsync(m,h,k,t,g,c,a,n,v,q,b).then(function(){return d()}).catch(function(a){f(a)})};m.onerror=function(a){f(a)}})}N.push(l)},
f=0;6>f;f++)c(f)};for(u=0;u<d.length;u++)A(u);if(d.length<g){A=void 0;u=Math.pow(2,g-1-d.length);u=u*u*4;switch(b.type){case 0:A=new Uint8Array(u);break;case 2:A=new Uint16Array(u);break;case 1:A=new Float32Array(u)}for(u=d.length;u<g;u++)for(F=0;6>F;F++)h._uploadArrayBufferViewToTexture(b,A,F,u)}return Promise.all(N).then(function(){q&&(h._releaseFramebufferObjects(q),h._releaseTexture(b),q._swapAndDie(b));t&&t.dispose();n&&(b._lodTextureHigh&&b._lodTextureHigh._texture&&(b._lodTextureHigh._texture.isReady=
!0),b._lodTextureMid&&b._lodTextureMid._texture&&(b._lodTextureMid._texture.isReady=!0),b._lodTextureLow&&b._lodTextureLow._texture&&(b._lodTextureLow._texture.isReady=!0))})};d.UploadEnvSpherical=function(a,c){1!==c.version&&t.a.Warn('Unsupported babylon environment map version "'+c.version+'"');if(c=c.irradiance){var d=new b.b;e.e.FromArrayToRef(c.x,0,d.x);e.e.FromArrayToRef(c.y,0,d.y);e.e.FromArrayToRef(c.z,0,d.z);e.e.FromArrayToRef(c.xx,0,d.xx);e.e.FromArrayToRef(c.yy,0,d.yy);e.e.FromArrayToRef(c.zz,
0,d.zz);e.e.FromArrayToRef(c.yz,0,d.yz);e.e.FromArrayToRef(c.zx,0,d.zx);e.e.FromArrayToRef(c.xy,0,d.xy);a._sphericalPolynomial=d}};d._UpdateRGBDAsync=function(b,c,e,f,g){b._source=a.b.CubeRawRGBD;b._bufferViewArrayArray=c;b._lodGenerationScale=f;b._lodGenerationOffset=g;b._sphericalPolynomial=e;return d.UploadLevelsAsync(b,c).then(function(){b.isReady=!0})};d._MagicBytes=[134,22,135,150,246,214,150,54];return d}();a.a._UpdateRGBDAsync=u._UpdateRGBDAsync},"ps+7":function(k,h,d){d.d(h,"a",function(){return c});
var l=function(){function b(a,b,c,d){void 0===b&&(b=!1);this.initalize(a,b,c,d)}b.prototype.initalize=function(a,b,c,d){void 0===b&&(b=!1);this.mask=a;this.skipNextObservers=b;this.target=c;this.currentTarget=d;return this};return b}(),e=function(){return function(b,a,c){void 0===c&&(c=null);this.callback=b;this.mask=a;this.scope=c;this.unregisterOnNextCall=this._willBeUnregistered=!1}}();(function(){function b(){}b.prototype.dispose=function(){if(this._observers&&this._observables)for(var a=0;a<
this._observers.length;a++)this._observables[a].remove(this._observers[a]);this._observables=this._observers=null};b.Watch=function(a,c,d,e){void 0===d&&(d=-1);void 0===e&&(e=null);var f=new b;f._observers=[];f._observables=a;for(var g=0;g<a.length;g++){var h=a[g].add(c,d,!1,e);h&&f._observers.push(h)}return f};return b})();var c=function(){function b(a){this._observers=[];this._eventState=new l(0);a&&(this._onObserverAdded=a)}Object.defineProperty(b.prototype,"observers",{get:function(){return this._observers},
enumerable:!1,configurable:!0});b.prototype.add=function(a,b,c,d,h){void 0===b&&(b=-1);void 0===c&&(c=!1);void 0===d&&(d=null);void 0===h&&(h=!1);if(!a)return null;a=new e(a,b,d);a.unregisterOnNextCall=h;c?this._observers.unshift(a):this._observers.push(a);this._onObserverAdded&&this._onObserverAdded(a);return a};b.prototype.addOnce=function(a){return this.add(a,void 0,void 0,void 0,!0)};b.prototype.remove=function(a){return a?-1!==this._observers.indexOf(a)?(this._deferUnregister(a),!0):!1:!1};b.prototype.removeCallback=
function(a,b){for(var c=0;c<this._observers.length;c++){var d=this._observers[c];if(!(d._willBeUnregistered||d.callback!==a||b&&b!==d.scope))return this._deferUnregister(d),!0}return!1};b.prototype._deferUnregister=function(a){var b=this;a.unregisterOnNextCall=!1;a._willBeUnregistered=!0;setTimeout(function(){b._remove(a)},0)};b.prototype._remove=function(a){if(!a)return!1;a=this._observers.indexOf(a);return-1!==a?(this._observers.splice(a,1),!0):!1};b.prototype.makeObserverTopPriority=function(a){this._remove(a);
this._observers.unshift(a)};b.prototype.makeObserverBottomPriority=function(a){this._remove(a);this._observers.push(a)};b.prototype.notifyObservers=function(a,b,c,d,e){void 0===b&&(b=-1);if(!this._observers.length)return!0;var f=this._eventState;f.mask=b;f.target=c;f.currentTarget=d;f.skipNextObservers=!1;f.lastReturnValue=a;f.userInfo=e;c=0;for(d=this._observers;c<d.length;c++)if(e=d[c],!e._willBeUnregistered&&(e.mask&b&&(f.lastReturnValue=e.scope?e.callback.apply(e.scope,[a,f]):e.callback(a,f),
e.unregisterOnNextCall&&this._deferUnregister(e)),f.skipNextObservers))return!1;return!0};b.prototype.notifyObserversWithPromise=function(a,b,c,d,e){var f=this;void 0===b&&(b=-1);var g=Promise.resolve(a);if(!this._observers.length)return g;var h=this._eventState;h.mask=b;h.target=c;h.currentTarget=d;h.skipNextObservers=!1;h.userInfo=e;this._observers.forEach(function(c){!h.skipNextObservers&&!c._willBeUnregistered&&c.mask&b&&(g=c.scope?g.then(function(b){h.lastReturnValue=b;return c.callback.apply(c.scope,
[a,h])}):g.then(function(b){h.lastReturnValue=b;return c.callback(a,h)}),c.unregisterOnNextCall&&f._deferUnregister(c))});return g.then(function(){return a})};b.prototype.notifyObserver=function(a,b,c){void 0===c&&(c=-1);var d=this._eventState;d.mask=c;d.skipNextObservers=!1;a.callback(b,d)};b.prototype.hasObservers=function(){return 0<this._observers.length};b.prototype.clear=function(){this._observers=[];this._onObserverAdded=null};b.prototype.clone=function(){var a=new b;a._observers=this._observers.slice(0);
return a};b.prototype.hasSpecificMask=function(a){void 0===a&&(a=-1);for(var b=0,c=this._observers;b<c.length;b++){var d=c[b];if(d.mask&a||d.mask===a)return!0}return!1};return b}()},qAJR:function(k,h,d){d.d(h,"a",function(){return e});var l=d("OJ6t");d("XGuI");d("DvRB");var e=function(){function c(){}c.ExpandRGBDTexture=function(b){var a=b._texture;if(a&&b.isRGBD){var c=a.getEngine(),d=c.getCaps(),e=!1;d.textureHalfFloatRender&&d.textureHalfFloatLinearFiltering?(e=!0,a.type=2):d.textureFloatRender&&
d.textureFloatLinearFiltering&&(e=!0,a.type=1);e&&(a.isReady=!1,a._isRGBD=!1,a.invertY=!1);b.onLoadObservable.addOnce(function(){if(e){var d=new l.a("rgbdDecode","rgbdDecode",null,null,1,null,3,c,!1,void 0,a.type,void 0,null,!1),f=c.createRenderTargetTexture(a.width,{generateDepthBuffer:!1,generateMipMaps:!1,generateStencilBuffer:!1,samplingMode:a.samplingMode,type:a.type,format:5});d.getEffect().executeWhenCompiled(function(){d.onApply=function(b){b._bindTexture("textureSampler",a);b.setFloat2("scale",
1,1)};b.getScene().postProcessManager.directRender([d],f,!0);c.restoreDefaultFramebuffer();c._releaseTexture(a);c._releaseFramebufferObjects(f);d&&d.dispose();f._swapAndDie(a);a.isReady=!0})}})}};return c}()},qAwy:function(k,h,d){d.d(h,"a",function(){return c});var l=d("oYeq"),e=d("kJhO"),c=function(b){function a(a){return b.call(this,a)||this}Object(l.d)(a,b);Object.defineProperty(a.prototype,"depthRenderer",{get:function(){return this._depthRenderer},enumerable:!1,configurable:!0});a.prototype.setDepthRenderer=
function(a,c,d){void 0===a&&(a=null);void 0===c&&(c=2);void 0===d&&(d=!0);var f=this._camera.getScene();this._depthRenderer&&(delete f._depthRenderer[this._depthRendererId],this._depthRenderer.dispose(),this._depthRenderer=null);null===a&&(f._depthRenderer||(f._depthRenderer={}),a=this._depthRenderer=new e.a(f,c,this._camera,!1),a.enabled=!1,this._depthRendererId="minmax"+this._camera.id,f._depthRenderer[this._depthRendererId]=a);b.prototype.setSourceTexture.call(this,a.getDepthMap(),!0,c,d)};a.prototype.setSourceTexture=
function(a,c,d,e){void 0===d&&(d=2);void 0===e&&(e=!0);b.prototype.setSourceTexture.call(this,a,c,d,e)};a.prototype.activate=function(){this._depthRenderer&&(this._depthRenderer.enabled=!0);b.prototype.activate.call(this)};a.prototype.deactivate=function(){b.prototype.deactivate.call(this);this._depthRenderer&&(this._depthRenderer.enabled=!1)};a.prototype.dispose=function(a){void 0===a&&(a=!0);b.prototype.dispose.call(this,a);this._depthRenderer&&a&&((a=this._depthRenderer.getDepthMap().getScene())&&
delete a._depthRenderer[this._depthRendererId],this._depthRenderer.dispose(),this._depthRenderer=null)};return a}(d("Ef72").a)},rct8:function(k,h,d){d("X8br");d("dHaE");d("HpoW");d("zB3A");var l=d("ADVu");d("U2MC");d("nTJO");var e=d("/SR9");(function(){function a(a,b){this._meshesOrigins=[];this._toCenterVectors=[];this._scaledDirection=e.e.Zero();this._newPosition=e.e.Zero();this._centerPosition=e.e.Zero();this._meshes=a.slice();b?this._centerMesh=b:this._setCenterMesh();a=this._meshes.indexOf(this._centerMesh);
0<=a&&this._meshes.splice(a,1);this._centerPosition=this._centerMesh.getAbsolutePosition().clone();for(a=0;a<this._meshes.length;a++)this._meshes[a]&&(b=this._meshes[a],this._meshesOrigins[a]=b.getAbsolutePosition().clone(),this._toCenterVectors[a]=e.e.Zero(),b._boundingInfo&&this._centerMesh._boundingInfo&&b._boundingInfo.boundingBox.centerWorld.subtractToRef(this._centerMesh._boundingInfo.boundingBox.centerWorld,this._toCenterVectors[a]))}a.prototype._setCenterMesh=function(){e.e.Zero();var a=e.e.Zero();
for(var b=Number.MAX_VALUE,c=0;c<this._meshes.length;c++)if(this._meshes[c]){var d=this._meshes[c],f=d.getBoundingInfo();f&&a.addInPlace(f.boundingBox.centerWorld)}a=a.scale(1/this._meshes.length);for(c=0;c<this._meshes.length;c++)this._meshes[c]&&(d=this._meshes[c],f=d.getBoundingInfo())&&(f=f.boundingBox.centerWorld.subtract(a).lengthSquared(),f<b&&(this._centerMesh=d,b=f))};a.prototype.getClassName=function(){return"MeshExploder"};a.prototype.getMeshes=function(){var a=this._meshes.slice();a.unshift(this._centerMesh);
return a};a.prototype.explode=function(a){void 0===a&&(a=1);for(var b=0;b<this._meshes.length;b++)this._meshes[b]&&this._meshesOrigins[b]&&this._toCenterVectors[b]&&(this._toCenterVectors[b].scaleToRef(a,this._scaledDirection),this._meshesOrigins[b].addToRef(this._scaledDirection,this._newPosition),this._meshes[b].setAbsolutePosition(this._newPosition));this._centerMesh.setAbsolutePosition(this._centerPosition)};return a})();var c=d("R0D4"),b=d("uyO6"),a=d("SLoj");(function(){function d(a,b,c,d,e,
f,g,h,M){this.onProcessFileCallback=function(){return!0};this._engine=a;this._currentScene=b;this._sceneLoadedCallback=c;this._progressCallback=d;this._additionalRenderLoopLogicCallback=e;this._textureLoadingCallback=f;this._startingProcessingFilesCallback=g;this._onReloadCallback=h;this._errorCallback=M}Object.defineProperty(d,"FilesToLoad",{get:function(){return a.a.FilesToLoad},enumerable:!1,configurable:!0});d.prototype.monitorElementForDragNDrop=function(a){var b=this;a&&(this._elementToMonitor=
a,this._dragEnterHandler=function(a){b.drag(a)},this._dragOverHandler=function(a){b.drag(a)},this._dropHandler=function(a){b.drop(a)},this._elementToMonitor.addEventListener("dragenter",this._dragEnterHandler,!1),this._elementToMonitor.addEventListener("dragover",this._dragOverHandler,!1),this._elementToMonitor.addEventListener("drop",this._dropHandler,!1))};Object.defineProperty(d.prototype,"filesToLoad",{get:function(){return this._filesToLoad},enumerable:!1,configurable:!0});d.prototype.dispose=
function(){this._elementToMonitor&&(this._elementToMonitor.removeEventListener("dragenter",this._dragEnterHandler),this._elementToMonitor.removeEventListener("dragover",this._dragOverHandler),this._elementToMonitor.removeEventListener("drop",this._dropHandler))};d.prototype.renderFunction=function(){this._additionalRenderLoopLogicCallback&&this._additionalRenderLoopLogicCallback();if(this._currentScene){if(this._textureLoadingCallback){var a=this._currentScene.getWaitingItemsCount();0<a&&this._textureLoadingCallback(a)}this._currentScene.render()}};
d.prototype.drag=function(a){a.stopPropagation();a.preventDefault()};d.prototype.drop=function(a){a.stopPropagation();a.preventDefault();this.loadFiles(a)};d.prototype._traverseFolder=function(a,b,c,d){var e=this,w=a.createReader(),f=a.fullPath.replace(/^\//,"").replace(/(.+?)\/?$/,"$1/");w.readEntries(function(a){c.count+=a.length;for(var w=0;w<a.length;w++){var x=a[w];x.isFile?x.file(function(a){a.correctName=f+a.name;b.push(a);0===--c.count&&d()}):x.isDirectory&&e._traverseFolder(x,b,c,d)}0===
--c.count&&d()})};d.prototype._processFiles=function(a){for(var b=0;b<a.length;b++){var e=a[b].correctName.toLowerCase(),w=e.split(".").pop();this.onProcessFileCallback(a[b],e,w)&&(c.a.IsPluginForExtensionAvailable("."+w)&&(this._sceneFileToLoad=a[b]),d.FilesToLoad[e]=a[b])}};d.prototype.loadFiles=function(a){var b=this;a&&a.dataTransfer&&a.dataTransfer.files&&(this._filesToLoad=a.dataTransfer.files);a&&a.target&&a.target.files&&(this._filesToLoad=a.target.files);if(this._filesToLoad&&0!==this._filesToLoad.length&&
(this._startingProcessingFilesCallback&&this._startingProcessingFilesCallback(this._filesToLoad),this._filesToLoad&&0<this._filesToLoad.length)){var c=[],d=[];a=a.dataTransfer?a.dataTransfer.items:null;for(var e=0;e<this._filesToLoad.length;e++){var w=this._filesToLoad[e],f=w.name.toLowerCase(),g=void 0;w.correctName=f;a&&(f=a[e],f.getAsEntry?g=f.getAsEntry():f.webkitGetAsEntry&&(g=f.webkitGetAsEntry()));g?g.isDirectory?d.push(g):c.push(w):c.push(w)}if(0===d.length)this._processFiles(c),this._processReload();
else{var h={count:d.length};for(a=0;a<d.length;a++)this._traverseFolder(d[a],c,h,function(){b._processFiles(c);0===h.count&&b._processReload()})}}};d.prototype._processReload=function(){this._onReloadCallback?this._onReloadCallback(this._sceneFileToLoad):this.reload()};d.prototype.reload=function(){var a=this;this._sceneFileToLoad?(this._currentScene&&(0<b.a.errorsCount&&b.a.ClearLogCache(),this._engine.stopRenderLoop()),c.a.ShowLoadingScreen=!1,this._engine.displayLoadingUI(),c.a.LoadAsync("file:",
this._sceneFileToLoad,this._engine,function(b){a._progressCallback&&a._progressCallback(b)}).then(function(b){a._currentScene&&a._currentScene.dispose();a._currentScene=b;a._sceneLoadedCallback&&a._sceneLoadedCallback(a._sceneFileToLoad,a._currentScene);a._currentScene.executeWhenReady(function(){a._engine.hideLoadingUI();a._engine.runRenderLoop(function(){a.renderFunction()})})}).catch(function(b){a._engine.hideLoadingUI();a._errorCallback&&a._errorCallback(a._sceneFileToLoad,a._currentScene,b.message)})):
b.a.Error("Please provide a valid .babylon file.")};return d})();d("nDSY");d("xChT");var f=d("ps+7");d("W+I9");d("6SkX");var g=d("oYeq"),y=d("e2Mr"),t=d("wAMR");k=function(){function a(a){void 0===a&&(a=0);this.priority=a}a.prototype.getDescription=function(){return""};a.prototype.apply=function(a,b){return!0};return a}();var u=function(a){function b(b,c,d){void 0===b&&(b=0);void 0===c&&(c=1024);void 0===d&&(d=.5);var e=a.call(this,b)||this;e.priority=b;e.maximumSize=c;e.step=d;return e}Object(g.d)(b,
a);b.prototype.getDescription=function(){return"Reducing render target texture size to "+this.maximumSize};b.prototype.apply=function(a,b){b=!0;for(var c=0;c<a.textures.length;c++){var d=a.textures[c];if(d.canRescale&&!d.getContext){var e=d.getSize();Math.max(e.width,e.height)>this.maximumSize&&(d.scale(this.step),b=!1)}}return b};return b}(k),v=function(a){function b(b,c,d){void 0===b&&(b=0);void 0===c&&(c=2);void 0===d&&(d=.25);var e=a.call(this,b)||this;e.priority=b;e.maximumScale=c;e.step=d;e._currentScale=
-1;e._directionOffset=1;return e}Object(g.d)(b,a);b.prototype.getDescription=function(){return"Setting hardware scaling level to "+this._currentScale};b.prototype.apply=function(a,b){-1===this._currentScale&&(this._currentScale=a.getEngine().getHardwareScalingLevel(),this._currentScale>this.maximumScale&&(this._directionOffset=-1));this._currentScale+=this._directionOffset*this.step;a.getEngine().setHardwareScalingLevel(this._currentScale);return 1===this._directionOffset?this._currentScale>=this.maximumScale:
this._currentScale<=this.maximumScale};return b}(k),n=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}Object(g.d)(b,a);b.prototype.getDescription=function(){return"Turning shadows on/off"};b.prototype.apply=function(a,b){a.shadowsEnabled=b.isInImprovementMode;return!0};return b}(k),q=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}Object(g.d)(b,a);b.prototype.getDescription=function(){return"Turning post-processes on/off"};b.prototype.apply=function(a,
b){a.postProcessesEnabled=b.isInImprovementMode;return!0};return b}(k),r=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}Object(g.d)(b,a);b.prototype.getDescription=function(){return"Turning lens flares on/off"};b.prototype.apply=function(a,b){a.lensFlaresEnabled=b.isInImprovementMode;return!0};return b}(k),p=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}Object(g.d)(b,a);b.prototype.getDescription=function(){return this.onGetDescription?this.onGetDescription():
"Running user defined callback"};b.prototype.apply=function(a,b){return this.onApply?this.onApply(a,b):!0};return b}(k),m=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}Object(g.d)(b,a);b.prototype.getDescription=function(){return"Turning particles on/off"};b.prototype.apply=function(a,b){a.particlesEnabled=b.isInImprovementMode;return!0};return b}(k),C=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}Object(g.d)(b,a);b.prototype.getDescription=function(){return"Turning render targets off"};
b.prototype.apply=function(a,b){a.renderTargetsEnabled=b.isInImprovementMode;return!0};return b}(k),B=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b._canBeMerged=function(a){return!(a instanceof t.a&&!a.isDisposed()&&a.isVisible&&a.isEnabled())||0<a.instances.length||a.skeleton||a.hasLODLevels?!1:!0};return b}Object(g.d)(b,a);Object.defineProperty(b,"UpdateSelectionTree",{get:function(){return b._UpdateSelectionTree},set:function(a){b._UpdateSelectionTree=a},enumerable:!1,
configurable:!0});b.prototype.getDescription=function(){return"Merging similar meshes together"};b.prototype.apply=function(a,c,d){c=a.meshes.slice(0);for(var e=c.length,f=0;f<e;f++){var w=[],x=c[f];if(this._canBeMerged(x)){w.push(x);for(var E=f+1;E<e;E++){var g=c[E];this._canBeMerged(g)&&g.material===x.material&&g.checkCollisions===x.checkCollisions&&(w.push(g),e--,c.splice(E,1),E--)}2>w.length||t.a.MergeMeshes(w,void 0,!0)}}a.createOrUpdateSelectionOctree&&(void 0!=d?d&&a.createOrUpdateSelectionOctree():
b.UpdateSelectionTree&&a.createOrUpdateSelectionOctree());return!0};b._UpdateSelectionTree=!1;return b}(k),I=function(){function a(a,b){void 0===a&&(a=60);void 0===b&&(b=2E3);this.targetFrameRate=a;this.trackerDuration=b;this.optimizations=[]}a.prototype.addOptimization=function(a){this.optimizations.push(a);return this};a.prototype.addCustomOptimization=function(a,b,c){void 0===c&&(c=0);c=new p(c);c.onApply=a;c.onGetDescription=b;this.optimizations.push(c);return this};a.LowDegradationAllowed=function(b){b=
new a(b);var c=0;b.addOptimization(new B(c));b.addOptimization(new n(c));b.addOptimization(new r(c));c++;b.addOptimization(new q(c));b.addOptimization(new m(c));c++;b.addOptimization(new u(c,1024));return b};a.ModerateDegradationAllowed=function(b){b=new a(b);var c=0;b.addOptimization(new B(c));b.addOptimization(new n(c));b.addOptimization(new r(c));c++;b.addOptimization(new q(c));b.addOptimization(new m(c));c++;b.addOptimization(new u(c,512));c++;b.addOptimization(new C(c));c++;b.addOptimization(new v(c,
2));return b};a.HighDegradationAllowed=function(b){b=new a(b);var c=0;b.addOptimization(new B(c));b.addOptimization(new n(c));b.addOptimization(new r(c));c++;b.addOptimization(new q(c));b.addOptimization(new m(c));c++;b.addOptimization(new u(c,256));c++;b.addOptimization(new C(c));c++;b.addOptimization(new v(c,4));return b};return a}();(function(){function a(a,b,c,d){var e=this;void 0===c&&(c=!0);void 0===d&&(d=!1);this._isRunning=!1;this._currentPriorityLevel=0;this._targetFrameRate=60;this._trackerDuration=
2E3;this._currentFrameRate=0;this._improvementMode=!1;this.onSuccessObservable=new f.a;this.onNewOptimizationAppliedObservable=new f.a;this.onFailureObservable=new f.a;this._options=b?b:new I;this._options.targetFrameRate&&(this._targetFrameRate=this._options.targetFrameRate);this._options.trackerDuration&&(this._trackerDuration=this._options.trackerDuration);if(c){c=b=0;for(var w=this._options.optimizations;c<w.length;c++)w[c].priority=b++}this._improvementMode=d;this._scene=a||y.a.LastCreatedScene;
this._sceneDisposeObserver=this._scene.onDisposeObservable.add(function(){e._sceneDisposeObserver=null;e.dispose()})}Object.defineProperty(a.prototype,"isInImprovementMode",{get:function(){return this._improvementMode},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"currentPriorityLevel",{get:function(){return this._currentPriorityLevel},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"currentFrameRate",{get:function(){return this._currentFrameRate},enumerable:!1,
configurable:!0});Object.defineProperty(a.prototype,"targetFrameRate",{get:function(){return this._targetFrameRate},set:function(a){this._targetFrameRate=a},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"trackerDuration",{get:function(){return this._trackerDuration},set:function(a){this._trackerDuration=a},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"optimizations",{get:function(){return this._options.optimizations},enumerable:!1,configurable:!0});a.prototype.stop=
function(){this._isRunning=!1};a.prototype.reset=function(){this._currentPriorityLevel=0};a.prototype.start=function(){var a=this;this._isRunning||(this._isRunning=!0,this._scene.executeWhenReady(function(){setTimeout(function(){a._checkCurrentState()},a._trackerDuration)}))};a.prototype._checkCurrentState=function(){var a=this;if(this._isRunning){var b=this._scene,c=this._options;this._currentFrameRate=Math.round(b.getEngine().getFps());if(this._improvementMode&&this._currentFrameRate<=this._targetFrameRate||
!this._improvementMode&&this._currentFrameRate>=this._targetFrameRate)this._isRunning=!1,this.onSuccessObservable.notifyObservers(this);else{for(var d=!0,e=!0,f=0;f<c.optimizations.length;f++){var g=c.optimizations[f];g.priority===this._currentPriorityLevel&&(e=!1,d=d&&g.apply(b,this),this.onNewOptimizationAppliedObservable.notifyObservers(g))}e?(this._isRunning=!1,this.onFailureObservable.notifyObservers(this)):(d&&this._currentPriorityLevel++,b.executeWhenReady(function(){setTimeout(function(){a._checkCurrentState()},
a._trackerDuration)}))}}};a.prototype.dispose=function(){this.stop();this.onSuccessObservable.clear();this.onFailureObservable.clear();this.onNewOptimizationAppliedObservable.clear();this._sceneDisposeObserver&&this._scene.onDisposeObservable.remove(this._sceneDisposeObserver)};a.OptimizeAsync=function(b,c,d,e){b=new a(b,c||I.ModerateDegradationAllowed(),!1);d&&b.onSuccessObservable.add(function(){d()});e&&b.onFailureObservable.add(function(){e()});b.start();return b};return a})();var J=d("jI0L"),
K=[],D=function(a,b){K[a.id]||a.doNotSerialize||(b.vertexData.push(a.serializeVerticeData()),K[a.id]=!0)},A=function(a,b){var c={},d=a._geometry;d&&(a.getScene().getGeometryByID(d.id)||D(d,b.geometries));a.serialize&&a.serialize(c);return c},F=function(a,b){if(1===a.delayLoadState||0===a.delayLoadState){if(a.material&&!a.material.doNotSerialize)if(a.material instanceof J.a){if(b.multiMaterials=b.multiMaterials||[],b.materials=b.materials||[],!b.multiMaterials.some(function(b){return b.id===a.material.id})){b.multiMaterials.push(a.material.serialize());
for(var c=function(a){a&&(b.materials.some(function(b){return b.id===a.id})||b.materials.push(a.serialize()))},d=0,e=a.material.subMaterials;d<e.length;d++)c(e[d])}}else b.materials=b.materials||[],b.materials.some(function(b){return b.id===a.material.id})||b.materials.push(a.material.serialize());if(c=a._geometry)b.geometries||(b.geometries={},b.geometries.boxes=[],b.geometries.spheres=[],b.geometries.cylinders=[],b.geometries.toruses=[],b.geometries.grounds=[],b.geometries.planes=[],b.geometries.torusKnots=
[],b.geometries.vertexData=[]),D(c,b.geometries);a.skeleton&&!a.skeleton.doNotSerialize&&(b.skeletons=b.skeletons||[],b.skeletons.push(a.skeleton.serialize()));b.meshes=b.meshes||[];b.meshes.push(A(a,b))}},H=function(){function a(){}a.ClearCache=function(){K=[]};a.Serialize=function(b){var c={};a.ClearCache();c.useDelayedTextureLoading=b.useDelayedTextureLoading;c.autoClear=b.autoClear;c.clearColor=b.clearColor.asArray();c.ambientColor=b.ambientColor.asArray();c.gravity=b.gravity.asArray();c.collisionsEnabled=
b.collisionsEnabled;b.fogMode&&0!==b.fogMode&&(c.fogMode=b.fogMode,c.fogColor=b.fogColor.asArray(),c.fogStart=b.fogStart,c.fogEnd=b.fogEnd,c.fogDensity=b.fogDensity);if(b.isPhysicsEnabled()){var d=b.getPhysicsEngine();d&&(c.physicsEnabled=!0,c.physicsGravity=d.gravity.asArray(),c.physicsEngine=d.getPhysicsPluginName())}b.metadata&&(c.metadata=b.metadata);c.morphTargetManagers=[];d=0;for(var e=b.meshes;d<e.length;d++){var f=e[d];(f=f.morphTargetManager)&&c.morphTargetManagers.push(f.serialize())}c.lights=
[];for(d=0;d<b.lights.length;d++)e=b.lights[d],e.doNotSerialize||c.lights.push(e.serialize());c.cameras=[];for(d=0;d<b.cameras.length;d++)e=b.cameras[d],e.doNotSerialize||c.cameras.push(e.serialize());b.activeCamera&&(c.activeCameraID=b.activeCamera.id);l.a.AppendSerializedAnimations(b,c);if(b.animationGroups&&0<b.animationGroups.length)for(c.animationGroups=[],d=0;d<b.animationGroups.length;d++)c.animationGroups.push(b.animationGroups[d].serialize());if(b.reflectionProbes&&0<b.reflectionProbes.length)for(c.reflectionProbes=
[],d=0;d<b.reflectionProbes.length;d++)c.reflectionProbes.push(b.reflectionProbes[d].serialize());c.materials=[];c.multiMaterials=[];for(d=0;d<b.materials.length;d++)e=b.materials[d],e.doNotSerialize||c.materials.push(e.serialize());c.multiMaterials=[];for(d=0;d<b.multiMaterials.length;d++)c.multiMaterials.push(b.multiMaterials[d].serialize());b.environmentTexture&&(c.environmentTexture=b.environmentTexture.name);c.environmentIntensity=b.environmentIntensity;c.skeletons=[];for(d=0;d<b.skeletons.length;d++)e=
b.skeletons[d],e.doNotSerialize||c.skeletons.push(e.serialize());c.transformNodes=[];for(d=0;d<b.transformNodes.length;d++)b.transformNodes[d].doNotSerialize||c.transformNodes.push(b.transformNodes[d].serialize());c.geometries={};c.geometries.boxes=[];c.geometries.spheres=[];c.geometries.cylinders=[];c.geometries.toruses=[];c.geometries.grounds=[];c.geometries.planes=[];c.geometries.torusKnots=[];c.geometries.vertexData=[];K=[];e=b.getGeometries();for(d=0;d<e.length;d++)f=e[d],f.isReady()&&D(f,c.geometries);
c.meshes=[];for(d=0;d<b.meshes.length;d++)f=b.meshes[d],f instanceof t.a&&(e=f,e.doNotSerialize||(1===e.delayLoadState||0===e.delayLoadState)&&c.meshes.push(A(e,c)));c.particleSystems=[];for(d=0;d<b.particleSystems.length;d++)c.particleSystems.push(b.particleSystems[d].serialize(!1));c.postProcesses=[];for(d=0;d<b.postProcesses.length;d++)c.postProcesses.push(b.postProcesses[d].serialize());b.actionManager&&(c.actions=b.actionManager.serialize("scene"));d=0;for(b=b._serializableComponents;d<b.length;d++)b[d].serialize(c);
return c};a.SerializeMesh=function(b,c,d){void 0===c&&(c=!1);void 0===d&&(d=!1);var e={};a.ClearCache();b=b instanceof Array?b:[b];if(c||d)for(var f=0;f<b.length;++f)d&&b[f].getDescendants().forEach(function(a){a instanceof t.a&&0>b.indexOf(a)&&!a.doNotSerialize&&b.push(a)}),c&&b[f].parent&&0>b.indexOf(b[f].parent)&&!b[f].parent.doNotSerialize&&b.push(b[f].parent);b.forEach(function(a){F(a,e)});return e};return a}();d("Bfey");d("ywfU");d("cSa5");d("AOHV");d("Pro5");var z=d("YKqZ");d("+Ky4");d("/AUW");
d("yiEH");d("WHS4");d("Dc3z");d("l/Gj");d("J2vy");var G=d("aCSs"),N=d("srWW"),T=d("V9V8");k=function(){function a(){}a.CreateScreenshot=function(c,d,e,f,g){void 0===g&&(g="image/png");d=a._getScreenshotSize(c,d,e);var h=d.height,x=d.width;if(h&&x){z.b._ScreenshotCanvas||(z.b._ScreenshotCanvas=document.createElement("canvas"));z.b._ScreenshotCanvas.width=x;z.b._ScreenshotCanvas.height=h;d=z.b._ScreenshotCanvas.getContext("2d");var E=c.getRenderWidth()/c.getRenderHeight();e=x;var w=e/E;w>h&&(w=h,e=
w*E);x=Math.max(0,x-e)/2;h=Math.max(0,h-w)/2;c=c.getRenderingCanvas();d&&c&&d.drawImage(c,x,h,e,w);z.b.EncodeScreenshotCanvasData(f,g)}else b.a.Error("Invalid 'size' parameter !")};a.CreateScreenshotAsync=function(b,c,d,e){void 0===e&&(e="image/png");return new Promise(function(f,g){a.CreateScreenshot(b,c,d,function(a){"undefined"!==typeof a?f(a):g(Error("Data is undefined"))},e)})};a.CreateScreenshotUsingRenderTarget=function(c,d,e,f,g,h,k,l,M,n){void 0===g&&(g="image/png");void 0===h&&(h=1);void 0===
k&&(k=!1);void 0===M&&(M=!1);void 0===n&&(n=!1);e=a._getScreenshotSize(c,d,e);var x=e.height,E=e.width;e={width:E,height:x};if(x&&E){var w=c.getRenderingCanvas();if(w){var da=w.width,ea=w.height;c.setSize(E,x);var m=d.getScene(),p=null,fa=m.activeCameras;if(m.activeCamera!==d||m.activeCameras&&m.activeCameras.length)p=m.activeCamera,m.activeCamera=d;m.render();var q=new N.a("screenShot",e,m,!1,!1,0,!1,G.a.NEAREST_SAMPLINGMODE,void 0,n);q.renderList=null;q.samples=h;q.renderSprites=M;q.onAfterRenderObservable.add(function(){z.b.DumpFramebuffer(E,
x,c,f,g,l)});var O=function(){m.incrementRenderId();m.resetCachedMaterial();q.render(!0);q.dispose();p&&(m.activeCamera=p);m.activeCameras=fa;c.setSize(da,ea);d.getProjectionMatrix(!0)};k?(h=new T.a("antialiasing",1,m.activeCamera),q.addPostProcess(h),h.getEffect().isReady()?O():h.getEffect().onCompiled=function(){O()}):O()}else b.a.Error("No rendering canvas found !")}else b.a.Error("Invalid 'size' parameter !")};a.CreateScreenshotUsingRenderTargetAsync=function(b,c,d,e,f,g,h,k){void 0===e&&(e="image/png");
void 0===f&&(f=1);void 0===g&&(g=!1);void 0===k&&(k=!1);return new Promise(function(x,E){a.CreateScreenshotUsingRenderTarget(b,c,d,function(a){"undefined"!==typeof a?x(a):E(Error("Data is undefined"))},e,f,g,h,k)})};a._getScreenshotSize=function(a,b,c){var d=0,e=0;"object"===typeof c?(e=c.precision?Math.abs(c.precision):1,c.width&&c.height?(d=c.height*e,e*=c.width):c.width&&!c.height?(e*=c.width,d=Math.round(e/a.getAspectRatio(b))):c.height&&!c.width?(d=c.height*e,e=Math.round(d*a.getAspectRatio(b))):
(e=Math.round(a.getRenderWidth()*e),d=Math.round(e/a.getAspectRatio(b)))):isNaN(c)||(e=d=c);e&&(e=Math.floor(e));d&&(d=Math.floor(d));return{height:d|0,width:e|0}};return a}();z.b.CreateScreenshot=k.CreateScreenshot;z.b.CreateScreenshotAsync=k.CreateScreenshotAsync;z.b.CreateScreenshotUsingRenderTarget=k.CreateScreenshotUsingRenderTarget;z.b.CreateScreenshotUsingRenderTargetAsync=k.CreateScreenshotUsingRenderTargetAsync;d("Ksm9");var Q;(function(a){a[a.Checkbox=0]="Checkbox";a[a.Slider=1]="Slider";
a[a.Vector3=2]="Vector3";a[a.Quaternion=3]="Quaternion";a[a.Color3=4]="Color3";a[a.String=5]="String"})(Q||(Q={}));d("V0+9");d("qAJR");d("dLGY");d("waC4");d("VW4h");d("SNd0");d("O3Sr");d("TFEU");d("X2Ve");d("JXbM");d("Ef72");d("qAwy");d("8Ct+");var U=d("llUH"),V=d("CAkI"),W=d("btC8"),X=d("cdI9"),Y=d("qVgn"),Z=d("OGO2"),aa=d("1t4k"),ba=d("itUE"),ca=d("OJ6t");(function(){function a(){this._trackedScene=null}a.prototype.track=function(a){this._trackedScene=a;this._savedJSON=H.Serialize(a)};a.prototype.getDelta=
function(){if(!this._trackedScene)return null;var a=H.Serialize(this._trackedScene),b={},c;for(c in a)this._compareCollections(c,this._savedJSON[c],a[c],b);return b};a.prototype._compareArray=function(a,b,c,d){if(0===b.length&&0===c.length)return!0;if(b.length&&!isNaN(b[0])||c.length&&!isNaN(c[0])){if(b.length!==c.length)return!1;if(0===b.length)return!0;for(var e=0;e<b.length;e++)if(b[e]!==c[e])return d[a]=c,!1;return!0}var f=[],g=function(){var g=b[e],x=g.uniqueId;f.push(x);var k=c.filter(function(a){return a.uniqueId===
x});if(k.length){k=k[0];var w={};h._compareObjects(g,k,w)||(d[a]||(d[a]=[]),w.__state={id:k.id||k.name},d[a].push(w))}else w={__state:{deleteId:g.id||g.name}},d[a].push(w)},h=this;for(e=0;e<b.length;e++)g();for(e=0;e<c.length;e++)g=c[e],-1===f.indexOf(g.uniqueId)&&(d[a]||(d[a]=[]),d[a].push(g));return!0};a.prototype._compareObjects=function(a,b,c){var d=!1,e;for(e in a)if(a.hasOwnProperty(e)){var f=a[e],g=b[e],h=!1;Array.isArray(f)?h=JSON.stringify(f)!==JSON.stringify(g):isNaN(f)&&"[object String]"!=
Object.prototype.toString.call(f)||(h=f!==g);h&&(d=!0,c[e]=g)}return!d};a.prototype._compareCollections=function(a,b,c,d){if(b!==c&&b&&c)if(Array.isArray(b)&&Array.isArray(c))this._compareArray(a,b,c,d);else if("object"===typeof b&&"object"===typeof c){var e={};this._compareObjects(b,c,e)||(d[a]=e)}};a.GetShadowGeneratorById=function(a,b){var c=0;for(a=a.lights.map(function(a){return a.getShadowGenerator()});c<a.length;c++){var d=a[c];if(d&&d.id===b)return d}return null};a.ApplyDelta=function(a,b){var c=
this;"string"===typeof a&&(a=JSON.parse(a));for(var d in a){var e=a[d],f=b[d];if(Array.isArray(f)||"shadowGenerators"===d)switch(d){case "cameras":this._ApplyDeltaForEntity(e,b,b.getCameraByID.bind(b),function(a){return V.a.Parse(a,b)});break;case "lights":this._ApplyDeltaForEntity(e,b,b.getLightByID.bind(b),function(a){return U.a.Parse(a,b)});break;case "shadowGenerators":this._ApplyDeltaForEntity(e,b,function(a){return c.GetShadowGeneratorById(b,a)},function(a){return ba.a.Parse(a,b)});break;case "meshes":this._ApplyDeltaForEntity(e,
b,b.getMeshByID.bind(b),function(a){return t.a.Parse(a,b,"")});break;case "skeletons":this._ApplyDeltaForEntity(e,b,b.getSkeletonById.bind(b),function(a){return W.a.Parse(a,b)});break;case "materials":this._ApplyDeltaForEntity(e,b,b.getMaterialByID.bind(b),function(a){return X.a.Parse(a,b,"")});break;case "multiMaterials":this._ApplyDeltaForEntity(e,b,b.getMaterialByID.bind(b),function(a){return J.a.Parse(a,b,"")});break;case "transformNodes":this._ApplyDeltaForEntity(e,b,b.getTransformNodeByID.bind(b),
function(a){return Y.a.Parse(a,b,"")});break;case "particleSystems":this._ApplyDeltaForEntity(e,b,b.getParticleSystemByID.bind(b),function(a){return Z.a.Parse(a,b,"")});break;case "morphTargetManagers":this._ApplyDeltaForEntity(e,b,b.getMorphTargetById.bind(b),function(a){return aa.a.Parse(a,b)});break;case "postProcesses":this._ApplyDeltaForEntity(e,b,b.getPostProcessByName.bind(b),function(a){return ca.a.Parse(a,b,"")})}else isNaN(f)?f.fromArray&&f.fromArray(e):b[d]=e}};a._ApplyPropertiesToEntity=
function(a,b){for(var c in a){var d=a[c],e=b[c];void 0!==e&&(!isNaN(e)||Array.isArray(e)?b[c]=d:e.fromArray&&e.fromArray(d))}};a._ApplyDeltaForEntity=function(a,b,c,d){for(b=0;b<a.length;b++){var e=a[b];if(e.__state&&void 0!==e.__state.id){var f=c(e.__state.id);f&&this._ApplyPropertiesToEntity(e,f)}else e.__state&&void 0!==e.__state.deleteId?(e=c(e.__state.deleteId),null===e||void 0===e?void 0:e.dispose()):d(e)}};return a})();d("GFqQ");var L;(function(a){var b=function(){function a(a,b,c,d){void 0===
b&&(b=null);void 0===c&&(c=null);void 0===d&&(d=null);b=null!==b&&void 0!==b?b:function(){return 1};c=null!==c&&void 0!==c?c:function(){return 1};d=null!==d&&void 0!==d?d:function(a,b){return a===b?0:1};this._characterToIdx=new Map;this._insertionCosts=Array(a.length);this._deletionCosts=Array(a.length);this._substitutionCosts=Array(a.length);for(var e,f=0;f<a.length;++f){e=a[f];this._characterToIdx.set(e,f);this._insertionCosts[f]=b(e);this._deletionCosts[f]=c(e);this._substitutionCosts[f]=Array(a.length);
for(var g=f;g<a.length;++g)this._substitutionCosts[f][g]=d(e,a[g])}}a.prototype.serialize=function(){var a={},b=Array(this._characterToIdx.size);this._characterToIdx.forEach(function(a,c){b[a]=c});a.characters=b;a.insertionCosts=this._insertionCosts;a.deletionCosts=this._deletionCosts;a.substitutionCosts=this._substitutionCosts;return JSON.stringify(a)};a.Deserialize=function(b){b=JSON.parse(b);var c=new a(b.characters);c._insertionCosts=b.insertionCosts;c._deletionCosts=b.deletionCosts;c._substitutionCosts=
b.substitutionCosts;return c};a.prototype.getCharacterIdx=function(a){return this._characterToIdx.get(a)};a.prototype.getInsertionCost=function(a){return this._insertionCosts[a]};a.prototype.getDeletionCost=function(a){return this._deletionCosts[a]};a.prototype.getSubstitutionCost=function(a,b){return this._substitutionCosts[Math.min(a,b)][Math.max(a,b)]};return a}();a.Alphabet=b;b=function(){function a(b,c){var d=this;if(b.length>a.MAX_SEQUENCE_LENGTH)throw Error("Sequences longer than "+a.MAX_SEQUENCE_LENGTH+
" not supported.");this._alphabet=c;this._characters=b.map(function(a){return d._alphabet.getCharacterIdx(a)})}a.prototype.serialize=function(){return JSON.stringify(this._characters)};a.Deserialize=function(b,c){c=new a([],c);c._characters=JSON.parse(b);return c};a.prototype.distance=function(b){return a._distance(this,b)};a._distance=function(b,c){var d=b._alphabet;if(d!==c._alphabet)throw Error("Cannot Levenshtein compare Sequences built from different alphabets.");b=b._characters;c=c._characters;
for(var e=b.length,f=c.length,g=a._costMatrix,h=g[0][0]=0;h<e;++h)g[h+1][0]=g[h][0]+d.getInsertionCost(b[h]);for(h=0;h<f;++h)g[0][h+1]=g[0][h]+d.getInsertionCost(c[h]);for(h=0;h<e;++h)for(var k=0;k<f;++k)a._insertionCost=g[h+1][k]+d.getInsertionCost(c[k]),a._deletionCost=g[h][k+1]+d.getDeletionCost(b[h]),a._substitutionCost=g[h][k]+d.getSubstitutionCost(b[h],c[k]),g[h+1][k+1]=Math.min(a._insertionCost,a._deletionCost,a._substitutionCost);return g[e][f]};a.MAX_SEQUENCE_LENGTH=256;a._costMatrix=Object(g.f)(Array(a.MAX_SEQUENCE_LENGTH+
1)).map(function(b){return Array(a.MAX_SEQUENCE_LENGTH+1)});return a}();a.Sequence=b})(L||(L={}));(function(){function a(a){void 0===a&&(a=.01);this._points=[];this._segmentLength=a}a.prototype.serialize=function(){return JSON.stringify(this)};a.Deserialize=function(b){b=JSON.parse(b);var c=new a(b._segmentLength);c._points=b._points.map(function(a){return new e.e(a._x,a._y,a._z)});return c};a.prototype.getLength=function(){return this._points.length*this._segmentLength};a.prototype.add=function(a){var b=
this,c=this._points.length;if(0===c)this._points.push(a.clone());else for(var d=function(){return b._segmentLength/e.e.Distance(b._points[c-1],a)},f=d();1>=f;f=d()){var g=this._points[c-1].scale(1-f);a.scaleAndAddToRef(f,g);this._points.push(g);++c}};a.prototype.resampleAtTargetResolution=function(b){var c=new a(this.getLength()/b);this._points.forEach(function(a){c.add(a)});return c};a.prototype.tokenize=function(b){for(var c=[],d=new e.e,f=2;f<this._points.length;++f)a._transformSegmentDirToRef(this._points[f-
2],this._points[f-1],this._points[f],d)&&c.push(a._tokenizeSegment(d,b));return c};a._transformSegmentDirToRef=function(b,c,d,f){c.subtractToRef(b,a._forwardDir);a._forwardDir.normalize();c.scaleToRef(-1,a._inverseFromVec);a._inverseFromVec.normalize();if(.98<Math.abs(e.e.Dot(a._forwardDir,a._inverseFromVec)))return!1;e.e.CrossToRef(a._forwardDir,a._inverseFromVec,a._upDir);a._upDir.normalize();e.a.LookAtLHToRef(b,c,a._upDir,a._lookMatrix);d.subtractToRef(c,a._fromToVec);a._fromToVec.normalize();
e.e.TransformNormalToRef(a._fromToVec,a._lookMatrix,f);return!0};a._tokenizeSegment=function(b,c){a._bestMatch=0;a._score=e.e.Dot(b,c[0]);a._bestScore=a._score;for(var d=1;d<c.length;++d)a._score=e.e.Dot(b,c[d]),a._score>a._bestScore&&(a._bestMatch=d,a._bestScore=a._score);return a._bestMatch};a._forwardDir=new e.e;a._inverseFromVec=new e.e;a._upDir=new e.e;a._fromToVec=new e.e;a._lookMatrix=new e.a;return a})();var R=function(){function a(a){this.chars=Array(a)}a.Generate=function(b,c,d,f,g){void 0===
b&&(b=64);void 0===c&&(c=256);void 0===d&&(d=.1);void 0===f&&(f=.001);void 0===g&&(g=[]);for(var h=new a(b),k=0;k<b;++k)h.chars[k]=new e.e(Math.random()-.5,Math.random()-.5,Math.random()-.5),h.chars[k].normalize();for(k=0;k<g.length;++k)h.chars[k].copyFrom(g[k]);var l,m=new e.e,n=new e.e;b=function(a,b,c){return(1-c)*a+c*b};for(var w=0;w<c;++w){var p=b(d,f,w/(c-1));var x=function(a){m.copyFromFloats(0,0,0);h.chars.forEach(function(b){h.chars[a].subtractToRef(b,n);l=n.lengthSquared();1E-6<l&&n.scaleAndAddToRef(1/
(n.lengthSquared()*l),m)});m.scaleInPlace(p);h.chars[a].addInPlace(m);h.chars[a].normalize()};for(k=g.length;k<h.chars.length;++k)x(k)}return h};a.prototype.serialize=function(){return JSON.stringify(this.chars)};a.Deserialize=function(b){b=JSON.parse(b);for(var c=new a(b.length),d=0;d<b.length;++d)c.chars[d]=new e.e(b[d]._x,b[d]._y,b[d]._z);return c};return a}(),P=function(){function a(){this._sequences=[]}a.prototype.serialize=function(){return JSON.stringify(this._sequences.map(function(a){return a.serialize()}))};
a.Deserialize=function(b,c){var d=new a;d._sequences=JSON.parse(b).map(function(a){return L.Sequence.Deserialize(a,c)});return d};a.CreateFromTrajectory=function(b,c,d){return a.CreateFromTokenizationPyramid(a._getTokenizationPyramid(b,c),d)};a.CreateFromTokenizationPyramid=function(b,c){var d=new a;d._sequences=b.map(function(a){return new L.Sequence(a,c)});return d};a._getTokenizationPyramid=function(b,c,d){void 0===d&&(d=a.FINEST_DESCRIPTOR_RESOLUTION);for(var e=[];4<d;d=Math.floor(d/2))e.push(b.resampleAtTargetResolution(d).tokenize(c.chars));
return e};a.prototype.distance=function(a){for(var b=0,c,d=0;d<this._sequences.length;++d)c=Math.pow(2,d),b+=c*this._sequences[d].distance(a._sequences[d]);return b};a.FINEST_DESCRIPTOR_RESOLUTION=32;return a}(),S=function(){function a(a){void 0===a&&(a=[]);this._descriptors=a;this._centroidIdx=-1;this._averageDistance=0;this._refreshDescription()}a.prototype.serialize=function(){var a={};a.descriptors=this._descriptors.map(function(a){return a.serialize()});a.centroidIdx=this._centroidIdx;a.averageDistance=
this._averageDistance;return JSON.stringify(a)};a.Deserialize=function(b,c){b=JSON.parse(b);var d=new a;d._descriptors=b.descriptors.map(function(a){return P.Deserialize(a,c)});d._centroidIdx=b.centroidIdx;d._averageDistance=b.averageDistance;return d};a.prototype.add=function(a){this._descriptors.push(a);this._refreshDescription()};a.prototype.getMatchCost=function(a){return a.distance(this._descriptors[this._centroidIdx])/this._averageDistance};a.prototype.getMatchMinimumDistance=function(a){return Math.min.apply(Math,
this._descriptors.map(function(b){return b.distance(a)}))};a.prototype._refreshDescription=function(){var b=this;this._centroidIdx=-1;for(var c,d=this._descriptors.map(function(a){c=0;b._descriptors.forEach(function(b){c+=a.distance(b)});return c}),e=0;e<d.length;++e)if(0>this._centroidIdx||d[e]<d[this._centroidIdx])this._centroidIdx=e;this._averageDistance=0;this._descriptors.forEach(function(a){b._averageDistance+=a.distance(b._descriptors[b._centroidIdx])});0<this._descriptors.length&&(this._averageDistance=
Math.max(this._averageDistance/this._descriptors.length,a.MIN_AVERAGE_DISTANCE))};a.MIN_AVERAGE_DISTANCE=1;return a}();(function(){function a(){this._maximumAllowableMatchCost=4;this._nameToDescribedTrajectory=new Map}a.prototype.serialize=function(){var a={};a.maximumAllowableMatchCost=this._maximumAllowableMatchCost;a.vector3Alphabet=this._vector3Alphabet.serialize();a.levenshteinAlphabet=this._levenshteinAlphabet.serialize();a.nameToDescribedTrajectory=[];this._nameToDescribedTrajectory.forEach(function(b,
c){a.nameToDescribedTrajectory.push(c);a.nameToDescribedTrajectory.push(b.serialize())});return JSON.stringify(a)};a.Deserialize=function(b){b=JSON.parse(b);var c=new a;c._maximumAllowableMatchCost=b.maximumAllowableMatchCost;c._vector3Alphabet=R.Deserialize(b.vector3Alphabet);c._levenshteinAlphabet=L.Alphabet.Deserialize(b.levenshteinAlphabet);for(var d=0;d<b.nameToDescribedTrajectory.length;d+=2)c._nameToDescribedTrajectory.set(b.nameToDescribedTrajectory[d],S.Deserialize(b.nameToDescribedTrajectory[d+
1],c._levenshteinAlphabet));return c};a.Generate=function(){for(var b=R.Generate(64,256,.1,.001,[e.e.Forward()]),c=Array(b.chars.length),d=0;d<c.length;++d)c[d]=d;c=new L.Alphabet(c,function(a){return 0===a?0:1},function(a){return 0===a?0:1},function(a,c){return Math.min(1-e.e.Dot(b.chars[a],b.chars[c]),1)});d=new a;d._vector3Alphabet=b;d._levenshteinAlphabet=c;return d};a.prototype.addTrajectoryToClassification=function(a,b){this._nameToDescribedTrajectory.has(b)||this._nameToDescribedTrajectory.set(b,
new S);this._nameToDescribedTrajectory.get(b).add(P.CreateFromTrajectory(a,this._vector3Alphabet,this._levenshteinAlphabet))};a.prototype.deleteClassification=function(a){return this._nameToDescribedTrajectory.delete(a)};a.prototype.classifyTrajectory=function(a){var b=this,c=P.CreateFromTrajectory(a,this._vector3Alphabet,this._levenshteinAlphabet),d=[];this._nameToDescribedTrajectory.forEach(function(a,e){a.getMatchCost(c)<b._maximumAllowableMatchCost&&d.push(e)});if(0===d.length)return null;a=0;
for(var e=this._nameToDescribedTrajectory.get(d[a]).getMatchMinimumDistance(c),f,g=0;g<d.length;++g)f=this._nameToDescribedTrajectory.get(d[g]).getMatchMinimumDistance(c),f<e&&(e=f,a=g);return d[a]};return a})();d("2Z9k");d("/ICB")},uyO6:function(k,h,d){d.d(h,"a",function(){return l});var l=function(){function d(){}d._AddLogEntry=function(c){d._LogCache=c+d._LogCache;d.OnNewCacheEntry&&d.OnNewCacheEntry(c)};d._FormatMessage=function(c){var b=function(a){return 10>a?"0"+a:""+a},a=new Date;return"["+
b(a.getHours())+":"+b(a.getMinutes())+":"+b(a.getSeconds())+"]: "+c};d._LogDisabled=function(c){};d._LogEnabled=function(c){c=d._FormatMessage(c);console.log("BJS - "+c);d._AddLogEntry("<div style='color:white'>"+c+"</div><br>")};d._WarnDisabled=function(c){};d._WarnEnabled=function(c){c=d._FormatMessage(c);console.warn("BJS - "+c);d._AddLogEntry("<div style='color:orange'>"+c+"</div><br>")};d._ErrorDisabled=function(c){};d._ErrorEnabled=function(c){d.errorsCount++;c=d._FormatMessage(c);console.error("BJS - "+
c);d._AddLogEntry("<div style='color:red'>"+c+"</div><br>")};Object.defineProperty(d,"LogCache",{get:function(){return d._LogCache},enumerable:!1,configurable:!0});d.ClearLogCache=function(){d._LogCache="";d.errorsCount=0};Object.defineProperty(d,"LogLevels",{set:function(c){d.Log=(c&d.MessageLogLevel)===d.MessageLogLevel?d._LogEnabled:d._LogDisabled;d.Warn=(c&d.WarningLogLevel)===d.WarningLogLevel?d._WarnEnabled:d._WarnDisabled;d.Error=(c&d.ErrorLogLevel)===d.ErrorLogLevel?d._ErrorEnabled:d._ErrorDisabled},
enumerable:!1,configurable:!0});d.NoneLogLevel=0;d.MessageLogLevel=1;d.WarningLogLevel=2;d.ErrorLogLevel=4;d.AllLogLevel=7;d._LogCache="";d.errorsCount=0;d.Log=d._LogEnabled;d.Warn=d._WarnEnabled;d.Error=d._ErrorEnabled;return d}()},vYHP:function(k,h,d){d.d(h,"a",function(){return e});var l=d("h87I"),e=function(){function c(){}c.SetImmediate=function(b){l.a.IsWindowObjectExist()&&window.setImmediate?window.setImmediate(b):setTimeout(b,1)};return c}()},waC4:function(k,h,d){d.d(h,"a",function(){return e});
var l=d("J2vy"),e=function(){function c(){this._lastSecValueCount=this._lastSecTime=this._lastSecAccumulated=this._totalAccumulated=this._totalValueCount=this._current=this._lastSecAverage=this._average=this._max=this._min=this._startMonitoringTime=0}Object.defineProperty(c.prototype,"min",{get:function(){return this._min},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"max",{get:function(){return this._max},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"average",
{get:function(){return this._average},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"lastSecAverage",{get:function(){return this._lastSecAverage},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"current",{get:function(){return this._current},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"total",{get:function(){return this._totalAccumulated},enumerable:!1,configurable:!0});Object.defineProperty(c.prototype,"count",{get:function(){return this._totalValueCount},
enumerable:!1,configurable:!0});c.prototype.fetchNewFrame=function(){this._totalValueCount++;this._current=0;this._lastSecValueCount++};c.prototype.addCount=function(b,a){c.Enabled&&(this._current+=b,a&&this._fetchResult())};c.prototype.beginMonitoring=function(){c.Enabled&&(this._startMonitoringTime=l.a.Now)};c.prototype.endMonitoring=function(b){void 0===b&&(b=!0);c.Enabled&&(b&&this.fetchNewFrame(),this._current=l.a.Now-this._startMonitoringTime,b&&this._fetchResult())};c.prototype._fetchResult=
function(){this._totalAccumulated+=this._current;this._lastSecAccumulated+=this._current;this._min=Math.min(this._min,this._current);this._max=Math.max(this._max,this._current);this._average=this._totalAccumulated/this._totalValueCount;var b=l.a.Now;1E3<b-this._lastSecTime&&(this._lastSecAverage=this._lastSecAccumulated/this._lastSecValueCount,this._lastSecTime=b,this._lastSecValueCount=this._lastSecAccumulated=0)};c.Enabled=!0;return c}()},xChT:function(k,h,d){d.d(h,"a",function(){return e});var l=
d("uyO6"),e=function(){function c(b,a,d,e){this.data=b;this.isInvalid=!1;c.IsValid(b)?(b=Uint32Array.BYTES_PER_ELEMENT,d=new DataView(this.data.buffer,this.data.byteOffset+12,13*b),e=67305985===d.getUint32(0,!0),this.glType=d.getUint32(1*b,e),this.glTypeSize=d.getUint32(2*b,e),this.glFormat=d.getUint32(3*b,e),this.glInternalFormat=d.getUint32(4*b,e),this.glBaseInternalFormat=d.getUint32(5*b,e),this.pixelWidth=d.getUint32(6*b,e),this.pixelHeight=d.getUint32(7*b,e),this.pixelDepth=d.getUint32(8*b,e),
this.numberOfArrayElements=d.getUint32(9*b,e),this.numberOfFaces=d.getUint32(10*b,e),this.numberOfMipmapLevels=d.getUint32(11*b,e),this.bytesOfKeyValueData=d.getUint32(12*b,e),0!==this.glType?l.a.Error("only compressed formats currently supported"):(this.numberOfMipmapLevels=Math.max(1,this.numberOfMipmapLevels),0===this.pixelHeight||0!==this.pixelDepth?l.a.Error("only 2D textures currently supported"):0!==this.numberOfArrayElements?l.a.Error("texture arrays not currently supported"):this.numberOfFaces!==
a?l.a.Error("number of faces expected"+a+", but found "+this.numberOfFaces):this.loadType=c.COMPRESSED_2D)):(this.isInvalid=!0,l.a.Error("texture missing KTX identifier"))}c.prototype.uploadLevels=function(b,a){switch(this.loadType){case c.COMPRESSED_2D:this._upload2DCompressedLevels(b,a)}};c.prototype._upload2DCompressedLevels=function(b,a){var d=c.HEADER_LEN+this.bytesOfKeyValueData,e=this.pixelWidth,h=this.pixelHeight;a=a?this.numberOfMipmapLevels:1;for(var k=0;k<a;k++){var l=(new Int32Array(this.data.buffer,
this.data.byteOffset+d,1))[0];d+=4;for(var v=0;v<this.numberOfFaces;v++){var n=new Uint8Array(this.data.buffer,this.data.byteOffset+d,l);b.getEngine()._uploadCompressedDataToTextureDirectly(b,this.glInternalFormat,e,h,n,v,k);d+=l;d+=3-(l+3)%4}e=Math.max(1,.5*e);h=Math.max(1,.5*h)}};c.IsValid=function(b){return 12<=b.byteLength&&(b=new Uint8Array(b.buffer,b.byteOffset,12),171===b[0]&&75===b[1]&&84===b[2]&&88===b[3]&&32===b[4]&&49===b[5]&&49===b[6]&&187===b[7]&&13===b[8]&&10===b[9]&&26===b[10]&&10===
b[11])?!0:!1};c.HEADER_LEN=64;c.COMPRESSED_2D=0;c.COMPRESSED_3D=1;c.TEX_2D=2;c.TEX_3D=3;return c}()},ywfU:function(k,h,d){d.d(h,"a",function(){return l});var l=function(){function d(){this._count=0;this._data={}}d.prototype.copyFrom=function(c){var b=this;this.clear();c.forEach(function(a,c){return b.add(a,c)})};d.prototype.get=function(c){c=this._data[c];if(void 0!==c)return c};d.prototype.getOrAddWithFactory=function(c,b){var a=this.get(c);if(void 0!==a)return a;(a=b(c))&&this.add(c,a);return a};
d.prototype.getOrAdd=function(c,b){var a=this.get(c);if(void 0!==a)return a;this.add(c,b);return b};d.prototype.contains=function(c){return void 0!==this._data[c]};d.prototype.add=function(c,b){if(void 0!==this._data[c])return!1;this._data[c]=b;++this._count;return!0};d.prototype.set=function(c,b){if(void 0===this._data[c])return!1;this._data[c]=b;return!0};d.prototype.getAndRemove=function(c){var b=this.get(c);return void 0!==b?(delete this._data[c],--this._count,b):null};d.prototype.remove=function(c){return this.contains(c)?
(delete this._data[c],--this._count,!0):!1};d.prototype.clear=function(){this._data={};this._count=0};Object.defineProperty(d.prototype,"count",{get:function(){return this._count},enumerable:!1,configurable:!0});d.prototype.forEach=function(c){for(var b in this._data)c(b,this._data[b])};d.prototype.first=function(c){for(var b in this._data){var a=c(b,this._data[b]);if(a)return a}return null};return d}()}}]);
